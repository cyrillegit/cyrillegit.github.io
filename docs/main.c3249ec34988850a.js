"use strict";(self.webpackChunkangular_clean_architecture_serverless=self.webpackChunkangular_clean_architecture_serverless||[]).push([[179],{2011:(ft,Ie,U)=>{U.d(Ie,{Dh:()=>ge,GT:()=>ie,cc:()=>Ae,hO:()=>ze,on:()=>G,pX:()=>se,xv:()=>pe});var a=U(4650),te=U(127),L=U(5813);ft=U.hmd(ft);const ae=["ngOnDestroy"],se=(ke,xe,Be,De={})=>new Proxy(ke,{get:(Te,Re)=>Be.runOutsideAngular(()=>{var qe;if(ke[Re])return!(null===(qe=De?.spy)||void 0===qe)&&qe.get&&De.spy.get(Re,ke[Re]),ke[Re];if(ae.indexOf(Re)>-1)return()=>{};const Ue=xe.toPromise().then(H=>{const Ce=H&&H[Re];return"function"==typeof Ce?Ce.bind(H):Ce&&Ce.then?Ce.then(Ze=>Be.run(()=>Ze)):Be.run(()=>Ce)});return new Proxy(()=>{},{get:(H,Ce)=>Ue[Ce],apply:(H,Ce,Ze)=>Ue.then(Je=>{var pt;const Xe=Je&&Je(...Ze);return!(null===(pt=De?.spy)||void 0===pt)&&pt.apply&&De.spy.apply(Re,Ze,Xe),Xe})})})}),ie=(ke,xe)=>{xe.forEach(Be=>{Object.getOwnPropertyNames(Be.prototype||Be).forEach(De=>{Object.defineProperty(ke.prototype,De,Object.getOwnPropertyDescriptor(Be.prototype||Be,De))})})};class we{constructor(xe){return xe}}const ge=new a.OlP("angularfire2.app.options"),pe=new a.OlP("angularfire2.app.name");function G(ke,xe,Be){const Te="object"==typeof Be&&Be||{};Te.name=Te.name||"string"==typeof Be&&Be||"[DEFAULT]";const qe=te.Z.apps.filter(Ue=>Ue&&Ue.name===Te.name)[0]||xe.runOutsideAngular(()=>te.Z.initializeApp(ke,Te));try{JSON.stringify(ke)!==JSON.stringify(qe.options)&&q("error",`${qe.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new we(qe)}const q=(ke,...xe)=>{(0,a.X6Q)()&&typeof console<"u"&&console[ke](...xe)},X={provide:we,useFactory:G,deps:[ge,a.R0b,[new a.FiY,pe]]};let ze=(()=>{class ke{constructor(Be){te.Z.registerVersion("angularfire",L.q4.full,"core"),te.Z.registerVersion("angularfire",L.q4.full,"app-compat"),te.Z.registerVersion("angular",a.q4F.full,Be.toString())}static initializeApp(Be,De){return{ngModule:ke,providers:[{provide:ge,useValue:Be},{provide:pe,useValue:De}]}}}return ke.\u0275fac=function(Be){return new(Be||ke)(a.LFG(a.Lbi))},ke.\u0275mod=a.oAB({type:ke}),ke.\u0275inj=a.cJS({providers:[X]}),ke})();function Ae(ke,xe,Be,De,Te){const[,Re,qe]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===ke)||[];if(Re)return function Ke(ke,xe){try{return ke.toString()===xe.toString()}catch{return ke===xe}}(Te,qe)||(_e("error",`${xe} was already initialized on the ${Be} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:Te,was:qe})),Re;{const Ue=De();return globalThis.\u0275AngularfireInstanceCache.push([ke,Ue,Te]),Ue}}const at=!!ft.hot,_e=(ke,...xe)=>{(0,a.X6Q)()&&typeof console<"u"&&console[ke](...xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ft,Ie,U)=>{U.d(Ie,{q4:()=>Nu,iC:()=>Sl,fc:()=>fp,HU:()=>Yi,vb:()=>Ht,JM:()=>ii});var a=U(4650),te=U(5867),L=U(5861),ae=U(9681),se=U(2090),ie=U(4859),we=U(1877),ge=U(8766);const pe="@firebase/installations",G="0.5.12",q=1e4,X=`w:${G}`,ze="FIS_v2",Ae="https://firebaseinstallations.googleapis.com/v1",Ke=36e5,xe=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Be(S){return S instanceof se.ZR&&S.code.includes("request-failed")}function De({projectId:S}){return`${Ae}/projects/${S}/installations`}function Te(S){return{token:S.token,requestStatus:2,expiresIn:Je(S.expiresIn),creationTime:Date.now()}}function Re(S,D){return qe.apply(this,arguments)}function qe(){return(qe=(0,L.Z)(function*(S,D){const B=(yield D.json()).error;return xe.create("request-failed",{requestName:S,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function Ue({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function Ce(S){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,L.Z)(function*(S){const D=yield S();return D.status>=500&&D.status<600?S():D})).apply(this,arguments)}function Je(S){return Number(S.replace("s","000"))}function Cn(){return(Cn=(0,L.Z)(function*({appConfig:S,heartbeatServiceProvider:D},{fid:N}){const B=De(S),J=Ue(S),le=D.getImmediate({optional:!0});if(le){const It=yield le.getHeartbeatsHeader();It&&J.append("x-firebase-client",It)}const Qe={method:"POST",headers:J,body:JSON.stringify({fid:N,authVersion:ze,appId:S.appId,sdkVersion:X})},bt=yield Ce(()=>fetch(B,Qe));if(bt.ok){const It=yield bt.json();return{fid:It.fid||N,registrationStatus:2,refreshToken:It.refreshToken,authToken:Te(It.authToken)}}throw yield Re("Create Installation",bt)})).apply(this,arguments)}function yr(S){return new Promise(D=>{setTimeout(D,S)})}const Hi=/^[cdef][\w-]{21}$/,oe="";function he(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const N=function de(S){return function Yn(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return Hi.test(N)?N:oe}catch{return oe}}function re(S){return`${S.appName}!${S.appId}`}const je=new Map;function Ve(S,D){const N=re(S);Wt(N,D),function Ct(S,D){const N=function on(){return!Kt&&"BroadcastChannel"in self&&(Kt=new BroadcastChannel("[Firebase] FID Change"),Kt.onmessage=S=>{Wt(S.data.key,S.data.fid)}),Kt}();N&&N.postMessage({key:S,fid:D}),function en(){0===je.size&&Kt&&(Kt.close(),Kt=null)}()}(N,D)}function Wt(S,D){const N=je.get(S);if(N)for(const B of N)B(D)}let Kt=null;const sr="firebase-installations-database",vr=1,An="firebase-installations-store";let On=null;function di(){return On||(On=(0,ge.X3)(sr,vr,{upgrade:(S,D)=>{0===D&&S.createObjectStore(An)}})),On}function xn(S,D){return gt.apply(this,arguments)}function gt(){return(gt=(0,L.Z)(function*(S,D){const N=re(S),J=(yield di()).transaction(An,"readwrite"),le=J.objectStore(An),ye=yield le.get(N);return yield le.put(D,N),yield J.done,(!ye||ye.fid!==D.fid)&&Ve(S,D.fid),D})).apply(this,arguments)}function qi(S){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,L.Z)(function*(S){const D=re(S),B=(yield di()).transaction(An,"readwrite");yield B.objectStore(An).delete(D),yield B.done})).apply(this,arguments)}function kn(S,D){return $r.apply(this,arguments)}function $r(){return($r=(0,L.Z)(function*(S,D){const N=re(S),J=(yield di()).transaction(An,"readwrite"),le=J.objectStore(An),ye=yield le.get(N),Qe=D(ye);return void 0===Qe?yield le.delete(N):yield le.put(Qe,N),yield J.done,Qe&&(!ye||ye.fid!==Qe.fid)&&Ve(S,Qe.fid),Qe})).apply(this,arguments)}function Si(S){return pn.apply(this,arguments)}function pn(){return pn=(0,L.Z)(function*(S){let D;const N=yield kn(S.appConfig,B=>{const J=function yn(S){return Nr(S||{fid:he(),registrationStatus:0})}(B),le=function wt(S,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(xe.create("app-offline"))};const N={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},B=function At(S,D){return Gi.apply(this,arguments)}(S,N);return{installationEntry:N,registrationPromise:B}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:$n(S)}:{installationEntry:D}}(S,J);return D=le.registrationPromise,le.installationEntry});return N.fid===oe?{installationEntry:yield D}:{installationEntry:N,registrationPromise:D}}),pn.apply(this,arguments)}function Gi(){return Gi=(0,L.Z)(function*(S,D){try{const N=yield function Xe(S,D){return Cn.apply(this,arguments)}(S,D);return xn(S.appConfig,N)}catch(N){throw Be(N)&&409===N.customData.serverCode?yield qi(S.appConfig):yield xn(S.appConfig,{fid:D.fid,registrationStatus:0}),N}}),Gi.apply(this,arguments)}function $n(S){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,L.Z)(function*(S){let D=yield Ts(S.appConfig);for(;1===D.registrationStatus;)yield yr(100),D=yield Ts(S.appConfig);if(0===D.registrationStatus){const{installationEntry:N,registrationPromise:B}=yield Si(S);return B||N}return D})).apply(this,arguments)}function Ts(S){return kn(S,D=>{if(!D)throw xe.create("installation-not-found");return Nr(D)})}function Nr(S){return function ha(S){return 1===S.registrationStatus&&S.registrationTime+q<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function hi(){return(hi=(0,L.Z)(function*({appConfig:S,heartbeatServiceProvider:D},N){const B=function Jt(S,{fid:D}){return`${De(S)}/${D}/authTokens:generate`}(S,N),J=function H(S,{refreshToken:D}){const N=Ue(S);return N.append("Authorization",function pt(S){return`${ze} ${S}`}(D)),N}(S,N),le=D.getImmediate({optional:!0});if(le){const It=yield le.getHeartbeatsHeader();It&&J.append("x-firebase-client",It)}const Qe={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:X,appId:S.appId}})},bt=yield Ce(()=>fetch(B,Qe));if(bt.ok)return Te(yield bt.json());throw yield Re("Generate Auth Token",bt)})).apply(this,arguments)}function Q(S){return $.apply(this,arguments)}function $(){return $=(0,L.Z)(function*(S,D=!1){let N;const B=yield kn(S.appConfig,le=>{if(!mt(le))throw xe.create("not-registered");const ye=le.authToken;if(!D&&function vn(S){return 2===S.requestStatus&&!function cn(S){const D=Date.now();return D<S.creationTime||S.creationTime+S.expiresIn<D+Ke}(S)}(ye))return le;if(1===ye.requestStatus)return N=function j(S,D){return Z.apply(this,arguments)}(S,D),le;{if(!navigator.onLine)throw xe.create("app-offline");const Qe=function wn(S){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:D})}(le);return N=function Se(S,D){return We.apply(this,arguments)}(S,Qe),Qe}});return N?yield N:B.authToken}),$.apply(this,arguments)}function Z(){return(Z=(0,L.Z)(function*(S,D){let N=yield z(S.appConfig);for(;1===N.authToken.requestStatus;)yield yr(100),N=yield z(S.appConfig);const B=N.authToken;return 0===B.requestStatus?Q(S,D):B})).apply(this,arguments)}function z(S){return kn(S,D=>{if(!mt(D))throw xe.create("not-registered");return function Ot(S){return 1===S.requestStatus&&S.requestTime+q<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function We(){return We=(0,L.Z)(function*(S,D){try{const N=yield function un(S,D){return hi.apply(this,arguments)}(S,D),B=Object.assign(Object.assign({},D),{authToken:N});return yield xn(S.appConfig,B),N}catch(N){if(!Be(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const B=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield xn(S.appConfig,B)}else yield qi(S.appConfig);throw N}}),We.apply(this,arguments)}function mt(S){return void 0!==S&&2===S.registrationStatus}function wr(){return(wr=(0,L.Z)(function*(S){const D=S,{installationEntry:N,registrationPromise:B}=yield Si(D);return B?B.catch(console.error):Q(D).catch(console.error),N.fid})).apply(this,arguments)}function eo(){return eo=(0,L.Z)(function*(S,D=!1){const N=S;return yield function iu(S){return is.apply(this,arguments)}(N),(yield Q(N,D)).token}),eo.apply(this,arguments)}function is(){return(is=(0,L.Z)(function*(S){const{registrationPromise:D}=yield Si(S);D&&(yield D)})).apply(this,arguments)}function ga(S){return xe.create("missing-app-config-values",{valueName:S})}const Kd="installations",Ln=S=>{const D=S.getProvider("app").getImmediate(),N=function bc(S){if(!S||!S.options)throw ga("App Configuration");if(!S.name)throw ga("App Name");const D=["projectId","apiKey","appId"];for(const N of D)if(!S.options[N])throw ga(N);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(D);return{app:D,appConfig:N,heartbeatServiceProvider:(0,ae._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Ec=S=>{const D=S.getProvider("app").getImmediate(),N=(0,ae._getProvider)(D,Kd).getImmediate();return{getId:()=>function Hn(S){return wr.apply(this,arguments)}(N),getToken:J=>function Xt(S){return eo.apply(this,arguments)}(N,J)}};(function ln(){(0,ae._registerComponent)(new ie.wA(Kd,Ln,"PUBLIC")),(0,ae._registerComponent)(new ie.wA("installations-internal",Ec,"PRIVATE"))})(),(0,ae.registerVersion)(pe,G),(0,ae.registerVersion)(pe,G,"esm2017");const Qn="@firebase/remote-config",qr=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class xo{constructor(D,N,B,J){this.client=D,this.storage=N,this.storageCache=B,this.logger=J}isCachedDataFresh(D,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-N,J=B<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${J}.`),J}fetch(D){var N=this;return(0,L.Z)(function*(){const[B,J]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(J&&N.isCachedDataFresh(D.cacheMaxAgeMillis,B))return J;D.eTag=J&&J.eTag;const le=yield N.client.fetch(D),ye=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&ye.push(N.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(ye),le})()}}function zi(S=navigator){return S.languages&&S.languages[0]||S.language}class no{constructor(D,N,B,J,le,ye){this.firebaseInstallations=D,this.sdkVersion=N,this.namespace=B,this.projectId=J,this.apiKey=le,this.appId=ye}fetch(D){var N=this;return(0,L.Z)(function*(){var B,J,le;const[ye,Qe]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),It=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Pt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},_t={sdk_version:N.sdkVersion,app_instance_id:ye,app_instance_id_token:Qe,app_id:N.appId,language_code:zi()},Cr={method:"POST",headers:Pt,body:JSON.stringify(_t)},Lr=fetch(It,Cr),hs=new Promise((Fs,Sn)=>{D.signal.addEventListener(()=>{const Al=new Error("The operation was aborted.");Al.name="AbortError",Sn(Al)})});let Ua;try{yield Promise.race([Lr,hs]),Ua=yield Lr}catch(Fs){let Sn="fetch-client-network";throw"AbortError"===(null===(B=Fs)||void 0===B?void 0:B.name)&&(Sn="fetch-timeout"),qr.create(Sn,{originalErrorMessage:null===(J=Fs)||void 0===J?void 0:J.message})}let qo=Ua.status;const Kc=Ua.headers.get("ETag")||void 0;let lo,Tr;if(200===Ua.status){let Fs;try{Fs=yield Ua.json()}catch(Sn){throw qr.create("fetch-client-parse",{originalErrorMessage:null===(le=Sn)||void 0===le?void 0:le.message})}lo=Fs.entries,Tr=Fs.state}if("INSTANCE_STATE_UNSPECIFIED"===Tr?qo=500:"NO_CHANGE"===Tr?qo=304:("NO_TEMPLATE"===Tr||"EMPTY_CONFIG"===Tr)&&(lo={}),304!==qo&&200!==qo)throw qr.create("fetch-status",{httpStatus:qo});return{status:qo,eTag:Kc,config:lo}})()}}class os{constructor(D,N){this.client=D,this.storage=N}fetch(D){var N=this;return(0,L.Z)(function*(){const B=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(D,B)})()}attemptFetch(D,{throttleEndTimeMillis:N,backoffCount:B}){var J=this;return(0,L.Z)(function*(){yield function Ds(S,D){return new Promise((N,B)=>{const J=Math.max(D-Date.now(),0),le=setTimeout(N,J);S.addEventListener(()=>{clearTimeout(le),B(qr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,N);try{const le=yield J.client.fetch(D);return yield J.storage.deleteThrottleMetadata(),le}catch(le){if(!function mn(S){if(!(S instanceof se.ZR&&S.customData))return!1;const D=Number(S.customData.httpStatus);return 429===D||500===D||503===D||504===D}(le))throw le;const ye={throttleEndTimeMillis:Date.now()+(0,se.$s)(B),backoffCount:B+1};return yield J.storage.setThrottleMetadata(ye),J.attemptFetch(D,ye)}})()}}class ya{constructor(D,N,B,J,le){this.app=D,this._client=N,this._storageCache=B,this._storage=J,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ko(S,D){var N;const B=S.target.error||void 0;return qr.create(D,{originalErrorMessage:B&&(null===(N=B)||void 0===N?void 0:N.message)})}const zr="app_namespace_store";class xi{constructor(D,N,B,J=function fi(){return new Promise((S,D)=>{var N;try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=J=>{D(ko(J,"storage-open"))},B.onsuccess=J=>{S(J.target.result)},B.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(zr,{keyPath:"compositeKey"})}}catch(B){D(qr.create("storage-open",{originalErrorMessage:null===(N=B)||void 0===N?void 0:N.message}))}})}()){this.appId=D,this.appName=N,this.namespace=B,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var N=this;return(0,L.Z)(function*(){const B=yield N.openDbPromise;return new Promise((J,le)=>{var ye;const bt=B.transaction([zr],"readonly").objectStore(zr),It=N.createCompositeKey(D);try{const Pt=bt.get(It);Pt.onerror=_t=>{le(ko(_t,"storage-get"))},Pt.onsuccess=_t=>{const Cr=_t.target.result;J(Cr?Cr.value:void 0)}}catch(Pt){le(qr.create("storage-get",{originalErrorMessage:null===(ye=Pt)||void 0===ye?void 0:ye.message}))}})})()}set(D,N){var B=this;return(0,L.Z)(function*(){const J=yield B.openDbPromise;return new Promise((le,ye)=>{var Qe;const It=J.transaction([zr],"readwrite").objectStore(zr),Pt=B.createCompositeKey(D);try{const _t=It.put({compositeKey:Pt,value:N});_t.onerror=Cr=>{ye(ko(Cr,"storage-set"))},_t.onsuccess=()=>{le()}}catch(_t){ye(qr.create("storage-set",{originalErrorMessage:null===(Qe=_t)||void 0===Qe?void 0:Qe.message}))}})})()}delete(D){var N=this;return(0,L.Z)(function*(){const B=yield N.openDbPromise;return new Promise((J,le)=>{var ye;const bt=B.transaction([zr],"readwrite").objectStore(zr),It=N.createCompositeKey(D);try{const Pt=bt.delete(It);Pt.onerror=_t=>{le(ko(_t,"storage-delete"))},Pt.onsuccess=()=>{J()}}catch(Pt){le(qr.create("storage-delete",{originalErrorMessage:null===(ye=Pt)||void 0===ye?void 0:ye.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class rl{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,L.Z)(function*(){const N=D.storage.getLastFetchStatus(),B=D.storage.getLastSuccessfulFetchTimestampMillis(),J=D.storage.getActiveConfig(),le=yield N;le&&(D.lastFetchStatus=le);const ye=yield B;ye&&(D.lastSuccessfulFetchTimestampMillis=ye);const Qe=yield J;Qe&&(D.activeConfig=Qe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function il(){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,L.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Wi(){(0,ae._registerComponent)(new ie.wA("remote-config",function S(D,{instanceIdentifier:N}){const B=D.getProvider("app").getImmediate(),J=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw qr.create("registration-window");if(!(0,se.hl)())throw qr.create("indexed-db-unavailable");const{projectId:le,apiKey:ye,appId:Qe}=B.options;if(!le)throw qr.create("registration-project-id");if(!ye)throw qr.create("registration-api-key");if(!Qe)throw qr.create("registration-app-id");const bt=new xi(Qe,B.name,N=N||"firebase"),It=new rl(bt),Pt=new we.Yd(Qn);Pt.logLevel=we.in.ERROR;const _t=new no(J,ae.SDK_VERSION,N,le,ye,Qe),Cr=new os(_t,bt),Lr=new xo(Cr,bt,It,Pt),hs=new ya(B,Lr,It,bt,Pt);return function Rn(S){const D=(0,se.m9)(S);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(hs),hs},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Qn,"0.3.11"),(0,ae.registerVersion)(Qn,"0.3.11","esm2017")}();const Sc="/firebase-messaging-sw.js",As="/firebase-cloud-messaging-push-scope",va="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",sl="https://fcmregistrations.googleapis.com/v1",Dc="google.c.a.c_id",ep="google.c.a.c_l",tp="google.c.a.ts",mm="google.c.a.e";var Ro=(()=>{return(S=Ro||(Ro={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",Ro;var S})();function as(S){const D=new Uint8Array(S);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _m(S){const N=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(N),J=new Uint8Array(B.length);for(let le=0;le<B.length;++le)J[le]=B.charCodeAt(le);return J}const su="fcm_token_details_db",Ac=5,ni="fcm_token_object_Store";function Xd(){return Xd=(0,L.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(su))return null;let D=null;return(yield(0,ge.X3)(su,Ac,{upgrade:(B=(0,L.Z)(function*(J,le,ye,Qe){var bt;if(le<2||!J.objectStoreNames.contains(ni))return;const It=Qe.objectStore(ni),Pt=yield It.index("fcmSenderId").get(S);if(yield It.clear(),Pt)if(2===le){const _t=Pt;if(!_t.auth||!_t.p256dh||!_t.endpoint)return;D={token:_t.fcmToken,createTime:null!==(bt=_t.createTime)&&void 0!==bt?bt:Date.now(),subscriptionOptions:{auth:_t.auth,p256dh:_t.p256dh,endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:"string"==typeof _t.vapidKey?_t.vapidKey:as(_t.vapidKey)}}}else if(3===le){const _t=Pt;D={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:as(_t.auth),p256dh:as(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:as(_t.vapidKey)}}}else if(4===le){const _t=Pt;D={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:as(_t.auth),p256dh:as(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:as(_t.vapidKey)}}}}),function(le,ye,Qe,bt){return B.apply(this,arguments)})})).close(),yield(0,ge.Lj)(su),yield(0,ge.Lj)("fcm_vapid_details_db"),yield(0,ge.Lj)("undefined"),function No(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:D}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var B}),Xd.apply(this,arguments)}const ou="firebase-messaging-database",Mo=1,Po="firebase-messaging-store";let au=null;function ba(){return au||(au=(0,ge.X3)(ou,Mo,{upgrade:(S,D)=>{0===D&&S.createObjectStore(Po)}})),au}function lu(S){return Ea.apply(this,arguments)}function Ea(){return Ea=(0,L.Z)(function*(S){const D=Ta(S),B=yield(yield ba()).transaction(Po).objectStore(Po).get(D);if(B)return B;{const J=yield function xc(S){return Xd.apply(this,arguments)}(S.appConfig.senderId);if(J)return yield Oo(S,J),J}}),Ea.apply(this,arguments)}function Oo(S,D){return ol.apply(this,arguments)}function ol(){return(ol=(0,L.Z)(function*(S,D){const N=Ta(S),J=(yield ba()).transaction(Po,"readwrite");return yield J.objectStore(Po).put(D,N),yield J.done,D})).apply(this,arguments)}function Ca(){return(Ca=(0,L.Z)(function*(S){const D=Ta(S),B=(yield ba()).transaction(Po,"readwrite");yield B.objectStore(Po).delete(D),yield B.done})).apply(this,arguments)}function Ta({appConfig:S}){return S.appId}const Un=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function uu(S,D){return qn.apply(this,arguments)}function qn(){return(qn=(0,L.Z)(function*(S,D){var N;const B=yield Lo(S),J=al(D),le={method:"POST",headers:B,body:JSON.stringify(J)};let ye;try{ye=yield(yield fetch(Sa(S.appConfig),le)).json()}catch(Qe){throw Un.create("token-subscribe-failed",{errorInfo:null===(N=Qe)||void 0===N?void 0:N.toString()})}if(ye.error)throw Un.create("token-subscribe-failed",{errorInfo:ye.error.message});if(!ye.token)throw Un.create("token-subscribe-no-token");return ye.token})).apply(this,arguments)}function Fo(){return(Fo=(0,L.Z)(function*(S,D){var N;const B=yield Lo(S),J=al(D.subscriptionOptions),le={method:"PATCH",headers:B,body:JSON.stringify(J)};let ye;try{ye=yield(yield fetch(`${Sa(S.appConfig)}/${D.token}`,le)).json()}catch(Qe){throw Un.create("token-update-failed",{errorInfo:null===(N=Qe)||void 0===N?void 0:N.toString()})}if(ye.error)throw Un.create("token-update-failed",{errorInfo:ye.error.message});if(!ye.token)throw Un.create("token-update-no-token");return ye.token})).apply(this,arguments)}function Xn(S,D){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,L.Z)(function*(S,D){var N;const J={method:"DELETE",headers:yield Lo(S)};try{const ye=yield(yield fetch(`${Sa(S.appConfig)}/${D}`,J)).json();if(ye.error)throw Un.create("token-unsubscribe-failed",{errorInfo:ye.error.message})}catch(le){throw Un.create("token-unsubscribe-failed",{errorInfo:null===(N=le)||void 0===N?void 0:N.toString()})}})).apply(this,arguments)}function Sa({projectId:S}){return`${sl}/projects/${S}/registrations`}function Lo(S){return or.apply(this,arguments)}function or(){return(or=(0,L.Z)(function*({appConfig:S,installations:D}){const N=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function al({p256dh:S,auth:D,endpoint:N,vapidKey:B}){const J={web:{endpoint:N,auth:D,p256dh:S}};return B!==va&&(J.web.applicationPubKey=B),J}const Da=6048e5;function xs(){return xs=(0,L.Z)(function*(S){const D=yield function Nc(S,D){return Mc.apply(this,arguments)}(S.swRegistration,S.vapidKey),N={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:D.endpoint,auth:as(D.getKey("auth")),p256dh:as(D.getKey("p256dh"))},B=yield lu(S.firebaseDependencies);if(B){if(function fu(S,D){return D.vapidKey===S.vapidKey&&D.endpoint===S.endpoint&&D.auth===S.auth&&D.p256dh===S.p256dh}(B.subscriptionOptions,N))return Date.now()>=B.createTime+Da?function Mt(S,D){return du.apply(this,arguments)}(S,{token:B.token,createTime:Date.now(),subscriptionOptions:N}):B.token;try{yield Xn(S.firebaseDependencies,B.token)}catch(J){console.warn(J)}return eh(S.firebaseDependencies,N)}return eh(S.firebaseDependencies,N)}),xs.apply(this,arguments)}function ul(){return ul=(0,L.Z)(function*(S){const D=yield lu(S.firebaseDependencies);D&&(yield Xn(S.firebaseDependencies,D.token),yield function kc(S){return Ca.apply(this,arguments)}(S.firebaseDependencies));const N=yield S.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()}),ul.apply(this,arguments)}function du(){return du=(0,L.Z)(function*(S,D){try{const N=yield function Ia(S,D){return Fo.apply(this,arguments)}(S.firebaseDependencies,D),B=Object.assign(Object.assign({},D),{token:N,createTime:Date.now()});return yield Oo(S.firebaseDependencies,B),N}catch(N){throw yield function ll(S){return ul.apply(this,arguments)}(S),N}}),du.apply(this,arguments)}function eh(S,D){return hu.apply(this,arguments)}function hu(){return(hu=(0,L.Z)(function*(S,D){const B={token:yield uu(S,D),createTime:Date.now(),subscriptionOptions:D};return yield Oo(S,B),B.token})).apply(this,arguments)}function Mc(){return(Mc=(0,L.Z)(function*(S,D){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_m(D)})})).apply(this,arguments)}function np(S){const D={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function Pc(S,D){if(!D.notification)return;S.notification={};const N=D.notification.title;N&&(S.notification.title=N);const B=D.notification.body;B&&(S.notification.body=B);const J=D.notification.image;J&&(S.notification.image=J)}(D,S),function ve(S,D){D.data&&(S.data=D.data)}(D,S),function nn(S,D){var N,B,J,le,ye;if(!(D.fcmOptions||null!==(N=D.notification)&&void 0!==N&&N.click_action))return;S.fcmOptions={};const Qe=null!==(J=null===(B=D.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==J?J:null===(le=D.notification)||void 0===le?void 0:le.click_action;Qe&&(S.fcmOptions.link=Qe);const bt=null===(ye=D.fcmOptions)||void 0===ye?void 0:ye.analytics_label;bt&&(S.fcmOptions.analyticsLabel=bt)}(D,S),D}function th(S,D){const N=[];for(let B=0;B<S.length;B++)N.push(S.charAt(B)),B<D.length&&N.push(D.charAt(B));return N.join("")}function cl(S){return Un.create("missing-app-config-values",{valueName:S})}th("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),th("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class pu{constructor(D,N,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Pr(S){if(!S||!S.options)throw cl("App Configuration Object");if(!S.name)throw cl("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:N}=S;for(const B of D)if(!N[B])throw cl(B);return{appName:S.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:J,installations:N,analyticsProvider:B}}_delete(){return Promise.resolve()}}function mi(S){return gu.apply(this,arguments)}function gu(){return(gu=(0,L.Z)(function*(S){var D;try{S.swRegistration=yield navigator.serviceWorker.register(Sc,{scope:As}),S.swRegistration.update().catch(()=>{})}catch(N){throw Un.create("failed-service-worker-registration",{browserErrorMessage:null===(D=N)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function nh(){return(nh=(0,L.Z)(function*(S,D){if(!D&&!S.swRegistration&&(yield mi(S)),D||!S.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Un.create("invalid-sw-registration");S.swRegistration=D}})).apply(this,arguments)}function _u(){return(_u=(0,L.Z)(function*(S,D){D?S.vapidKey=D:S.vapidKey||(S.vapidKey=va)})).apply(this,arguments)}function _i(){return _i=(0,L.Z)(function*(S,D){if(!navigator)throw Un.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Un.create("permission-blocked");return yield function Fc(S,D){return _u.apply(this,arguments)}(S,D?.vapidKey),yield function mu(S,D){return nh.apply(this,arguments)}(S,D?.serviceWorkerRegistration),function cu(S){return xs.apply(this,arguments)}(S)}),_i.apply(this,arguments)}function Uo(){return(Uo=(0,L.Z)(function*(S,D,N){const B=function ls(S){switch(S){case Ro.NOTIFICATION_CLICKED:return"notification_open";case Ro.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:N[Dc],message_name:N[ep],message_time:N[tp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function dl(){return dl=(0,L.Z)(function*(S,D){const N=D.data;if(!N.isFirebaseMessaging)return;S.onMessageHandler&&N.messageType===Ro.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(np(N)):S.onMessageHandler.next(np(N)));const B=N.data;(function Oc(S){return"object"==typeof S&&!!S&&Dc in S})(B)&&"1"===B[mm]&&(yield function ro(S,D,N){return Uo.apply(this,arguments)}(S,N.messageType,B))}),dl.apply(this,arguments)}const ih="@firebase/messaging",Uc=S=>{const D=new pu(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function rh(S,D){return dl.apply(this,arguments)}(D,N)),D},ks=S=>{const D=S.getProvider("messaging").getImmediate();return{getToken:B=>function ar(S,D){return _i.apply(this,arguments)}(D,B)}};function Vc(){return oh.apply(this,arguments)}function oh(){return(oh=(0,L.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function sh(){(0,ae._registerComponent)(new ie.wA("messaging",Uc,"PUBLIC")),(0,ae._registerComponent)(new ie.wA("messaging-internal",ks,"PRIVATE")),(0,ae.registerVersion)(ih,"0.9.16"),(0,ae.registerVersion)(ih,"0.9.16","esm2017")}();const lh="analytics",ri="firebase_id",Aa="origin",In=6e4,xa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bc="https://www.googletagmanager.com/gtag/js",Or=new we.Yd("@firebase/analytics");function sp(S){return Promise.all(S.map(D=>D.catch(N=>N)))}function Vo(){return(Vo=(0,L.Z)(function*(S,D,N,B,J,le){const ye=B[J];try{if(ye)yield D[ye];else{const bt=(yield sp(N)).find(It=>It.measurementId===J);bt&&(yield D[bt.appId])}}catch(Qe){Or.error(Qe)}S("config",J,le)})).apply(this,arguments)}function io(){return(io=(0,L.Z)(function*(S,D,N,B,J){try{let le=[];if(J&&J.send_to){let ye=J.send_to;Array.isArray(ye)||(ye=[ye]);const Qe=yield sp(N);for(const bt of ye){const It=Qe.find(_t=>_t.measurementId===bt),Pt=It&&D[It.appId];if(!Pt){le=[];break}le.push(Pt)}}0===le.length&&(le=Object.values(D)),yield Promise.all(le),S("event",B,J||{})}catch(le){Or.error(le)}})).apply(this,arguments)}const ki=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),vu=30,ch=new class Bo{constructor(D={},N=1e3){this.throttleMetadata=D,this.intervalMillis=N}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,N){this.throttleMetadata[D]=N}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function op(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function gl(){return(gl=(0,L.Z)(function*(S){var D;const{appId:N,apiKey:B}=S,J={method:"GET",headers:op(B)},le=xa.replace("{app-id}",N),ye=yield fetch(le,J);if(200!==ye.status&&304!==ye.status){let Qe="";try{const bt=yield ye.json();null!==(D=bt.error)&&void 0!==D&&D.message&&(Qe=bt.error.message)}catch{}throw ki.create("config-fetch-failed",{httpStatus:ye.status,responseMessage:Qe})}return ye.json()})).apply(this,arguments)}function ml(){return(ml=(0,L.Z)(function*(S,D=ch,N){const{appId:B,apiKey:J,measurementId:le}=S.options;if(!B)throw ki.create("no-app-id");if(!J){if(le)return{measurementId:le,appId:B};throw ki.create("no-api-key")}const ye=D.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new _l;return setTimeout((0,L.Z)(function*(){Qe.abort()}),void 0!==N?N:In),Rs({appId:B,apiKey:J,measurementId:le},ye,Qe,D)})).apply(this,arguments)}function Rs(S,D,N){return Ns.apply(this,arguments)}function Ns(){return Ns=(0,L.Z)(function*(S,{throttleEndTimeMillis:D,backoffCount:N},B,J=ch){var le,ye;const{appId:Qe,measurementId:bt}=S;try{yield function Ra(S,D){return new Promise((N,B)=>{const J=Math.max(D-Date.now(),0),le=setTimeout(N,J);S.addEventListener(()=>{clearTimeout(le),B(ki.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(B,D)}catch(It){if(bt)return Or.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${null===(le=It)||void 0===le?void 0:le.message}]`),{appId:Qe,measurementId:bt};throw It}try{const It=yield function jo(S){return gl.apply(this,arguments)}(S);return J.deleteThrottleMetadata(Qe),It}catch(It){const Pt=It;if(!function $c(S){if(!(S instanceof se.ZR&&S.customData))return!1;const D=Number(S.customData.httpStatus);return 429===D||500===D||503===D||504===D}(Pt)){if(J.deleteThrottleMetadata(Qe),bt)return Or.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${Pt?.message}]`),{appId:Qe,measurementId:bt};throw It}const _t=503===Number(null===(ye=Pt?.customData)||void 0===ye?void 0:ye.httpStatus)?(0,se.$s)(N,J.intervalMillis,vu):(0,se.$s)(N,J.intervalMillis),Cr={throttleEndTimeMillis:Date.now()+_t,backoffCount:N+1};return J.setThrottleMetadata(Qe,Cr),Or.debug(`Calling attemptFetch again in ${_t} millis`),Rs(S,Cr,B,J)}}),Ns.apply(this,arguments)}class _l{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let wu,ao;function oo(){return(oo=(0,L.Z)(function*(S,D,N,B,J){if(J&&J.global)S("event",N,B);else{const le=yield D;S("event",N,Object.assign(Object.assign({},B),{send_to:le}))}})).apply(this,arguments)}function Hc(){return(Hc=(0,L.Z)(function*(){var S;if(!(0,se.hl)())return Or.warn(ki.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(D){return Or.warn(ki.create("indexeddb-unavailable",{errorInfo:null===(S=D)||void 0===S?void 0:S.toString()}).message),!1}return!0})).apply(this,arguments)}function Cl(){return Cl=(0,L.Z)(function*(S,D,N,B,J,le,ye){var Qe;const bt=function Nn(S){return ml.apply(this,arguments)}(S);bt.then(Lr=>{N[Lr.measurementId]=Lr.appId,S.options.measurementId&&Lr.measurementId!==S.options.measurementId&&Or.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${Lr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Lr=>Or.error(Lr)),D.push(bt);const It=function El(){return Hc.apply(this,arguments)}().then(Lr=>{if(Lr)return B.getId()}),[Pt,_t]=yield Promise.all([bt,It]);(function ka(){const S=window.document.getElementsByTagName("script");for(const D of Object.values(S))if(D.src&&D.src.includes(Bc))return D;return null})()||function vm(S,D){const N=document.createElement("script");N.src=`${Bc}?l=${S}&id=${D}`,N.async=!0,document.head.appendChild(N)}(le,Pt.measurementId),ao&&(J("consent","default",ao),function bl(S){ao=S}(void 0)),J("js",new Date);const Cr=null!==(Qe=ye?.config)&&void 0!==Qe?Qe:{};return Cr[Aa]="firebase",Cr.update=!0,null!=_t&&(Cr[ri]=_t),J("config",Pt.measurementId,Cr),wu&&(J("set",wu),function Cu(S){wu=S}(void 0)),Pt.measurementId}),Cl.apply(this,arguments)}class dh{constructor(D){this.app=D}_delete(){return delete us[this.app.options.appId],Promise.resolve()}}let us={},Tu=[];const Ho={};let Iu,Ms,cs="dataLayer",hh="gtag",Ki=!1;function Su(S,D,N){!function fh(){const S=[];if((0,se.ru)()&&S.push("This is a browser extension environment."),(0,se.zI)()||S.push("Cookies are not available."),S.length>0){const D=S.map((B,J)=>`(${J+1}) ${B}`).join(" "),N=ki.create("invalid-analytics-context",{errorInfo:D});Or.warn(N.message)}}();const B=S.options.appId;if(!B)throw ki.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw ki.create("no-api-key");Or.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=us[B])throw ki.create("already-exists",{id:B});if(!Ki){!function wm(S){let D=[];Array.isArray(window[S])?D=window[S]:window[S]=D}(cs);const{wrappedGtag:le,gtagCore:ye}=function pl(S,D,N,B,J){let le=function(...ye){window[B].push(arguments)};return window[J]&&"function"==typeof window[J]&&(le=window[J]),window[J]=function fl(S,D,N,B){function le(){return le=(0,L.Z)(function*(ye,Qe,bt){try{"event"===ye?yield function jc(S,D,N,B,J){return io.apply(this,arguments)}(S,D,N,Qe,bt):"config"===ye?yield function hl(S,D,N,B,J,le){return Vo.apply(this,arguments)}(S,D,N,B,Qe,bt):"consent"===ye?S("consent","update",bt):S("set",Qe)}catch(It){Or.error(It)}}),le.apply(this,arguments)}return function J(ye,Qe,bt){return le.apply(this,arguments)}}(le,S,D,N),{gtagCore:le,wrappedGtag:window[J]}}(us,Tu,Ho,cs,hh);Ms=le,Iu=ye,Ki=!0}return us[B]=function $o(S,D,N,B,J,le,ye){return Cl.apply(this,arguments)}(S,Tu,Ho,D,Iu,cs,N),new dh(S)}function Du(){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,L.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const tn="@firebase/analytics";!function Em(){(0,ae._registerComponent)(new ie.wA(lh,(D,{options:N})=>Su(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ae._registerComponent)(new ie.wA("analytics-internal",function S(D){try{const N=D.getProvider(lh).getImmediate();return{logEvent:(B,J,le)=>function lp(S,D,N,B){S=(0,se.m9)(S),function bu(S,D,N,B,J){return oo.apply(this,arguments)}(Ms,us[S.app.options.appId],D,N,B).catch(J=>Or.error(J))}(N,B,J,le)}}catch(N){throw ki.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ae.registerVersion)(tn,"0.8.0"),(0,ae.registerVersion)(tn,"0.8.0","esm2017")}();var xu=U(4408),cp=U(7565);const dp=new class mh extends cp.v{}(class up extends xu.o{constructor(D,N){super(D,N),this.scheduler=D,this.work=N}schedule(D,N=0){return N>0?super.schedule(D,N):(this.delay=N,this.state=D,this.scheduler.flush(this),this)}execute(D,N){return N>0||this.closed?super.execute(D,N):this._execute(D,N)}requestAsyncId(D,N,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(D,N,B):(D.flush(this),0)}});var hp=U(4986),zc=U(8505),bn=U(5363),Ru=U(9468);const Nu=new a.GfV("7.6.1"),Wc="__angularfire_symbol__analyticsIsSupportedValue",yi="__angularfire_symbol__analyticsIsSupported",ds="__angularfire_symbol__remoteConfigIsSupportedValue",Mu="__angularfire_symbol__remoteConfigIsSupported",Il="__angularfire_symbol__messagingIsSupportedValue",Fa="__angularfire_symbol__messagingIsSupported";function ii(S,D,N){if(D){if(1===D.length)return D[0];const le=D.filter(ye=>ye.app===N);if(1===le.length)return le[0]}return N.container.getProvider(S).getImmediate({optional:!0})}globalThis[yi]||(globalThis[yi]=Du().then(S=>globalThis[Wc]=S).catch(()=>globalThis[Wc]=!1)),globalThis[Fa]||(globalThis[Fa]=Vc().then(S=>globalThis[Il]=S).catch(()=>globalThis[Il]=!1)),globalThis[Mu]||(globalThis[Mu]=il().then(S=>globalThis[ds]=S).catch(()=>globalThis[ds]=!1));const Ht=(S,D)=>{const N=D?[D]:(0,te.C6)(),B=[];return N.forEach(J=>{J.container.getProvider(S).instances.forEach(ye=>{B.includes(ye)||B.push(ye)})}),B};function Er(){}class Ne{constructor(D,N=dp){this.zone=D,this.delegate=N}now(){return this.delegate.now()}schedule(D,N,B){const J=this.zone;return this.delegate.schedule(function(ye){J.runGuarded(()=>{D.apply(this,[ye])})},N,B)}}class er{constructor(D){this.zone=D,this.task=null}call(D,N){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Er,{},Er,Er)),N.pipe((0,zc.b)({next:B,complete:B,error:B})).subscribe(D).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Yi=(()=>{class S{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new Ne(Zone.current)),this.insideAngular=N.run(()=>new Ne(Zone.current,hp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(N){return new(N||S)(a.LFG(a.R0b))},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Os(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function fp(S){return S.pipe((0,bn.Q)(Os().outsideAngular))}function Sl(S){return Os(),function Dl(S){return function(N){return(N=N.lift(new er(S.ngZone))).pipe((0,Ru.R)(S.outsideAngular),(0,bn.Q)(S.insideAngular))}}(Os())(S)}},2090:(ft,Ie,U)=>{U.d(Ie,{$s:()=>ha,BH:()=>ze,DV:()=>Ye,Dv:()=>kn,G6:()=>Ue,GJ:()=>Ve,L:()=>ge,LL:()=>Cn,Mn:()=>Re,Pz:()=>oe,Sg:()=>Ae,UG:()=>_e,UI:()=>Ct,US:()=>ie,Wj:()=>pn,Yr:()=>qe,ZB:()=>q,ZR:()=>Xe,b$:()=>Be,cI:()=>Hi,d:()=>De,dS:()=>wt,eu:()=>Ce,g5:()=>L,gK:()=>$r,gQ:()=>On,h$:()=>we,hl:()=>H,hu:()=>te,jU:()=>ke,lb:()=>yn,m9:()=>Jt,ne:()=>di,p$:()=>G,pd:()=>An,r3:()=>vt,ru:()=>xe,tV:()=>pe,uI:()=>at,ug:()=>At,vZ:()=>Kt,w1:()=>Te,w9:()=>je,xO:()=>sr,xb:()=>Wt,z$:()=>Ke,zI:()=>Ze,zd:()=>vr});const a={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},te=function(Q,$){if(!Q)throw L($)},L=function(Q){return new Error("Firebase Database ("+a.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Q)},ae=function(Q){const $=[];let j=0;for(let Z=0;Z<Q.length;Z++){let z=Q.charCodeAt(Z);z<128?$[j++]=z:z<2048?($[j++]=z>>6|192,$[j++]=63&z|128):55296==(64512&z)&&Z+1<Q.length&&56320==(64512&Q.charCodeAt(Z+1))?(z=65536+((1023&z)<<10)+(1023&Q.charCodeAt(++Z)),$[j++]=z>>18|240,$[j++]=z>>12&63|128,$[j++]=z>>6&63|128,$[j++]=63&z|128):($[j++]=z>>12|224,$[j++]=z>>6&63|128,$[j++]=63&z|128)}return $},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Q,$){if(!Array.isArray(Q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[];for(let z=0;z<Q.length;z+=3){const Se=Q[z],We=z+1<Q.length,mt=We?Q[z+1]:0,vn=z+2<Q.length,cn=vn?Q[z+2]:0;let Hn=(15&mt)<<2|cn>>6,wr=63&cn;vn||(wr=64,We||(Hn=64)),Z.push(j[Se>>2],j[(3&Se)<<4|mt>>4],j[Hn],j[wr])}return Z.join("")},encodeString(Q,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(Q):this.encodeByteArray(ae(Q),$)},decodeString(Q,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(Q):function(Q){const $=[];let j=0,Z=0;for(;j<Q.length;){const z=Q[j++];if(z<128)$[Z++]=String.fromCharCode(z);else if(z>191&&z<224){const Se=Q[j++];$[Z++]=String.fromCharCode((31&z)<<6|63&Se)}else if(z>239&&z<365){const vn=((7&z)<<18|(63&Q[j++])<<12|(63&Q[j++])<<6|63&Q[j++])-65536;$[Z++]=String.fromCharCode(55296+(vn>>10)),$[Z++]=String.fromCharCode(56320+(1023&vn))}else{const Se=Q[j++],We=Q[j++];$[Z++]=String.fromCharCode((15&z)<<12|(63&Se)<<6|63&We)}}return $.join("")}(this.decodeStringToByteArray(Q,$))},decodeStringToByteArray(Q,$){this.init_();const j=$?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[];for(let z=0;z<Q.length;){const Se=j[Q.charAt(z++)],mt=z<Q.length?j[Q.charAt(z)]:0;++z;const cn=z<Q.length?j[Q.charAt(z)]:64;++z;const Ot=z<Q.length?j[Q.charAt(z)]:64;if(++z,null==Se||null==mt||null==cn||null==Ot)throw Error();Z.push(Se<<2|mt>>4),64!==cn&&(Z.push(mt<<4&240|cn>>2),64!==Ot&&Z.push(cn<<6&192|Ot))}return Z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Q=0;Q<this.ENCODED_VALS.length;Q++)this.byteToCharMap_[Q]=this.ENCODED_VALS.charAt(Q),this.charToByteMap_[this.byteToCharMap_[Q]]=Q,this.byteToCharMapWebSafe_[Q]=this.ENCODED_VALS_WEBSAFE.charAt(Q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Q]]=Q,Q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Q)]=Q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Q)]=Q)}}},we=function(Q){const $=ae(Q);return ie.encodeByteArray($,!0)},ge=function(Q){return we(Q).replace(/\./g,"")},pe=function(Q){try{return ie.decodeString(Q,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function G(Q){return q(void 0,Q)}function q(Q,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===Q&&(Q={});break;case Array:Q=[];break;default:return $}for(const j in $)!$.hasOwnProperty(j)||!X(j)||(Q[j]=q(Q[j],$[j]));return Q}function X(Q){return"__proto__"!==Q}class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,j)=>{this.resolve=$,this.reject=j})}wrapCallback($){return(j,Z)=>{j?this.reject(j):this.resolve(Z),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(j):$(j,Z))}}}function Ae(Q,$){if(Q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Z=$||"demo-project",z=Q.iat||0,Se=Q.sub||Q.user_id;if(!Se)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const We=Object.assign({iss:`https://securetoken.google.com/${Z}`,aud:Z,iat:z,exp:z+3600,auth_time:z,sub:Se,user_id:Se,firebase:{sign_in_provider:"custom",identities:{}}},Q);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(We)),""].join(".")}function Ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function at(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ke(){return"object"==typeof self&&self.self===self}function xe(){const Q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Q&&void 0!==Q.id}function Be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){return Ke().indexOf("Electron/")>=0}function Te(){const Q=Ke();return Q.indexOf("MSIE ")>=0||Q.indexOf("Trident/")>=0}function Re(){return Ke().indexOf("MSAppHost/")>=0}function qe(){return!0===a.NODE_CLIENT||!0===a.NODE_ADMIN}function Ue(){return!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H(){return"object"==typeof indexedDB}function Ce(){return new Promise((Q,$)=>{try{let j=!0;const Z="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open(Z);z.onsuccess=()=>{z.result.close(),j||self.indexedDB.deleteDatabase(Z),Q(!0)},z.onupgradeneeded=()=>{j=!1},z.onerror=()=>{var Se;$((null===(Se=z.error)||void 0===Se?void 0:Se.message)||"")}}catch(j){$(j)}})}function Ze(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Xe extends Error{constructor($,j,Z){super(j),this.code=$,this.customData=Z,this.name="FirebaseError",Object.setPrototypeOf(this,Xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cn.prototype.create)}}class Cn{constructor($,j,Z){this.service=$,this.serviceName=j,this.errors=Z}create($,...j){const Z=j[0]||{},z=`${this.service}/${$}`,Se=this.errors[$],We=Se?function yr(Q,$){return Q.replace(Yn,(j,Z)=>{const z=$[Z];return null!=z?String(z):`<${Z}?>`})}(Se,Z):"Error";return new Xe(z,`${this.serviceName}: ${We} (${z}).`,Z)}}const Yn=/\{\$([^}]+)}/g;function Hi(Q){return JSON.parse(Q)}function oe(Q){return JSON.stringify(Q)}const he=function(Q){let $={},j={},Z={},z="";try{const Se=Q.split(".");$=Hi(pe(Se[0])||""),j=Hi(pe(Se[1])||""),z=Se[2],Z=j.d||{},delete j.d}catch{}return{header:$,claims:j,data:Z,signature:z}},je=function(Q){const j=he(Q).claims;return!!j&&"object"==typeof j&&j.hasOwnProperty("iat")},Ve=function(Q){const $=he(Q).claims;return"object"==typeof $&&!0===$.admin};function vt(Q,$){return Object.prototype.hasOwnProperty.call(Q,$)}function Ye(Q,$){if(Object.prototype.hasOwnProperty.call(Q,$))return Q[$]}function Wt(Q){for(const $ in Q)if(Object.prototype.hasOwnProperty.call(Q,$))return!1;return!0}function Ct(Q,$,j){const Z={};for(const z in Q)Object.prototype.hasOwnProperty.call(Q,z)&&(Z[z]=$.call(j,Q[z],z,Q));return Z}function Kt(Q,$){if(Q===$)return!0;const j=Object.keys(Q),Z=Object.keys($);for(const z of j){if(!Z.includes(z))return!1;const Se=Q[z],We=$[z];if(on(Se)&&on(We)){if(!Kt(Se,We))return!1}else if(Se!==We)return!1}for(const z of Z)if(!j.includes(z))return!1;return!0}function on(Q){return null!==Q&&"object"==typeof Q}function sr(Q){const $=[];for(const[j,Z]of Object.entries(Q))Array.isArray(Z)?Z.forEach(z=>{$.push(encodeURIComponent(j)+"="+encodeURIComponent(z))}):$.push(encodeURIComponent(j)+"="+encodeURIComponent(Z));return $.length?"&"+$.join("&"):""}function vr(Q){const $={};return Q.replace(/^\?/,"").split("&").forEach(Z=>{if(Z){const[z,Se]=Z.split("=");$[decodeURIComponent(z)]=decodeURIComponent(Se)}}),$}function An(Q){const $=Q.indexOf("?");if(!$)return"";const j=Q.indexOf("#",$);return Q.substring($,j>0?j:void 0)}class On{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,j){j||(j=0);const Z=this.W_;if("string"==typeof $)for(let Ot=0;Ot<16;Ot++)Z[Ot]=$.charCodeAt(j)<<24|$.charCodeAt(j+1)<<16|$.charCodeAt(j+2)<<8|$.charCodeAt(j+3),j+=4;else for(let Ot=0;Ot<16;Ot++)Z[Ot]=$[j]<<24|$[j+1]<<16|$[j+2]<<8|$[j+3],j+=4;for(let Ot=16;Ot<80;Ot++){const Hn=Z[Ot-3]^Z[Ot-8]^Z[Ot-14]^Z[Ot-16];Z[Ot]=4294967295&(Hn<<1|Hn>>>31)}let cn,wn,z=this.chain_[0],Se=this.chain_[1],We=this.chain_[2],mt=this.chain_[3],vn=this.chain_[4];for(let Ot=0;Ot<80;Ot++){Ot<40?Ot<20?(cn=mt^Se&(We^mt),wn=1518500249):(cn=Se^We^mt,wn=1859775393):Ot<60?(cn=Se&We|mt&(Se|We),wn=2400959708):(cn=Se^We^mt,wn=3395469782);const Hn=(z<<5|z>>>27)+cn+vn+wn+Z[Ot]&4294967295;vn=mt,mt=We,We=4294967295&(Se<<30|Se>>>2),Se=z,z=Hn}this.chain_[0]=this.chain_[0]+z&4294967295,this.chain_[1]=this.chain_[1]+Se&4294967295,this.chain_[2]=this.chain_[2]+We&4294967295,this.chain_[3]=this.chain_[3]+mt&4294967295,this.chain_[4]=this.chain_[4]+vn&4294967295}update($,j){if(null==$)return;void 0===j&&(j=$.length);const Z=j-this.blockSize;let z=0;const Se=this.buf_;let We=this.inbuf_;for(;z<j;){if(0===We)for(;z<=Z;)this.compress_($,z),z+=this.blockSize;if("string"==typeof $){for(;z<j;)if(Se[We]=$.charCodeAt(z),++We,++z,We===this.blockSize){this.compress_(Se),We=0;break}}else for(;z<j;)if(Se[We]=$[z],++We,++z,We===this.blockSize){this.compress_(Se),We=0;break}}this.inbuf_=We,this.total_+=j}digest(){const $=[];let j=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let z=this.blockSize-1;z>=56;z--)this.buf_[z]=255&j,j/=256;this.compress_(this.buf_);let Z=0;for(let z=0;z<5;z++)for(let Se=24;Se>=0;Se-=8)$[Z]=this.chain_[z]>>Se&255,++Z;return $}}function di(Q,$){const j=new xn(Q,$);return j.subscribe.bind(j)}class xn{constructor($,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{$(this)}).catch(Z=>{this.error(Z)})}next($){this.forEachObserver(j=>{j.next($)})}error($){this.forEachObserver(j=>{j.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,j,Z){let z;if(void 0===$&&void 0===j&&void 0===Z)throw new Error("Missing Observer.");z=function qi(Q,$){if("object"!=typeof Q||null===Q)return!1;for(const j of $)if(j in Q&&"function"==typeof Q[j])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:j,complete:Z},void 0===z.next&&(z.next=Cs),void 0===z.error&&(z.error=Cs),void 0===z.complete&&(z.complete=Cs);const Se=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch{}}),this.observers.push(z),Se}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,$)}sendOne($,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{j(this.observers[$])}catch(Z){typeof console<"u"&&console.error&&console.error(Z)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Cs(){}const kn=function(Q,$,j,Z){let z;if(Z<$?z="at least "+$:Z>j&&(z=0===j?"none":"no more than "+j),z)throw new Error(Q+" failed: Was called with "+Z+(1===Z?" argument.":" arguments.")+" Expects "+z+".")};function $r(Q,$){return`${Q} failed: ${$} argument `}function pn(Q,$,j,Z){if((!Z||j)&&"function"!=typeof j)throw new Error($r(Q,$)+"must be a valid function.")}function yn(Q,$,j,Z){if((!Z||j)&&("object"!=typeof j||null===j))throw new Error($r(Q,$)+"must be a valid context object.")}const wt=function(Q){const $=[];let j=0;for(let Z=0;Z<Q.length;Z++){let z=Q.charCodeAt(Z);if(z>=55296&&z<=56319){const Se=z-55296;Z++,te(Z<Q.length,"Surrogate pair missing trail surrogate."),z=65536+(Se<<10)+(Q.charCodeAt(Z)-56320)}z<128?$[j++]=z:z<2048?($[j++]=z>>6|192,$[j++]=63&z|128):z<65536?($[j++]=z>>12|224,$[j++]=z>>6&63|128,$[j++]=63&z|128):($[j++]=z>>18|240,$[j++]=z>>12&63|128,$[j++]=z>>6&63|128,$[j++]=63&z|128)}return $},At=function(Q){let $=0;for(let j=0;j<Q.length;j++){const Z=Q.charCodeAt(j);Z<128?$++:Z<2048?$+=2:Z>=55296&&Z<=56319?($+=4,j++):$+=3}return $},$n=1e3,Fn=2,Ts=144e5,Nr=.5;function ha(Q,$=$n,j=Fn){const Z=$*Math.pow(j,Q),z=Math.round(Nr*Z*(Math.random()-.5)*2);return Math.min(Ts,Z+z)}function Jt(Q){return Q&&Q._delegate?Q._delegate:Q}},3067:(ft,Ie,U)=>{var a=U(4650);let te=null;function L(){return te}class se{}const ie=new a.OlP("DocumentToken");let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return function ge(){return(0,a.LFG)(G)}()},providedIn:"platform"}),n})();const pe=new a.OlP("Location Initialized");let G=(()=>{class n extends we{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){q()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){q()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ie))},n.\u0275prov=a.Yz7({token:n,factory:function(){return function X(){return new G((0,a.LFG)(ie))}()},providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function ze(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ae(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ke(n){return n&&"?"!==n[0]?"?"+n:n}let at=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return(0,a.f3M)(ke)},providedIn:"root"}),n})();const _e=new a.OlP("appBaseHref");let ke=(()=>{class n extends at{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,a.f3M)(ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ze(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ke(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const u=this.prepareExternalUrl(i+Ke(s));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){const u=this.prepareExternalUrl(i+Ke(s));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(we),a.LFG(_e,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xe=(()=>{class n extends at{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ze(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let u=this.prepareExternalUrl(i+Ke(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){let u=this.prepareExternalUrl(i+Ke(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(we),a.LFG(_e,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Be=(()=>{class n{constructor(t){this._subject=new a.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function qe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ae(Re(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ke(r))}normalize(t){return n.stripTrailingSlash(function Te(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Re(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ke(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ke(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ke,n.joinWithSlash=ze,n.stripTrailingSlash=Ae,n.\u0275fac=function(t){return new(t||n)(a.LFG(at))},n.\u0275prov=a.Yz7({token:n,factory:function(){return function De(){return new Be((0,a.LFG)(at))}()},providedIn:"root"}),n})();function Re(n){return n.replace(/\/index.html$/,"")}function Ao(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const Di=/\s+/,nt=[];let Ft=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=nt,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Di):nt}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Di):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Di).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.ZZ4),a.Y36(a.aQg),a.Y36(a.SBq),a.Y36(a.Qsj))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Jn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gr=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Jn(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,u),Rn(h,i)}});for(let i=0,s=r.length;i<s;i++){const h=r.get(i).context;h.index=i,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Rn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Rn(n,e){n.context.$implicit=e.item}let ti=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new $t,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Cc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Cc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.s_b),a.Y36(a.Rgc))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class $t{constructor(){this.$implicit=null,this.ngIf=null}}function Cc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,a.AaK)(e)}'.`)}function os(n,e){return new a.vHH(2100,!1)}class Ai{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Qd{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const ya=new Qd,ko=new Ai;let zr=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,a.QGY)(t))return ya;if((0,a.F4k)(t))return ko;throw os()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.sBO,16))},n.\u0275pipe=a.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),xi=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw os();return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=a.Yjl({name:"uppercase",type:n,pure:!0,standalone:!0}),n})(),su=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const Ac="browser",ni="server";function No(n){return n===Ac}function ou(n){return n===ni}let ba=(()=>{class n{}return n.\u0275prov=(0,a.Yz7)({token:n,providedIn:"root",factory:()=>new lu((0,a.LFG)(ie),window)}),n})();class lu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Oo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ea(this.window.history)||Ea(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ea(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class kc{}class io extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fl extends io{static makeCurrent(){!function ae(n){te||(te=n)}(new fl)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ka(){return pl=pl||document.querySelector("base"),pl?pl.getAttribute("href"):null}();return null==t?null:function ki(n){so=so||document.createElement("a"),so.setAttribute("href",n);const e=so.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){pl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ao(document.cookie,e)}}let so,pl=null;const vu=new a.OlP("TRANSITION_ID"),Bo=[{provide:a.ip1,useFactory:function uh(n,e,t){return()=>{t.get(a.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[vu,ie,a.zs3],multi:!0}];let op=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const jo=new a.OlP("EventManagerPlugins");let gl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const u=i[s];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(jo),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Nn{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ml=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let s=i.get(t)??0;return s+=r,s>0?i.set(t,s):i.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Rs=(()=>{class n extends ml{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(s=>s.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ie))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Ns={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ra=/%COMP%/g,Na=new a.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function vl(n,e){return e.flat(100).map(t=>t.replace(Ra,n))}function Eu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Fr=(()=>{class n{constructor(t,r,i,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new wl(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Hc?i.applyToHost(t):i instanceof El&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const u=this.eventManager,h=this.sharedStylesHost,g=this.removeStylesOnCompDestory;switch(r.encapsulation){case a.ifc.Emulated:s=new Hc(u,h,r,this.appId,g);break;case a.ifc.ShadowDom:return new Cu(u,h,t,r);default:s=new El(u,h,r,g)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(gl),a.LFG(Rs),a.LFG(a.AFp),a.LFG(Na))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class wl{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ns[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(bl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(bl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Ns[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ns[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(a.JOm.DashCase|a.JOm.Important)?e.style.setProperty(t,r,i&a.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&a.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Eu(r)):this.eventManager.addEventListener(e,t,Eu(r))}}function bl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Cu extends wl{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=vl(i.id,i.styles);for(const u of s){const h=document.createElement("style");h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class El extends wl{constructor(e,t,r,i,s=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=vl(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Hc extends El{constructor(e,t,r,i,s){const u=i+"-"+r.id;super(e,t,r,s,u),this.contentAttr=function Ma(n){return"_ngcontent-%COMP%".replace(Ra,n)}(u),this.hostAttr=function yl(n){return"_nghost-%COMP%".replace(Ra,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let $o=(()=>{class n extends Nn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ie))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Cl=["alt","control","meta","shift"],dh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},us={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Tu=(()=>{class n extends Nn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),u=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let u="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),u="code."),Cl.forEach(y=>{const E=r.indexOf(y);E>-1&&(r.splice(E,1),u+=y+".")}),u+=s,0!=r.length||0===s.length)return null;const g={};return g.domEventName=i,g.fullKey=u,g}static matchEventFullKeyCode(t,r){let i=dh[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Cl.forEach(u=>{u!==i&&(0,us[u])(t)&&(s+=u+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ie))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const ph=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:Ac},{provide:a.g9A,useValue:function Ki(){fl.makeCurrent()},multi:!0},{provide:ie,useFactory:function fh(){return(0,a.RDi)(document),document},deps:[]}]),qc=new a.OlP(""),Du=[{provide:a.rWj,useClass:class ch{addToWindow(e){a.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},a.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(r=>{const i=a.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const h=function(g){u=u||g,s--,0==s&&r(u)};i.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:a.lri,useClass:a.dDg,deps:[a.R0b,a.eoX,a.rWj]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b,a.eoX,a.rWj]}],Ps=[{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function bm(){return new a.qLn},deps:[]},{provide:jo,useClass:$o,multi:!0,deps:[ie,a.R0b,a.Lbi]},{provide:jo,useClass:Tu,multi:!0,deps:[ie]},{provide:Fr,useClass:Fr,deps:[gl,Rs,a.AFp,Na]},{provide:a.FYo,useExisting:Fr},{provide:ml,useExisting:Rs},{provide:Rs,useClass:Rs,deps:[ie]},{provide:gl,useClass:gl,deps:[jo,a.R0b]},{provide:kc,useClass:op,deps:[]},[]];let Oa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:a.AFp,useValue:t.appId},{provide:vu,useExisting:a.AFp},Bo]}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(qc,12))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[...Ps,...Du],imports:[su,a.hGG]}),n})(),lp=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ie))},n.\u0275prov=a.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Tl(){return new lp((0,a.LFG)(ie))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let _h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):a.LFG(Cm),r},providedIn:"root"}),n})(),Cm=(()=>{class n extends _h{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case a.q3G.NONE:return r;case a.q3G.HTML:return(0,a.qzn)(r,"HTML")?(0,a.z3N)(r):(0,a.EiD)(this._doc,String(r)).toString();case a.q3G.STYLE:return(0,a.qzn)(r,"Style")?(0,a.z3N)(r):r;case a.q3G.SCRIPT:if((0,a.qzn)(r,"Script"))return(0,a.z3N)(r);throw new Error("unsafe value used in a script context");case a.q3G.URL:return(0,a.qzn)(r,"URL")?(0,a.z3N)(r):(0,a.mCW)(String(r));case a.q3G.RESOURCE_URL:if((0,a.qzn)(r,"ResourceURL"))return(0,a.z3N)(r);throw new Error(`unsafe value used in a resource URL context (see ${a.JZr})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${a.JZr})`)}}bypassSecurityTrustHtml(t){return(0,a.JVY)(t)}bypassSecurityTrustStyle(t){return(0,a.L6k)(t)}bypassSecurityTrustScript(t){return(0,a.eBb)(t)}bypassSecurityTrustUrl(t){return(0,a.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,a.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ie))},n.\u0275prov=a.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function yh(n){return new Cm(n.get(ie))}(a.LFG(a.zs3)),r},providedIn:"root"}),n})();var Ht=U(8996),Er=U(3269);function Ne(...n){const e=(0,Er.yG)(n);return(0,Ht.D)(n,e)}var er=U(7579);class Yi extends er.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const La=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Vn=U(9751);const{isArray:fp}=Array,{getPrototypeOf:vh,prototype:Sl,keys:Dl}=Object;function Ou(n){if(1===n.length){const e=n[0];if(fp(e))return{args:e,keys:null};if(function Fu(n){return n&&"object"==typeof n&&vh(n)===Sl}(e)){const t=Dl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var S=U(4671),D=U(4004);const{isArray:N}=Array;function J(n){return(0,D.U)(e=>function B(n,e){return N(e)?n(...e):n(e)}(n,e))}function le(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var ye=U(5403),Qe=U(9672);function bt(...n){const e=(0,Er.yG)(n),t=(0,Er.jO)(n),{args:r,keys:i}=Ou(n);if(0===r.length)return(0,Ht.D)([],e);const s=new Vn.y(function It(n,e,t=S.y){return r=>{Pt(e,()=>{const{length:i}=n,s=new Array(i);let u=i,h=i;for(let g=0;g<i;g++)Pt(e,()=>{const y=(0,Ht.D)(n[g],e);let E=!1;y.subscribe((0,ye.x)(r,I=>{s[g]=I,E||(E=!0,h--),h||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>le(i,u):S.y));return t?s.pipe(J(t)):s}function Pt(n,e,t){n?(0,Qe.f)(t,n,e):e()}var _t=U(8189);function Lr(...n){return function Cr(){return(0,_t.J)(1)}()((0,Ht.D)(n,(0,Er.yG)(n)))}var hs=U(8421);function Ua(n){return new Vn.y(e=>{(0,hs.Xf)(n()).subscribe(e)})}var qo=U(9635),Kc=U(576);function lo(n,e){const t=(0,Kc.m)(n)?n:()=>n,r=i=>i.error(t());return new Vn.y(e?i=>e.schedule(r,0,i):r)}var Tr=U(515),Fs=U(727),Sn=U(4482);function Al(){return(0,Sn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ye.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class pp extends Vn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Sn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fs.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ye.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fs.w0.EMPTY)}return e}refCount(){return Al()(this)}}function Bn(n,e){return(0,Sn.e)((t,r)=>{let i=null,s=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe((0,ye.x)(r,g=>{i?.unsubscribe();let y=0;const E=s++;(0,hs.Xf)(n(g,E)).subscribe(i=(0,ye.x)(r,I=>r.next(e?e(g,I,E,y++):I),()=>{i=null,h()}))},()=>{u=!0,h()}))})}function Yc(n){return n<=0?()=>Tr.E:(0,Sn.e)((e,t)=>{let r=0;e.subscribe((0,ye.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Lu(...n){const e=(0,Er.yG)(n);return(0,Sn.e)((t,r)=>{(e?Lr(n,t,e):Lr(n,t)).subscribe(r)})}function fs(n,e){return(0,Sn.e)((t,r)=>{let i=0;t.subscribe((0,ye.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var lr=U(5577);function gp(n){return(0,Sn.e)((e,t)=>{let r=!1;e.subscribe((0,ye.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function iv(n=mp){return(0,Sn.e)((e,t)=>{let r=!1;e.subscribe((0,ye.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function mp(){return new La}function Go(n,e){const t=arguments.length>=2;return r=>r.pipe(n?fs((i,s)=>n(i,s,r)):S.y,Yc(1),t?gp(e):iv(()=>new La))}function xl(n,e){return(0,Kc.m)(e)?(0,lr.z)(n,e,1):(0,lr.z)(n,1)}var vi=U(8505);function kl(n){return(0,Sn.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,ye.x)(t,void 0,void 0,u=>{s=(0,hs.Xf)(n(u,kl(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Zo(n,e){return(0,Sn.e)(function _E(n,e,t,r,i){return(s,u)=>{let h=t,g=e,y=0;s.subscribe((0,ye.x)(u,E=>{const I=y++;g=h?n(g,E,I):(h=!0,E),r&&u.next(g)},i&&(()=>{h&&u.next(g),u.complete()})))}}(n,e,arguments.length>=2,!0))}function wh(n){return n<=0?()=>Tr.E:(0,Sn.e)((e,t)=>{let r=[];e.subscribe((0,ye.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function bh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?fs((i,s)=>n(i,s,r)):S.y,wh(1),t?gp(e):iv(()=>new La))}function _p(n){return(0,D.U)(()=>n)}function Eh(n){return(0,Sn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Tt="primary",Qc=Symbol("RouteTitle");class sv{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Uu(n){return new sv(n)}function Im(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],h=n[s];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function uo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Ch(n[i],e[i]))return!1;return!0}function Ch(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Sm(n){return Array.prototype.concat.apply([],n)}function Th(n){return n.length>0?n[n.length-1]:null}function Ir(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function tr(n){return(0,a.CqO)(n)?n:(0,a.QGY)(n)?(0,Ht.D)(Promise.resolve(n)):Ne(n)}const Rl=!1,yp={exact:function Dm(n,e,t){if(!Wo(n.segments,e.segments)||!Vu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Dm(n.children[r],e.children[r],t))return!1;return!0},subset:Am},Ih={exact:function Xc(n,e){return uo(n,e)},subset:function Va(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ch(n[t],e[t]))},ignored:()=>!0};function Kr(n,e,t){return yp[t.paths](n.root,e.root,t.matrixParams)&&Ih[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Am(n,e,t){return vp(n,e,e.segments,t)}function vp(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Wo(i,t)||e.hasChildren()||!Vu(i,t,r))}if(n.segments.length===t.length){if(!Wo(n.segments,t)||!Vu(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Am(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Wo(n.segments,i)&&Vu(n.segments,i,r)&&n.children[Tt])&&vp(n.children[Tt],e,s,r)}}function Vu(n,e,t){return e.every((r,i)=>Ih[t](n[i].parameters,r.parameters))}class zo{constructor(e=new qt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uu(this.queryParams)),this._queryParamMap}toString(){return td.serialize(this)}}class qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ir(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sh(this)}}class Bu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Uu(this.parameters)),this._parameterMap}toString(){return Ah(this)}}function Wo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Nl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return new ed},providedIn:"root"}),n})();class ed{parse(e){const t=new Tp(e);return new zo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${nd(e.root,!0)}`,r=function av(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ju(t)}=${ju(i)}`).join("&"):`${ju(t)}=${ju(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function bp(n){return encodeURI(n)}(e.fragment)}`:""}`}}const td=new ed;function Sh(n){return n.segments.map(e=>Ah(e)).join("/")}function nd(n,e){if(!n.hasChildren())return Sh(n);if(e){const t=n.children[Tt]?nd(n.children[Tt],!1):"",r=[];return Ir(n.children,(i,s)=>{s!==Tt&&r.push(`${s}:${nd(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function wp(n,e){let t=[];return Ir(n.children,(r,i)=>{i===Tt&&(t=t.concat(e(r,i)))}),Ir(n.children,(r,i)=>{i!==Tt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Tt?[nd(n.children[Tt],!1)]:[`${i}:${nd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tt]?`${Sh(n)}/${t[0]}`:`${Sh(n)}/(${t.join("//")})`}}function Dh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ju(n){return Dh(n).replace(/%3B/gi,";")}function co(n){return Dh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $u(n){return decodeURIComponent(n)}function Ep(n){return $u(n.replace(/\+/g,"%20"))}function Ah(n){return`${co(n.path)}${function rd(n){return Object.keys(n).map(e=>`;${co(e)}=${co(n[e])}`).join("")}(n.parameters)}`}const lv=/^[^\/()?;=#]+/;function Ml(n){const e=n.match(lv);return e?e[0]:""}const uv=/^[^=?&#]+/,dv=/^[^&#]+/;class Tp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qt([],{}):new qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new qt(e,t)),r}parseSegment(){const e=Ml(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new a.vHH(4009,Rl);return this.capture(e),new Bu($u(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ml(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ml(this.remaining);i&&(r=i,this.capture(r))}e[$u(t)]=$u(r)}parseQueryParam(e){const t=function cv(n){const e=n.match(uv);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function Cp(n){const e=n.match(dv);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Ep(t),s=Ep(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ml(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new a.vHH(4010,Rl);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Tt);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[Tt]:new qt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new a.vHH(4011,Rl)}}function xh(n){return n.segments.length>0?new qt([],{[Tt]:n}):n}function Hu(n){const e={};for(const r of Object.keys(n.children)){const s=Hu(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function hv(n){if(1===n.numberOfChildren&&n.children[Tt]){const e=n.children[Tt];return new qt(n.segments.concat(e.segments),e.children)}return n}(new qt(n.segments,e))}function Ls(n){return n instanceof zo}const kh=!1;function km(n,e,t,r,i){if(0===t.length)return Us(e.root,e.root,e.root,r,i);const s=function Sp(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Nh(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Ir(s.outlets,(g,y)=>{h[y]="string"==typeof g?g.split("/"):g}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new Nh(t,e,r)}(t);return s.toRoot()?Us(e.root,e.root,new qt([],{}),r,i):function u(g){const y=function Ri(n,e,t,r){if(n.isAbsolute)return new Ko(e.root,!0,0);if(-1===r)return new Ko(t,t===e.root,0);return function Yo(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new a.vHH(4005,kh&&"Invalid number of '../'");i=r.segments.length}return new Ko(r,!1,i-s)}(t,r+(id(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,g),E=y.processChildren?ho(y.segmentGroup,y.index,s.commands):Mh(y.segmentGroup,y.index,s.commands);return Us(e.root,y.segmentGroup,E,r,i)}(n.snapshot?._lastPathIndex)}function id(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function sd(n){return"object"==typeof n&&null!=n&&n.outlets}function Us(n,e,t,r,i){let u,s={};r&&Ir(r,(g,y)=>{s[y]=Array.isArray(g)?g.map(E=>`${E}`):`${g}`}),u=n===e?t:Rh(n,e,t);const h=xh(Hu(u));return new zo(h,s,i)}function Rh(n,e,t){const r={};return Ir(n.children,(i,s)=>{r[s]=i===e?t:Rh(i,e,t)}),new qt(n.segments,r)}class Nh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&id(r[0]))throw new a.vHH(4003,kh&&"Root segment cannot have matrix parameters");const i=r.find(sd);if(i&&i!==Th(r))throw new a.vHH(4004,kh&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ko{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Mh(n,e,t){if(n||(n=new qt([],{})),0===n.segments.length&&n.hasChildren())return ho(n,e,t);const r=function ad(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],h=t[r];if(sd(h))break;const g=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!fo(g,y,u))return s;r+=2}else{if(!fo(g,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new qt(n.segments.slice(0,r.pathIndex),{});return s.children[Tt]=new qt(n.segments.slice(r.pathIndex),n.children),ho(s,0,i)}return r.match&&0===i.length?new qt(n.segments,{}):r.match&&!n.hasChildren()?ld(n,e,t):r.match?ho(n,0,i):ld(n,e,t)}function ho(n,e,t){if(0===t.length)return new qt(n.segments,{});{const r=function od(n){return sd(n[0])?n[0].outlets:{[Tt]:n}}(t),i={};if(!r[Tt]&&n.children[Tt]&&1===n.numberOfChildren&&0===n.children[Tt].segments.length){const s=ho(n.children[Tt],e,t);return new qt(n.segments,s.children)}return Ir(r,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[u]=Mh(n.children[u],e,s))}),Ir(n.children,(s,u)=>{void 0===r[u]&&(i[u]=s)}),new qt(n.segments,i)}}function ld(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(sd(s)){const g=qu(s.outlets);return new qt(r,g)}if(0===i&&id(t[0])){r.push(new Bu(n.segments[e].path,Rm(t[0]))),i++;continue}const u=sd(s)?s.outlets[Tt]:`${s}`,h=i<t.length-1?t[i+1]:null;u&&h&&id(h)?(r.push(new Bu(u,Rm(h))),i+=2):(r.push(new Bu(u,{})),i++)}return new qt(r,{})}function qu(n){const e={};return Ir(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ld(new qt([],{}),0,t))}),e}function Rm(n){const e={};return Ir(n,(t,r)=>e[r]=`${t}`),e}function fo(n,e,t){return n==t.path&&uo(e,t.parameters)}const Gu="imperative";class po{constructor(e,t){this.id=e,this.url=t}}class Ap extends po{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ja extends po{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zu extends po{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ur extends po{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Pl extends po{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $a extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fv extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qo extends po{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ph extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nm extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oh{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class pv{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Fh{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lh{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xp{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mm{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kp{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let _=(()=>{class n{createUrlTree(t,r,i,s,u,h){return km(t||r.root,i,s,u,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(e){return _.\u0275fac(e)},providedIn:"root"}),n})();class P{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=K(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=K(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ue(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ue(e,this._root).map(t=>t.value)}}function K(n,e){if(n===e.value)return e;for(const t of e.children){const r=K(n,t);if(r)return r}return null}function ue(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ue(n,t);if(r.length)return r.unshift(e),r}return[]}class Oe{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function rt(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class St extends P{constructor(e,t){super(e),this.snapshot=t,Uh(this,e)}toString(){return this.snapshot.toString()}}function Et(n,e){const t=function Sr(n,e){const u=new zu([],{},{},"",{},Tt,e,null,n.root,-1,{});return new Np("",new Oe(u,[]))}(n,e),r=new Yi([new Bu("",{})]),i=new Yi({}),s=new Yi({}),u=new Yi({}),h=new Yi(""),g=new si(r,i,u,h,s,Tt,e,t.root);return g.snapshot=t.root,new St(new Oe(g,[]),t)}class si{constructor(e,t,r,i,s,u,h,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=h,this.title=this.data?.pipe((0,D.U)(y=>y[Qc]))??Ne(void 0),this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,D.U)(e=>Uu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,D.U)(e=>Uu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ud(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Rp(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class zu{get title(){return this.data?.[Qc]}constructor(e,t,r,i,s,u,h,g,y,E,I){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=h,this.routeConfig=g,this._urlSegment=y,this._lastPathIndex=E,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Uu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Np extends P{constructor(e,t){super(t),this.url=e,Uh(this,t)}toString(){return Vh(this._root)}}function Uh(n,e){e.value._routerState=n,e.children.forEach(t=>Uh(n,t))}function Vh(n){const e=n.children.length>0?` { ${n.children.map(Vh).join(", ")} } `:"";return`${n.value}${e}`}function Ol(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,uo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),uo(e.params,t.params)||n.params.next(t.params),function Jc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!uo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),uo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ps(n,e){const t=uo(n.params,e.params)&&function ov(n,e){return Wo(n,e)&&n.every((t,r)=>uo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ps(n.parent,e.parent))}function Ll(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Pm(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ll(n,r,i);return Ll(n,r)})}(n,e,t);return new Oe(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>Ll(n,h)),u}}const r=function Bh(n){return new si(new Yi(n.url),new Yi(n.params),new Yi(n.queryParams),new Yi(n.fragment),new Yi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Ll(n,s));return new Oe(r,i)}}const Om="ngNavigationCancelingError";function sA(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ls(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=oA(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function oA(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Om]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Fm(n){return Lm(n)&&Ls(n.url)}function Lm(n){return n&&n[Om]}class LO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Um,this.attachRef=null}}let Um=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new LO,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Mp=!1;let Vm=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tt,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.parentContexts=(0,a.f3M)(Um),this.location=(0,a.f3M)(a.s_b),this.changeDetector=(0,a.f3M)(a.sBO),this.environmentInjector=(0,a.f3M)(a.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new a.vHH(4012,Mp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new a.vHH(4012,Mp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new a.vHH(4012,Mp);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new a.vHH(4013,Mp);this._activatedRoute=t;const i=this.location,u=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new aA(t,h,i.injector);if(r&&function lA(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(u);this.activated=i.createComponent(y,i.length,g)}else this.activated=i.createComponent(u,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=a.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[a.TTD]}),n})();class aA{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===si?this.route:e===Um?this.childContexts:this.parent.get(e,t)}}let gv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[a.jDz],decls:1,vars:0,template:function(t,r){1&t&&a._UZ(0,"router-outlet")},dependencies:[Vm],encapsulation:2}),n})();function mv(n,e){return n.providers&&!n._injector&&(n._injector=(0,a.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Bm(n){const e=n.children&&n.children.map(Bm),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=gv),t}function go(n){return n.outlet||Tt}function EE(n,e){const t=n.filter(r=>go(r)===e);return t.push(...n.filter(r=>go(r)!==e)),t}function Pp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class CE{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ol(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=rt(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),Ir(i,(s,u)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=rt(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=rt(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=rt(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Mm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Lh(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Ol(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),Ol(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=Pp(i.snapshot),g=h?.get(a._Vd)??null;u.attachRef=null,u.route=i,u.resolver=g,u.injector=h,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class hA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yv{constructor(e,t){this.component=e,this.route=t}}function Op(n,e,t){const r=n._root;return jh(r,e?e._root:null,t,[r.value])}function cd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,a.Z0I)(n)?e.get(n):n:r}function jh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=rt(e);return n.children.forEach(u=>{(function TE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const g=function fA(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Wo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wo(n.url,e.url)||!uo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ps(n,e)||!uo(n.queryParams,e.queryParams);default:return!ps(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new hA(r)):(s.data=u.data,s._resolvedData=u._resolvedData),jh(n,e,s.component?h?h.children:null:t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new yv(h.outlet.component,u))}else u&&Fp(e,h,i),i.canActivateChecks.push(new hA(r)),jh(n,null,s.component?h?h.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),Ir(s,(u,h)=>Fp(u,t.getContext(h),i)),i}function Fp(n,e,t){const r=rt(n),i=n.value;Ir(r,(s,u)=>{Fp(s,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new yv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function $h(n){return"function"==typeof n}function Ul(n){return n instanceof La||"EmptyError"===n?.name}const jm=Symbol("INITIAL_VALUE");function Wu(){return Bn(n=>bt(n.map(e=>e.pipe(Yc(1),Lu(jm)))).pipe((0,D.U)(e=>{for(const t of e)if(!0!==t){if(t===jm)return jm;if(!1===t||t instanceof zo)return t}return!0}),fs(e=>e!==jm),Yc(1)))}function Iv(n){return(0,qo.z)((0,vi.b)(e=>{if(Ls(e))throw sA(0,e)}),(0,D.U)(e=>!0===e))}const Sv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function AE(n,e,t,r,i){const s=Dv(n,e,t);return s.matched?function Hh(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ne(i.map(u=>{const h=cd(u,n);return tr(function Ev(n){return n&&$h(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Wu(),Iv()):Ne(!0)}(r=mv(e,r),e,t).pipe((0,D.U)(u=>!0===u?s:{...Sv})):Ne(s)}function Dv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Sv}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Im)(t,n,e);if(!i)return{...Sv};const s={};Ir(i.posParams,(h,g)=>{s[g]=h.path});const u=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function qh(n,e,t,r){if(t.length>0&&function wA(n,e,t){return t.some(r=>Av(n,e,r)&&go(r)!==Tt)}(n,t,r)){const s=new qt(e,function xE(n,e,t,r){const i={};i[Tt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&go(s)!==Tt){const u=new qt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[go(s)]=u}return i}(n,e,r,new qt(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function kE(n,e,t){return t.some(r=>Av(n,e,r))}(n,t,r)){const s=new qt(n.segments,function vA(n,e,t,r,i){const s={};for(const u of r)if(Av(n,t,u)&&!i[go(u)]){const h=new qt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,s[go(u)]=h}return{...i,...s}}(n,e,t,r,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const i=new qt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Av(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function RE(n,e,t,r){return!!(go(n)===r||r!==Tt&&Av(e,t,n))&&("**"===n.path||Dv(e,n,t).matched)}function Gh(n,e,t){return 0===e.length&&!n.children[t]}const qm=!1;class Vl{constructor(e){this.segmentGroup=e||null}}class Zh{constructor(e){this.urlTree=e}}function Lp(n){return lo(new Vl(n))}function xv(n){return lo(new Zh(n))}class NE{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=qh(this.urlTree.root,[],[],this.config).segmentGroup,t=new qt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Tt).pipe((0,D.U)(s=>this.createUrlTree(Hu(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(kl(s=>{if(s instanceof Zh)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Vl?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Tt).pipe((0,D.U)(i=>this.createUrlTree(Hu(i),e.queryParams,e.fragment))).pipe(kl(i=>{throw i instanceof Vl?this.noMatchError(i):i}))}noMatchError(e){return new a.vHH(4002,qm)}createUrlTree(e,t,r){const i=xh(e);return new zo(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,D.U)(s=>new qt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Ht.D)(i).pipe(xl(s=>{const u=r.children[s],h=EE(t,s);return this.expandSegmentGroup(e,h,u,s).pipe((0,D.U)(g=>({segment:g,outlet:s})))}),Zo((s,u)=>(s[u.outlet]=u.segment,s),{}),bh())}expandSegment(e,t,r,i,s,u){return(0,Ht.D)(r).pipe(xl(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,u).pipe(kl(y=>{if(y instanceof Vl)return Ne(null);throw y}))),Go(h=>!!h),kl((h,g)=>{if(Ul(h))return Gh(t,i,s)?Ne(new qt([],{})):Lp(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,u,h){return RE(i,t,s,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u):Lp(t):Lp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?xv(s):this.lineralizeSegments(r,s).pipe((0,lr.z)(u=>{const h=new qt(u,{});return this.expandSegment(e,h,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:h,consumedSegments:g,remainingSegments:y,positionalParamSegments:E}=Dv(t,i,s);if(!h)return Lp(t);const I=this.applyRedirectCommands(g,i.redirectTo,E);return i.redirectTo.startsWith("/")?xv(I):this.lineralizeSegments(i,I).pipe((0,lr.z)(k=>this.expandSegment(e,t,r,k.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=mv(r,e),r.loadChildren?(r._loadedRoutes?Ne({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,D.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new qt(i,{})))):Ne(new qt(i,{}))):AE(t,r,i,e).pipe(Bn(({matched:u,consumedSegments:h,remainingSegments:g})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,lr.z)(E=>{const I=E.injector??e,k=E.routes,{segmentGroup:R,slicedSegments:F}=qh(t,h,g,k),W=new qt(R.segments,R.children);if(0===F.length&&W.hasChildren())return this.expandChildren(I,k,W).pipe((0,D.U)(Ge=>new qt(h,Ge)));if(0===k.length&&0===F.length)return Ne(new qt(h,{}));const ee=go(r)===s;return this.expandSegment(I,W,k,F,ee?Tt:s,!0).pipe((0,D.U)(Me=>new qt(h.concat(Me.segments),Me.children)))})):Lp(t)))}getChildConfig(e,t,r){return t.children?Ne({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ne({routes:t._loadedRoutes,injector:t._loadedInjector}):function yA(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ne(!0):Ne(i.map(u=>{const h=cd(u,n);return tr(function wv(n){return n&&$h(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Wu(),Iv())}(e,t,r).pipe((0,lr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,vi.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function EA(n){return lo(oA(qm,3))}())):Ne({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ne(r);if(i.numberOfChildren>1||!i.children[Tt])return e.redirectTo,lo(new a.vHH(4e3,qm));i=i.children[Tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new zo(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ir(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return Ir(t.children,(h,g)=>{u[g]=this.createSegmentGroup(e,h,r,i)}),new qt(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new a.vHH(4001,qm);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class kv{}class Up{constructor(e,t,r,i,s,u,h){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=u,this.urlSerializer=h}recognize(){const e=qh(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Tt).pipe((0,D.U)(t=>{if(null===t)return null;const r=new zu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Oe(r,t),s=new Np(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=ud(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Ht.D)(Object.keys(r.children)).pipe(xl(i=>{const s=r.children[i],u=EE(t,i);return this.processSegmentGroup(e,u,s,i)}),Zo((i,s)=>i&&s?(i.push(...s),i):null),function Tm(n,e=!1){return(0,Sn.e)((t,r)=>{let i=0;t.subscribe((0,ye.x)(r,s=>{const u=n(s,i++);(u||e)&&r.next(s),!u&&r.complete()}))})}(i=>null!==i),gp(null),bh(),(0,D.U)(i=>{if(null===i)return null;const s=PE(i);return function IA(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,Ht.D)(t).pipe(xl(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,s)),Go(u=>!!u),kl(u=>{if(Ul(u))return Gh(r,i,s)?Ne([]):Ne(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!RE(t,r,i,s))return Ne(null);let u;if("**"===t.path){const h=i.length>0?Th(i).parameters:{},g=FE(r)+i.length;u=Ne({snapshot:new zu(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ha(t),go(t),t.component??t._loadedComponent??null,t,OE(r),g,LE(t)),consumedSegments:[],remainingSegments:[]})}else u=AE(r,t,i,e).pipe((0,D.U)(({matched:h,consumedSegments:g,remainingSegments:y,parameters:E})=>{if(!h)return null;const I=FE(r)+g.length;return{snapshot:new zu(g,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ha(t),go(t),t.component??t._loadedComponent??null,t,OE(r),I,LE(t)),consumedSegments:g,remainingSegments:y}}));return u.pipe(Bn(h=>{if(null===h)return Ne(null);const{snapshot:g,consumedSegments:y,remainingSegments:E}=h;e=t._injector??e;const I=t._loadedInjector??e,k=function SA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:R,slicedSegments:F}=qh(r,y,E,k.filter(ee=>void 0===ee.redirectTo));if(0===F.length&&R.hasChildren())return this.processChildren(I,k,R).pipe((0,D.U)(ee=>null===ee?null:[new Oe(g,ee)]));if(0===k.length&&0===F.length)return Ne([new Oe(g,[])]);const W=go(t)===s;return this.processSegment(I,k,R,F,W?Tt:s).pipe((0,D.U)(ee=>null===ee?null:[new Oe(g,ee)]))}))}}function DA(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function PE(n){const e=[],t=new Set;for(const r of n){if(!DA(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=PE(r.children);e.push(new Oe(r.value,i))}return e.filter(r=>!t.has(r))}function OE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function FE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Ha(n){return n.data||{}}function LE(n){return n.resolve||{}}function Nv(n){return"string"==typeof n.title||null===n.title}function Mv(n){return Bn(e=>{const t=n(e);return t?(0,Ht.D)(t).pipe((0,D.U)(()=>e)):Ne(e)})}const zh=new a.OlP("ROUTES");let Ov=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,a.f3M)(a.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ne(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=tr(t.loadComponent()).pipe((0,D.U)(BE),(0,vi.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Eh(()=>{this.componentLoaders.delete(t)})),i=new pp(r,()=>new er.x).pipe(Al());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ne({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,D.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let g,y,E=!1;Array.isArray(h)?y=h:(g=h.create(t).injector,y=Sm(g.get(zh,[],a.XFs.Self|a.XFs.Optional)));return{routes:y.map(Bm),injector:g}}),Eh(()=>{this.childrenLoaders.delete(r)})),u=new pp(s,()=>new er.x).pipe(Al());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return tr(t()).pipe((0,D.U)(BE),(0,lr.z)(r=>r instanceof a.YKP||Array.isArray(r)?Ne(r):(0,Ht.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function BE(n){return function Jo(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Zm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new er.x,this.configLoader=(0,a.f3M)(Ov),this.environmentInjector=(0,a.f3M)(a.lqb),this.urlSerializer=(0,a.f3M)(Nl),this.rootContexts=(0,a.f3M)(Um),this.navigationId=0,this.afterPreactivation=()=>Ne(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new pv(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Oh(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Yi({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Gu,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(fs(r=>0!==r.id),(0,D.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Bn(r=>{let i=!1,s=!1;return Ne(r).pipe((0,vi.b)(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Bn(u=>{const h=t.browserUrlTree.toString(),g=!t.navigated||u.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!g&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const E="";return this.events.next(new ur(u.id,t.serializeUrl(r.rawUrl),E,0)),t.rawUrlTree=u.rawUrl,u.resolve(null),Tr.E}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return jE(u.source)&&(t.browserUrlTree=u.extractedUrl),Ne(u).pipe(Bn(E=>{const I=this.transitions?.getValue();return this.events.next(new Ap(E.id,this.urlSerializer.serialize(E.extractedUrl),E.source,E.restoredState)),I!==this.transitions?.getValue()?Tr.E:Promise.resolve(E)}),function ME(n,e,t,r){return Bn(i=>function CA(n,e,t,r,i){return new NE(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,D.U)(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,vi.b)(E=>{this.currentNavigation={...this.currentNavigation,finalUrl:E.urlAfterRedirects},r.urlAfterRedirects=E.urlAfterRedirects}),function xA(n,e,t,r,i){return(0,lr.z)(s=>function Rv(n,e,t,r,i,s,u="emptyOnly"){return new Up(n,e,t,r,i,u,s).recognize().pipe(Bn(h=>null===h?function TA(n){return new Vn.y(e=>e.error(n))}(new kv):Ne(h)))}(n,e,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe((0,D.U)(u=>({...s,targetSnapshot:u}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,vi.b)(E=>{if(r.targetSnapshot=E.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!E.extras.skipLocationChange){const k=t.urlHandlingStrategy.merge(E.urlAfterRedirects,E.rawUrl);t.setBrowserUrl(k,E)}t.browserUrlTree=E.urlAfterRedirects}const I=new $a(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(I)}));if(g&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:E,extractedUrl:I,source:k,restoredState:R,extras:F}=u,W=new Ap(E,this.urlSerializer.serialize(I),k,R);this.events.next(W);const ee=Et(I,this.rootComponentType).snapshot;return Ne(r={...u,targetSnapshot:ee,urlAfterRedirects:I,extras:{...F,skipLocationChange:!1,replaceUrl:!1}})}{const E="";return this.events.next(new ur(u.id,t.serializeUrl(r.extractedUrl),E,1)),t.rawUrlTree=u.rawUrl,u.resolve(null),Tr.E}}),(0,vi.b)(u=>{const h=new fv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),(0,D.U)(u=>r={...u,guards:Op(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),function $m(n,e){return(0,lr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?Ne({...t,guardsResult:!0}):function mA(n,e,t,r){return(0,Ht.D)(n).pipe((0,lr.z)(i=>function _A(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ne(s.map(h=>{const g=Pp(e)??i,y=cd(h,g);return tr(function pA(n){return n&&$h(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):g.runInContext(()=>y(n,e,t,r))).pipe(Go())})).pipe(Wu()):Ne(!0)}(i.component,i.route,t,e,r)),Go(i=>!0!==i,!0))}(u,r,i,n).pipe((0,lr.z)(h=>h&&function IE(n){return"boolean"==typeof n}(h)?function Cv(n,e,t,r){return(0,Ht.D)(e).pipe(xl(i=>Lr(function dd(n,e){return null!==n&&e&&e(new Fh(n)),Ne(!0)}(i.route.parent,r),function Hm(n,e){return null!==n&&e&&e(new xp(n)),Ne(!0)}(i.route,r),function Tv(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function vv(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>Ua(()=>Ne(u.guards.map(g=>{const y=Pp(u.node)??t,E=cd(g,y);return tr(function bv(n){return n&&$h(n.canActivateChild)}(E)?E.canActivateChild(r,n):y.runInContext(()=>E(r,n))).pipe(Go())})).pipe(Wu())));return Ne(s).pipe(Wu())}(n,i.path,t),function DE(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ne(!0);const i=r.map(s=>Ua(()=>{const u=Pp(e)??t,h=cd(s,u);return tr(function VO(n){return n&&$h(n.canActivate)}(h)?h.canActivate(e,n):u.runInContext(()=>h(e,n))).pipe(Go())}));return Ne(i).pipe(Wu())}(n,i.route,t))),Go(i=>!0!==i,!0))}(r,s,n,e):Ne(h)),(0,D.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,u=>this.events.next(u)),(0,vi.b)(u=>{if(r.guardsResult=u.guardsResult,Ls(u.guardsResult))throw sA(0,u.guardsResult);const h=new Qo(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(h)}),fs(u=>!!u.guardsResult||(t.restoreHistory(u),this.cancelNavigationTransition(u,"",3),!1)),Mv(u=>{if(u.guards.canActivateChecks.length)return Ne(u).pipe((0,vi.b)(h=>{const g=new Ph(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}),Bn(h=>{let g=!1;return Ne(h).pipe(function BO(n,e){return(0,lr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ne(t);let s=0;return(0,Ht.D)(i).pipe(xl(u=>function jO(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!Nv(i)&&(s[Qc]=i.title),function UE(n,e,t,r){const i=function $O(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Ne({});const s={};return(0,Ht.D)(i).pipe((0,lr.z)(u=>function VE(n,e,t,r){const i=Pp(e)??r,s=cd(n,i);return tr(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[u],e,t,r).pipe(Go(),(0,vi.b)(h=>{s[u]=h}))),wh(1),_p(s),kl(u=>Ul(u)?Tr.E:lo(u)))}(s,n,e,r).pipe((0,D.U)(u=>(n._resolvedData=u,n.data=ud(n,t).resolve,i&&Nv(i)&&(n.data[Qc]=i.title),null)))}(u.route,r,n,e)),(0,vi.b)(()=>s++),wh(1),(0,lr.z)(u=>s===i.length?Ne(t):Tr.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,vi.b)({next:()=>g=!0,complete:()=>{g||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,vi.b)(h=>{const g=new Nm(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}))}),Mv(u=>{const h=g=>{const y=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(g.routeConfig).pipe((0,vi.b)(E=>{g.component=E}),(0,D.U)(()=>{})));for(const E of g.children)y.push(...h(E));return y};return bt(h(u.targetSnapshot.root)).pipe(gp(),Yc(1))}),Mv(()=>this.afterPreactivation()),(0,D.U)(u=>{const h=function Fl(n,e,t){const r=Ll(n,e._root,t?t._root:void 0);return new St(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return r={...u,targetRouterState:h}}),(0,vi.b)(u=>{t.currentUrlTree=u.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl),t.routerState=u.targetRouterState,"deferred"===t.urlUpdateStrategy&&(u.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,u),t.browserUrlTree=u.urlAfterRedirects)}),((n,e,t)=>(0,D.U)(r=>(new CE(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u)),Yc(1),(0,vi.b)({next:u=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new ja(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{i=!0}}),Eh(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),kl(u=>{if(s=!0,Lm(u)){Fm(u)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new Zu(r.id,this.urlSerializer.serialize(r.extractedUrl),u.message,u.cancellationCode);if(this.events.next(h),Fm(u)){const g=t.urlHandlingStrategy.merge(u.url,t.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||jE(r.source)};t.scheduleNavigation(g,Gu,null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new Pl(r.id,this.urlSerializer.serialize(r.extractedUrl),u,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(u))}catch(g){r.reject(g)}}return Tr.E}))}))}cancelNavigationTransition(t,r,i){const s=new Zu(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jE(n){return n!==Gu}let $E=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Tt);return r}getResolvedTitleForRoute(t){return t.data[Qc]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return(0,a.f3M)(kA)},providedIn:"root"}),n})(),kA=(()=>{class n extends $E{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(lp))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return(0,a.f3M)(NA)},providedIn:"root"}),n})();class RA{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let NA=(()=>{class n extends RA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=a.n5z(n)))(r||n)}}(),n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Lt=new a.OlP("",{providedIn:"root",factory:()=>({})});let qE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return(0,a.f3M)(GE)},providedIn:"root"}),n})(),GE=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function PA(n){throw n}function OA(n,e,t){return e.parse("/")}const ZE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let cr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,a.f3M)(a.c2e),this.isNgZoneEnabled=!1,this.options=(0,a.f3M)(Lt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||PA,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||OA,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,a.f3M)(qE),this.routeReuseStrategy=(0,a.f3M)(HE),this.urlCreationStrategy=(0,a.f3M)(x),this.titleStrategy=(0,a.f3M)($E),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Sm((0,a.f3M)(zh,{optional:!0})??[]),this.navigationTransitions=(0,a.f3M)(Zm),this.urlSerializer=(0,a.f3M)(Nl),this.location=(0,a.f3M)(Be),this.isNgZoneEnabled=(0,a.f3M)(a.R0b)instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new zo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Et(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Gu,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},u=i?.navigationId?i:null;if(i){const g={...i};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(s.state=g)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,u,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Bm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:u,queryParamsHandling:h,preserveFragment:g}=r,y=g?this.currentUrlTree.fragment:u;let E=null;switch(h){case"merge":E={...this.currentUrlTree.queryParams,...s};break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=s||null}return null!==E&&(E=this.removeEmptyProps(E)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,E,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ls(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Gu,null,r)}navigate(t,r={skipLocationChange:!1}){return function LA(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new a.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...ZE}:!1===r?{...FA}:r,Ls(t))return Kr(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Kr(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,u){if(this.disposed)return Promise.resolve(!1);let h,g,y,E;return u?(h=u.resolve,g=u.reject,y=u.promise):y=new Promise((I,k)=>{h=I,g=k}),E="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:E,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:h,reject:g,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(I=>Promise.reject(I))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",u)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Lv{}let Uv=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(fs(t=>t instanceof ja),xl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,a.MMx)(s.providers,t,`Route: ${s.path}`));const u=s._injector??t,h=s._loadedInjector??u;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(u,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,Ht.D)(i).pipe((0,_t.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ne(null);const s=i.pipe((0,lr.z)(u=>null===u?Ne(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,Ht.D)([s,u]).pipe((0,_t.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(cr),a.LFG(a.Sil),a.LFG(a.lqb),a.LFG(Lv),a.LFG(Ov))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jp=new a.OlP("");let WE=(()=>{class n{constructor(t,r,i,s,u={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ap?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ja&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof kp&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new kp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){a.$Z()},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();var mo=(()=>((mo=mo||{})[mo.COMPLETE=0]="COMPLETE",mo[mo.FAILED=1]="FAILED",mo[mo.REDIRECTING=2]="REDIRECTING",mo))();const $p=!1;function hd(n,e){return{\u0275kind:n,\u0275providers:e}}const Bv=new a.OlP("",{providedIn:"root",factory:()=>!1});function Hp(){const n=(0,a.f3M)(a.zs3);return e=>{const t=n.get(a.z2F);if(e!==t.components[0])return;const r=n.get(cr),i=n.get(KE);1===n.get(Wm)&&r.initialNavigation(),n.get(YE,null,a.XFs.Optional)?.setUpPreloading(),n.get(jp,null,a.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const KE=new a.OlP($p?"bootstrap done indicator":"",{factory:()=>new er.x}),Wm=new a.OlP($p?"initial navigation":"",{providedIn:"root",factory:()=>1});function jA(){let n=[];return n=$p?[{provide:a.Xts,multi:!0,useFactory:()=>{const e=(0,a.f3M)(cr);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function v(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],hd(1,n)}const YE=new a.OlP($p?"router preloader":"");function $A(n){return hd(0,[{provide:YE,useExisting:Uv},{provide:Lv,useExisting:n}])}const Yh=!1,GA=new a.OlP(Yh?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),jv=[Be,{provide:Nl,useClass:ed},cr,Um,{provide:si,useFactory:function Vv(n){return n.routerState.root},deps:[cr]},Ov,Yh?{provide:Bv,useValue:!0}:[]];function ZA(){return new a.PXZ("Router",cr)}let JE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[jv,Yh&&r?.enableTracing?jA().\u0275providers:[],{provide:zh,multi:!0,useValue:t},{provide:GA,useFactory:eC,deps:[[cr,new a.FiY,new a.tp0]]},{provide:Lt,useValue:r||{}},r?.useHash?{provide:at,useClass:xe}:{provide:at,useClass:ke},{provide:jp,useFactory:()=>{const n=(0,a.f3M)(ba),e=(0,a.f3M)(a.R0b),t=(0,a.f3M)(Lt),r=(0,a.f3M)(Zm),i=(0,a.f3M)(Nl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new WE(i,r,n,e,t)}},r?.preloadingStrategy?$A(r.preloadingStrategy).\u0275providers:[],{provide:a.PXZ,multi:!0,useFactory:ZA},r?.initialNavigation?WA(r):[],[{provide:tC,useFactory:Hp},{provide:a.tb,multi:!0,useExisting:tC}]]}}static forChild(t){return{ngModule:n,providers:[{provide:zh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(GA,8))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[gv]}),n})();function eC(n){if(Yh&&n)throw new a.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function WA(n){return["disabled"===n.initialNavigation?hd(3,[{provide:a.ip1,multi:!0,useFactory:()=>{const e=(0,a.f3M)(cr);return()=>{e.setUpLocationChangeListener()}}},{provide:Wm,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?hd(2,[{provide:Wm,useValue:0},{provide:a.ip1,multi:!0,deps:[a.zs3],useFactory:e=>{const t=e.get(pe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(cr),s=e.get(KE);(function GO(n,e){n.events.pipe(fs(t=>t instanceof ja||t instanceof Zu||t instanceof Pl||t instanceof ur),(0,D.U)(t=>t instanceof ja||t instanceof ur?mo.COMPLETE:t instanceof Zu&&(0===t.code||1===t.code)?mo.REDIRECTING:mo.FAILED),fs(t=>t!==mo.REDIRECTING),Yc(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(Zm).afterPreactivation=()=>(r(!0),s.closed?Ne(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const tC=new a.OlP(Yh?"Router Initializer":"");class Ym{}class Gp{}const Xo="*";function Qm(n,e){return{type:7,name:n,definitions:e,options:{}}}function $v(n,e=null){return{type:4,styles:e,timings:n}}function Jm(n,e=null){return{type:2,steps:n,options:e}}function fd(n){return{type:6,styles:n,offset:null}}function Xm(n,e,t){return{type:0,name:n,styles:e,options:t}}function iC(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function sC(n){Promise.resolve().then(n)}class Zp{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){sC(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class gs{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?sC(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==s&&this._onFinish()}),u.onDestroy(()=>{++r==s&&this._onDestroy()}),u.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Hv="!";function JA(n){return new a.vHH(3e3,!1)}function Bl(){return typeof window<"u"&&typeof window.document<"u"}function Jh(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ea(n){switch(n.length){case 0:return new Zp;case 1:return n[0];default:return new gs(n)}}function Xh(n,e,t,r,i=new Map,s=new Map){const u=[],h=[];let g=-1,y=null;if(r.forEach(E=>{const I=E.get("offset"),k=I==g,R=k&&y||new Map;E.forEach((F,W)=>{let ee=W,me=F;if("offset"!==W)switch(ee=e.normalizePropertyName(ee,u),me){case Hv:me=i.get(W);break;case Xo:me=s.get(W);break;default:me=e.normalizeStyleValue(W,ee,me,u)}R.set(ee,me)}),k||h.push(R),y=R,g=I}),u.length)throw function fx(n){return new a.vHH(3502,!1)}();return h}function Yv(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&r_(t,"start",n)));break;case"done":n.onDone(()=>r(t&&r_(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&r_(t,"destroy",n)))}}function r_(n,e,t){const s=i_(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(s._data=u),s}function i_(n,e,t,r,i="",s=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!u}}function Vs(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function hC(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let pd=(n,e)=>!1,fC=(n,e,t)=>[],mx=null;function Qv(n){const e=n.parentNode||n.host;return e===mx?null:e}(Jh()||typeof Element<"u")&&(Bl()?(mx=(()=>document.documentElement)(),pd=(n,e)=>{for(;e;){if(e===n)return!0;e=Qv(e)}return!1}):pd=(n,e)=>n.contains(e),fC=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let gd=null,pC=!1;const s_=pd,mC=fC;let yC=(()=>{class n{validateStyleProperty(t){return function yx(n){gd||(gd=function gC(){return typeof document<"u"?document.body:null}()||{},pC=!!gd.style&&"WebkitAppearance"in gd.style);let e=!0;return gd.style&&!function _x(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in gd.style,!e&&pC&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in gd.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return s_(t,r)}getParentElement(t){return Qv(t)}query(t,r,i){return mC(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,u,h=[],g){return new Zp(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Jv=(()=>{class n{}return n.NOOP=new yC,n})();const vx=1e3,Xv="ng-enter",o_="ng-leave",zp="ng-trigger",Wp=".ng-trigger",wC="ng-animating",bC=".ng-animating";function Ga(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:EC(parseFloat(e[1]),e[2])}function EC(n,e){return"s"===e?n*vx:n}function md(n,e,t){return n.hasOwnProperty("duration")?n:function bx(n,e,t){let i,s=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(JA()),{duration:0,delay:0,easing:""};i=EC(parseFloat(h[1]),h[2]);const g=h[3];null!=g&&(s=EC(parseFloat(g),h[4]));const y=h[5];y&&(u=y)}else i=n;if(!t){let h=!1,g=e.length;i<0&&(e.push(function qv(){return new a.vHH(3100,!1)}()),h=!0),s<0&&(e.push(function oC(){return new a.vHH(3101,!1)}()),h=!0),h&&e.splice(g,0,JA())}return{duration:i,delay:s,easing:u}}(n,e,t)}function Kp(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function a_(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function _o(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function wi(n,e,t){return t?e+":"+t+";":""}function Ku(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=wi(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=wi(0,nf(t),n.style[t]));n.setAttribute("style",e)}function Bs(n,e,t){n.style&&(e.forEach((r,i)=>{const s=Qu(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),Jh()&&Ku(n))}function oi(n,e){n.style&&(e.forEach((t,r)=>{const i=Qu(r);n.style[i]=""}),Jh()&&Ku(n))}function _d(n){return Array.isArray(n)?1==n.length?n[0]:Jm(n):n}const Yu=new RegExp("{{\\s*(.+?)\\s*}}","g");function yd(n){let e=[];if("string"==typeof n){let t;for(;t=Yu.exec(n);)e.push(t[1]);Yu.lastIndex=0}return e}function Za(n,e,t){const r=n.toString(),i=r.replace(Yu,(s,u)=>{let h=e[u];return null==h&&(t.push(function ex(n){return new a.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function jl(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const tf=/-+([a-z0-9])/g;function Qu(n){return n.replace(tf,(...e)=>e[1].toUpperCase())}function nf(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ms(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function tx(n){return new a.vHH(3004,!1)}()}}function ew(n,e){return window.getComputedStyle(n)[e]}const l_="*";function DC(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Tx(n,e,t){if(":"==n[0]){const g=function Ix(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function cx(n){return new a.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof g)return void e.push(g);n=g}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function lC(n){return new a.vHH(3015,!1)}()),e;const i=r[1],s=r[2],u=r[3];e.push(AC(i,u));"<"==s[0]&&!(i==l_&&u==l_)&&e.push(AC(u,i))}(r,t,e)):t.push(n),t}const sf=new Set(["true","1"]),af=new Set(["false","0"]);function AC(n,e){const t=sf.has(n)||af.has(n),r=sf.has(e)||af.has(e);return(i,s)=>{let u=n==l_||n==i,h=e==l_||e==s;return!u&&t&&"boolean"==typeof i&&(u=i?sf.has(n):af.has(n)),!h&&r&&"boolean"==typeof s&&(h=s?sf.has(e):af.has(e)),u&&h}}const u_=new RegExp("s*:selfs*,?","g");function Xp(n,e,t,r){return new c_(n).build(e,t,r)}class c_{constructor(e){this._driver=e}build(e,t,r){const i=new RC(t);return this._resetContextStyleTimingState(i),ms(this,_d(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function nx(){return new a.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const g=h,y=g.name;y.toString().split(/\s*,\s*/).forEach(E=>{g.name=E,s.push(this.visitState(g,t))}),g.name=y}else if(1==h.type){const g=this.visitTransition(h,t);r+=g.queryCount,i+=g.depCount,u.push(g)}else t.errors.push(function rx(){return new a.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,u=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(g=>{yd(g).forEach(y=>{u.hasOwnProperty(y)||s.add(y)})})}),s.size&&(jl(s.values()),t.errors.push(function Gv(n,e){return new a.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ms(this,_d(e.animation),t);return{type:1,matchers:DC(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ju(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ms(this,r,t)),options:Ju(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(u=>{t.currentTime=r;const h=ms(this,u,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:s,options:Ju(e.options)}}visitAnimate(e,t){const r=function NC(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return eg(md(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=eg(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=md(t,e);return eg(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:fd({});if(5==s.type)i=this.visitKeyframes(s,t);else{let u=e.styles,h=!1;if(!u){h=!0;const y={};r.easing&&(y.easing=r.easing),u=fd(y)}t.currentTime+=r.duration+r.delay;const g=this.visitStyle(u,t);g.isEmptyStep=h,i=g}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===Xo?r.push(h):t.errors.push(new a.vHH(3002,!1)):r.push(a_(h));let s=!1,u=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(u=h.get("easing"),h.delete("easing")),!s))for(let g of h.values())if(g.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((h,g)=>{const y=t.collectedStyles.get(t.currentQuerySelector),E=y.get(g);let I=!0;E&&(s!=i&&s>=E.startTime&&i<=E.endTime&&(t.errors.push(function sx(n,e,t,r,i){return new a.vHH(3010,!1)}()),I=!1),s=E.startTime),I&&y.set(g,{startTime:s,endTime:i}),t.options&&function ef(n,e,t){const r=e.params||{},i=yd(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function XA(n){return new a.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function ox(){return new a.vHH(3011,!1)}()),r;let s=0;const u=[];let h=!1,g=!1,y=0;const E=e.steps.map(me=>{const Me=this._makeStyleAst(me,t);let Ge=null!=Me.offset?Me.offset:function tw(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Me.styles),Le=0;return null!=Ge&&(s++,Le=Me.offset=Ge),g=g||Le<0||Le>1,h=h||Le<y,y=Le,u.push(Le),Me});g&&t.errors.push(function ax(){return new a.vHH(3012,!1)}()),h&&t.errors.push(function qa(){return new a.vHH(3200,!1)}());const I=e.steps.length;let k=0;s>0&&s<I?t.errors.push(function Zv(){return new a.vHH(3202,!1)}()):0==s&&(k=1/(I-1));const R=I-1,F=t.currentTime,W=t.currentAnimateTimings,ee=W.duration;return E.forEach((me,Me)=>{const Ge=k>0?Me==R?1:k*Me:u[Me],Le=Ge*ee;t.currentTime=F+W.delay+Le,W.duration=Le,this._validateStyleAst(me,t),me.offset=Ge,r.styles.push(me)}),r}visitReference(e,t){return{type:8,animation:ms(this,_d(e.animation),t),options:Ju(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Ju(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Ju(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,u]=function d_(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(u_,"")),n=n.replace(/@\*/g,Wp).replace(/@\w+/g,t=>Wp+"-"+t.slice(1)).replace(/:animating/g,bC),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Vs(t.collectedStyles,t.currentQuerySelector,new Map);const h=ms(this,_d(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:Ju(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function lx(){return new a.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:md(e.timings,t.errors,!0);return{type:12,animation:ms(this,_d(e.animation),t),timings:r,options:null}}}class RC{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ju(n){return n?(n=Kp(n)).params&&(n.params=function kC(n){return n?Kp(n):null}(n.params)):n={},n}function eg(n,e,t){return{duration:n,delay:e,easing:t}}function h_(n,e,t,r,i,s,u=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:u,subTimeline:h}}class f_{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const OC=new RegExp(":enter","g"),Sx=new RegExp(":leave","g");function p_(n,e,t,r,i,s=new Map,u=new Map,h,g,y=[]){return(new LC).buildKeyframes(n,e,t,r,i,s,u,h,g,y)}class LC{buildKeyframes(e,t,r,i,s,u,h,g,y,E=[]){y=y||new f_;const I=new ng(e,t,y,i,s,E,[]);I.options=g;const k=g.delay?Ga(g.delay):0;I.currentTimeline.delayNextStep(k),I.currentTimeline.setStyles([u],null,I.errors,g),ms(this,r,I);const R=I.timelines.filter(F=>F.containsAnimation());if(R.length&&h.size){let F;for(let W=R.length-1;W>=0;W--){const ee=R[W];if(ee.element===t){F=ee;break}}F&&!F.allowOnlyTimelineStyles()&&F.setStyles([h],null,I.errors,g)}return R.length?R.map(F=>F.buildKeyframes()):[h_(t,[],[],[],0,k,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);s!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const u="number"==typeof s?s:Ga(Za(s,i?.params??{},t.errors));r.delayNextStep(u)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const u=null!=r.duration?Ga(r.duration):null,h=null!=r.delay?Ga(r.delay):null;return 0!==u&&e.forEach(g=>{const y=t.appendInstructionToTimeline(g,u,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ms(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=tg);const u=Ga(s.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>ms(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Ga(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),ms(this,u,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return md(t.params?Za(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(g=>{h.forwardTime((g.offset||0)*s),h.setStyles(g.styles,g.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Ga(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=tg);let u=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let g=null;h.forEach((y,E)=>{t.currentQueryIndex=E;const I=t.createSubContext(e.options,y);s&&I.delayNextStep(s),y===t.element&&(g=I.currentTimeline),ms(this,e.animation,I),I.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,I.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,u=Math.abs(s.duration),h=u*(t.currentQueryTotal-1);let g=u*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":g=h-g;break;case"full":g=r.currentStaggerTime}const E=t.currentTimeline;g&&E.delayNextStep(g);const I=E.currentTime;ms(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-I+(i.startTime-r.currentTimeline.startTime)}}const tg={};class ng{constructor(e,t,r,i,s,u,h,g){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=tg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new rg(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Ga(r.duration)),null!=r.delay&&(i.delay=Ga(r.delay));const s=r.params;if(s){let u=i.params;u||(u=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=Za(s[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new ng(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=tg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new UC(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,u){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(OC,"."+this._enterClassName)).replace(Sx,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!s&&0==h.length&&u.push(function ux(n){return new a.vHH(3014,!1)}()),h}}class rg{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new rg(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Xo),this._currentKeyframe.set(t,Xo);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},u=function VC(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Xo)}else _o(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,g]of u){const y=Za(g,s,r);this._pendingStyles.set(h,y),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??Xo),this._updateStyle(h,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,g)=>{const y=_o(h,new Map,this._backFill);y.forEach((E,I)=>{E===Hv?e.add(I):E===Xo&&t.add(I)}),r||y.set("offset",g/this.duration),i.push(y)});const s=e.size?jl(e.values()):[],u=t.size?jl(t.values()):[];if(r){const h=i[0],g=new Map(h);h.set("offset",0),g.set("offset",1),i=[h,g]}return h_(this.element,i,s,u,this.duration,this.startTime,this.easing,!1)}}class UC extends rg{constructor(e,t,r,i,s,u,h=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],u=r+t,h=t/u,g=_o(e[0]);g.set("offset",0),s.push(g);const y=_o(e[0]);y.set("offset",nw(h)),s.push(y);const E=e.length-1;for(let I=1;I<=E;I++){let k=_o(e[I]);const R=k.get("offset");k.set("offset",nw((t+R*r)/u)),s.push(k)}r=u,t=0,i="",e=s}return h_(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function nw(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class g_{}const BC=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class m_ extends g_{normalizePropertyName(e,t){return Qu(e)}normalizeStyleValue(e,t,r,i){let s="";const u=r.toString().trim();if(BC.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function aC(n,e){return new a.vHH(3005,!1)}())}return u+s}}function $l(n,e,t,r,i,s,u,h,g,y,E,I,k){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:u,timelines:h,queriedElements:g,preStyleProps:y,postStyleProps:E,totalTime:I,errors:k}}const rw={};class jC{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function vd(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,u,h,g,y,E){const I=[],k=this.ast.options&&this.ast.options.params||rw,F=this.buildStyles(r,h&&h.params||rw,I),W=g&&g.params||rw,ee=this.buildStyles(i,W,I),me=new Set,Me=new Map,Ge=new Map,Le="void"===i,st={params:iw(W,k),delay:this.ast.options?.delay},ct=E?[]:p_(e,t,this.ast.animation,s,u,F,ee,st,y,I);let zt=0;if(ct.forEach(ca=>{zt=Math.max(ca.duration+ca.delay,zt)}),I.length)return $l(t,this._triggerName,r,i,Le,F,ee,[],[],Me,Ge,zt,I);ct.forEach(ca=>{const Wd=ca.element,C3=Vs(Me,Wd,new Set);ca.preStyleProps.forEach(fm=>C3.add(fm));const mE=Vs(Ge,Wd,new Set);ca.postStyleProps.forEach(fm=>mE.add(fm)),Wd!==t&&me.add(Wd)});const _r=jl(me.values());return $l(t,this._triggerName,r,i,Le,F,ee,ct,_r,Me,Ge,zt)}}function iw(n,e){const t=Kp(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class xx{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Kp(this.defaultParams);return Object.keys(e).forEach(s=>{const u=e[s];null!==u&&(i[s]=u)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((u,h)=>{u&&(u=Za(u,i,t));const g=this.normalizer.normalizePropertyName(h,t);u=this.normalizer.normalizeStyleValue(h,g,u,t),r.set(h,u)})}),r}}class iF{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new xx(i.style,i.options&&i.options.params||{},r))}),HC(this.states,"true","1"),HC(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new jC(e,i,this.states))}),this.fallbackTransition=function sF(n,e,t){return new jC(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function HC(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const kx=new f_;class qC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],i=[],s=Xp(this._driver,t,r,i);if(r.length)throw function px(n){return new a.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=Xh(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let u;const h=new Map;if(s?(u=p_(this._driver,t,s,Xv,o_,new Map,new Map,r,kx,i),u.forEach(E=>{const I=Vs(h,E.element,new Map);E.postStyleProps.forEach(k=>I.set(k,null))})):(i.push(function e_(){return new a.vHH(3300,!1)}()),u=[]),i.length)throw function t_(n){return new a.vHH(3504,!1)}();h.forEach((E,I)=>{E.forEach((k,R)=>{E.set(R,this._driver.computeStyle(I,R,Xo))})});const y=ea(u.map(E=>{const I=h.get(E.element);return this._buildPlayer(E,new Map,I)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function n_(n){return new a.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=i_(t,"","","");return Yv(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const GC="ng-animate-queued",__="ng-animate-disabled",Mx=[],ow={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},zC={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},bi="__ng_removed";class aw{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function uw(n){return n??null}(r?e.value:e),r){const s=Kp(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const ig="void",y_=new aw(ig);class Px{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,dr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function XO(n,e){return new a.vHH(3302,!1)}();if(null==r||0==r.length)throw function Wv(n){return new a.vHH(3303,!1)}();if(!function Ox(n){return"start"==n||"done"==n}(r))throw function eF(n,e){return new a.vHH(3400,!1)}();const s=Vs(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};s.push(u);const h=Vs(this._engine.statesByElement,e,new Map);return h.has(t)||(dr(e,zp),dr(e,zp+"-"+t),h.set(t,y_)),()=>{this._engine.afterFlush(()=>{const g=s.indexOf(u);g>=0&&s.splice(g,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function uC(n){return new a.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),u=new KC(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(dr(e,zp),dr(e,zp+"-"+t),this._engine.statesByElement.set(e,h=new Map));let g=h.get(t);const y=new aw(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&g&&y.absorbOptions(g.options),h.set(t,y),g||(g=y_),y.value!==ig&&g.value===y.value){if(!function Lx(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(g.params,y.params)){const W=[],ee=s.matchStyles(g.value,g.params,W),me=s.matchStyles(y.value,y.params,W);W.length?this._engine.reportError(W):this._engine.afterFlush(()=>{oi(e,ee),Bs(e,me)})}return}const k=Vs(this._engine.playersByElement,e,[]);k.forEach(W=>{W.namespaceId==this.id&&W.triggerName==t&&W.queued&&W.destroy()});let R=s.matchTransition(g.value,y.value,e,y.params),F=!1;if(!R){if(!i)return;R=s.fallbackTransition,F=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:R,fromState:g,toState:y,player:u,isFallbackTransition:F}),F||(dr(e,GC),u.onStart(()=>{wd(e,GC)})),u.onDone(()=>{let W=this.players.indexOf(u);W>=0&&this.players.splice(W,1);const ee=this._engine.playersByElement.get(e);if(ee){let me=ee.indexOf(u);me>=0&&ee.splice(me,1)}}),this.players.push(u),k.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Wp,!0);r.forEach(i=>{if(i[bi])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),u=new Map;if(s){const h=[];if(s.forEach((g,y)=>{if(u.set(y,g.value),this._triggers.has(y)){const E=this.trigger(e,y,ig,i);E&&h.push(E)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&ea(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const u=s.name;if(i.has(u))return;i.add(u);const g=this._triggers.get(u).fallbackTransition,y=r.get(u)||y_,E=new aw(ig),I=new KC(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:g,fromState:y,toState:E,player:I,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[bi];(!s||s===ow)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){dr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,u=this._elementListeners.get(s);u&&u.forEach(h=>{if(h.name==r.triggerName){const g=i_(s,r.triggerName,r.fromState.value,r.toState.value);g._data=e,Yv(r.player,h.phase,g,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class WC{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Px(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let u=!1,h=this.driver.getParentElement(t);for(;h;){const g=i.get(h);if(g){const y=r.indexOf(g);r.splice(y+1,0,e),u=!0;break}h=this.driver.getParentElement(h)}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(js(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!js(t))return;const s=t[bi];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),dr(e,__)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),wd(e,__))}removeNode(e,t,r,i){if(js(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[bi]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return js(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Wp,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,bC,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ea(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[bi];if(t&&t.setForRemoval){if(e[bi]=ow,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(__)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)dr(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?ea(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function cC(n){return new a.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new f_,i=[],s=new Map,u=[],h=new Map,g=new Map,y=new Map,E=new Set;this.disabledNodes.forEach(yt=>{E.add(yt);const Nt=this.driver.query(yt,".ng-animate-queued",!0);for(let Vt=0;Vt<Nt.length;Vt++)E.add(Nt[Vt])});const I=this.bodyNode,k=Array.from(this.statesByElement.keys()),R=yo(k,this.collectedEnterElements),F=new Map;let W=0;R.forEach((yt,Nt)=>{const Vt=Xv+W++;F.set(Nt,Vt),yt.forEach(gn=>dr(gn,Vt))});const ee=[],me=new Set,Me=new Set;for(let yt=0;yt<this.collectedLeaveElements.length;yt++){const Nt=this.collectedLeaveElements[yt],Vt=Nt[bi];Vt&&Vt.setForRemoval&&(ee.push(Nt),me.add(Nt),Vt.hasAnimation?this.driver.query(Nt,".ng-star-inserted",!0).forEach(gn=>me.add(gn)):Me.add(Nt))}const Ge=new Map,Le=yo(k,Array.from(me));Le.forEach((yt,Nt)=>{const Vt=o_+W++;Ge.set(Nt,Vt),yt.forEach(gn=>dr(gn,Vt))}),e.push(()=>{R.forEach((yt,Nt)=>{const Vt=F.get(Nt);yt.forEach(gn=>wd(gn,Vt))}),Le.forEach((yt,Nt)=>{const Vt=Ge.get(Nt);yt.forEach(gn=>wd(gn,Vt))}),ee.forEach(yt=>{this.processLeaveNode(yt)})});const st=[],ct=[];for(let yt=this._namespaceList.length-1;yt>=0;yt--)this._namespaceList[yt].drainQueuedTransitions(t).forEach(Vt=>{const gn=Vt.player,$i=Vt.element;if(st.push(gn),this.collectedEnterElements.length){const Es=$i[bi];if(Es&&Es.setForMove){if(Es.previousTriggersValues&&Es.previousTriggersValues.has(Vt.triggerName)){const pm=Es.previousTriggersValues.get(Vt.triggerName),nl=this.statesByElement.get(Vt.element);if(nl&&nl.has(Vt.triggerName)){const iA=nl.get(Vt.triggerName);iA.value=pm,nl.set(Vt.triggerName,iA)}}return void gn.destroy()}}const wc=!I||!this.driver.containsElement(I,$i),da=Ge.get($i),Yf=F.get($i),Rr=this._buildInstruction(Vt,r,Yf,da,wc);if(Rr.errors&&Rr.errors.length)return void ct.push(Rr);if(wc)return gn.onStart(()=>oi($i,Rr.fromStyles)),gn.onDestroy(()=>Bs($i,Rr.toStyles)),void i.push(gn);if(Vt.isFallbackTransition)return gn.onStart(()=>oi($i,Rr.fromStyles)),gn.onDestroy(()=>Bs($i,Rr.toStyles)),void i.push(gn);const S3=[];Rr.timelines.forEach(Es=>{Es.stretchStartingKeyframe=!0,this.disabledNodes.has(Es.element)||S3.push(Es)}),Rr.timelines=S3,r.append($i,Rr.timelines),u.push({instruction:Rr,player:gn,element:$i}),Rr.queriedElements.forEach(Es=>Vs(h,Es,[]).push(gn)),Rr.preStyleProps.forEach((Es,pm)=>{if(Es.size){let nl=g.get(pm);nl||g.set(pm,nl=new Set),Es.forEach((iA,FO)=>nl.add(FO))}}),Rr.postStyleProps.forEach((Es,pm)=>{let nl=y.get(pm);nl||y.set(pm,nl=new Set),Es.forEach((iA,FO)=>nl.add(FO))})});if(ct.length){const yt=[];ct.forEach(Nt=>{yt.push(function dC(n,e){return new a.vHH(3505,!1)}())}),st.forEach(Nt=>Nt.destroy()),this.reportError(yt)}const zt=new Map,_r=new Map;u.forEach(yt=>{const Nt=yt.element;r.has(Nt)&&(_r.set(Nt,Nt),this._beforeAnimationBuild(yt.player.namespaceId,yt.instruction,zt))}),i.forEach(yt=>{const Nt=yt.element;this._getPreviousPlayers(Nt,!1,yt.namespaceId,yt.triggerName,null).forEach(gn=>{Vs(zt,Nt,[]).push(gn),gn.destroy()})});const ca=ee.filter(yt=>JC(yt,g,y)),Wd=new Map;na(Wd,this.driver,Me,y,Xo).forEach(yt=>{JC(yt,g,y)&&ca.push(yt)});const mE=new Map;R.forEach((yt,Nt)=>{na(mE,this.driver,new Set(yt),g,Hv)}),ca.forEach(yt=>{const Nt=Wd.get(yt),Vt=mE.get(yt);Wd.set(yt,new Map([...Array.from(Nt?.entries()??[]),...Array.from(Vt?.entries()??[])]))});const fm=[],T3=[],I3={};u.forEach(yt=>{const{element:Nt,player:Vt,instruction:gn}=yt;if(r.has(Nt)){if(E.has(Nt))return Vt.onDestroy(()=>Bs(Nt,gn.toStyles)),Vt.disabled=!0,Vt.overrideTotalTime(gn.totalTime),void i.push(Vt);let $i=I3;if(_r.size>1){let da=Nt;const Yf=[];for(;da=da.parentNode;){const Rr=_r.get(da);if(Rr){$i=Rr;break}Yf.push(da)}Yf.forEach(Rr=>_r.set(Rr,$i))}const wc=this._buildAnimation(Vt.namespaceId,gn,zt,s,mE,Wd);if(Vt.setRealPlayer(wc),$i===I3)fm.push(Vt);else{const da=this.playersByElement.get($i);da&&da.length&&(Vt.parentPlayer=ea(da)),i.push(Vt)}}else oi(Nt,gn.fromStyles),Vt.onDestroy(()=>Bs(Nt,gn.toStyles)),T3.push(Vt),E.has(Nt)&&i.push(Vt)}),T3.forEach(yt=>{const Nt=s.get(yt.element);if(Nt&&Nt.length){const Vt=ea(Nt);yt.setRealPlayer(Vt)}}),i.forEach(yt=>{yt.parentPlayer?yt.syncPlayerEvents(yt.parentPlayer):yt.destroy()});for(let yt=0;yt<ee.length;yt++){const Nt=ee[yt],Vt=Nt[bi];if(wd(Nt,o_),Vt&&Vt.hasAnimation)continue;let gn=[];if(h.size){let wc=h.get(Nt);wc&&wc.length&&gn.push(...wc);let da=this.driver.query(Nt,bC,!0);for(let Yf=0;Yf<da.length;Yf++){let Rr=h.get(da[Yf]);Rr&&Rr.length&&gn.push(...Rr)}}const $i=gn.filter(wc=>!wc.destroyed);$i.length?YC(this,Nt,$i):this.processLeaveNode(Nt)}return ee.length=0,fm.forEach(yt=>{this.players.push(yt),yt.onDone(()=>{yt.destroy();const Nt=this.players.indexOf(yt);this.players.splice(Nt,1)}),yt.play()}),fm}elementContainsData(e,t){let r=!1;const i=t[bi];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const g=!s||s==ig;h.forEach(y=>{y.queued||!g&&y.triggerName!=i||u.push(y)})}}return(r||i)&&(u=u.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),u}_beforeAnimationBuild(e,t,r){const s=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const y=g.element,E=y!==s,I=Vs(r,y,[]);this._getPreviousPlayers(y,E,u,h,t.toState).forEach(R=>{const F=R.getRealPlayer();F.beforeDestroy&&F.beforeDestroy(),R.destroy(),I.push(R)})}oi(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,u){const h=t.triggerName,g=t.element,y=[],E=new Set,I=new Set,k=t.timelines.map(F=>{const W=F.element;E.add(W);const ee=W[bi];if(ee&&ee.removedBeforeQueried)return new Zp(F.duration,F.delay);const me=W!==g,Me=function Fx(n){const e=[];return QC(n,e),e}((r.get(W)||Mx).map(zt=>zt.getRealPlayer())).filter(zt=>!!zt.element&&zt.element===W),Ge=s.get(W),Le=u.get(W),st=Xh(0,this._normalizer,0,F.keyframes,Ge,Le),ct=this._buildPlayer(F,st,Me);if(F.subTimeline&&i&&I.add(W),me){const zt=new KC(e,h,W);zt.setRealPlayer(ct),y.push(zt)}return ct});y.forEach(F=>{Vs(this.playersByQueriedElement,F.element,[]).push(F),F.onDone(()=>function lw(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,F.element,F))}),E.forEach(F=>dr(F,wC));const R=ea(k);return R.onDestroy(()=>{E.forEach(F=>wd(F,wC)),Bs(g,t.toStyles)}),I.forEach(F=>{Vs(i,F,[]).push(R)}),R}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Zp(e.duration,e.delay)}}class KC{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Zp,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Yv(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Vs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function js(n){return n&&1===n.nodeType}function cw(n,e){const t=n.style.display;return n.style.display=e??"none",t}function na(n,e,t,r,i){const s=[];t.forEach(g=>s.push(cw(g)));const u=[];r.forEach((g,y)=>{const E=new Map;g.forEach(I=>{const k=e.computeStyle(y,I,i);E.set(I,k),(!k||0==k.length)&&(y[bi]=zC,u.push(y))}),n.set(y,E)});let h=0;return t.forEach(g=>cw(g,s[h++])),u}function yo(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const r=1,i=new Set(e),s=new Map;function u(h){if(!h)return r;let g=s.get(h);if(g)return g;const y=h.parentNode;return g=t.has(y)?y:i.has(y)?r:u(y),s.set(h,g),g}return e.forEach(h=>{const g=u(h);g!==r&&t.get(g).push(h)}),t}function dr(n,e){n.classList?.add(e)}function wd(n,e){n.classList?.remove(e)}function YC(n,e,t){ea(t).onDone(()=>n.processLeaveNode(e))}function QC(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof gs?QC(r.players,e):e.push(r)}}function JC(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class lf{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new WC(e,t,r),this._timelineEngine=new qC(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const u=e+"-"+i;let h=this._triggerCache[u];if(!h){const g=[],y=[],E=Xp(this._driver,s,g,y);if(g.length)throw function zv(n,e){return new a.vHH(3404,!1)}();h=function sw(n,e,t){return new iF(n,e,t)}(i,E,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,u]=hC(r);this._timelineEngine.command(s,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[u,h]=hC(r);return this._timelineEngine.listen(u,t,h,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Ux=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Bs(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Bs(this._element,this._initialStyles),this._endStyles&&(Bs(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(oi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(oi(this._element,this._endStyles),this._endStyles=null),Bs(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function v_(n){let e=null;return n.forEach((t,r)=>{(function Vx(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class XC{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:ew(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class eT{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return s_(e,t)}getParentElement(e){return Qv(e)}query(e,t,r){return mC(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,u=[]){const g={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(g.easing=s);const y=new Map,E=u.filter(R=>R instanceof XC);(function rf(n,e){return 0===n||0===e})(r,i)&&E.forEach(R=>{R.currentSnapshot.forEach((F,W)=>y.set(W,F))});let I=function Ex(n){return n.length?n[0]instanceof Map?n:n.map(e=>a_(e)):[]}(t).map(R=>_o(R));I=function CC(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,u)=>{r.has(u)||i.push(u),r.set(u,s)}),i.length)for(let s=1;s<e.length;s++){let u=e[s];i.forEach(h=>u.set(h,ew(n,h)))}}return e}(e,I,y);const k=function sg(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=v_(e[0]),e.length>1&&(r=v_(e[e.length-1]))):e instanceof Map&&(t=v_(e)),t||r?new Ux(n,t,r):null}(e,I);return new XC(e,I,g,k)}}let tT=(()=>{class n extends Ym{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:a.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Jm(t):t;return dw(this._renderer,null,r,"register",[i]),new w_(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.FYo),a.LFG(ie))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class w_ extends Gp{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Bx(this._id,e,t||{},this._renderer)}}class Bx{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return dw(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function dw(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const b_="@.disabled";let E_=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,u)=>{const h=u?.parentNode(s);h&&u.removeChild(h,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let E=this._rendererCache.get(s);return E||(E=new C_("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,E)),E}const u=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const g=E=>{Array.isArray(E)?E.forEach(g):this.engine.registerTrigger(u,h,t,E.name,E)};return r.data.animation.forEach(g),new nT(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,h]=s;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.FYo),a.LFG(lf),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class C_{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==b_?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class nT extends C_{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==b_?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function rT(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),u="";return"@"!=s.charAt(0)&&([s,u]=function iT(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let sT=(()=>{class n extends lf{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ie),a.LFG(Jv),a.LFG(g_),a.LFG(a.z2F))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const hw=[{provide:Ym,useClass:tT},{provide:g_,useFactory:function oT(){return new m_}},{provide:lf,useClass:sT},{provide:a.FYo,useFactory:function aT(n,e,t){return new E_(n,e,t)},deps:[Fr,lf,a.R0b]}],fw=[{provide:Jv,useFactory:()=>new eT},{provide:a.QbO,useValue:"BrowserAnimations"},...hw],lT=[{provide:Jv,useClass:yC},{provide:a.QbO,useValue:"NoopAnimations"},...hw];let jx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?lT:fw}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:fw,imports:[Oa]}),n})(),uT=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.Qsj),a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n}),n})(),bd=(()=>{class n extends uT{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();const za=new a.OlP("NgValueAccessor"),qx={provide:za,useExisting:(0,a.Gpc)(()=>Hl),multi:!0},Zx=new a.OlP("CompositionEventMode");let Hl=(()=>{class n extends uT{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Gx(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(Zx,8))},n.\u0275dir=a.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&a.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[a._Bn([qx]),a.qOj]}),n})();const zx=!1;function Xu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function pw(n){return null!=n&&"number"==typeof n.length}const Ei=new a.OlP("NgValidators"),ql=new a.OlP("NgAsyncValidators"),dT=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Gn{static min(e){return function gw(n){return e=>{if(Xu(e.value)||Xu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function mw(n){return e=>{if(Xu(e.value)||Xu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function _w(n){return Xu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function yw(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function vw(n){return Xu(n.value)||dT.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function T_(n){return e=>Xu(e.value)||!pw(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function ec(n){return e=>pw(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function hT(n){if(!n)return I_;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Xu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Yx(e)}static composeAsync(e){return pT(e)}}function I_(n){return null}function Ed(n){return null!=n}function Wx(n){const e=(0,a.QGY)(n)?(0,Ht.D)(n):n;if(zx&&!(0,a.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new a.vHH(-1101,t)}return e}function S_(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Kx(n,e){return e.map(t=>t(n))}function ww(n){return n.map(e=>function fT(n){return!n.validate}(e)?e:t=>e.validate(t))}function Yx(n){if(!n)return null;const e=n.filter(Ed);return 0==e.length?null:function(t){return S_(Kx(t,e))}}function Dt(n){return null!=n?Yx(ww(n)):null}function pT(n){if(!n)return null;const e=n.filter(Ed);return 0==e.length?null:function(t){return function $x(...n){const e=(0,Er.jO)(n),{args:t,keys:r}=Ou(n),i=new Vn.y(s=>{const{length:u}=t;if(!u)return void s.complete();const h=new Array(u);let g=u,y=u;for(let E=0;E<u;E++){let I=!1;(0,hs.Xf)(t[E]).subscribe((0,ye.x)(s,k=>{I||(I=!0,y--),h[E]=k},()=>g--,void 0,()=>{(!g||!I)&&(y||s.next(r?le(r,h):h),s.complete())}))}});return e?i.pipe(J(e)):i}(Kx(t,e).map(Wx)).pipe((0,D.U)(S_))}}function bw(n){return null!=n?pT(ww(n)):null}function gT(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Cd(n){return n._rawValidators}function mT(n){return n._rawAsyncValidators}function uf(n){return n?Array.isArray(n)?n:[n]:[]}function Td(n,e){return Array.isArray(n)?n.includes(e):n===e}function rr(n,e){const t=uf(e);return uf(n).forEach(i=>{Td(t,i)||t.push(i)}),t}function Qx(n,e){return uf(e).filter(t=>!Td(n,t))}class Ew{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Dt(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ni extends Ew{get formDirective(){return null}get path(){return null}}class tc extends Ew{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Cw{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let nc=(()=>{class n extends Cw{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(tc,2))},n.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&a.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[a.qOj]}),n})(),Id=(()=>{class n extends Cw{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Ni,10))},n.\u0275dir=a.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&a.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[a.qOj]}),n})();function _T(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const x_=!1,cf="VALID",k_="INVALID",Sd="PENDING",ug="DISABLED";function Dw(n){return(Aw(n)?n.validators:n)||null}function vT(n,e){return(Aw(e)?e.asyncValidators:n)||null}function Aw(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class wT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===cf}get invalid(){return this.status===k_}get pending(){return this.status==Sd}get disabled(){return this.status===ug}get enabled(){return this.status!==ug}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(rr(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(rr(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Qx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Qx(e,this._rawAsyncValidators))}hasValidator(e){return Td(this._rawValidators,e)}hasAsyncValidator(e){return Td(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Sd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ug,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=cf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cf||this.status===Sd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ug:cf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Sd,this._hasOwnPendingAsyncValidator=!0;const t=Wx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?ug:this.errors?k_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sd)?Sd:this._anyControlsHaveStatus(k_)?k_:cf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Aw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function dF(n){return Array.isArray(n)?Dt(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function hF(n){return Array.isArray(n)?bw(n):n||null}(this._rawAsyncValidators)}}class $s extends wT{constructor(e,t,r){super(Dw(t),vT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function cg(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new a.vHH(1002,x_?function yT(n,e){return`Must supply a value for form control ${_T(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function xw(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new a.vHH(1e3,x_?function ik(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new a.vHH(1001,x_?function sk(n,e){return`Cannot find form control ${_T(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Dd=new a.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>dg}),dg="always";function hg(n,e,t=dg){Ad(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function bT(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Rw(n,e)})}(n,e),function ck(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function uk(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Rw(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function lk(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function fg(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),M_(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function N_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ad(n,e){const t=Cd(n);null!==e.validator?n.setValidators(gT(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=mT(n);null!==e.asyncValidator?n.setAsyncValidators(gT(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();N_(e._rawValidators,i),N_(e._rawAsyncValidators,i)}function M_(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Cd(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=mT(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return N_(e._rawValidators,r),N_(e._rawAsyncValidators,r),t}function Rw(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function TT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function IT(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ot=class extends wT{constructor(e=null,t,r){super(Dw(t),vT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Aw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=IT(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){TT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){TT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){IT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Gl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=a.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const yk={provide:za,useExisting:(0,a.Gpc)(()=>gg),multi:!0};let gg=(()=>{class n extends bd{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&a.NdJ("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[a._Bn([yk]),a.qOj]}),n})(),Bw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const L_=new a.OlP("NgModelWithFormControlWarning"),Hw={provide:Ni,useExisting:(0,a.Gpc)(()=>Zl)};let Zl=(()=>{class n extends Ni{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new a.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(M_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return hg(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){fg(t.control||null,t,!1),function CT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function O_(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(fg(r||null,t),(n=>n instanceof ot)(i)&&(hg(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Nw(n,e){Ad(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function dk(n,e){return M_(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ad(this.form,this),this._oldForm&&M_(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Ei,10),a.Y36(ql,10),a.Y36(Dd,8))},n.\u0275dir=a.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&a.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[a._Bn([Hw]),a.qOj,a.TTD]}),n})();const RT={provide:tc,useExisting:(0,a.Gpc)(()=>rc)};let rc=(()=>{class n extends tc{set isDisabled(t){}constructor(t,r,i,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new a.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Pw(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Hl?t=s:function pk(n){return Object.getPrototypeOf(n.constructor)===bd}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){this._added||this._setUpControl(),function Mw(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function kw(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(a.Y36(Ni,13),a.Y36(Ei,10),a.Y36(ql,10),a.Y36(za,10),a.Y36(L_,8))},n.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[a._Bn([RT]),a.qOj,a.TTD]}),n})();const bk={provide:za,useExisting:(0,a.Gpc)(()=>ic),multi:!0};function NT(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let ic=(()=>{class n extends bd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=NT(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Ek(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&a.NdJ("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([bk]),a.qOj]}),n})(),V_=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(NT(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(ic,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const MT={provide:za,useExisting:(0,a.Gpc)(()=>Gw),multi:!0};function PT(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Gw=(()=>{class n extends bd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,u)=>{s._setSelected(i.indexOf(u.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const u=s;for(let h=0;h<u.length;h++){const y=this._getOptionValue(u[h].value);i.push(y)}}else{const u=r.options;for(let h=0;h<u.length;h++){const g=u[h];if(g.selected){const y=this._getOptionValue(g.value);i.push(y)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Ck(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&a.NdJ("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([MT]),a.qOj]}),n})(),_g=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(PT(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(PT(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(Gw,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),$T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[Bw]}),n})(),Nk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Dd,useValue:t.callSetDisabledState??dg}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[$T]}),n})(),Mk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:L_,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Dd,useValue:t.callSetDisabledState??dg}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[$T]}),n})();class $_{}class ff{}class vo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(u):this.headers.set(s,[u])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let i;if(i="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(s=>s.toString()),i.length>0){const s=t.toLowerCase();this.headers.set(s,i),this.maybeSetNormalizedName(t,s)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof vo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new vo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof vo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let u=this.headers.get(t);if(!u)return;u=u.filter(h=>-1===s.indexOf(h)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Pk{encodeKey(e){return Qw(e)}encodeValue(e){return Qw(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const ZT=/%(\d[a-f0-9])/gi,Yw={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Qw(n){return encodeURIComponent(n).replace(ZT,(e,t)=>Yw[t]??e)}function pf(n){return`${n}`}class Wa{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Pk,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function GT(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[u,h]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],g=t.get(u)||[];g.push(h),t.set(u,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(pf):[pf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Wa({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(pf(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(pf(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Jw{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function zT(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function WT(n){return typeof Blob<"u"&&n instanceof Blob}function KT(n){return typeof FormData<"u"&&n instanceof FormData}class gf{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Xw(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new vo),this.context||(this.context=new Jw),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+u}}else this.params=new Wa,this.urlWithParams=t}serializeBody(){return null===this.body?null:zT(this.body)||WT(this.body)||KT(this.body)||function Fk(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Wa?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||KT(this.body)?null:WT(this.body)?this.body.type||null:zT(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Wa?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let g=e.headers||this.headers,y=e.params||this.params;const E=e.context??this.context;return void 0!==e.setHeaders&&(g=Object.keys(e.setHeaders).reduce((I,k)=>I.set(k,e.setHeaders[k]),g)),e.setParams&&(y=Object.keys(e.setParams).reduce((I,k)=>I.set(k,e.setParams[k]),y)),new gf(t,r,s,{params:y,headers:g,context:E,reportProgress:h,responseType:i,withCredentials:u})}}var hr=(()=>((hr=hr||{})[hr.Sent=0]="Sent",hr[hr.UploadProgress=1]="UploadProgress",hr[hr.ResponseHeader=2]="ResponseHeader",hr[hr.DownloadProgress=3]="DownloadProgress",hr[hr.Response=4]="Response",hr[hr.User=5]="User",hr))();class H_{constructor(e,t=200,r="OK"){this.headers=e.headers||new vo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class e0 extends H_{constructor(e={}){super(e),this.type=hr.ResponseHeader}clone(e={}){return new e0({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class yg extends H_{constructor(e={}){super(e),this.type=hr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new yg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class t0 extends H_{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function n0(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let r0=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof gf)s=t;else{let g,y;g=i.headers instanceof vo?i.headers:new vo(i.headers),i.params&&(y=i.params instanceof Wa?i.params:new Wa({fromObject:i.params})),s=new gf(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=Ne(s).pipe(xl(g=>this.handler.handle(g)));if(t instanceof gf||"events"===i.observe)return u;const h=u.pipe(fs(g=>g instanceof yg));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,D.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return h.pipe((0,D.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return h.pipe((0,D.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return h.pipe((0,D.U)(g=>g.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Wa).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,n0(i,r))}post(t,r,i={}){return this.request("POST",t,n0(i,r))}put(t,r,i={}){return this.request("PUT",t,n0(i,r))}}return n.\u0275fac=function(t){return new(t||n)(a.LFG($_))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function s0(n,e){return e(n)}function Lk(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const Uk=new a.OlP("HTTP_INTERCEPTORS"),Qr=new a.OlP("HTTP_INTERCEPTOR_FNS");function mf(){let n=null;return(e,t)=>(null===n&&(n=((0,a.f3M)(Uk,{optional:!0})??[]).reduceRight(Lk,s0)),n(e,t))}let QT=(()=>{class n extends $_{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Qr)));this.chain=r.reduceRight((i,s)=>function YT(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(i,s,this.injector),s0)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ff),a.LFG(a.lqb))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const jk=/^\)\]\}',?\n/;let G_=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Vn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((R,F)=>i.setRequestHeader(R,F.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const R=t.detectContentTypeHeader();null!==R&&i.setRequestHeader("Content-Type",R)}if(t.responseType){const R=t.responseType.toLowerCase();i.responseType="json"!==R?R:"text"}const s=t.serializeBody();let u=null;const h=()=>{if(null!==u)return u;const R=i.statusText||"OK",F=new vo(i.getAllResponseHeaders()),W=function $k(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return u=new e0({headers:F,status:i.status,statusText:R,url:W}),u},g=()=>{let{headers:R,status:F,statusText:W,url:ee}=h(),me=null;204!==F&&(me=typeof i.response>"u"?i.responseText:i.response),0===F&&(F=me?200:0);let Me=F>=200&&F<300;if("json"===t.responseType&&"string"==typeof me){const Ge=me;me=me.replace(jk,"");try{me=""!==me?JSON.parse(me):null}catch(Le){me=Ge,Me&&(Me=!1,me={error:Le,text:me})}}Me?(r.next(new yg({body:me,headers:R,status:F,statusText:W,url:ee||void 0})),r.complete()):r.error(new t0({error:me,headers:R,status:F,statusText:W,url:ee||void 0}))},y=R=>{const{url:F}=h(),W=new t0({error:R,status:i.status||0,statusText:i.statusText||"Unknown Error",url:F||void 0});r.error(W)};let E=!1;const I=R=>{E||(r.next(h()),E=!0);let F={type:hr.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(F.total=R.total),"text"===t.responseType&&i.responseText&&(F.partialText=i.responseText),r.next(F)},k=R=>{let F={type:hr.UploadProgress,loaded:R.loaded};R.lengthComputable&&(F.total=R.total),r.next(F)};return i.addEventListener("load",g),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),t.reportProgress&&(i.addEventListener("progress",I),null!==s&&i.upload&&i.upload.addEventListener("progress",k)),i.send(s),r.next({type:hr.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",g),i.removeEventListener("timeout",y),t.reportProgress&&(i.removeEventListener("progress",I),null!==s&&i.upload&&i.upload.removeEventListener("progress",k)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(kc))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Z_=new a.OlP("XSRF_ENABLED"),vg=new a.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Hk=new a.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class l0{}let qk=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ao(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ie),a.LFG(a.Lbi),a.LFG(vg))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function nI(n,e){const t=n.url.toLowerCase();if(!(0,a.f3M)(Z_)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,a.f3M)(l0).getToken(),i=(0,a.f3M)(Hk);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Dr=(()=>((Dr=Dr||{})[Dr.Interceptors=0]="Interceptors",Dr[Dr.LegacyInterceptors=1]="LegacyInterceptors",Dr[Dr.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Dr[Dr.NoXsrfProtection=3]="NoXsrfProtection",Dr[Dr.JsonpSupport=4]="JsonpSupport",Dr[Dr.RequestsMadeViaParent=5]="RequestsMadeViaParent",Dr))();function kd(n,e){return{\u0275kind:n,\u0275providers:e}}function u0(...n){const e=[r0,G_,QT,{provide:$_,useExisting:QT},{provide:ff,useExisting:G_},{provide:Qr,useValue:nI,multi:!0},{provide:Z_,useValue:!0},{provide:l0,useClass:qk}];for(const t of n)e.push(...t.\u0275providers);return(0,a.MR2)(e)}const rI=new a.OlP("LEGACY_INTERCEPTOR_FN");let zk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[u0(kd(Dr.LegacyInterceptors,[{provide:rI,useFactory:mf},{provide:Qr,useExisting:rI,multi:!0}]))]}),n})();var z_=U(6451),W_=U(4986),iI=U(3532);function K_(n,e=S.y){return n=n??oI,(0,Sn.e)((t,r)=>{let i,s=!0;t.subscribe((0,ye.x)(r,u=>{const h=e(u);(s||!n(i,h))&&(s=!1,i=h,r.next(u))}))})}function oI(n,e){return n===e}var aI=U(6063);class Qk extends er.x{constructor(e=1/0,t=1/0,r=aI.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let h=0;for(let g=1;g<r.length&&r[g]<=u;g+=2)h=g;h&&r.splice(0,h+1)}}}var lI=U(3099);function uI(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,lI.B)({connector:()=>new Qk(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}var c0=U(5032);let _f={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const Xk=/[&<>"']/,PF=new RegExp(Xk.source,"g"),eR=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,OF=new RegExp(eR.source,"g"),Y_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tR=n=>Y_[n];function Ci(n,e){if(e){if(Xk.test(n))return n.replace(PF,tR)}else if(eR.test(n))return n.replace(OF,tR);return n}const Q_=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function d0(n){return n.replace(Q_,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const cI=/(^|[^\[])\^/g;function Mn(n,e){n="string"==typeof n?n:n.source,e=e||"";const t={replace:(r,i)=>(i=(i=i.source||i).replace(cI,"$1"),n=n.replace(r,i),t),getRegex:()=>new RegExp(n,e)};return t}const h0=/[^\w:]/g,dI=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function hI(n,e,t){if(n){let r;try{r=decodeURIComponent(d0(t)).replace(h0,"").toLowerCase()}catch{return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}e&&!dI.test(t)&&(t=function J_(n,e){f0[" "+n]||(f0[" "+n]=nR.test(n)?n+"/":p0(n,"/",!0));const t=-1===(n=f0[" "+n]).indexOf(":");return"//"===e.substring(0,2)?t?e:n.replace(rR,"$1")+e:"/"===e.charAt(0)?t?e:n.replace(iR,"$1")+e:n+e}(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const f0={},nR=/^[^:]+:\/*[^/]*$/,rR=/^([^:]+:)[\s\S]*$/,iR=/^([^:]+:\/*[^/]*)[\s\S]*$/,X_={exec:function(){}};function sR(n,e){const r=n.replace(/\|/g,(s,u,h)=>{let g=!1,y=u;for(;--y>=0&&"\\"===h[y];)g=!g;return g?"|":" |"}).split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function p0(n,e,t){const r=n.length;if(0===r)return"";let i=0;for(;i<r;){const s=n.charAt(r-i-1);if(s!==e||t){if(s===e||!t)break;i++}else i++}return n.slice(0,r-i)}function fI(n,e){if(e<1)return"";let t="";for(;e>1;)1&e&&(t+=n),e>>=1,n+=n;return t+n}function pI(n,e,t,r){const i=e.href,s=e.title?Ci(e.title):null,u=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){r.state.inLink=!0;const h={type:"link",raw:t,href:i,title:s,text:u,tokens:r.inlineTokens(u)};return r.state.inLink=!1,h}return{type:"image",raw:t,href:i,title:s,text:Ci(u)}}class g0{constructor(e){this.options=e||_f}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:p0(r,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=function LF(n,e){const t=n.match(/^(\s+)(?:```)/);if(null===t)return e;const r=t[1];return e.split("\n").map(i=>{const s=i.match(/^\s+/);if(null===s)return i;const[u]=s;return u.length>=r.length?i.slice(r.length):i}).join("\n")}(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=p0(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=t[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r,i,s,u,h,g,y,E,I,k,R,F,W=t[1].trim();const ee=W.length>1,me={type:"list",raw:"",ordered:ee,start:ee?+W.slice(0,-1):"",loose:!1,items:[]};W=ee?`\\d{1,9}\\${W.slice(-1)}`:`\\${W}`,this.options.pedantic&&(W=ee?W:"[*+-]");const Me=new RegExp(`^( {0,3}${W})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(F=!1,(t=Me.exec(e))&&!this.rules.block.hr.test(e));){if(r=t[0],e=e.substring(r.length),E=t[2].split("\n",1)[0].replace(/^\t+/,Le=>" ".repeat(3*Le.length)),I=e.split("\n",1)[0],this.options.pedantic?(u=2,R=E.trimLeft()):(u=t[2].search(/[^ ]/),u=u>4?1:u,R=E.slice(u),u+=t[1].length),g=!1,!E&&/^ *$/.test(I)&&(r+=I+"\n",e=e.substring(I.length+1),F=!0),!F){const Le=new RegExp(`^ {0,${Math.min(3,u-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),st=new RegExp(`^ {0,${Math.min(3,u-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ct=new RegExp(`^ {0,${Math.min(3,u-1)}}(?:\`\`\`|~~~)`),zt=new RegExp(`^ {0,${Math.min(3,u-1)}}#`);for(;e&&(k=e.split("\n",1)[0],I=k,this.options.pedantic&&(I=I.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(ct.test(I)||zt.test(I)||Le.test(I)||st.test(e)));){if(I.search(/[^ ]/)>=u||!I.trim())R+="\n"+I.slice(u);else{if(g||E.search(/[^ ]/)>=4||ct.test(E)||zt.test(E)||st.test(E))break;R+="\n"+I}!g&&!I.trim()&&(g=!0),r+=k+"\n",e=e.substring(k.length+1),E=I.slice(u)}}me.loose||(y?me.loose=!0:/\n *\n *$/.test(r)&&(y=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(R),i&&(s="[ ] "!==i[0],R=R.replace(/^\[[ xX]\] +/,""))),me.items.push({type:"list_item",raw:r,task:!!i,checked:s,loose:!1,text:R}),me.raw+=r}me.items[me.items.length-1].raw=r.trimRight(),me.items[me.items.length-1].text=R.trimRight(),me.raw=me.raw.trimRight();const Ge=me.items.length;for(h=0;h<Ge;h++)if(this.lexer.state.top=!1,me.items[h].tokens=this.lexer.blockTokens(me.items[h].text,[]),!me.loose){const Le=me.items[h].tokens.filter(ct=>"space"===ct.type),st=Le.length>0&&Le.some(ct=>/\n.*\n/.test(ct.raw));me.loose=st}if(me.loose)for(h=0;h<Ge;h++)me.items[h].loose=!0;return me}}html(e){const t=this.rules.block.html.exec(e);if(t){const r={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(t[0]):Ci(t[0]);r.type="paragraph",r.text=i,r.tokens=this.lexer.inline(i)}return r}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(t){const r={type:"table",header:sR(t[1]).map(i=>({text:i})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(r.header.length===r.align.length){r.raw=t[0];let s,u,h,g,i=r.align.length;for(s=0;s<i;s++)r.align[s]=/^ *-+: *$/.test(r.align[s])?"right":/^ *:-+: *$/.test(r.align[s])?"center":/^ *:-+ *$/.test(r.align[s])?"left":null;for(i=r.rows.length,s=0;s<i;s++)r.rows[s]=sR(r.rows[s],r.header.length).map(y=>({text:y}));for(i=r.header.length,u=0;u<i;u++)r.header[u].tokens=this.lexer.inline(r.header[u].text);for(i=r.rows.length,u=0;u<i;u++)for(g=r.rows[u],h=0;h<g.length;h++)g[h].tokens=this.lexer.inline(g[h].text);return r}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ci(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):Ci(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const u=p0(r.slice(0,-1),"\\");if((r.length-u.length)%2==0)return}else{const u=function FF(n,e){if(-1===n.indexOf(e[1]))return-1;const t=n.length;let r=0,i=0;for(;i<t;i++)if("\\"===n[i])i++;else if(n[i]===e[0])r++;else if(n[i]===e[1]&&(r--,r<0))return i;return-1}(t[2],"()");if(u>-1){const g=(0===t[0].indexOf("!")?5:4)+t[1].length+u;t[2]=t[2].substring(0,u),t[0]=t[0].substring(0,g).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);u&&(i=u[1],s=u[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(i=this.options.pedantic&&!/>$/.test(r)?i.slice(1):i.slice(1,-1)),pI(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return pI(r,i,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;const s=i[1]||i[2]||"";if(!s||s&&(""===r||this.rules.inline.punctuation.exec(r))){const u=i[0].length-1;let h,g,y=u,E=0;const I="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(I.lastIndex=0,t=t.slice(-1*e.length+u);null!=(i=I.exec(t));){if(h=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!h)continue;if(g=h.length,i[3]||i[4]){y+=g;continue}if((i[5]||i[6])&&u%3&&!((u+g)%3)){E+=g;continue}if(y-=g,y>0)continue;g=Math.min(g,g+y+E);const k=e.slice(0,u+i.index+(i[0].length-h.length)+g);if(Math.min(u,g)%2){const F=k.slice(1,-1);return{type:"em",raw:k,text:F,tokens:this.lexer.inlineTokens(F)}}const R=k.slice(2,-2);return{type:"strong",raw:k,text:R,tokens:this.lexer.inlineTokens(R)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=Ci(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const r=this.rules.inline.autolink.exec(e);if(r){let i,s;return"@"===r[2]?(i=Ci(this.options.mangle?t(r[1]):r[1]),s="mailto:"+i):(i=Ci(r[1]),s=i),{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}url(e,t){let r;if(r=this.rules.inline.url.exec(e)){let i,s;if("@"===r[2])i=Ci(this.options.mangle?t(r[0]):r[0]),s="mailto:"+i;else{let u;do{u=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0]}while(u!==r[0]);i=Ci(r[0]),s="www."===r[1]?"http://"+r[0]:r[0]}return{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,t){const r=this.rules.inline.text.exec(e);if(r){let i;return i=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Ci(r[0]):r[0]:Ci(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}}const xt={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:X_,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};xt.def=Mn(xt.def).replace("label",xt._label).replace("title",xt._title).getRegex(),xt.bullet=/(?:[*+-]|\d{1,9}[.)])/,xt.listItemStart=Mn(/^( *)(bull) */).replace("bull",xt.bullet).getRegex(),xt.list=Mn(xt.list).replace(/bull/g,xt.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+xt.def.source+")").getRegex(),xt._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",xt._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,xt.html=Mn(xt.html,"i").replace("comment",xt._comment).replace("tag",xt._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),xt.paragraph=Mn(xt._paragraph).replace("hr",xt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xt._tag).getRegex(),xt.blockquote=Mn(xt.blockquote).replace("paragraph",xt.paragraph).getRegex(),xt.normal={...xt},xt.gfm={...xt.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},xt.gfm.table=Mn(xt.gfm.table).replace("hr",xt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xt._tag).getRegex(),xt.gfm.paragraph=Mn(xt._paragraph).replace("hr",xt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",xt.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xt._tag).getRegex(),xt.pedantic={...xt.normal,html:Mn("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",xt._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:X_,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Mn(xt.normal._paragraph).replace("hr",xt.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",xt.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const lt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:X_,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:X_,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function UF(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function wo(n){let t,r,e="";const i=n.length;for(t=0;t<i;t++)r=n.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}lt._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",lt.punctuation=Mn(lt.punctuation).replace(/punctuation/g,lt._punctuation).getRegex(),lt.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,lt.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,lt._comment=Mn(xt._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),lt.emStrong.lDelim=Mn(lt.emStrong.lDelim).replace(/punct/g,lt._punctuation).getRegex(),lt.emStrong.rDelimAst=Mn(lt.emStrong.rDelimAst,"g").replace(/punct/g,lt._punctuation).getRegex(),lt.emStrong.rDelimUnd=Mn(lt.emStrong.rDelimUnd,"g").replace(/punct/g,lt._punctuation).getRegex(),lt._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,lt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,lt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,lt.autolink=Mn(lt.autolink).replace("scheme",lt._scheme).replace("email",lt._email).getRegex(),lt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,lt.tag=Mn(lt.tag).replace("comment",lt._comment).replace("attribute",lt._attribute).getRegex(),lt._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,lt._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,lt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,lt.link=Mn(lt.link).replace("label",lt._label).replace("href",lt._href).replace("title",lt._title).getRegex(),lt.reflink=Mn(lt.reflink).replace("label",lt._label).replace("ref",xt._label).getRegex(),lt.nolink=Mn(lt.nolink).replace("ref",xt._label).getRegex(),lt.reflinkSearch=Mn(lt.reflinkSearch,"g").replace("reflink",lt.reflink).replace("nolink",lt.nolink).getRegex(),lt.normal={...lt},lt.pedantic={...lt.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Mn(/^!?\[(label)\]\((.*?)\)/).replace("label",lt._label).getRegex(),reflink:Mn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",lt._label).getRegex()},lt.gfm={...lt.normal,escape:Mn(lt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},lt.gfm.url=Mn(lt.gfm.url,"i").replace("email",lt.gfm._extended_email).getRegex(),lt.breaks={...lt.gfm,br:Mn(lt.br).replace("{2,}","*").getRegex(),text:Mn(lt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class sc{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||_f,this.options.tokenizer=this.options.tokenizer||new g0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:xt.normal,inline:lt.normal};this.options.pedantic?(t.block=xt.pedantic,t.inline=lt.pedantic):this.options.gfm&&(t.block=xt.gfm,t.inline=this.options.breaks?lt.breaks:lt.gfm),this.tokenizer.rules=t}static get rules(){return{block:xt,inline:lt}}static lex(e,t){return new sc(t).lex(e)}static lexInline(e,t){return new sc(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let r,i,s,u;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(h,g,y)=>g+"    ".repeat(y.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(h=>!!(r=h.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),1===r.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?t.push(r):(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(i.raw+="\n"+r.raw,i.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let h=1/0;const g=e.slice(1);let y;this.options.extensions.startBlock.forEach(function(E){y=E.call({lexer:this},g),"number"==typeof y&&y>=0&&(h=Math.min(h,y))}),h<1/0&&h>=0&&(s=e.substring(0,h+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],u&&"paragraph"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),u=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&"text"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}throw new Error(h)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,h,g,y,u=e;if(this.tokens.links){const E=Object.keys(this.tokens.links);if(E.length>0)for(;null!=(h=this.tokenizer.rules.inline.reflinkSearch.exec(u));)E.includes(h[0].slice(h[0].lastIndexOf("[")+1,-1))&&(u=u.slice(0,h.index)+"["+fI("a",h[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(h=this.tokenizer.rules.inline.blockSkip.exec(u));)u=u.slice(0,h.index)+"["+fI("a",h[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(h=this.tokenizer.rules.inline.escapedEmSt.exec(u));)u=u.slice(0,h.index+h[0].length-2)+"++"+u.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(g||(y=""),g=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(E=>!!(r=E.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,u,y)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e,wo)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e,wo))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let E=1/0;const I=e.slice(1);let k;this.options.extensions.startInline.forEach(function(R){k=R.call({lexer:this},I),"number"==typeof k&&k>=0&&(E=Math.min(E,k))}),E<1/0&&E>=0&&(s=e.substring(0,E+1))}if(r=this.tokenizer.inlineText(s,UF)){e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(y=r.raw.slice(-1)),g=!0,i=t[t.length-1],i&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){const E="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(E);break}throw new Error(E)}}return t}}class Rd{constructor(e){this.options=e||_f}code(e,t,r){const i=(t||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(e,i);null!=s&&s!==e&&(r=!0,e=s)}return e=e.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+Ci(i)+'">'+(r?e:Ci(e,!0))+"</code></pre>\n":"<pre><code>"+(r?e:Ci(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,t,r,i){return this.options.headerIds?`<h${t} id="${this.options.headerPrefix+i.slug(r)}">${e}</h${t}>\n`:`<h${t}>${e}</h${t}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,r){const i=t?"ol":"ul";return"<"+i+(t&&1!==r?' start="'+r+'"':"")+">\n"+e+"</"+i+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){if(null===(e=hI(this.options.sanitize,this.options.baseUrl,e)))return r;let i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+r+"</a>",i}image(e,t,r){if(null===(e=hI(this.options.sanitize,this.options.baseUrl,e)))return r;let i=`<img src="${e}" alt="${r}"`;return t&&(i+=` title="${t}"`),i+=this.options.xhtml?"/>":">",i}text(e){return e}}class gI{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class aR{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let r=e,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[e];do{i++,r=e+"-"+i}while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=i,this.seen[r]=0),r}slug(e,t={}){const r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)}}class Jr{constructor(e){this.options=e||_f,this.options.renderer=this.options.renderer||new Rd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new gI,this.slugger=new aR}static parse(e,t){return new Jr(t).parse(e)}static parseInline(e,t){return new Jr(t).parseInline(e)}parse(e,t=!0){let i,s,u,h,g,y,E,I,k,R,F,W,ee,me,Me,Ge,Le,st,ct,r="";const zt=e.length;for(i=0;i<zt;i++)if(R=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[R.type]&&(ct=this.options.extensions.renderers[R.type].call({parser:this},R),!1!==ct||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(R.type)))r+=ct||"";else switch(R.type){case"space":continue;case"hr":r+=this.renderer.hr();continue;case"heading":r+=this.renderer.heading(this.parseInline(R.tokens),R.depth,d0(this.parseInline(R.tokens,this.textRenderer)),this.slugger);continue;case"code":r+=this.renderer.code(R.text,R.lang,R.escaped);continue;case"table":for(I="",E="",h=R.header.length,s=0;s<h;s++)E+=this.renderer.tablecell(this.parseInline(R.header[s].tokens),{header:!0,align:R.align[s]});for(I+=this.renderer.tablerow(E),k="",h=R.rows.length,s=0;s<h;s++){for(y=R.rows[s],E="",g=y.length,u=0;u<g;u++)E+=this.renderer.tablecell(this.parseInline(y[u].tokens),{header:!1,align:R.align[u]});k+=this.renderer.tablerow(E)}r+=this.renderer.table(I,k);continue;case"blockquote":k=this.parse(R.tokens),r+=this.renderer.blockquote(k);continue;case"list":for(F=R.ordered,W=R.start,ee=R.loose,h=R.items.length,k="",s=0;s<h;s++)Me=R.items[s],Ge=Me.checked,Le=Me.task,me="",Me.task&&(st=this.renderer.checkbox(Ge),ee?Me.tokens.length>0&&"paragraph"===Me.tokens[0].type?(Me.tokens[0].text=st+" "+Me.tokens[0].text,Me.tokens[0].tokens&&Me.tokens[0].tokens.length>0&&"text"===Me.tokens[0].tokens[0].type&&(Me.tokens[0].tokens[0].text=st+" "+Me.tokens[0].tokens[0].text)):Me.tokens.unshift({type:"text",text:st}):me+=st),me+=this.parse(Me.tokens,ee),k+=this.renderer.listitem(me,Le,Ge);r+=this.renderer.list(k,F,W);continue;case"html":r+=this.renderer.html(R.text);continue;case"paragraph":r+=this.renderer.paragraph(this.parseInline(R.tokens));continue;case"text":for(k=R.tokens?this.parseInline(R.tokens):R.text;i+1<zt&&"text"===e[i+1].type;)R=e[++i],k+="\n"+(R.tokens?this.parseInline(R.tokens):R.text);r+=t?this.renderer.paragraph(k):k;continue;default:{const _r='Token with "'+R.type+'" type was not found.';if(this.options.silent)return void console.error(_r);throw new Error(_r)}}return r}parseInline(e,t){t=t||this.renderer;let i,s,u,r="";const h=e.length;for(i=0;i<h;i++)if(s=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(u=this.options.extensions.renderers[s.type].call({parser:this},s),!1!==u||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)))r+=u||"";else switch(s.type){case"escape":case"text":r+=t.text(s.text);break;case"html":r+=t.html(s.text);break;case"link":r+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break;case"image":r+=t.image(s.href,s.title,s.text);break;case"strong":r+=t.strong(this.parseInline(s.tokens,t));break;case"em":r+=t.em(this.parseInline(s.tokens,t));break;case"codespan":r+=t.codespan(s.text);break;case"br":r+=t.br();break;case"del":r+=t.del(this.parseInline(s.tokens,t));break;default:{const g='Token with "'+s.type+'" type was not found.';if(this.options.silent)return void console.error(g);throw new Error(g)}}return r}}class m0{constructor(e){this.options=e||_f}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}function mI(n,e){return(t,r,i)=>{"function"==typeof r&&(i=r,r=null);const s={...r},u=function _0(n,e,t){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",n){const i="<p>An error occurred:</p><pre>"+Ci(r.message+"",!0)+"</pre>";return e?Promise.resolve(i):t?void t(null,i):i}if(e)return Promise.reject(r);if(!t)throw r;t(r)}}((r={...kt.defaults,...s}).silent,r.async,i);if(typeof t>"u"||null===t)return u(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return u(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(function oR(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(r),r.hooks&&(r.hooks.options=r),i){const h=r.highlight;let g;try{r.hooks&&(t=r.hooks.preprocess(t)),g=n(t,r)}catch(I){return u(I)}const y=function(I){let k;if(!I)try{r.walkTokens&&kt.walkTokens(g,r.walkTokens),k=e(g,r),r.hooks&&(k=r.hooks.postprocess(k))}catch(R){I=R}return r.highlight=h,I?u(I):i(null,k)};if(!h||h.length<3||(delete r.highlight,!g.length))return y();let E=0;return kt.walkTokens(g,function(I){"code"===I.type&&(E++,setTimeout(()=>{h(I.text,I.lang,function(k,R){if(k)return y(k);null!=R&&R!==I.text&&(I.text=R,I.escaped=!0),E--,0===E&&y()})},0))}),void(0===E&&y())}if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(t):t).then(h=>n(h,r)).then(h=>r.walkTokens?Promise.all(kt.walkTokens(h,r.walkTokens)).then(()=>h):h).then(h=>e(h,r)).then(h=>r.hooks?r.hooks.postprocess(h):h).catch(u);try{r.hooks&&(t=r.hooks.preprocess(t));const h=n(t,r);r.walkTokens&&kt.walkTokens(h,r.walkTokens);let g=e(h,r);return r.hooks&&(g=r.hooks.postprocess(g)),g}catch(h){return u(h)}}}function kt(n,e,t){return mI(sc.lex,Jr.parse)(n,e,t)}kt.options=kt.setOptions=function(n){return function MF(n){_f=n}(kt.defaults={...kt.defaults,...n}),kt},kt.getDefaults=function Jk(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},kt.defaults=_f,kt.use=function(...n){const e=kt.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(t=>{const r={...t};if(r.async=kt.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){const s=e.renderers[i.name];e.renderers[i.name]=s?function(...u){let h=i.renderer.apply(this,u);return!1===h&&(h=s.apply(this,u)),h}:i.renderer}if(i.tokenizer){if(!i.level||"block"!==i.level&&"inline"!==i.level)throw new Error("extension level must be 'block' or 'inline'");e[i.level]?e[i.level].unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&("block"===i.level?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:"inline"===i.level&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),t.renderer){const i=kt.defaults.renderer||new Rd;for(const s in t.renderer){const u=i[s];i[s]=(...h)=>{let g=t.renderer[s].apply(i,h);return!1===g&&(g=u.apply(i,h)),g}}r.renderer=i}if(t.tokenizer){const i=kt.defaults.tokenizer||new g0;for(const s in t.tokenizer){const u=i[s];i[s]=(...h)=>{let g=t.tokenizer[s].apply(i,h);return!1===g&&(g=u.apply(i,h)),g}}r.tokenizer=i}if(t.hooks){const i=kt.defaults.hooks||new m0;for(const s in t.hooks){const u=i[s];i[s]=m0.passThroughHooks.has(s)?h=>{if(kt.defaults.async)return Promise.resolve(t.hooks[s].call(i,h)).then(y=>u.call(i,y));const g=t.hooks[s].call(i,h);return u.call(i,g)}:(...h)=>{let g=t.hooks[s].apply(i,h);return!1===g&&(g=u.apply(i,h)),g}}r.hooks=i}if(t.walkTokens){const i=kt.defaults.walkTokens;r.walkTokens=function(s){let u=[];return u.push(t.walkTokens.call(this,s)),i&&(u=u.concat(i.call(this,s))),u}}kt.setOptions(r)})},kt.walkTokens=function(n,e){let t=[];for(const r of n)switch(t=t.concat(e.call(kt,r)),r.type){case"table":for(const i of r.header)t=t.concat(kt.walkTokens(i.tokens,e));for(const i of r.rows)for(const s of i)t=t.concat(kt.walkTokens(s.tokens,e));break;case"list":t=t.concat(kt.walkTokens(r.items,e));break;default:kt.defaults.extensions&&kt.defaults.extensions.childTokens&&kt.defaults.extensions.childTokens[r.type]?kt.defaults.extensions.childTokens[r.type].forEach(function(i){t=t.concat(kt.walkTokens(r[i],e))}):r.tokens&&(t=t.concat(kt.walkTokens(r.tokens,e)))}return t},kt.parseInline=mI(sc.lexInline,Jr.parseInline),kt.Parser=Jr,kt.parser=Jr.parse,kt.Renderer=Rd,kt.TextRenderer=gI,kt.Lexer=sc,kt.lexer=sc.lex,kt.Tokenizer=g0,kt.Slugger=aR,kt.Hooks=m0,kt.parse=kt;let Ka=(()=>{class n{constructor(){this._buttonClick$=new er.x,this.copied$=this._buttonClick$.pipe(Bn(()=>(0,z_.T)(Ne(!0),function sI(n=0,e,t=W_.P){let r=-1;return null!=e&&((0,iI.K)(e)?t=e:r=e),new Vn.y(i=>{let s=function Yk(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(3e3).pipe(_p(!1)))),K_(),uI(1)),this.copiedText$=this.copied$.pipe(Lu(!1),(0,D.U)(t=>t?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(t,r){1&t&&(a.TgZ(0,"button",0),a.NdJ("click",function(){return r.onCopyToClipboardClick()}),a.ALo(1,"async"),a._uU(2),a.ALo(3,"async"),a.qZA()),2&t&&(a.ekj("copied",a.lcZ(1,3,r.copied$)),a.xp6(2),a.Oqu(a.lcZ(3,5,r.copiedText$)))},dependencies:[zr],encapsulation:2,changeDetection:0}),n})();class yI{}class mR{}const EI=new a.OlP("SECURITY_CONTEXT");let CI=(()=>{class n{constructor(t,r,i,s,u,h){this.platform=t,this.securityContext=r,this.http=i,this.clipboardOptions=s,this.sanitizer=h,this.DEFAULT_MARKED_OPTIONS={renderer:new Rd},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new er.x,this.reload$=this._reload$.asObservable(),this.options=u}get options(){return this._options}set options(t){this._options={...this.DEFAULT_MARKED_OPTIONS,...t}}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}parse(t,r=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:i,inline:s,emoji:u,mermaid:h,disableSanitizer:g}=r,y={...this.options,...r.markedOptions};h&&(this.renderer=this.extendRenderer(y.renderer||new Rd));const E=this.trimIndentation(t),I=i?this.decodeHtml(E):E,k=u?this.parseEmoji(I):I,R=this.parseMarked(k,y,s);return(g?R:this.sanitizer.sanitize(this.securityContext,R))||""}render(t,r=this.DEFAULT_RENDER_OPTIONS,i){const{clipboard:s,clipboardOptions:u,katex:h,katexOptions:g,mermaid:y,mermaidOptions:E}=r;s&&this.renderClipboard(t,i,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...u}),h&&this.renderKatex(t,{...this.DEFAULT_KATEX_OPTIONS,...g}),y&&this.renderMermaid(t,{...this.DEFAULT_MERMAID_OPTIONS,...E}),this.highlight(t)}reload(){this._reload$.next()}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe((0,D.U)(r=>this.handleExtension(t,r)))}highlight(t){if(!No(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;t||(t=document);const r=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,i=>i.classList.add("language-none")),Prism.highlightAllUnder(t)}decodeHtml(t){if(!No(this.platform))return t;const r=document.createElement("textarea");return r.innerHTML=t,r.value}extendRenderer(t){const r=t;if(!0===r.\u0275NgxMarkdownRendererExtended)return t;const i=t.code;return t.code=function(s,u,h){return"mermaid"===u?`<div class="mermaid">${s}</div>`:i.call(this,s,u,h)},r.\u0275NgxMarkdownRendererExtended=!0,t}handleExtension(t,r){const i=t.lastIndexOf("://"),s=i>-1?t.substring(i+4):t,u=s.lastIndexOf("/"),h=u>-1?s.substring(u+1).split("?")[0]:"",g=h.lastIndexOf("."),y=g>-1?h.substring(g+1):"";return y&&"md"!==y?"```"+y+"\n"+r+"\n```":r}parseMarked(t,r,i=!1){return i?kt.parseInline(t,r):kt.parse(t,r)}parseEmoji(t){if(!No(this.platform))return t;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}renderKatex(t,r){if(No(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(t,r)}}renderClipboard(t,r,i){if(!No(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!r)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:s,buttonTemplate:u}=i,h=t.querySelectorAll("pre");for(let g=0;g<h.length;g++){const y=h.item(g),E=document.createElement("div");E.style.position="relative",y.parentNode.insertBefore(E,y),E.appendChild(y);const I=document.createElement("div");let k,R;I.style.position="absolute",I.style.top=".5em",I.style.right=".5em",I.style.opacity="0",I.style.transition="opacity 250ms ease-out",E.insertAdjacentElement("beforeend",I),y.onmouseover=()=>I.style.opacity="1",y.onmouseout=()=>I.style.opacity="0",k=s?r.createComponent(s).hostView:u?r.createEmbeddedView(u):r.createComponent(Ka).hostView,k.rootNodes.forEach(F=>{F.onmouseover=()=>I.style.opacity="1",I.appendChild(F),R=new ClipboardJS(F,{text:()=>y.innerText})}),k.onDestroy(()=>R.destroy())}}renderMermaid(t,r=this.DEFAULT_MERMAID_OPTIONS){if(!No(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const i=t.querySelectorAll(".mermaid");0!==i.length&&(mermaid.initialize(r),mermaid.init(i))}trimIndentation(t){if(!t)return"";let r;return t.split("\n").map(i=>{let s=r;return i.length>0&&(s=isNaN(s)?i.search(/\S|$/):Math.min(i.search(/\S|$/),s)),isNaN(r)&&(r=s),s?i.substring(s):i}).join("\n")}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.Lbi),a.LFG(EI),a.LFG(r0,8),a.LFG(yI,8),a.LFG(mR,8),a.LFG(_h))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),II=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[CI,t&&t.loader||[],t&&t.clipboardOptions||[],t&&t.markedOptions||[],{provide:EI,useValue:t&&null!=t.sanitize?t.sanitize:a.q3G.HTML}]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[su]}),n})();var v0;!function(n){let e;var i;let t,r;(i=e=n.SecurityLevel||(n.SecurityLevel={})).Strict="strict",i.Loose="loose",i.Antiscript="antiscript",i.Sandbox="sandbox",function(i){i.Base="base",i.Forest="forest",i.Dark="dark",i.Default="default",i.Neutral="neutral"}(t=n.Theme||(n.Theme={})),function(i){i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"}(r=n.LogLevel||(n.LogLevel={}))}(v0||(v0={}));let yf=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const w0=["toast-component",""];function TR(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"button",5),a.NdJ("click",function(){a.CHM(t);const i=a.oxw();return a.KtG(i.remove())}),a.TgZ(1,"span",6),a._uU(2,"\xd7"),a.qZA()()}}function IR(n,e){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const t=a.oxw(2);a.xp6(1),a.hij("[",t.duplicatesCount+1,"]")}}function $F(n,e){if(1&n&&(a.TgZ(0,"div"),a._uU(1),a.YNc(2,IR,2,1,"ng-container",4),a.qZA()),2&n){const t=a.oxw();a.Tol(t.options.titleClass),a.uIk("aria-label",t.title),a.xp6(1),a.hij(" ",t.title," "),a.xp6(1),a.Q6J("ngIf",t.duplicatesCount)}}function HF(n,e){if(1&n&&a._UZ(0,"div",7),2&n){const t=a.oxw();a.Tol(t.options.messageClass),a.Q6J("innerHTML",t.message,a.oJD)}}function qF(n,e){if(1&n&&(a.TgZ(0,"div",8),a._uU(1),a.qZA()),2&n){const t=a.oxw();a.Tol(t.options.messageClass),a.uIk("aria-label",t.message),a.xp6(1),a.hij(" ",t.message," ")}}function SI(n,e){if(1&n&&(a.TgZ(0,"div"),a._UZ(1,"div",9),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Udp("width",t.width+"%")}}class WF{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class xR{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class ty{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new er.x;_activate=new er.x;_manualClose=new er.x;_resetTimeout=new er.x;_countDuplicate=new er.x;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class ny{toastId;config;message;title;toastType;toastRef;_onTap=new er.x;_onAction=new er.x;constructor(e,t,r,i,s,u){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=s,this.toastRef=u,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const b0=new a.OlP("ToastConfig");class Nd extends xR{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let AI=(()=>{class n{_document=(0,a.f3M)(ie);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class E0{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let C0=(()=>{class n{_overlayContainer=(0,a.f3M)(AI);_componentFactoryResolver=(0,a.f3M)(a._Vd);_appRef=(0,a.f3M)(a.z2F);_document=(0,a.f3M)(ie);_paneElements=new Map;create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new Nd(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new E0(this._createPortalHost(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oc=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,r,i,s,u){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=u,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},s=""){return this._preBuildNotification(s,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,s){const{includeTitleDuplicates:u}=this.toastrConfig;for(const h of this.toasts)if((!u||u&&h.title===t)&&h.message===r)return h.toastRef.onDuplicate(i,s),h;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,s)):this._buildNotification(t,r,i,s)}_buildNotification(t,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");const u=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==u)return u;this.previousToastMessage=r;let h=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(h=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const g=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let y=r;r&&s.enableHtml&&(y=this.sanitizer.sanitize(a.q3G.HTML,r));const E=new ty(g),I=new ny(this.index,s,y,i,t,E),R=a.zs3.create({providers:[{provide:ny,useValue:I}],parent:this._injector}),F=new WF(s.toastComponent,R),W=g.attach(F,s.newestOnTop);E.componentInstance=W.instance;const ee={toastId:this.index,title:i||"",message:r||"",toastRef:E,onShown:E.afterActivate(),onHidden:E.afterClosed(),onTap:I.onTap(),onAction:I.onAction(),portal:W};return h||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{ee.toastRef.activate()})),this.toasts.push(ee),ee}static \u0275fac=function(r){return new(r||n)(a.LFG(b0),a.LFG(C0),a.LFG(a.zs3),a.LFG(_h),a.LFG(a.R0b))};static \u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const T0={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if("inactive"===this.state.value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(r){return new(r||n)(a.Y36(oc),a.Y36(ny),a.Y36(a.R0b))};static \u0275cmp=a.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){1&r&&a.NdJ("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),2&r&&(a.d8E("@flyInOut",i.state),a.Tol(i.toastClasses),a.Udp("display",i.displayStyle))},standalone:!0,features:[a.jDz],attrs:w0,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){1&r&&(a.YNc(0,TR,3,0,"button",0),a.YNc(1,$F,3,5,"div",1),a.YNc(2,HF,1,3,"div",2),a.YNc(3,qF,2,4,"div",3),a.YNc(4,SI,2,2,"div",4)),2&r&&(a.Q6J("ngIf",i.options.closeButton),a.xp6(1),a.Q6J("ngIf",i.title),a.xp6(1),a.Q6J("ngIf",i.message&&i.options.enableHtml),a.xp6(1),a.Q6J("ngIf",i.message&&!i.options.enableHtml),a.xp6(1),a.Q6J("ngIf",i.options.progressBar))},dependencies:[ti],encapsulation:2,data:{animation:[Qm("flyInOut",[Xm("inactive",fd({opacity:0})),Xm("active",fd({opacity:1})),Xm("removed",fd({opacity:0})),iC("inactive => active",$v("{{ easeTime }}ms {{ easing }}")),iC("active => removed",$v("{{ easeTime }}ms {{ easing }}"))])]}})}return n})()},ry=(n={})=>(0,a.MR2)([{provide:b0,useValue:{default:T0,config:n}}]);let KF=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[ry(t)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=a.oAB({type:n});static \u0275inj=a.cJS({})}return n})(),Md=(()=>{class n{constructor(){}add(t,r){localStorage.setItem(t,JSON.stringify(r))}update(t,r){localStorage.getItem(t)&&this.delete(t),this.add(t,r)}get(t){const r=localStorage.getItem(t);return r?JSON.parse(r):null}getLoggedAccount(){return this.get("logged_account")}delete(t){localStorage.removeItem(t)}clear(){localStorage.clear()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function RR(n,e){1&n&&(a.TgZ(0,"small",22),a._uU(1," Please enter email address.! "),a.qZA())}function NR(n,e){1&n&&(a.TgZ(0,"small",22),a._uU(1," Email address not well formed.! "),a.qZA())}let MR=(()=>{class n{constructor(t,r,i,s){this.accountInteractor=t,this.router=r,this.toastr=i,this.localStorageService=s,this.loginForm=new $s({email:new ot("",[Gn.required,Gn.email]),password:new ot("",[Gn.required])})}ngOnInit(){this.localStorageService.clear()}onSubmit(){this.loginForm.valid?this.accountInteractor.login({username:this.loginForm.value.email,password:this.loginForm.value.password}).subscribe({next:t=>{t&&t.success?(this.localStorageService.add("logged_account",t.data),this.router.navigate(["/dashboard"])):this.toastr.error("Account not found","Error")},error:t=>{this.toastr.error(t.message(),"Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}static#e=this.\u0275fac=function(r){return new(r||n)(a.Y36(yf),a.Y36(cr),a.Y36(oc),a.Y36(Md))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-login"]],decls:34,vars:4,consts:[[1,"main-wrapper","account-wrapper"],[1,"account-page"],[1,"account-center"],[1,"account-box"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],[1,"account-logo"],["href",""],["src","assets/images/logo.png","alt",""],[1,"form-group"],["for","loginUsername"],["type","email","formControlName","email","placeholder","Enter email","id","loginUsername",1,"form-control"],["class","form-text text-muted",4,"ngIf"],["for","loginPassword"],["type","password","formControlName","password","placeholder","Password","id","loginPassword",1,"form-control"],[1,"form-group","text-right"],[1,"form-group","text-center"],["type","submit",1,"btn","btn-primary","account-btn",2,"background-color","#042c44","color","#fcbc1f",3,"disabled"],[1,"text-center","register-link"],[1,"m-t-50"],["width","50","src","assets/images/akkodis.png","alt","akkodis",1,""],[2,"font-size","xx-small"],[1,"text-danger"],[1,"form-text","text-muted"]],template:function(r,i){1&r&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(5,"div",5)(6,"a",6),a._UZ(7,"img",7),a.qZA()(),a.TgZ(8,"div",8)(9,"label",9),a._uU(10,"Email"),a.qZA(),a._UZ(11,"input",10),a.YNc(12,RR,2,0,"small",11),a.YNc(13,NR,2,0,"small",11),a.qZA(),a.TgZ(14,"div",8)(15,"label",12),a._uU(16,"Password"),a.qZA(),a._UZ(17,"input",13),a.qZA(),a.TgZ(18,"div",14)(19,"a",6),a._uU(20,"Forgot your password?"),a.qZA()(),a.TgZ(21,"div",15)(22,"button",16),a._uU(23," Login "),a.qZA()(),a.TgZ(24,"div",17),a._uU(25," Don\u2019t have an account? "),a.TgZ(26,"a",6),a._uU(27,"Register Now"),a.qZA()(),a.TgZ(28,"div",18),a._UZ(29,"img",19),a.TgZ(30,"span",20),a._uU(31,"Version : "),a.TgZ(32,"b",21),a._uU(33," 0.1.0"),a.qZA()()()()()()()()),2&r&&(a.xp6(4),a.Q6J("formGroup",i.loginForm),a.xp6(8),a.Q6J("ngIf",i.loginForm.controls.email.touched&&(null==i.loginForm.controls.email.errors?null:i.loginForm.controls.email.errors.required)),a.xp6(1),a.Q6J("ngIf",i.loginForm.controls.email.touched&&(null==i.loginForm.controls.email.errors?null:i.loginForm.controls.email.errors.email)),a.xp6(9),a.Q6J("disabled",!i.loginForm.valid))},dependencies:[ti,Gl,Hl,nc,Id,Zl,rc],encapsulation:2})}return n})(),kI=(()=>{class n{constructor(t,r){this.localStorageService=t,this.router=r,this.showSideBar=!0,this.loggedAccount=t.getLoggedAccount()}onClickBars(){this.showSideBar=!this.showSideBar}onClickLogo(){this.router.navigate(["dashboard"])}static#e=this.\u0275fac=function(r){return new(r||n)(a.Y36(Md),a.Y36(cr))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-header"]],decls:17,vars:2,consts:[[1,"header"],[1,"header-left"],[1,"logo","pointer",3,"click"],["src","assets/images/logo.png","width","35","height","35","alt",""],["id","toggle_btn","href","javascript:void(0);",3,"click"],[1,"fa","fa-bars"],["id","mobile_btn","href","#sidebar",1,"mobile_btn","float-left"],[1,"nav","user-menu","float-right"],[1,"nav-item","dropdown"],["href","#","data-toggle","dropdown",1,"dropdown-toggle","nav-link","user-link"],[1,"user-img"],["src","assets/images/user.jpg","width","24","alt","Admin",1,"rounded-circle"]],template:function(r,i){1&r&&(a.TgZ(0,"div",0)(1,"div",1)(2,"a",2),a.NdJ("click",function(){return i.onClickLogo()}),a._UZ(3,"img",3),a.TgZ(4,"span"),a._uU(5,"EstiMate"),a.qZA()()(),a.TgZ(6,"a",4),a.NdJ("click",function(){return i.onClickBars()}),a._UZ(7,"i",5),a.qZA(),a.TgZ(8,"a",6),a._UZ(9,"i",5),a.qZA(),a.TgZ(10,"ul",7)(11,"li",8)(12,"a",9)(13,"span",10),a._UZ(14,"img",11),a.qZA(),a.TgZ(15,"span"),a._uU(16),a.qZA()()()()()),2&r&&(a.xp6(16),a.AsE("",i.loggedAccount.firstname," ",i.loggedAccount.lastname,""))}})}return n})(),RI=(()=>{class n{constructor(t,r){this.router=t,this.localStorageService=r,this.menu="dashboard"}onClickMenu(t){this.menu=t,this.router.navigate([t])}onClickSignOut(){this.localStorageService.clear(),this.router.navigate(["login"])}static#e=this.\u0275fac=function(r){return new(r||n)(a.Y36(cr),a.Y36(Md))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-sidebar"]],decls:36,vars:4,consts:[["id","sidebar",1,"sidebar"],[1,"sidebar-inner","slimscroll"],["id","sidebar-menu",1,"sidebar-menu"],[1,"menu-title"],[1,"pointer",3,"ngClass"],[3,"click"],[1,"fa","fa-dashboard"],[1,"fa","fa-user-md"],[1,"fa","fa-users"],[1,"fa","fa-cog"],[1,"pointer",2,"background-color","yellow"],[1,"fa","fa-sign-out"],[1,"pointer","m-3"],["width","50","src","assets/images/akkodis.png","alt","akkodis",1,""],[2,"font-size","xx-small"],[1,"text-danger"]],template:function(r,i){1&r&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul"),a._UZ(4,"li",3),a.TgZ(5,"li",4)(6,"a",5),a.NdJ("click",function(){return i.onClickMenu("dashboard")}),a._UZ(7,"i",6),a.TgZ(8,"span"),a._uU(9,"Projects"),a.qZA()()(),a.TgZ(10,"li",4)(11,"a",5),a.NdJ("click",function(){return i.onClickMenu("clients")}),a._UZ(12,"i",7),a.TgZ(13,"span"),a._uU(14,"Clients"),a.qZA()()(),a.TgZ(15,"li",4)(16,"a",5),a.NdJ("click",function(){return i.onClickMenu("accounts")}),a._UZ(17,"i",8),a.TgZ(18,"span"),a._uU(19,"Accounts"),a.qZA()()(),a.TgZ(20,"li",4)(21,"a",5),a.NdJ("click",function(){return i.onClickMenu("settings")}),a._UZ(22,"i",9),a.TgZ(23,"span"),a._uU(24,"Settings"),a.qZA()()(),a.TgZ(25,"li",10)(26,"a",5),a.NdJ("click",function(){return i.onClickSignOut()}),a._UZ(27,"i",11),a.TgZ(28,"span"),a._uU(29,"Sign out"),a.qZA()()(),a.TgZ(30,"li",12),a._UZ(31,"img",13),a.TgZ(32,"span",14),a._uU(33,"Version : "),a.TgZ(34,"b",15),a._uU(35," 0.1.0"),a.qZA()()()()()()()),2&r&&(a.xp6(5),a.Q6J("ngClass","dashboard"==i.menu?"active":""),a.xp6(5),a.Q6J("ngClass","clients"==i.menu?"active":""),a.xp6(5),a.Q6J("ngClass","accounts"==i.menu?"active":""),a.xp6(5),a.Q6J("ngClass","settings"==i.menu?"active":""))},dependencies:[Ft]})}return n})(),NI=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-auth"]],decls:6,vars:0,consts:[[1,"page-wrapper","sm-responsive"],[1,"content"]],template:function(r,i){1&r&&(a.TgZ(0,"div"),a._UZ(1,"app-header")(2,"app-sidebar"),a.TgZ(3,"div",0)(4,"div",1),a._UZ(5,"router-outlet"),a.qZA()()())},dependencies:[Vm,kI,RI]})}return n})();const MI={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let bg;const I0=new Uint8Array(16);function QF(){if(!bg&&(bg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!bg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return bg(I0)}const ai=[];for(let n=0;n<256;++n)ai.push((n+256).toString(16).slice(1));const sy=function eL(n,e,t){if(MI.randomUUID&&!e&&!n)return MI.randomUUID();const r=(n=n||{}).random||(n.rng||QF)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return function iy(n,e=0){return ai[n[e+0]]+ai[n[e+1]]+ai[n[e+2]]+ai[n[e+3]]+"-"+ai[n[e+4]]+ai[n[e+5]]+"-"+ai[n[e+6]]+ai[n[e+7]]+"-"+ai[n[e+8]]+ai[n[e+9]]+"-"+ai[n[e+10]]+ai[n[e+11]]+ai[n[e+12]]+ai[n[e+13]]+ai[n[e+14]]+ai[n[e+15]]}(r)};let PI=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class vf{constructor(e,t,r){this.success=e,this.message=t,this.data=r}}class wf{toEntities(e){return e.map(t=>this.toEntity(t))}fromEntities(e){return e.map(t=>this.fromEntity(t))}toResponse(e){return e?new vf(!0,"",this.fromEntity(e)):new vf(!1,"Not found",{})}toFirstResponse(e){return e&&e.length>0?new vf(!0,"",this.fromEntity(e[0])):new vf(!1,"Not found",{})}toResponses(e){return e&&e.length>0?new vf(!0,"",this.fromEntities(e)):new vf(!1,"Not found",[])}}class tL extends wf{toEntity(e){return{id:e.id,createdAt:e.createdAt,updatedAt:new Date,deleted:!1,title:e.title,duration:e.duration,description:e.description,margin:e.margin,client:e.client,riskProvision:e.riskProvision}}fromEntity(e){return{id:e.id,createdAt:e.createdAt,title:e.title,duration:e.duration,description:e.description,margin:e.margin,client:e.client,riskProvision:e.riskProvision}}fromRequest(e){return{updatedAt:new Date,deleted:!1,title:e.title,duration:e.duration,description:e.description,margin:e.margin,client:e.client,riskProvision:e.riskProvision}}}class Eg{}let OI=(()=>{class n extends Eg{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(n)))(i||n)}}();static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FI=(()=>{class n{constructor(t){this.repository=t}execute(t){return this.repository.create(t)}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(OI))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),S0=(()=>{class n{constructor(t){this.repository=t}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(OI))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LI=(()=>{class n extends PI{constructor(t,r){super(),this.createProjectUseCase=t,this.fetchProjectsUseCase=r,this.mapper=new tL}create(t){let r=this.mapper.fromRequest(t);return r.id=sy(),r.createdAt=new Date,this.createProjectUseCase.execute(r).pipe((0,D.U)(i=>this.mapper.toResponse(i)))}delete(t){return Ne()}fetchAll(){return this.fetchProjectsUseCase.execute().pipe((0,D.U)(t=>this.mapper.toResponses(t)))}fetchOne(t){return Ne()}update(t,r){return Ne()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(FI),a.LFG(S0))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),D0=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nL(n,e){if(1&n&&(a.TgZ(0,"b"),a._uU(1),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Oqu(t.projects.length)}}function rL(n,e){1&n&&a._UZ(0,"option",46),2&n&&a.Q6J("value",e.$implicit.companyName)}function iL(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"img",47),a.NdJ("click",function(){a.CHM(t);const i=a.oxw();return a.KtG(i.onSubmit())}),a.qZA()}}function sL(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"tr",48),a.NdJ("click",function(){const s=a.CHM(t).$implicit,u=a.oxw();return a.KtG(u.onClickAddResources(s))}),a.TgZ(1,"td",48),a.NdJ("click",function(){const s=a.CHM(t).$implicit,u=a.oxw();return a.KtG(u.onClickProject(s))}),a.TgZ(2,"h2"),a._uU(3),a.qZA()(),a.TgZ(4,"td",48),a.NdJ("click",function(){const s=a.CHM(t).$implicit,u=a.oxw();return a.KtG(u.onClickProject(s))}),a._uU(5),a.qZA(),a.TgZ(6,"td",48),a.NdJ("click",function(){const s=a.CHM(t).$implicit,u=a.oxw();return a.KtG(u.onClickProject(s))}),a._uU(7),a.qZA(),a.TgZ(8,"td",48),a.NdJ("click",function(){const s=a.CHM(t).$implicit,u=a.oxw();return a.KtG(u.onClickProject(s))}),a._uU(9),a.qZA(),a.TgZ(10,"td"),a._UZ(11,"img",49)(12,"img",50),a.qZA()()}if(2&n){const t=e.$implicit,r=a.oxw();let i;a.xp6(3),a.Oqu(t.title),a.xp6(2),a.Oqu(null==(i=r.getClient(t.client))?null:i.companyName),a.xp6(2),a.Oqu(t.duration),a.xp6(2),a.Oqu(t.description)}}function o(n,e){1&n&&(a.TgZ(0,"small",51),a._uU(1," Please enter the title of the project. "),a.qZA())}function l(n,e){if(1&n&&(a.TgZ(0,"option",52),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t.id),a.xp6(1),a.Oqu(t.companyName)}}let c=(()=>{class n{constructor(t,r,i,s,u){this.projectInteractor=t,this.clientInteractor=r,this.localStorageService=i,this.router=s,this.toastr=u,this.projects=[],this.clients=[],this.options=["aaa","bbb","eee"],this.projectForm=new $s({title:new ot("",[Gn.required]),client:new ot("",[Gn.required]),description:new ot(""),duration:new ot("")})}ngOnInit(){this.fetchClients(),this.fetchProjects()}fetchClients(){this.clientInteractor.fetchAll().subscribe({next:t=>{t&&t.success&&(this.clients=t.data)},error:t=>{},complete:()=>{}})}fetchProjects(){this.projectInteractor.fetchAll().subscribe({next:t=>{t&&t.success&&(this.projects=t.data)},error:t=>{},complete:()=>{}})}getClient(t){return this.clients.find(r=>r.id===t)}getClientByCompanyName(t){return this.clients.find(r=>r.companyName===t)}onSubmit(){if(this.projectForm.valid){let t={title:this.projectForm.value.title,duration:this.projectForm.value.duration,description:this.projectForm.value.description,client:this.projectForm.value.client,margin:18},r=this.getClientByCompanyName(t.client);r?(t.client=r.id,this.saveProject(t)):this.saveClient({companyName:t.client,email:"",address:"",phoneNumber:"",logo:""},t)}else this.toastr.error("Some inputs are incorrect","Error")}saveProject(t){this.projectInteractor.create(t).subscribe({next:r=>{this.toastr.success("project successfully saved","Success"),this.projectForm.reset(),this.fetchProjects()},error:r=>{this.toastr.error("Error occurred while saving the project","Error")},complete:()=>{}})}saveClient(t,r){this.clientInteractor.create(t).subscribe({next:i=>{r.client=i.data?.id,this.saveProject(r)},error:i=>{this.toastr.error("Error occurred while saving the client","Error")},complete:()=>{}})}onClickProject(t){this.projectForm.setValue({title:t.title,duration:t.duration,description:t.description,client:t.client})}onClickAddResources(t){this.localStorageService.add("project",t),this.router.navigate(["/resources"])}static#e=this.\u0275fac=function(r){return new(r||n)(a.Y36(LI),a.Y36(D0),a.Y36(Md),a.Y36(cr),a.Y36(oc))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-dashboard"]],decls:90,vars:12,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],[4,"ngIf"],["href","","data-bs-toggle","modal","data-bs-target","#addProjectModal",1,"btn","btn-outline-primary","float-right"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],[1,"text-right"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["type","text","formControlName","title","placeholder","Title of the project","id","title"],["autocomplete","off","autofocus","","formControlName","client","placeholder","Select client","list","options"],["id","options"],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","duration","placeholder","Duration","id","duration"],["type","text","formControlName","description","placeholder","Description","id","description"],["class","aspect-square","src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["id","addProjectModal","tabindex","-1","aria-labelledby","addProjectModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","addProjectModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","row"],[1,"col-12"],[1,"form-group"],["for","projectTitle"],["type","text","formControlName","title","placeholder","Title","id","projectTitle",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],[1,"col-9"],["for","projectClient"],["formControlName","client","id","projectClient",1,"form-control"],["value","","disabled",""],["style","color: black;",3,"ngValue",4,"ngFor","ngForOf"],[1,"col-3"],["for","projectDuration"],["type","number","formControlName","duration","placeholder","Duration","id","projectDuration",1,"form-control"],["for","projectDescription"],["id","projectDescription","name","w3review","formControlName","description","rows","4","placeholder","description of the project",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],[3,"value"],["src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],[3,"click"],["src","assets/images/duplicate.png","alt","duplicate","data-bs-toggle","tooltip","data-bs-placement","top","title","duplicate",1,"aspect-square","action"],["src","assets/images/delete.png","alt","delete","data-bs-toggle","tooltip","data-bs-placement","top","title","delete",1,"aspect-square","action"],[1,"form-text","text-muted","text-danger"],[2,"color","black",3,"ngValue"]],template:function(r,i){1&r&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),a.YNc(5,nL,2,1,"b",5),a._uU(6," Projects"),a.qZA(),a.TgZ(7,"a",6),a._uU(8,"Add"),a.qZA()(),a.TgZ(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead")(13,"tr")(14,"th"),a._uU(15,"Title"),a.TgZ(16,"span",10),a._uU(17,"*"),a.qZA()(),a.TgZ(18,"th"),a._uU(19,"Client"),a.TgZ(20,"span",10),a._uU(21,"*"),a.qZA()(),a.TgZ(22,"th"),a._uU(23,"Duration (months)"),a.qZA(),a.TgZ(24,"th"),a._uU(25,"Description"),a.qZA(),a.TgZ(26,"th",11),a._uU(27,"Actions"),a.qZA()()(),a.TgZ(28,"tbody")(29,"tr")(30,"td")(31,"form",12),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(32,"input",13),a.qZA()(),a.TgZ(33,"td")(34,"form",12),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(35,"input",14),a.TgZ(36,"datalist",15),a.YNc(37,rL,1,1,"option",16),a.qZA()()(),a.TgZ(38,"td")(39,"form",12),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(40,"input",17),a.qZA()(),a.TgZ(41,"td")(42,"form",12),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(43,"input",18),a.qZA()(),a.TgZ(44,"td"),a.YNc(45,iL,1,0,"img",19),a.qZA()(),a.YNc(46,sL,13,4,"tr",20),a.qZA()()()()()()(),a.TgZ(47,"div",21)(48,"div",22)(49,"div",23)(50,"div",24)(51,"h1",25),a._uU(52,"Add new project"),a.qZA(),a._UZ(53,"button",26),a.qZA(),a.TgZ(54,"form",12),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(55,"div",27)(56,"div",28)(57,"div",29)(58,"label",30),a._uU(59,"Title"),a.TgZ(60,"span",10),a._uU(61,"*"),a.qZA()(),a._UZ(62,"input",31),a.YNc(63,o,2,0,"small",32),a.qZA()(),a.TgZ(64,"div",33)(65,"div",29)(66,"label",34),a._uU(67,"Client"),a.TgZ(68,"span",10),a._uU(69,"*"),a.qZA()(),a._UZ(70,"br"),a.TgZ(71,"select",35)(72,"option",36),a._uU(73,"Select client"),a.qZA(),a.YNc(74,l,2,2,"option",37),a.qZA()()(),a.TgZ(75,"div",38)(76,"div",29)(77,"label",39),a._uU(78,"Duration (months)"),a.qZA(),a._UZ(79,"input",40),a.qZA()(),a.TgZ(80,"div",28)(81,"label",41),a._uU(82,"Description"),a.qZA(),a.TgZ(83,"textarea",42),a._uU(84,"                        "),a.qZA()()()(),a.TgZ(85,"div",43)(86,"button",44),a._uU(87,"Close"),a.qZA(),a.TgZ(88,"button",45),a.NdJ("click",function(){return i.onSubmit()}),a._uU(89,"Save "),a.qZA()()()()()),2&r&&(a.xp6(5),a.Q6J("ngIf",i.projects),a.xp6(26),a.Q6J("formGroup",i.projectForm),a.xp6(3),a.Q6J("formGroup",i.projectForm),a.xp6(3),a.Q6J("ngForOf",i.clients),a.xp6(2),a.Q6J("formGroup",i.projectForm),a.xp6(3),a.Q6J("formGroup",i.projectForm),a.xp6(3),a.Q6J("ngIf",i.projectForm.valid),a.xp6(1),a.Q6J("ngForOf",i.projects),a.xp6(8),a.Q6J("formGroup",i.projectForm),a.xp6(9),a.Q6J("ngIf",i.projectForm.controls.title.touched&&(null==i.projectForm.controls.title.errors?null:i.projectForm.controls.title.errors.required)),a.xp6(11),a.Q6J("ngForOf",i.clients),a.xp6(14),a.Q6J("disabled",!i.projectForm.valid))},dependencies:[Gr,ti,Gl,V_,_g,Hl,gg,ic,nc,Id,Zl,rc],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})(),d=(()=>{class n{constructor(t){this.router=t}canActivate(t){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(cr))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function f(n,e){if(1&n&&(a.TgZ(0,"b"),a._uU(1),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Oqu(t.clients.length)}}function m(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"img",40),a.NdJ("click",function(){a.CHM(t);const i=a.oxw();return a.KtG(i.onSubmit())}),a.qZA()}}function w(n,e){if(1&n&&(a.TgZ(0,"tr")(1,"td")(2,"div",0)(3,"div",41),a._UZ(4,"img",42),a.qZA(),a.TgZ(5,"div",25)(6,"h2"),a._uU(7),a.qZA()()()(),a.TgZ(8,"td"),a._uU(9),a.qZA(),a.TgZ(10,"td"),a._uU(11),a.qZA(),a.TgZ(12,"td"),a._uU(13),a.qZA(),a.TgZ(14,"td"),a._UZ(15,"img",43),a.qZA()()),2&n){const t=e.$implicit;a.xp6(7),a.Oqu(t.companyName),a.xp6(2),a.Oqu(t.email),a.xp6(2),a.Oqu(t.phoneNumber),a.xp6(2),a.Oqu(t.address)}}function C(n,e){1&n&&(a.TgZ(0,"small",44),a._uU(1," Please enter company name.! "),a.qZA())}let T=(()=>{class n{constructor(t,r,i,s){this.clientInteractor=t,this.router=r,this.toastr=i,this.localStorageService=s,this.clients=[],this.clientForm=new $s({companyName:new ot("",[Gn.required]),email:new ot(""),address:new ot(""),phoneNumber:new ot("")})}ngOnInit(){this.fetchClients()}fetchClients(){this.clientInteractor.fetchAll().subscribe({next:t=>{t&&t.success&&(this.clients=t.data)},error:t=>{},complete:()=>{}})}onSubmit(){this.clientForm.valid?this.clientInteractor.create({companyName:this.clientForm.value.companyName,email:this.clientForm.value.email,address:this.clientForm.value.address,phoneNumber:this.clientForm.value.phoneNumber,logo:""}).subscribe({next:r=>{this.toastr.success("client successfully saved","Success"),this.fetchClients()},error:r=>{this.toastr.error("Error occurred while saving the client","Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}static#e=this.\u0275fac=function(r){return new(r||n)(a.Y36(D0),a.Y36(cr),a.Y36(oc),a.Y36(Md))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-clients"]],decls:79,vars:10,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],[4,"ngIf"],["href","","data-bs-toggle","modal","data-bs-target","#addClientModal",1,"btn","btn-outline-primary","float-right"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["type","text","formControlName","companyName","placeholder","Company name","id","companyName"],["type","text","formControlName","email","placeholder","Email","id","email"],["type","tel","formControlName","phoneNumber","placeholder","Phone number","id","phoneNumber"],["type","text","formControlName","address","placeholder","Address","id","address"],["class","aspect-square","src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["id","addClientModal","tabindex","-1","aria-labelledby","addClientModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","addClientModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","row"],[1,"col"],[1,"form-group"],["for","clientCompanyName"],["type","companyName","formControlName","companyName","placeholder","Company name","id","clientCompanyName",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],["src","assets/images/user.jpg"],["for","clientEmail"],["type","email","formControlName","email","placeholder","Email","id","clientEmail",1,"form-control"],["for","clientPhoneNumber"],["type","tel","formControlName","phoneNumber","placeholder","Phone number","id","clientPhoneNumber",1,"form-control"],["for","clientAddress"],["type","tel","formControlName","address","placeholder","Address","id","clientAddress",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],[1,"col-5","col-sm-5","col-md-4","col-lg-3","col-xl-3"],["width","28","height","28","src","assets/images/user.jpg","alt","",1,"aspect-square"],["src","assets/images/delete.png","alt","delete",1,"aspect-square","action"],[1,"form-text","text-muted","text-danger"]],template:function(r,i){1&r&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),a.YNc(5,f,2,1,"b",5),a._uU(6," Clients "),a.qZA(),a.TgZ(7,"a",6),a._uU(8,"Add"),a.qZA()(),a.TgZ(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead")(13,"tr")(14,"th"),a._uU(15,"Company name"),a.TgZ(16,"span",10),a._uU(17,"*"),a.qZA()(),a.TgZ(18,"th"),a._uU(19,"Email"),a.qZA(),a.TgZ(20,"th"),a._uU(21,"Phone number"),a.qZA(),a.TgZ(22,"th"),a._uU(23,"Address"),a.qZA(),a._UZ(24,"th"),a.qZA()(),a.TgZ(25,"tbody")(26,"tr")(27,"td")(28,"form",11),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(29,"input",12),a.qZA()(),a.TgZ(30,"td")(31,"form",11),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(32,"input",13),a.qZA()(),a.TgZ(33,"td")(34,"form",11),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(35,"input",14),a.qZA()(),a.TgZ(36,"td")(37,"form",11),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(38,"input",15),a.qZA()(),a.TgZ(39,"td"),a.YNc(40,m,1,0,"img",16),a.qZA()(),a.YNc(41,w,16,4,"tr",17),a.qZA()()()()()()(),a.TgZ(42,"div",18)(43,"div",19)(44,"div",20)(45,"div",21)(46,"h1",22),a._uU(47,"Add new client"),a.qZA(),a._UZ(48,"button",23),a.qZA(),a.TgZ(49,"form",11),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(50,"div",24)(51,"div",25)(52,"div",26)(53,"label",27),a._uU(54,"Company name"),a.TgZ(55,"span",10),a._uU(56,"*"),a.qZA()(),a._UZ(57,"input",28),a.YNc(58,C,2,0,"small",29),a.qZA(),a.TgZ(59,"div"),a._UZ(60,"img",30),a.qZA()(),a.TgZ(61,"div",25)(62,"div",26)(63,"label",31),a._uU(64,"Email"),a.qZA(),a._UZ(65,"input",32),a.qZA(),a.TgZ(66,"div",26)(67,"label",33),a._uU(68,"Phone number"),a.qZA(),a._UZ(69,"input",34),a.qZA(),a.TgZ(70,"div",26)(71,"label",35),a._uU(72,"Address"),a.qZA(),a._UZ(73,"input",36),a.qZA()()()(),a.TgZ(74,"div",37)(75,"button",38),a._uU(76,"Close"),a.qZA(),a.TgZ(77,"button",39),a.NdJ("click",function(){return i.onSubmit()}),a._uU(78,"Save "),a.qZA()()()()()),2&r&&(a.xp6(5),a.Q6J("ngIf",i.clients),a.xp6(23),a.Q6J("formGroup",i.clientForm),a.xp6(3),a.Q6J("formGroup",i.clientForm),a.xp6(3),a.Q6J("formGroup",i.clientForm),a.xp6(3),a.Q6J("formGroup",i.clientForm),a.xp6(3),a.Q6J("ngIf",i.clientForm.valid),a.xp6(1),a.Q6J("ngForOf",i.clients),a.xp6(8),a.Q6J("formGroup",i.clientForm),a.xp6(9),a.Q6J("ngIf",i.clientForm.controls.companyName.touched&&(null==i.clientForm.controls.companyName.errors?null:i.clientForm.controls.companyName.errors.required)),a.xp6(19),a.Q6J("disabled",!i.clientForm.valid))},dependencies:[Gr,ti,Gl,Hl,nc,Id,Zl,rc],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})();var A=(()=>{return(n=A||(A={})).AED="AED",n.USD="USD",n.EUR="EUR",A;var n})();let M=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class V extends wf{toEntity(e){return{id:e.id,createdAt:e.createdAt,updatedAt:new Date,deleted:!1,currency1:e.currency1,currency2:e.currency2,rate:e.rate,code:e.currency1+e.currency2}}fromEntity(e){return{id:e.id,createdAt:e.createdAt,currency1:e.currency1,currency2:e.currency2,rate:e.rate}}fromRequest(e){return{updatedAt:new Date,deleted:!1,currency1:e.currency1,currency2:e.currency2,rate:e.rate,code:e.currency1+e.currency2}}}let Y=(()=>{class n extends Eg{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(n)))(i||n)}}();static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ne=(()=>{class n{constructor(t){this.repository=t}execute(t){return this.repository.create(t)}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(Y))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ee=(()=>{class n{constructor(t){this.repository=t}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(Y))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),He=(()=>{class n extends M{constructor(t,r){super(),this.createCurrencyExchangeUseCase=t,this.fetchCurrencyExchangesUseCase=r,this.mapper=new V}create(t){let r=this.mapper.fromRequest(t);return r.id=sy(),r.createdAt=new Date,this.createCurrencyExchangeUseCase.execute(r).pipe((0,D.U)(i=>this.mapper.toResponse(i)))}delete(t){return Ne()}fetchAll(){return this.fetchCurrencyExchangesUseCase.execute().pipe((0,D.U)(t=>this.mapper.toResponses(t)))}fetchOne(t){return Ne()}update(t,r){return Ne()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(ne),a.LFG(Ee))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),et=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class ut extends wf{toEntity(e){return{id:e.id,createdAt:e.createdAt,updatedAt:new Date,deleted:!1,totalCalendarDays:e.totalCalendarDays,weekends:e.weekends,paidLeave:e.paidLeave,publicHolidays:e.publicHolidays}}fromEntity(e){return{id:e.id,createdAt:e.createdAt,totalCalendarDays:e.totalCalendarDays,weekends:e.weekends,paidLeave:e.paidLeave,publicHolidays:e.publicHolidays,billableWorkingDays:e.totalCalendarDays??365-e.weekends??104-e.paidLeave??0-e.publicHolidays??0}}fromRequest(e){return{updatedAt:new Date,deleted:!1,totalCalendarDays:e.totalCalendarDays,weekends:e.weekends,paidLeave:e.paidLeave,publicHolidays:e.publicHolidays}}}let Rt=(()=>{class n extends Eg{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(n)))(i||n)}}();static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pe=(()=>{class n{constructor(t){this.repository=t}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(Rt))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bt=(()=>{class n extends et{constructor(t){super(),this.fetchWorkingDaysUseCase=t,this.mapper=new ut}fetch(){return this.fetchWorkingDaysUseCase.execute().pipe((0,D.U)(t=>this.mapper.toFirstResponse(t)))}update(t,r){return Ne()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(Pe))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zn(n,e){if(1&n&&(a.TgZ(0,"option",30),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function Ar(n,e){if(1&n&&(a.TgZ(0,"option",30),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function oL(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"img",31),a.NdJ("click",function(){a.CHM(t);const i=a.oxw();return a.KtG(i.onSubmitCurrency())}),a.qZA()}}function O3(n,e){if(1&n&&(a.TgZ(0,"tr")(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._UZ(8,"img",32),a.qZA()()),2&n){const t=e.$implicit;a.xp6(2),a.Oqu(t.currency1),a.xp6(2),a.Oqu(t.currency2),a.xp6(2),a.Oqu(t.rate)}}function F3(n,e){if(1&n&&(a.TgZ(0,"b"),a._uU(1),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Oqu(t.calculateBillableWorkingDays())}}function L3(n,e){if(1&n&&(a.TgZ(0,"option",33),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}let U3=(()=>{class n{constructor(t,r,i){this.currencyExchangeInteractor=t,this.workingDaysInteractor=r,this.toastr=i,this.languages=["English"],this.currencies=[],this.currencyExchanges=[],this.currencies=Object.values(A),this.currencyForm=new $s({currency1:new ot("",[Gn.required]),currency2:new ot("",[Gn.required]),rate:new ot("",[Gn.required])}),this.workingDaysForm=new $s({totalCalendarDays:new ot("",[Gn.required]),weekends:new ot("",[Gn.required]),paidLeave:new ot("",[Gn.required]),publicHolidays:new ot("",[Gn.required])}),this.languageForm=new $s({language:new ot(this.languages[0],[Gn.required])})}ngOnInit(){this.fetchCurrencyExchanges(),this.fetchWorkingDays()}fetchWorkingDays(){this.workingDaysInteractor.fetch().subscribe({next:t=>{t&&t.success&&(this.workingDaysResponse=t.data,this.workingDaysForm.setValue({totalCalendarDays:this.workingDaysResponse.totalCalendarDays,weekends:this.workingDaysResponse.weekends,paidLeave:this.workingDaysResponse.paidLeave,publicHolidays:this.workingDaysResponse.publicHolidays}))},error:t=>{},complete:()=>{}})}calculateBillableWorkingDays(){return this.workingDaysResponse.totalCalendarDays-this.workingDaysResponse.weekends-this.workingDaysResponse.paidLeave-this.workingDaysResponse.publicHolidays}fetchCurrencyExchanges(){this.currencyExchangeInteractor.fetchAll().subscribe({next:t=>{t&&t.success&&(this.currencyExchanges=t.data)},error:t=>{},complete:()=>{}})}onSubmitCurrency(){this.currencyForm.valid?this.currencyExchangeInteractor.create({currency1:this.currencyForm.value.currency1,currency2:this.currencyForm.value.currency2,rate:this.currencyForm.value.rate}).subscribe({next:r=>{this.toastr.success("currency exchange successfully saved","Success"),this.fetchCurrencyExchanges(),this.currencyForm.reset()},error:r=>{this.toastr.error("Error occurred while saving the currency exchange","Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}onSubmitWorkingDays(){this.workingDaysForm.valid?this.workingDaysInteractor.update(this.workingDaysResponse.id,{totalCalendarDays:this.workingDaysForm.value.totalCalendarDays,weekends:this.workingDaysForm.value.weekends,paidLeave:this.workingDaysForm.value.paidLeave,publicHolidays:this.workingDaysForm.value.publicHolidays}).subscribe({next:r=>{this.toastr.success("working days successfully saved","Success"),this.fetchCurrencyExchanges(),this.currencyForm.reset()},error:r=>{this.toastr.error("Error occurred while saving working days","Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}onSubmitLanguage(){}static#e=this.\u0275fac=function(r){return new(r||n)(a.Y36(He),a.Y36(Bt),a.Y36(oc))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-settings"]],decls:109,vars:14,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],["href","","data-bs-toggle","modal","data-bs-target","#addClientModal",1,"btn","btn-outline-primary","float-right"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["formControlName","currency1",2,"color","black"],["value","","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","currency2",2,"color","black"],["type","number","formControlName","rate","placeholder","Rate","id","rate"],["class","aspect-square","src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["href","",1,"btn","btn-outline-success","float-right",3,"click"],["type","number","formControlName","totalCalendarDays","placeholder","Total calendar days","id","totalCalendarDays"],["type","number","formControlName","weekends","placeholder","Weekends","id","weekends"],["type","number","formControlName","paidLeave","placeholder","Paid leave","id","paidLeave"],["type","number","formControlName","publicHolidays","placeholder","Public holidays","id","publicHolidays"],["href","",1,"btn","btn-outline-success","float-right"],[1,"card-block","m-3"],[1,"form-group"],["for","language"],["formControlName","language","id","language",1,"form-control"],["style","color: black;",3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],["src","assets/images/delete.png","alt","delete","data-bs-toggle","tooltip","data-bs-placement","top","title","delete",1,"aspect-square","action"],[2,"color","black",3,"ngValue"]],template:function(r,i){1&r&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),a._UZ(5,"b"),a._uU(6," Currencies "),a.qZA(),a.TgZ(7,"a",5),a._uU(8,"Add"),a.qZA()(),a.TgZ(9,"div",6)(10,"div",7)(11,"table",8)(12,"thead")(13,"tr")(14,"th"),a._uU(15,"Currency 1"),a.TgZ(16,"span",9),a._uU(17,"*"),a.qZA()(),a.TgZ(18,"th"),a._uU(19,"Currency 2"),a.TgZ(20,"span",9),a._uU(21,"*"),a.qZA()(),a.TgZ(22,"th"),a._uU(23,"Rate"),a.TgZ(24,"span",9),a._uU(25,"*"),a.qZA()(),a._UZ(26,"th"),a.qZA()(),a.TgZ(27,"tbody")(28,"tr")(29,"td")(30,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmitCurrency()}),a.TgZ(31,"select",11)(32,"option",12),a._uU(33,"Select currency"),a.qZA(),a.YNc(34,Zn,2,2,"option",13),a.qZA()()(),a.TgZ(35,"td")(36,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmitCurrency()}),a.TgZ(37,"select",14)(38,"option",12),a._uU(39,"Select currency"),a.qZA(),a.YNc(40,Ar,2,2,"option",13),a.qZA()()(),a.TgZ(41,"td")(42,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmitCurrency()}),a._UZ(43,"input",15),a.qZA()(),a.TgZ(44,"td"),a.YNc(45,oL,1,0,"img",16),a.qZA()(),a.YNc(46,O3,9,3,"tr",17),a.qZA()()()()()()(),a.TgZ(47,"div",0)(48,"div",1)(49,"div",2)(50,"div",3)(51,"h4",4),a._UZ(52,"b"),a._uU(53," Billable working days : "),a.YNc(54,F3,2,1,"b",18),a.qZA(),a.TgZ(55,"a",19),a.NdJ("click",function(){return i.onSubmitWorkingDays()}),a._uU(56,"Save"),a.qZA()(),a.TgZ(57,"div",6)(58,"div",7)(59,"table",8)(60,"thead")(61,"tr")(62,"th"),a._uU(63,"Type of days"),a.qZA(),a.TgZ(64,"th"),a._uU(65,"Value"),a.qZA()()(),a.TgZ(66,"tbody")(67,"tr")(68,"td"),a._uU(69," Total calendar days "),a.qZA(),a.TgZ(70,"td")(71,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),a._UZ(72,"input",20),a.qZA()()(),a.TgZ(73,"tr")(74,"td"),a._uU(75," Weekends "),a.qZA(),a.TgZ(76,"td")(77,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),a._UZ(78,"input",21),a.qZA()()(),a.TgZ(79,"tr")(80,"td"),a._uU(81," Paid leave "),a.qZA(),a.TgZ(82,"td")(83,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),a._UZ(84,"input",22),a.qZA()()(),a.TgZ(85,"tr")(86,"td"),a._uU(87," Public holidays "),a.qZA(),a.TgZ(88,"td")(89,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),a._UZ(90,"input",23),a.qZA()()()()()()()()()(),a.TgZ(91,"div",0)(92,"div",1)(93,"div",2)(94,"div",3)(95,"h4",4),a._UZ(96,"b"),a._uU(97," Languages"),a.qZA(),a.TgZ(98,"a",24),a._uU(99,"Save"),a.qZA()(),a.TgZ(100,"div",25)(101,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmitLanguage()}),a.TgZ(102,"div",26)(103,"label",27),a._uU(104,"Language"),a.qZA(),a.TgZ(105,"select",28)(106,"option",12),a._uU(107,"Select language"),a.qZA(),a.YNc(108,L3,2,2,"option",29),a.qZA()()()()()()()),2&r&&(a.xp6(30),a.Q6J("formGroup",i.currencyForm),a.xp6(4),a.Q6J("ngForOf",i.currencies),a.xp6(2),a.Q6J("formGroup",i.currencyForm),a.xp6(4),a.Q6J("ngForOf",i.currencies),a.xp6(2),a.Q6J("formGroup",i.currencyForm),a.xp6(3),a.Q6J("ngIf",i.currencyForm.valid),a.xp6(1),a.Q6J("ngForOf",i.currencyExchanges),a.xp6(8),a.Q6J("ngIf",i.workingDaysResponse),a.xp6(17),a.Q6J("formGroup",i.workingDaysForm),a.xp6(6),a.Q6J("formGroup",i.workingDaysForm),a.xp6(6),a.Q6J("formGroup",i.workingDaysForm),a.xp6(6),a.Q6J("formGroup",i.workingDaysForm),a.xp6(12),a.Q6J("formGroup",i.languageForm),a.xp6(7),a.Q6J("ngForOf",i.languages))},dependencies:[Gr,ti,Gl,V_,_g,Hl,gg,ic,nc,Id,Zl,rc],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})();var UI=(()=>{return(n=UI||(UI={})).EOD="EOD",n.WORK_PACKAGE="WORK PACKAGE",UI;var n})(),_s=(()=>{return(n=_s||(_s={})).Annually="ANNUALLY",n.Monthly="MONTHLY",n.Weekly="WEEKLY",n.Daily="DAILY",n.Hourly="HOURLY",_s;var n})();class V3 extends wf{toEntity(e){return{id:e.id,createdAt:e.createdAt,updatedAt:new Date,deleted:!1,companyName:e.companyName,email:e.email,phoneNumber:e.phoneNumber,address:e.address,logo:e.logo}}fromEntity(e){return{id:e.id,createdAt:e.createdAt,companyName:e.companyName,email:e.email,phoneNumber:e.phoneNumber,address:e.address,logo:e.logo}}fromRequest(e){return{updatedAt:new Date,deleted:!1,companyName:e.companyName,email:e.email,phoneNumber:e.phoneNumber,address:e.address,logo:e.logo}}}let PR=(()=>{class n extends Eg{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(n)))(i||n)}}();static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OR=(()=>{class n{constructor(t){this.repository=t}execute(t){return this.repository.create(t)}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(PR))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FR=(()=>{class n{constructor(t){this.repository=t}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(PR))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aL=(()=>{class n extends D0{constructor(t,r){super(),this.createClientUseCase=t,this.fetchClientsUseCase=r,this.mapper=new V3}create(t){let r=this.mapper.fromRequest(t);return r.id=sy(),r.createdAt=new Date,this.createClientUseCase.execute(r).pipe((0,D.U)(i=>this.mapper.toResponse(i)))}delete(t){return Ne()}fetchAll(){return this.fetchClientsUseCase.execute().pipe((0,D.U)(t=>this.mapper.toResponses(t)))}fetchOne(t){return Ne()}update(t,r){return Ne()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(OR),a.LFG(FR))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lL=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Cg_resource_insurance="ANNUALLY AED 790",Cg_resource_flightTicket="ANNUALLY AED 2500",Cg_resource_workPermit="ANNUALLY AED 6500",Cg_resource_office="DAILY AED 19",Cg_resource_generalSupportPackage="DAILY AED 15",Cg_resource_laptopWorkstation="ANNUALLY AED 5000",Cg_resource_licenses="ANNUALLY AED 400";class B3 extends wf{toEntity(e){return{id:e.id,createdAt:e.createdAt,updatedAt:new Date,deleted:!1,jobTitle:e.jobTitle,resourceType:e.resourceType,workload:e.workload,project:e.project,basicSalary:e.basicSalary,allowance:e.allowance,gratuity:e.gratuity,insurance:e.insurance,flightTicket:e.flightTicket,workPermit:e.workPermit,office:e.office,generalSupportPackage:e.generalSupportPackage,laptopWorkstation:e.laptopWorkstation,licenses:e.licenses}}fromEntity(e){return{id:e.id,createdAt:e.createdAt,jobTitle:e.jobTitle,resourceType:e.resourceType,workload:e.workload,project:e.project,basicSalary:e.basicSalary,allowance:e.allowance,gratuity:e.gratuity,insurance:e.insurance,flightTicket:e.flightTicket,workPermit:e.workPermit,office:e.office,generalSupportPackage:e.generalSupportPackage,laptopWorkstation:e.laptopWorkstation,licenses:e.licenses}}fromRequest(e){return{updatedAt:new Date,deleted:!1,jobTitle:e.jobTitle,resourceType:e.resourceType,workload:e.workload,project:e.project,basicSalary:e.basicSalary,allowance:e.allowance,gratuity:e.gratuity,insurance:e.insurance??Cg_resource_insurance,flightTicket:e.flightTicket??Cg_resource_flightTicket,workPermit:e.workPermit??Cg_resource_workPermit,office:e.office??Cg_resource_office,generalSupportPackage:e.generalSupportPackage??Cg_resource_generalSupportPackage,laptopWorkstation:e.laptopWorkstation??Cg_resource_laptopWorkstation,licenses:e.licenses??Cg_resource_licenses}}}let VI=(()=>{class n extends Eg{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(n)))(i||n)}}();static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LR=(()=>{class n{constructor(t){this.repository=t}execute(t){return this.repository.create(t)}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(VI))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UR=(()=>{class n{constructor(t){this.repository=t}execute(t){return this.repository.fetchByProject(t)}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(VI))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VR=(()=>{class n{constructor(t){this.repository=t}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(VI))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uL=(()=>{class n extends lL{constructor(t,r,i){super(),this.createResourceUseCase=t,this.fetchProjectResourcesUseCase=r,this.fetchResourcesUseCase=i,this.mapper=new B3}create(t){let r=this.mapper.fromRequest(t);return r.id=sy(),r.createdAt=new Date,this.createResourceUseCase.execute(r).pipe((0,D.U)(i=>this.mapper.toResponse(i)))}delete(t){return Ne()}fetchAll(){return this.fetchResourcesUseCase.execute().pipe((0,D.U)(t=>this.mapper.toResponses(t)))}fetchByProject(t){return this.fetchProjectResourcesUseCase.execute(t).pipe((0,D.U)(r=>this.mapper.toResponses(r)))}fetchOne(t){return Ne()}update(t,r){return Ne()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(LR),a.LFG(UR),a.LFG(VR))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j3(n,e){1&n&&(a.TgZ(0,"small",89),a._uU(1," Please enter project title "),a.qZA())}function $3(n,e){if(1&n&&(a.TgZ(0,"option",90),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t.id),a.xp6(1),a.Oqu(t.companyName)}}function H3(n,e){if(1&n&&(a.TgZ(0,"b"),a._uU(1),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Oqu(t.resources.length)}}function q3(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function G3(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function Z3(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function z3(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"img",92),a.NdJ("click",function(){a.CHM(t);const i=a.oxw();return a.KtG(i.onSubmit())}),a.qZA()}}function W3(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function K3(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function Y3(n,e){if(1&n&&(a.TgZ(0,"select",93),a.YNc(1,K3,2,2,"option",35),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.periods)}}function Q3(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function J3(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function X3(n,e){if(1&n&&(a.TgZ(0,"select",94),a.YNc(1,J3,2,2,"option",35),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.periods)}}function e6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function t6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function n6(n,e){if(1&n&&(a.TgZ(0,"select",95),a.YNc(1,t6,2,2,"option",35),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.periods)}}function r6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function i6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function s6(n,e){if(1&n&&(a.TgZ(0,"select",96),a.YNc(1,i6,2,2,"option",35),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.periods)}}function o6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function a6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function l6(n,e){if(1&n&&(a.TgZ(0,"select",97),a.YNc(1,a6,2,2,"option",35),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.periods)}}function u6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function c6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function d6(n,e){if(1&n&&(a.TgZ(0,"select",98),a.YNc(1,c6,2,2,"option",35),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.periods)}}function h6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function f6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function p6(n,e){if(1&n&&(a.TgZ(0,"select",99),a.YNc(1,f6,2,2,"option",35),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.periods)}}function g6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function m6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function _6(n,e){if(1&n&&(a.TgZ(0,"select",100),a.YNc(1,m6,2,2,"option",35),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.periods)}}function y6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function v6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function w6(n,e){if(1&n&&(a.TgZ(0,"select",101),a.YNc(1,v6,2,2,"option",35),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.periods)}}function b6(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"tr")(1,"td")(2,"h2"),a._uU(3),a.qZA()(),a.TgZ(4,"td"),a._uU(5),a.qZA(),a.TgZ(6,"td"),a._uU(7),a.qZA(),a.TgZ(8,"td"),a._uU(9),a.qZA(),a.TgZ(10,"td"),a._UZ(11,"img",102),a.TgZ(12,"img",103),a.NdJ("click",function(){const s=a.CHM(t).$implicit,u=a.oxw();return a.KtG(u.onClickResourceToBeDeleted(s))}),a.qZA()(),a.TgZ(13,"td"),a._uU(14),a.qZA(),a.TgZ(15,"td"),a._uU(16),a.qZA(),a.TgZ(17,"td"),a._uU(18),a.qZA(),a.TgZ(19,"td"),a._uU(20),a.qZA(),a.TgZ(21,"td"),a._uU(22),a.qZA(),a.TgZ(23,"td"),a._uU(24),a.qZA(),a.TgZ(25,"td"),a._uU(26),a.qZA(),a.TgZ(27,"td"),a._uU(28),a.qZA(),a.TgZ(29,"td"),a._uU(30),a.qZA()()}if(2&n){const t=e.$implicit;a.xp6(3),a.Oqu(t.jobTitle),a.xp6(2),a.Oqu(t.basicSalary),a.xp6(2),a.Oqu(t.resourceType),a.xp6(2),a.Oqu(t.workload),a.xp6(5),a.Oqu(t.allowance),a.xp6(2),a.Oqu(t.gratuity),a.xp6(2),a.Oqu(t.insurance),a.xp6(2),a.Oqu(t.flightTicket),a.xp6(2),a.Oqu(t.workPermit),a.xp6(2),a.Oqu(t.office),a.xp6(2),a.Oqu(t.generalSupportPackage),a.xp6(2),a.Oqu(t.laptopWorkstation),a.xp6(2),a.Oqu(t.licenses)}}function E6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function C6(n,e){if(1&n&&(a.TgZ(0,"option",91),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function T6(n,e){if(1&n&&(a.TgZ(0,"th"),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.xp6(1),a.Oqu(t)}}function I6(n,e){if(1&n&&(a.TgZ(0,"td")(1,"h2"),a._uU(2),a.qZA()()),2&n){const t=e.$implicit,r=a.oxw().$implicit,i=a.oxw();a.xp6(2),a.Oqu(i.calculateCurrencyPeriodCost(t,r))}}function S6(n,e){if(1&n&&(a.TgZ(0,"tr")(1,"td")(2,"h2"),a._uU(3),a.qZA()(),a.YNc(4,I6,3,1,"td",68),a.qZA()),2&n){const t=e.$implicit,r=a.oxw();a.xp6(3),a.Oqu(t),a.xp6(1),a.Q6J("ngForOf",r.displayCurrencies)}}function D6(n,e){if(1&n&&(a.TgZ(0,"th"),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.xp6(1),a.Oqu(t)}}function A6(n,e){if(1&n&&(a.TgZ(0,"td")(1,"h2"),a._uU(2),a.qZA()()),2&n){const t=e.$implicit,r=a.oxw().$implicit,i=a.oxw();a.xp6(2),a.Oqu(i.calculateCurrencyPeriodPrice(t,r))}}function x6(n,e){if(1&n&&(a.TgZ(0,"tr")(1,"td")(2,"h2"),a._uU(3),a.qZA()(),a.YNc(4,A6,3,1,"td",68),a.qZA()),2&n){const t=e.$implicit,r=a.oxw();a.xp6(3),a.Oqu(t),a.xp6(1),a.Q6J("ngForOf",r.displayCurrencies)}}let k6=(()=>{class n{constructor(t,r,i,s,u,h){this.localStorageService=t,this.toastr=r,this.router=i,this.clientInteractor=s,this.projectInteractor=u,this.resourceInteractor=h,this.clients=[],this.resources=[],this.resourceTypes=[],this.currencies=[],this.periods=[],this.displayCurrencies=[],this.displayPeriods=[],this.project=t.get("project"),this.periods=Object.values(_s),this.resourceTypes=Object.values(UI),this.currencies=Object.values(A),this.displayCurrencies.push(A.AED),this.displayPeriods.push(_s.Annually),this.resourceForm=new $s({jobTitle:new ot("",[Gn.required]),basicSalaryPeriod:new ot("MONTHLY"),basicSalaryCurrency:new ot("AED"),basicSalary:new ot("",[Gn.required]),resourceType:new ot("",[Gn.required]),workload:new ot("1"),allowancePeriod:new ot("MONTHLY"),allowanceCurrency:new ot("AED"),allowance:new ot(""),gratuityPeriod:new ot("ANNUALLY"),gratuityCurrency:new ot("AED"),gratuity:new ot(""),insurancePeriod:new ot("ANNUALLY"),insuranceCurrency:new ot("AED"),insurance:new ot("790"),flightTicketPeriod:new ot("ANNUALLY"),flightTicketCurrency:new ot("AED"),flightTicket:new ot("2500"),workPermitPeriod:new ot("ANNUALLY"),workPermitCurrency:new ot("AED"),workPermit:new ot("6500"),officePeriod:new ot("DAILY"),officeCurrency:new ot("AED"),office:new ot("19"),generalSupportPackagePeriod:new ot("DAILY"),generalSupportPackageCurrency:new ot("AED"),generalSupportPackage:new ot("15"),laptopWorkstationPeriod:new ot("ANNUALLY"),laptopWorkstationCurrency:new ot("AED"),laptopWorkstation:new ot("5000"),licensesPeriod:new ot("ANNUALLY"),licensesCurrency:new ot("AED"),licenses:new ot("400")}),this.projectForm=new $s({title:new ot(this.project.title,[Gn.required]),client:new ot(this.project.client,[Gn.required]),description:new ot(this.project.description),duration:new ot(this.project.duration),margin:new ot(this.project.margin),riskProvision:new ot(this.project.riskProvision)}),this.displayForm=new $s({period:new ot(_s.Annually),currency:new ot(A.AED)})}ngOnInit(){this.fetchClients(),this.fetchResources(this.project.id),console.log(Number(1256348.25697831).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2}))}fetchClients(){this.clientInteractor.fetchAll().subscribe({next:t=>{t&&t.success&&(this.clients=t.data)},error:t=>{},complete:()=>{}})}fetchResources(t){this.resourceInteractor.fetchByProject(t).subscribe({next:r=>{r&&r.success&&(this.resources=r.data)},error:r=>{},complete:()=>{}})}splitAmount(t){return t.split(" ")}calculateAttributeAnnualCost(t){let r=0,i=this.splitAmount(t);switch(i[0]){case _s.Annually:r=+i[2];break;case _s.Monthly:r=12*+i[2];break;case _s.Weekly:r=52*+i[2];break;case _s.Daily:r=228*+i[2];break;case _s.Hourly:r=52*+i[2]*48}return r}calculateTotalAnnualCost(){let t=0;return this.resources.forEach(r=>{t+=this.calculateAttributeAnnualCost(r.basicSalary),t+=this.calculateAttributeAnnualCost(r.allowance),t+=this.calculateAttributeAnnualCost(r.gratuity),t+=this.calculateAttributeAnnualCost(r.insurance),t+=this.calculateAttributeAnnualCost(r.flightTicket),t+=this.calculateAttributeAnnualCost(r.workPermit),t+=this.calculateAttributeAnnualCost(r.office),t+=this.calculateAttributeAnnualCost(r.generalSupportPackage),t+=this.calculateAttributeAnnualCost(r.laptopWorkstation),t+=this.calculateAttributeAnnualCost(r.licenses)}),t}calculateByCurrencyAndPeriod(t,r,i){switch(i){case _s.Annually:break;case _s.Monthly:t/=12;break;case _s.Weekly:t/=52;break;case _s.Daily:t/=228;break;case _s.Hourly:t/=2496}return t}calculateCurrencyPeriodCost(t,r){return this.calculateByCurrencyAndPeriod(this.calculateTotalAnnualCost(),t,r)}calculateTotalAnnualPrice(){return(1+this.project.margin/100)*(1+this.project.riskProvision/100)*this.calculateTotalAnnualCost()}calculateCurrencyPeriodPrice(t,r){return this.calculateByCurrencyAndPeriod(this.calculateTotalAnnualPrice(),t,r)}onSubmit(){this.resourceInteractor.create({jobTitle:this.resourceForm.value.jobTitle,resourceType:this.resourceForm.value.resourceType,workload:this.resourceForm.value.workload,project:this.project.id,basicSalary:this.resourceForm.value.basicSalaryPeriod+" "+this.resourceForm.value.basicSalaryCurrency+" "+this.resourceForm.value.basicSalary,allowance:this.resourceForm.value.allowancePeriod+" "+this.resourceForm.value.allowanceCurrency+" "+this.resourceForm.value.allowance,gratuity:this.resourceForm.value.gratuityPeriod+" "+this.resourceForm.value.gratuityCurrency+" "+this.resourceForm.value.gratuity,insurance:this.resourceForm.value.insurancePeriod+" "+this.resourceForm.value.insuranceCurrency+" "+this.resourceForm.value.insurance,flightTicket:this.resourceForm.value.flightTicketPeriod+" "+this.resourceForm.value.flightTicketCurrency+" "+this.resourceForm.value.flightTicket,workPermit:this.resourceForm.value.workPermitPeriod+" "+this.resourceForm.value.workPermitCurrency+" "+this.resourceForm.value.workPermit,office:this.resourceForm.value.officePeriod+" "+this.resourceForm.value.officeCurrency+" "+this.resourceForm.value.office,generalSupportPackage:this.resourceForm.value.generalSupportPackagePeriod+" "+this.resourceForm.value.generalSupportPackageCurrency+" "+this.resourceForm.value.generalSupportPackage,laptopWorkstation:this.resourceForm.value.laptopWorkstationPeriod+" "+this.resourceForm.value.laptopWorkstationCurrency+" "+this.resourceForm.value.laptopWorkstation,licenses:this.resourceForm.value.licensesPeriod+" "+this.resourceForm.value.licensesCurrency+" "+this.resourceForm.value.licenses}).subscribe({next:r=>{this.toastr.success("project successfully saved","Success"),this.fetchResources(this.project.id)},error:r=>{this.toastr.error("Error occurred while saving the project","Error")},complete:()=>{}})}onChangeBasicSalary(){this.inputs={jobTitle:this.resourceForm.value.jobTitle,basicSalaryPeriod:this.resourceForm.value.basicSalaryPeriod,basicSalaryCurrency:this.resourceForm.value.basicSalaryCurrency,basicSalary:this.resourceForm.value.basicSalary,resourceType:this.resourceForm.value.resourceType,workload:this.resourceForm.value.workload,allowancePeriod:this.resourceForm.value.allowancePeriod,allowanceCurrency:this.resourceForm.value.allowanceCurrency,allowance:this.resourceForm.value.basicSalary,gratuityPeriod:this.resourceForm.value.gratuityPeriod,gratuityCurrency:this.resourceForm.value.gratuityCurrency,gratuity:this.resourceForm.value.basicSalary,insurancePeriod:this.resourceForm.value.insurancePeriod,insuranceCurrency:this.resourceForm.value.insuranceCurrency,insurance:this.resourceForm.value.insurance,flightTicketPeriod:this.resourceForm.value.flightTicketPeriod,flightTicketCurrency:this.resourceForm.value.flightTicketCurrency,flightTicket:this.resourceForm.value.flightTicket,workPermitPeriod:this.resourceForm.value.workPermitPeriod,workPermitCurrency:this.resourceForm.value.workPermitCurrency,workPermit:this.resourceForm.value.workPermit,officePeriod:this.resourceForm.value.officePeriod,officeCurrency:this.resourceForm.value.officeCurrency,office:this.resourceForm.value.office,generalSupportPackagePeriod:this.resourceForm.value.generalSupportPackagePeriod,generalSupportPackageCurrency:this.resourceForm.value.generalSupportPackageCurrency,generalSupportPackage:this.resourceForm.value.generalSupportPackage,laptopWorkstationPeriod:this.resourceForm.value.laptopWorkstationPeriod,laptopWorkstationCurrency:this.resourceForm.value.laptopWorkstationCurrency,laptopWorkstation:this.resourceForm.value.laptopWorkstation,licensesPeriod:this.resourceForm.value.licensesPeriod,licensesCurrency:this.resourceForm.value.licensesCurrency,licenses:this.resourceForm.value.licenses},this.resourceForm.setValue(this.inputs)}onChangePeriod(){let t={period:this.displayForm.value.period,currency:this.displayForm.value.currency},r=this.displayPeriods.indexOf(t.period);r>-1?this.displayPeriods.splice(r,1):this.displayPeriods.push(t.period)}onChangeCurrency(){let t={period:this.displayForm.value.period,currency:this.displayForm.value.currency},r=this.displayCurrencies.indexOf(t.currency);r>-1?this.displayCurrencies.splice(r,1):this.displayCurrencies.push(t.currency)}fetchProject(){this.projectInteractor.fetchOne(this.project.id).subscribe({next:t=>{t&&t.success&&(this.project=t.data)},error:t=>{},complete:()=>{}})}onSubmitProject(){if(this.projectForm.valid){let t={title:this.projectForm.value.title,duration:this.projectForm.value.duration,description:this.projectForm.value.description,client:this.projectForm.value.client,margin:this.projectForm.value.margin,riskProvision:this.projectForm.value.riskProvision};console.log(t),this.projectInteractor.update(this.project.id,t).subscribe({next:r=>{this.fetchProject(),this.toastr.success("project successfully updated","Success")},error:r=>{this.toastr.error("Error occurred while updating the project","Error")},complete:()=>{}})}else this.toastr.error("Some inputs are incorrect","Error")}onSubmitDisplay(){}onClickBack(){this.router.navigate(["dashboard"])}onClickDeleteResource(){console.log(this.localStorageService.get("resource"))}onClickResourceToBeDeleted(t){this.localStorageService.add("resource",t)}onClickDismissResource(){this.localStorageService.delete("resource")}static#e=this.\u0275fac=function(r){return new(r||n)(a.Y36(Md),a.Y36(oc),a.Y36(cr),a.Y36(aL),a.Y36(LI),a.Y36(uL))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-resources"]],decls:230,vars:52,consts:[[1,"card"],[1,"card-header"],[1,"row"],[1,"col-2","pointer",3,"click"],["src","assets/images/arrow-left.png",1,"float-left"],[1,"col"],[1,"card-title"],[1,"col-2"],["href","",1,"btn","btn-outline-success","float-right",3,"click"],[1,"card-block"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],[1,"row","m-3"],[1,"col-12","form-group"],["for","title"],[2,"color","red"],["type","text","formControlName","title","placeholder","Project title","id","title",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],[1,"col-9","form-group"],["for","client"],["formControlName","client","id","client",1,"form-control"],["value","","disabled",""],["style","color: black;",3,"ngValue",4,"ngFor","ngForOf"],[1,"col-3","form-group"],["for","duration"],["type","number","formControlName","duration","placeholder","Duration","id","duration",1,"form-control"],["for","description"],["type","number","formControlName","description","placeholder","Description","id","description",1,"form-control"],[1,"col-12"],[1,"card-title","d-inline-block"],[4,"ngIf"],["href","","data-bs-toggle","modal","data-bs-target","#addProjectModal",1,"btn","btn-outline-primary","float-right"],[1,"table-responsive","scrollmenu","m-3"],[1,"table","mb-0","new-patient-table","table-hover"],["type","text","formControlName","jobTitle","placeholder","Title of the resource","id","jobTitle"],["formControlName","basicSalaryCurrency",3,"change"],[3,"ngValue",4,"ngFor","ngForOf"],["type","number","formControlName","basicSalary","placeholder","basic salary","id","basicSalary",3,"change"],["formControlName","basicSalaryPeriod",3,"change"],["formControlName","resourceType"],["type","number","formControlName","workload","placeholder","Workload","id","workload"],["class","aspect-square","src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],["formControlName","allowanceCurrency",2,"color","black"],["type","number","formControlName","allowance","placeholder","allowance","id","allowance"],["formControlName","allowancePeriod",4,"ngIf"],["formControlName","gratuityCurrency",2,"color","black"],["type","number","formControlName","gratuity","placeholder","gratuity","id","gratuity"],["formControlName","gratuityPeriod",4,"ngIf"],["formControlName","insuranceCurrency",2,"color","black"],["type","number","formControlName","insurance","placeholder","insurance","id","insurance"],["formControlName","insurancePeriod",4,"ngIf"],["formControlName","flightTicketCurrency",2,"color","black"],["type","number","formControlName","flightTicket","placeholder","flightTicket","id","flightTicket"],["formControlName","flightTicketPeriod",4,"ngIf"],["formControlName","workPermitCurrency",2,"color","black"],["type","number","formControlName","workPermit","placeholder","workPermit","id","workPermit"],["formControlName","workPermitPeriod",4,"ngIf"],["formControlName","officeCurrency",2,"color","black"],["type","number","formControlName","office","placeholder","office","id","office"],["formControlName","officePeriod",4,"ngIf"],["formControlName","generalSupportPackageCurrency",2,"color","black"],["type","number","formControlName","generalSupportPackage","placeholder","generalSupportPackage","id","generalSupportPackage"],["formControlName","generalSupportPackagePeriod",4,"ngIf"],["formControlName","laptopWorkstationCurrency",2,"color","black"],["type","number","formControlName","laptopWorkstation","placeholder","laptopWorkstation","id","laptopWorkstation"],["formControlName","laptopWorkstationPeriod",4,"ngIf"],["formControlName","licensesCurrency",2,"color","black"],["type","number","formControlName","licenses","placeholder","licenses","id","licenses"],["formControlName","licensesPeriod",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-6"],["for","period"],["formControlName","period","id","period",1,"form-control",3,"change"],["for","currency"],["formControlName","currency","id","currency",1,"form-control",3,"change"],[1,"row","m-2"],["for","margin"],["type","number","formControlName","margin","placeholder","margin","id","margin",1,"form-control"],["for","riskProvision"],["type","number","formControlName","riskProvision","placeholder","Risk provision","id","riskProvision",1,"form-control"],["id","resourceDeleteModal","tabindex","-1","aria-labelledby","resourceDeleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","resourceDeleteModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"form-text","text-muted","text-danger"],[2,"color","black",3,"ngValue"],[3,"ngValue"],["src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],["formControlName","allowancePeriod"],["formControlName","gratuityPeriod"],["formControlName","insurancePeriod"],["formControlName","flightTicketPeriod"],["formControlName","workPermitPeriod"],["formControlName","officePeriod"],["formControlName","generalSupportPackagePeriod"],["formControlName","laptopWorkstationPeriod"],["formControlName","licensesPeriod"],["src","assets/images/duplicate.png","alt","duplicate","data-bs-toggle","tooltip","data-bs-placement","top","title","duplicate",1,"aspect-square","action"],["src","assets/images/delete.png","data-bs-target","#resourceDeleteModal","alt","delete","data-bs-toggle","modal","data-bs-placement","top","title","delete",1,"aspect-square","action",3,"click"]],template:function(r,i){1&r&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),a.NdJ("click",function(){return i.onClickBack()}),a._UZ(4,"img",4),a.qZA(),a.TgZ(5,"div",5)(6,"h4",6)(7,"b"),a._uU(8),a.ALo(9,"uppercase"),a.qZA()()(),a.TgZ(10,"div",7)(11,"a",8),a.NdJ("click",function(){return i.onSubmitProject()}),a._uU(12,"Save"),a.qZA()()()(),a.TgZ(13,"div",9)(14,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmitProject()}),a.TgZ(15,"div",11)(16,"div",12)(17,"label",13),a._uU(18,"Project title"),a.TgZ(19,"span",14),a._uU(20,"*"),a.qZA()(),a._UZ(21,"input",15),a.YNc(22,j3,2,0,"small",16),a.qZA(),a.TgZ(23,"div",17)(24,"label",18),a._uU(25,"Client"),a.TgZ(26,"span",14),a._uU(27,"*"),a.qZA()(),a.TgZ(28,"select",19)(29,"option",20),a._uU(30,"Select client"),a.qZA(),a.YNc(31,$3,2,2,"option",21),a.qZA()(),a.TgZ(32,"div",22)(33,"label",23),a._uU(34,"Duration(Months)"),a.qZA(),a._UZ(35,"input",24),a.qZA(),a.TgZ(36,"div",12)(37,"label",25),a._uU(38,"Description"),a.qZA(),a.TgZ(39,"textarea",26),a._uU(40,"            "),a.qZA()()()()()(),a.TgZ(41,"div",2)(42,"div",27)(43,"div",0)(44,"div",1)(45,"h4",28),a.YNc(46,H3,2,1,"b",29),a._uU(47," Resources "),a.qZA(),a.TgZ(48,"a",30),a._uU(49,"Add"),a.qZA()(),a.TgZ(50,"div",9)(51,"div",31)(52,"table",32)(53,"thead")(54,"tr")(55,"th"),a._uU(56,"Job title"),a.TgZ(57,"span",14),a._uU(58,"*"),a.qZA()(),a.TgZ(59,"th"),a._uU(60,"Basic salary"),a.TgZ(61,"span",14),a._uU(62,"*"),a.qZA()(),a.TgZ(63,"th"),a._uU(64,"Resource type"),a.TgZ(65,"span",14),a._uU(66,"*"),a.qZA()(),a.TgZ(67,"th"),a._uU(68,"Workload"),a.qZA(),a.TgZ(69,"th"),a._uU(70,"Actions"),a.qZA(),a.TgZ(71,"th"),a._uU(72,"Allowance"),a.qZA(),a.TgZ(73,"th"),a._uU(74,"Gratuity"),a.qZA(),a.TgZ(75,"th"),a._uU(76,"Insurance"),a.qZA(),a.TgZ(77,"th"),a._uU(78,"Flight ticket"),a.qZA(),a.TgZ(79,"th"),a._uU(80,"Work permit"),a.qZA(),a.TgZ(81,"th"),a._uU(82,"Office"),a.qZA(),a.TgZ(83,"th"),a._uU(84,"General support package"),a.qZA(),a.TgZ(85,"th"),a._uU(86,"Laptop workstation"),a.qZA(),a.TgZ(87,"th"),a._uU(88,"Licenses"),a.qZA()()(),a.TgZ(89,"tbody")(90,"tr")(91,"td")(92,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(93,"input",33),a.qZA()(),a.TgZ(94,"td")(95,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(96,"select",34),a.NdJ("change",function(){return i.onChangeBasicSalary()}),a.YNc(97,q3,2,2,"option",35),a.qZA(),a.TgZ(98,"input",36),a.NdJ("change",function(){return i.onChangeBasicSalary()}),a.qZA(),a.TgZ(99,"select",37),a.NdJ("change",function(){return i.onChangeBasicSalary()}),a.YNc(100,G3,2,2,"option",35),a.qZA()()(),a.TgZ(101,"td")(102,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(103,"select",38)(104,"option",20),a._uU(105,"Select resource type"),a.qZA(),a.YNc(106,Z3,2,2,"option",35),a.qZA()()(),a.TgZ(107,"td")(108,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(109,"input",39),a.qZA()(),a.TgZ(110,"td"),a.YNc(111,z3,1,0,"img",40),a.qZA(),a.TgZ(112,"td")(113,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(114,"select",41),a.YNc(115,W3,2,2,"option",35),a.qZA(),a._UZ(116,"input",42),a.YNc(117,Y3,2,1,"select",43),a.qZA()(),a.TgZ(118,"td")(119,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(120,"select",44),a.YNc(121,Q3,2,2,"option",35),a.qZA(),a._UZ(122,"input",45),a.YNc(123,X3,2,1,"select",46),a.qZA()(),a.TgZ(124,"td")(125,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(126,"select",47),a.YNc(127,e6,2,2,"option",35),a.qZA(),a._UZ(128,"input",48),a.YNc(129,n6,2,1,"select",49),a.qZA()(),a.TgZ(130,"td")(131,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(132,"select",50),a.YNc(133,r6,2,2,"option",35),a.qZA(),a._UZ(134,"input",51),a.YNc(135,s6,2,1,"select",52),a.qZA()(),a.TgZ(136,"td")(137,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(138,"select",53),a.YNc(139,o6,2,2,"option",35),a.qZA(),a._UZ(140,"input",54),a.YNc(141,l6,2,1,"select",55),a.qZA()(),a.TgZ(142,"td")(143,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(144,"select",56),a.YNc(145,u6,2,2,"option",35),a.qZA(),a._UZ(146,"input",57),a.YNc(147,d6,2,1,"select",58),a.qZA()(),a.TgZ(148,"td")(149,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(150,"select",59),a.YNc(151,h6,2,2,"option",35),a.qZA(),a._UZ(152,"input",60),a.YNc(153,p6,2,1,"select",61),a.qZA()(),a.TgZ(154,"td")(155,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(156,"select",62),a.YNc(157,g6,2,2,"option",35),a.qZA(),a._UZ(158,"input",63),a.YNc(159,_6,2,1,"select",64),a.qZA()(),a.TgZ(160,"td")(161,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(162,"select",65),a.YNc(163,y6,2,2,"option",35),a.qZA(),a._UZ(164,"input",66),a.YNc(165,w6,2,1,"select",67),a.qZA()()(),a.YNc(166,b6,31,13,"tr",68),a.qZA()()()()()()(),a.TgZ(167,"div",2)(168,"div",27)(169,"div",0)(170,"div",1)(171,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmitDisplay()}),a.TgZ(172,"div",2)(173,"div",69)(174,"label",70),a._uU(175,"Period"),a.qZA(),a.TgZ(176,"select",71),a.NdJ("change",function(){return i.onChangePeriod()}),a.YNc(177,E6,2,2,"option",35),a.qZA()(),a.TgZ(178,"div",5)(179,"label",72),a._uU(180,"Currency"),a.qZA(),a.TgZ(181,"select",73),a.NdJ("change",function(){return i.onChangeCurrency()}),a.YNc(182,C6,2,2,"option",35),a.qZA()()()()(),a.TgZ(183,"div",9)(184,"div",31)(185,"table",32)(186,"thead")(187,"tr")(188,"th")(189,"h4"),a._uU(190,"Costs"),a.qZA()(),a.YNc(191,T6,2,1,"th",68),a.qZA()(),a.TgZ(192,"tbody"),a.YNc(193,S6,5,2,"tr",68),a.qZA()()(),a.TgZ(194,"div",74)(195,"div",5)(196,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmitProject()}),a.TgZ(197,"label",75),a._uU(198,"Margin (%)"),a.qZA(),a._UZ(199,"input",76),a.qZA()(),a.TgZ(200,"div",5)(201,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmitProject()}),a.TgZ(202,"label",77),a._uU(203,"Risk provision (%)"),a.qZA(),a._UZ(204,"input",78),a.qZA()()(),a.TgZ(205,"div",31)(206,"table",32)(207,"thead")(208,"tr")(209,"th")(210,"h4"),a._uU(211,"Prices"),a.qZA()(),a.YNc(212,D6,2,1,"th",68),a.qZA()(),a.TgZ(213,"tbody"),a.YNc(214,x6,5,2,"tr",68),a.qZA()()()()()()(),a.TgZ(215,"div",79)(216,"div",80)(217,"div",81)(218,"div",82)(219,"h5",83),a._uU(220,"Delete resource"),a.qZA(),a._UZ(221,"button",84),a.qZA(),a.TgZ(222,"div",85)(223,"b"),a._uU(224,"Do you really want to delete this resource?"),a.qZA()(),a.TgZ(225,"div",86)(226,"button",87),a.NdJ("click",function(){return i.onClickDismissResource()}),a._uU(227,"Close "),a.qZA(),a.TgZ(228,"button",88),a.NdJ("click",function(){return i.onClickDeleteResource()}),a._uU(229," Confirm "),a.qZA()()()()()),2&r&&(a.xp6(8),a.Oqu(a.lcZ(9,50,i.project.title)),a.xp6(6),a.Q6J("formGroup",i.projectForm),a.xp6(8),a.Q6J("ngIf",i.projectForm.controls.title.touched&&(null==i.projectForm.controls.title.errors?null:i.projectForm.controls.title.errors.required)),a.xp6(9),a.Q6J("ngForOf",i.clients),a.xp6(15),a.Q6J("ngIf",i.resources),a.xp6(46),a.Q6J("formGroup",i.resourceForm),a.xp6(3),a.Q6J("formGroup",i.resourceForm),a.xp6(2),a.Q6J("ngForOf",i.currencies),a.xp6(3),a.Q6J("ngForOf",i.periods),a.xp6(2),a.Q6J("formGroup",i.resourceForm),a.xp6(4),a.Q6J("ngForOf",i.resourceTypes),a.xp6(2),a.Q6J("formGroup",i.resourceForm),a.xp6(3),a.Q6J("ngIf",i.resourceForm.valid),a.xp6(2),a.Q6J("formGroup",i.resourceForm),a.xp6(2),a.Q6J("ngForOf",i.currencies),a.xp6(2),a.Q6J("ngIf",i.periods.length>0),a.xp6(2),a.Q6J("formGroup",i.resourceForm),a.xp6(2),a.Q6J("ngForOf",i.currencies),a.xp6(2),a.Q6J("ngIf",i.periods.length>0),a.xp6(2),a.Q6J("formGroup",i.resourceForm),a.xp6(2),a.Q6J("ngForOf",i.currencies),a.xp6(2),a.Q6J("ngIf",i.periods.length>0),a.xp6(2),a.Q6J("formGroup",i.resourceForm),a.xp6(2),a.Q6J("ngForOf",i.currencies),a.xp6(2),a.Q6J("ngIf",i.periods.length>0),a.xp6(2),a.Q6J("formGroup",i.resourceForm),a.xp6(2),a.Q6J("ngForOf",i.currencies),a.xp6(2),a.Q6J("ngIf",i.periods.length>0),a.xp6(2),a.Q6J("formGroup",i.resourceForm),a.xp6(2),a.Q6J("ngForOf",i.currencies),a.xp6(2),a.Q6J("ngIf",i.periods.length>0),a.xp6(2),a.Q6J("formGroup",i.resourceForm),a.xp6(2),a.Q6J("ngForOf",i.currencies),a.xp6(2),a.Q6J("ngIf",i.periods.length>0),a.xp6(2),a.Q6J("formGroup",i.resourceForm),a.xp6(2),a.Q6J("ngForOf",i.currencies),a.xp6(2),a.Q6J("ngIf",i.periods.length>0),a.xp6(2),a.Q6J("formGroup",i.resourceForm),a.xp6(2),a.Q6J("ngForOf",i.currencies),a.xp6(2),a.Q6J("ngIf",i.periods.length>0),a.xp6(1),a.Q6J("ngForOf",i.resources),a.xp6(5),a.Q6J("formGroup",i.displayForm),a.xp6(6),a.Q6J("ngForOf",i.periods),a.xp6(5),a.Q6J("ngForOf",i.currencies),a.xp6(9),a.Q6J("ngForOf",i.displayCurrencies),a.xp6(2),a.Q6J("ngForOf",i.displayPeriods),a.xp6(3),a.Q6J("formGroup",i.projectForm),a.xp6(5),a.Q6J("formGroup",i.projectForm),a.xp6(11),a.Q6J("ngForOf",i.displayCurrencies),a.xp6(2),a.Q6J("ngForOf",i.displayPeriods))},dependencies:[Gr,ti,Gl,V_,_g,Hl,gg,ic,nc,Id,Zl,rc,xi],styles:["div.scrollmenu[_ngcontent-%COMP%]{background-color:#333;overflow:auto;white-space:nowrap}div.scrollmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;color:#fff;text-align:center;padding:14px;text-decoration:none}tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid lightgray;border-collapse:collapse}"]})}return n})();var BI=(()=>{return(n=BI||(BI={})).Admin="ADMIN",n.Business="BUSINESS MANAGER",n.Financial="FINANCIAL MANAGER",BI;var n})();class R6 extends wf{toEntity(e){return{id:e.id,createdAt:e.createdAt,updatedAt:new Date,deleted:!1,firstname:e.firstname,lastname:e.lastname,email:e.email,phoneNumber:e.phoneNumber,address:e.address,role:e.role,avatar:e.avatar}}fromEntity(e){return{id:e.id,createdAt:e.createdAt,firstname:e.firstname,lastname:e.lastname,email:e.email,phoneNumber:e.phoneNumber,address:e.address,role:e.role,avatar:e.avatar}}fromRequest(e){return{updatedAt:new Date,deleted:!1,firstname:e.firstname,lastname:e.lastname,email:e.email,phoneNumber:e.phoneNumber,address:e.address,role:e.role,avatar:e.avatar}}}let A0=(()=>{class n extends Eg{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(n)))(i||n)}}();static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),BR=(()=>{class n{constructor(t){this.accountRepository=t}execute(t){return this.accountRepository.fetch(t)}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(A0))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jR=(()=>{class n{constructor(t){this.accountRepository=t}execute(){return this.accountRepository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(A0))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$R=(()=>{class n{constructor(t){this.accountRepository=t}execute(t){return this.accountRepository.login(t)}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(A0))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),HR=(()=>{class n{constructor(t){this.accountRepository=t}execute(t){return this.accountRepository.create(t)}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(A0))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cL=(()=>{class n extends yf{constructor(t,r,i,s){super(),this.fetchAccountUseCase=t,this.fetchAccountsUseCase=r,this.loginAccountUseCase=i,this.createAccountUseCase=s,this.mapper=new R6}create(t){let r=this.mapper.fromRequest(t);return r.id=sy(),r.password="Password1",r.createdAt=new Date,this.createAccountUseCase.execute(r).pipe((0,D.U)(i=>this.mapper.toResponse(i)))}delete(t){return Ne()}fetchAll(){return this.fetchAccountsUseCase.execute().pipe((0,D.U)(t=>this.mapper.toResponses(t)))}fetchOne(t){return this.fetchAccountUseCase.execute(t).pipe((0,D.U)(r=>this.mapper.toResponse(r)))}login(t){return this.loginAccountUseCase.execute(t).pipe((0,D.U)(r=>this.mapper.toFirstResponse(r)))}update(t,r){return Ne()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(BR),a.LFG(jR),a.LFG($R),a.LFG(HR))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function N6(n,e){if(1&n&&(a.TgZ(0,"option",47),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}function M6(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"img",48),a.NdJ("click",function(){a.CHM(t);const i=a.oxw();return a.KtG(i.onSubmit())}),a.qZA()}}function P6(n,e){if(1&n&&(a.TgZ(0,"tr")(1,"td")(2,"div",0)(3,"div",49),a._UZ(4,"img",50),a.qZA(),a.TgZ(5,"div",28)(6,"h2"),a._uU(7),a.qZA()()()(),a.TgZ(8,"td"),a._uU(9),a.qZA(),a.TgZ(10,"td"),a._uU(11),a.qZA(),a.TgZ(12,"td"),a._uU(13),a.qZA(),a.TgZ(14,"td"),a._uU(15),a.qZA(),a.TgZ(16,"td"),a._uU(17),a.qZA(),a.TgZ(18,"td"),a._UZ(19,"img",51),a.qZA()()),2&n){const t=e.$implicit;a.xp6(7),a.Oqu(t.firstname),a.xp6(2),a.Oqu(t.lastname),a.xp6(2),a.Oqu(t.email),a.xp6(2),a.Oqu(t.role),a.xp6(2),a.Oqu(t.phoneNumber),a.xp6(2),a.Oqu(t.address)}}function O6(n,e){1&n&&(a.TgZ(0,"small",52),a._uU(1," Please enter company name.! "),a.qZA())}function F6(n,e){1&n&&(a.TgZ(0,"small",52),a._uU(1," Please enter company name.! "),a.qZA())}function L6(n,e){if(1&n&&(a.TgZ(0,"option",47),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.Q6J("ngValue",t),a.xp6(1),a.Oqu(t)}}const U6=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:MR},{path:"",component:NI,canActivate:[d],children:[{path:"dashboard",component:c},{path:"resources",component:k6},{path:"clients",component:T},{path:"accounts",component:(()=>{class n{constructor(t,r,i,s){this.accountInteractor=t,this.router=r,this.toastr=i,this.localStorageService=s,this.accounts=[],this.roles=[],this.roles=Object.values(BI),this.accountForm=new $s({firstname:new ot("",[Gn.required]),lastname:new ot("",[Gn.required]),email:new ot("",[Gn.required]),address:new ot(""),phoneNumber:new ot(""),avatar:new ot(""),role:new ot("",[Gn.required])})}ngOnInit(){this.fetchAccounts()}fetchAccounts(){this.accountInteractor.fetchAll().subscribe({next:t=>{this.accounts=t.data},error:t=>{},complete:()=>{}})}onSubmit(){this.accountForm.valid?this.accountInteractor.create({firstname:this.accountForm.value.firstname,lastname:this.accountForm.value.lastname,email:this.accountForm.value.email,address:this.accountForm.value.address,phoneNumber:this.accountForm.value.phoneNumber,role:this.accountForm.value.role,avatar:""}).subscribe({next:r=>{this.toastr.success("account successfully saved","Success"),this.fetchAccounts()},error:r=>{this.toastr.error("Error occurred while saving account","Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}static#e=this.\u0275fac=function(r){return new(r||n)(a.Y36(cL),a.Y36(cr),a.Y36(oc),a.Y36(Md))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-accounts"]],decls:117,vars:15,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],["href","","data-bs-toggle","modal","data-bs-target","#addClientModal",1,"btn","btn-outline-primary","float-right"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["type","text","formControlName","firstname","placeholder","Firstname"],["type","text","formControlName","lastname","placeholder","Lastname"],["type","text","formControlName","email","placeholder","Email"],["formControlName","role"],["value","","disabled",""],["style","color: black;",3,"ngValue",4,"ngFor","ngForOf"],["class","aspect-square","src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],["type","tel","formControlName","phoneNumber","placeholder","Phone number"],["type","text","formControlName","address","placeholder","Address"],[4,"ngFor","ngForOf"],["id","addClientModal","tabindex","-1","aria-labelledby","addClientModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","addClientModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","row"],[1,"col"],[1,"form-group"],["for","firstname"],["type","text","formControlName","firstname","placeholder","Firstname","id","firstname",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],["for","lastname"],["type","text","formControlName","lastname","placeholder","Lastname","id","lastname",1,"form-control"],["src","assets/images/user.jpg"],["for","role"],["formControlName","role","id","role",1,"form-control"],["for","email"],["type","email","formControlName","email","placeholder","Email","id","email",1,"form-control"],["for","phoneNumber"],["type","tel","formControlName","phoneNumber","placeholder","Phone number","id","phoneNumber",1,"form-control"],["for","address"],["type","tel","formControlName","address","placeholder","Address","id","address",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],[2,"color","black",3,"ngValue"],["src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],[1,"col-5","col-sm-5","col-md-4","col-lg-3","col-xl-3"],["width","28","height","28","src","assets/images/user.jpg","alt","",1,"rounded-circle","m-r-5"],["src","assets/images/delete.png","alt","delete",1,"aspect-square","action"],[1,"form-text","text-muted","text-danger"]],template:function(r,i){1&r&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4)(5,"b"),a._uU(6),a.qZA(),a._uU(7," Accounts "),a.qZA(),a.TgZ(8,"a",5),a._uU(9,"Add"),a.qZA()(),a.TgZ(10,"div",6)(11,"div",7)(12,"table",8)(13,"thead")(14,"tr")(15,"th"),a._uU(16,"Firstname"),a.TgZ(17,"span",9),a._uU(18,"*"),a.qZA()(),a.TgZ(19,"th"),a._uU(20,"Lastname"),a.TgZ(21,"span",9),a._uU(22,"*"),a.qZA()(),a.TgZ(23,"th"),a._uU(24,"Email"),a.TgZ(25,"span",9),a._uU(26,"*"),a.qZA()(),a.TgZ(27,"th"),a._uU(28,"Role"),a.TgZ(29,"span",9),a._uU(30,"*"),a.qZA()(),a._UZ(31,"th"),a.TgZ(32,"th"),a._uU(33,"Phone number"),a.qZA(),a.TgZ(34,"th"),a._uU(35,"Address"),a.qZA()()(),a.TgZ(36,"tbody")(37,"tr")(38,"td")(39,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(40,"input",11),a.qZA()(),a.TgZ(41,"td")(42,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(43,"input",12),a.qZA()(),a.TgZ(44,"td")(45,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(46,"input",13),a.qZA()(),a.TgZ(47,"td")(48,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(49,"select",14)(50,"option",15),a._uU(51,"Select role"),a.qZA(),a.YNc(52,N6,2,2,"option",16),a.qZA()()(),a.TgZ(53,"td"),a.YNc(54,M6,1,0,"img",17),a.qZA(),a.TgZ(55,"td")(56,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(57,"input",18),a.qZA()(),a.TgZ(58,"td")(59,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a._UZ(60,"input",19),a.qZA()()(),a.YNc(61,P6,20,6,"tr",20),a.qZA()()()()()()(),a.TgZ(62,"div",21)(63,"div",22)(64,"div",23)(65,"div",24)(66,"h1",25),a._uU(67,"Add new account"),a.qZA(),a._UZ(68,"button",26),a.qZA(),a.TgZ(69,"form",10),a.NdJ("ngSubmit",function(){return i.onSubmit()}),a.TgZ(70,"div",27)(71,"div",28)(72,"div",29)(73,"label",30),a._uU(74,"Firstname"),a.TgZ(75,"span",9),a._uU(76,"*"),a.qZA()(),a._UZ(77,"input",31),a.YNc(78,O6,2,0,"small",32),a.qZA(),a.TgZ(79,"div",29)(80,"label",33),a._uU(81,"Firstname"),a.TgZ(82,"span",9),a._uU(83,"*"),a.qZA()(),a._UZ(84,"input",34),a.YNc(85,F6,2,0,"small",32),a.qZA(),a.TgZ(86,"div"),a._UZ(87,"img",35),a.qZA()(),a.TgZ(88,"div",28)(89,"div",29)(90,"label",36),a._uU(91,"Client"),a.TgZ(92,"span",9),a._uU(93,"*"),a.qZA()(),a.TgZ(94,"select",37)(95,"option",15),a._uU(96,"Select role"),a.qZA(),a.YNc(97,L6,2,2,"option",16),a.qZA()(),a.TgZ(98,"div",29)(99,"label",38),a._uU(100,"Email"),a.TgZ(101,"span",9),a._uU(102,"*"),a.qZA()(),a._UZ(103,"input",39),a.qZA(),a.TgZ(104,"div",29)(105,"label",40),a._uU(106,"Phone number"),a.qZA(),a._UZ(107,"input",41),a.qZA(),a.TgZ(108,"div",29)(109,"label",42),a._uU(110,"Address"),a.qZA(),a._UZ(111,"input",43),a.qZA()()()(),a.TgZ(112,"div",44)(113,"button",45),a._uU(114,"Close"),a.qZA(),a.TgZ(115,"button",46),a.NdJ("click",function(){return i.onSubmit()}),a._uU(116,"Save "),a.qZA()()()()()),2&r&&(a.xp6(6),a.Oqu(null==i.accounts?null:i.accounts.length),a.xp6(33),a.Q6J("formGroup",i.accountForm),a.xp6(3),a.Q6J("formGroup",i.accountForm),a.xp6(3),a.Q6J("formGroup",i.accountForm),a.xp6(3),a.Q6J("formGroup",i.accountForm),a.xp6(4),a.Q6J("ngForOf",i.roles),a.xp6(2),a.Q6J("ngIf",i.accountForm.valid),a.xp6(2),a.Q6J("formGroup",i.accountForm),a.xp6(3),a.Q6J("formGroup",i.accountForm),a.xp6(2),a.Q6J("ngForOf",i.accounts),a.xp6(8),a.Q6J("formGroup",i.accountForm),a.xp6(9),a.Q6J("ngIf",i.accountForm.controls.firstname.touched&&(null==i.accountForm.controls.firstname.errors?null:i.accountForm.controls.firstname.errors.required)),a.xp6(7),a.Q6J("ngIf",i.accountForm.controls.lastname.touched&&(null==i.accountForm.controls.lastname.errors?null:i.accountForm.controls.lastname.errors.required)),a.xp6(12),a.Q6J("ngForOf",i.roles),a.xp6(18),a.Q6J("disabled",!i.accountForm.valid))},dependencies:[Gr,ti,Gl,V_,_g,Hl,ic,nc,Id,Zl,rc],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})()},{path:"settings",component:U3}]}];let V6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=a.oAB({type:n});static#n=this.\u0275inj=a.cJS({imports:[JE.forRoot(U6,{scrollPositionRestoration:"enabled"}),JE]})}return n})(),B6=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&a._UZ(0,"router-outlet")},dependencies:[Vm],encapsulation:2})}return n})(),Pd=(()=>{class n{static#e=this.ACCOUNTS="accounts";static#t=this.CLIENTS="clients";static#n=this.PROJECTS="projects";static#r=this.RESOURCES="resources";static#i=this.CURRENCY_EXCHANGE="currency-exchanges";static#s=this.WORKING_DAYS="working-days"}return n})();var En=U(5813);function qR(){return(0,Sn.e)((n,e)=>{let t,r=!1;n.subscribe((0,ye.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var dt,Ti=U(2011),GR=(U(1451),U(3942)),be=U(5861),Hs=U(9681),Kl=U(4859),Yl=U(1877),O=U(2090),j6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Od={},ZR=ZR||{},Gt=j6||self;function jI(){}function zR(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function x0(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var WR="closure_uid_"+(1e9*Math.random()>>>0),H6=0;function q6(n,e,t){return n.call.apply(n.bind,arguments)}function G6(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Qi(n,e,t){return(Qi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?q6:G6).apply(null,arguments)}function $I(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ji(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function bf(){this.s=this.s,this.o=this.o}var z6={};bf.prototype.s=!1,bf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function $6(n){return Object.prototype.hasOwnProperty.call(n,WR)&&n[WR]||(n[WR]=++H6)}(this);delete z6[n]}},bf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const dL=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},hL=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function fL(n){return Array.prototype.concat.apply([],arguments)}function KR(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function HI(n){return/^[\s\xa0]*$/.test(n)}var Gs,pL=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function qs(n,e){return-1!=n.indexOf(e)}function YR(n,e){return n<e?-1:n>e?1:0}e:{var gL=Gt.navigator;if(gL){var mL=gL.userAgent;if(mL){Gs=mL;break e}}Gs=""}function QR(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function _L(n){const e={};for(const t in n)e[t]=n[t];return e}var yL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vL(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<yL.length;s++)t=yL[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function JR(n){return JR[" "](n),n}JR[" "]=jI;var qI,n,Y6=qs(Gs,"Opera"),oy=qs(Gs,"Trident")||qs(Gs,"MSIE"),wL=qs(Gs,"Edge"),XR=wL||oy,bL=qs(Gs,"Gecko")&&!(qs(Gs.toLowerCase(),"webkit")&&!qs(Gs,"Edge"))&&!(qs(Gs,"Trident")||qs(Gs,"MSIE"))&&!qs(Gs,"Edge"),Q6=qs(Gs.toLowerCase(),"webkit")&&!qs(Gs,"Edge");function EL(){var n=Gt.document;return n?n.documentMode:void 0}e:{var e1="",t1=(n=Gs,bL?/rv:([^\);]+)(\)|;)/.exec(n):wL?/Edge\/([\d\.]+)/.exec(n):oy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Q6?/WebKit\/(\S+)/.exec(n):Y6?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(t1&&(e1=t1?t1[1]:""),oy){var n1=EL();if(null!=n1&&n1>parseFloat(e1)){qI=String(n1);break e}}qI=e1}var J6={};var eq=Gt.document&&oy&&(EL()||parseInt(qI,10))||void 0,tq=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",jI,e),Gt.removeEventListener("test",jI,e)}catch{}return n}();function ys(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function k0(n,e){if(ys.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(bL){e:{try{JR(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:nq[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&k0.Z.h.call(this)}}ys.prototype.h=function(){this.defaultPrevented=!0},Ji(k0,ys);var nq={2:"touch",3:"pen",4:"mouse"};k0.prototype.h=function(){k0.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var R0="closure_listenable_"+(1e6*Math.random()|0),rq=0;function iq(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++rq,this.ca=this.fa=!1}function GI(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function ZI(n){this.src=n,this.g={},this.h=0}function i1(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=dL(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(GI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function s1(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}ZI.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=s1(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new iq(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var o1="closure_lm_"+(1e6*Math.random()|0),a1={};function TL(n,e,t,r,i){if(r&&r.once)return SL(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)TL(n,e[s],t,r,i);return null}return t=d1(t),n&&n[R0]?n.N(e,t,x0(r)?!!r.capture:!!r,i):IL(n,e,t,!1,r,i)}function IL(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=x0(i)?!!i.capture:!!i,h=u1(n);if(h||(n[o1]=h=new ZI(n)),(t=h.add(e,t,r,u,s)).proxy)return t;if(r=function sq(){var e=oq;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)tq||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(AL(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function SL(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)SL(n,e[s],t,r,i);return null}return t=d1(t),n&&n[R0]?n.O(e,t,x0(r)?!!r.capture:!!r,i):IL(n,e,t,!0,r,i)}function DL(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)DL(n,e[s],t,r,i);else r=x0(r)?!!r.capture:!!r,t=d1(t),n&&n[R0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=s1(s=n.g[e],t,r,i))&&(GI(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=u1(n))&&(e=n.g[e.toString()],n=-1,e&&(n=s1(e,t,r,i)),(t=-1<n?e[n]:null)&&l1(t))}function l1(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[R0])i1(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(AL(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=u1(e))?(i1(t,n),0==t.h&&(t.src=null,e[o1]=null)):GI(n)}}}function AL(n){return n in a1?a1[n]:a1[n]="on"+n}function oq(n,e){if(n.ca)n=!0;else{e=new k0(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&l1(n),n=t.call(r,e)}return n}function u1(n){return(n=n[o1])instanceof ZI?n:null}var c1="__closure_events_fn_"+(1e9*Math.random()>>>0);function d1(n){return"function"==typeof n?n:(n[c1]||(n[c1]=function(e){return n.handleEvent(e)}),n[c1])}function Mi(){bf.call(this),this.i=new ZI(this),this.P=this,this.I=null}function Xi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ys(e,n);else if(e instanceof ys)e.target=e.target||n;else{var i=e;vL(e=new ys(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=zI(u,r,!0,e)&&i}if(i=zI(u=e.g=n,r,!0,e)&&i,i=zI(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=zI(u=e.g=t[s],r,!1,e)&&i}function zI(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.ca&&u.capture==t){var h=u.listener,g=u.ia||u.src;u.fa&&i1(n.i,u),i=!1!==h.call(g,r)&&i}}return i&&!r.defaultPrevented}Ji(Mi,bf),Mi.prototype[R0]=!0,Mi.prototype.removeEventListener=function(n,e,t,r){DL(this,n,e,t,r)},Mi.prototype.M=function(){if(Mi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)GI(t[r]);delete n.g[e],n.h--}}this.I=null},Mi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Mi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var h1=Gt.JSON.stringify;function aq(){var n=kL;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var p1,xL=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new uq,n=>n.reset());class uq{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function cq(n){Gt.setTimeout(()=>{throw n},0)}function f1(n,e){p1||function dq(){var n=Gt.Promise.resolve(void 0);p1=function(){n.then(hq)}}(),g1||(p1(),g1=!0),kL.add(n,e)}var g1=!1,kL=new class lq{constructor(){this.h=this.g=null}add(e,t){const r=xL.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function hq(){for(var n;n=aq();){try{n.h.call(n.g)}catch(t){cq(t)}var e=xL;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}g1=!1}function WI(n,e){Mi.call(this),this.h=n||1,this.g=e||Gt,this.j=Qi(this.kb,this),this.l=Date.now()}function m1(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function _1(n,e,t){if("function"==typeof n)t&&(n=Qi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Qi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Gt.setTimeout(n,e||0)}function RL(n){n.g=_1(()=>{n.g=null,n.i&&(n.i=!1,RL(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ji(WI,Mi),(dt=WI.prototype).da=!1,dt.S=null,dt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Xi(this,"tick"),this.da&&(m1(this),this.start()))}},dt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dt.M=function(){WI.Z.M.call(this),m1(this),delete this.g};class fq extends bf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:RL(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function N0(n){bf.call(this),this.h=n,this.g={}}Ji(N0,bf);var NL=[];function ML(n,e,t,r){Array.isArray(t)||(t&&(NL[0]=t.toString()),t=NL);for(var i=0;i<t.length;i++){var s=TL(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function PL(n){QR(n.g,function(e,t){this.g.hasOwnProperty(t)&&l1(e)},n),n.g={}}function KI(){this.g=!0}function ay(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _q(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return h1(t)}catch{return e}}(n,t)+(r?" "+r:"")})}N0.prototype.M=function(){N0.Z.M.call(this),PL(this)},N0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},KI.prototype.Aa=function(){this.g=!1},KI.prototype.info=function(){};var Tg={},OL=null;function YI(){return OL=OL||new Mi}function FL(n){ys.call(this,Tg.Ma,n)}function M0(n){const e=YI();Xi(e,new FL(e,n))}function LL(n,e){ys.call(this,Tg.STAT_EVENT,n),this.stat=e}function Zs(n){const e=YI();Xi(e,new LL(e,n))}function UL(n,e){ys.call(this,Tg.Na,n),this.size=e}function P0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},e)}Tg.Ma="serverreachability",Ji(FL,ys),Tg.STAT_EVENT="statevent",Ji(LL,ys),Tg.Na="timingevent",Ji(UL,ys);var QI={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},VL={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function y1(){}function jL(){}y1.prototype.h=null;var b1,O0={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function v1(){ys.call(this,"d")}function w1(){ys.call(this,"c")}function JI(){}function F0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new N0(this),this.P=yq,this.W=new WI(n=XR?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new $L}function $L(){this.i=null,this.g="",this.h=!1}Ji(v1,ys),Ji(w1,ys),Ji(JI,y1),JI.prototype.g=function(){return new XMLHttpRequest},JI.prototype.i=function(){return{}},b1=new JI;var yq=45e3,E1={},XI={};function C1(n,e,t){n.K=1,n.v=iS(Fd(e)),n.s=t,n.U=!0,HL(n,null)}function HL(n,e){n.F=Date.now(),L0(n),n.A=Fd(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),JL(t.h,"t",r),n.C=0,t=n.l.H,n.h=new $L,n.g=bU(n.l,t?e:null,!n.s),0<n.O&&(n.L=new fq(Qi(n.Ia,n,n.g),n.O)),ML(n.V,n.g,"readystatechange",n.gb),e=n.H?_L(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),M0(1),function pq(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",h=s.split("&"),g=0;g<h.length;g++){var y=h[g].split("=");if(1<y.length){var E=y[0];y=y[1];var I=E.split("_");u=2<=I.length&&"type"==I[1]?u+(E+"=")+y+"&":u+(E+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function qL(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function GL(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=vq(n,t),i==XI){4==e&&(n.o=4,Zs(14),r=!1),ay(n.j,n.m,null,"[Incomplete Response]");break}if(i==E1){n.o=4,Zs(15),ay(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ay(n.j,n.m,i,null),T1(n,i)}qL(n)&&i!=XI&&i!=E1&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Zs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),O1(e),e.L=!0,Zs(11))):(ay(n.j,n.m,t,"[Invalid Chunked Response]"),Ig(n),U0(n))}function vq(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?XI:(t=Number(e.substring(t,r)),isNaN(t)?E1:(r+=1)+t>e.length?XI:(e=e.substr(r,t),n.C=r+t,e))}function L0(n){n.Y=Date.now()+n.P,ZL(n,n.P)}function ZL(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=P0(Qi(n.eb,n),e)}function eS(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function U0(n){0==n.l.G||n.I||_U(n.l,n)}function Ig(n){eS(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,m1(n.W),PL(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function T1(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||D1(t.i,n)))if(t.I=n.N,!n.J&&D1(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;cS(t),lS(t)}P1(t),Zs(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=P0(Qi(t.ab,t),6e3));if(1>=tU(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Ag(t,11)}else if((n.J||t.g==n)&&cS(t),!HI(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const E=y[3];null!=E&&(t.ma=E,t.h.info("VER="+t.ma));const I=y[4];null!=I&&(t.za=I,t.h.info("SVER="+t.za));const k=y[5];null!=k&&"number"==typeof k&&0<k&&(t.K=r=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const R=n.g;if(R){const F=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(F){var s=r.i;!s.g&&(qs(F,"spdy")||qs(F,"quic")||qs(F,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(A1(s,s.h),s.h=null))}if(r.D){const W=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;W&&(r.sa=W,fr(r.F,r.D,W))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=wU(r,r.H?r.la:null,r.W),u.J){nU(r.i,u);var h=u,g=r.K;g&&h.setTimeout(g),h.B&&(eS(h),L0(h)),r.g=u}else gU(r);0<t.l.length&&uS(t)}else"stop"!=y[0]&&"close"!=y[0]||Ag(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Ag(t,7):N1(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}M0(4)}catch{}}function I1(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zR(n)||"string"==typeof n)hL(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(zR(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function wq(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(zR(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function ly(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof ly)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function S1(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Sg(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Sg(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Sg(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(dt=F0.prototype).setTimeout=function(n){this.P=n},dt.gb=function(n){n=n.target;const e=this.L;e&&3==Ld(n)?e.l():this.Ia(n)},dt.Ia=function(n){try{if(n==this.g)e:{const E=Ld(this.g);var e=this.g.Da();const I=this.g.ba();if(!(3>E)&&(3!=E||XR||this.g&&(this.h.h||this.g.ga()||cU(this.g)))){this.I||4!=E||7==e||M0(8==e||0>=I?3:2),eS(this);var t=this.g.ba();this.N=t;t:if(qL(this)){var r=cU(this.g);n="";var i=r.length,s=4==Ld(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ig(this),U0(this);var u="";break t}this.h.i=new Gt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function gq(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.X,E,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!HI(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Zs(12),Ig(this),U0(this);break e}ay(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,T1(this,t)}this.U?(GL(this,E,u),XR&&this.i&&3==E&&(ML(this.V,this.W,"tick",this.fb),this.W.start())):(ay(this.j,this.m,u,null),T1(this,u)),4==E&&Ig(this),this.i&&!this.I&&(4==E?_U(this.l,this):(this.i=!1,L0(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Zs(12)):(this.o=0,Zs(13)),Ig(this),U0(this)}}}catch{}},dt.fb=function(){if(this.g){var n=Ld(this.g),e=this.g.ga();this.C<e.length&&(eS(this),GL(this,n,e),this.i&&4!=n&&L0(this))}},dt.cancel=function(){this.I=!0,Ig(this)},dt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function mq(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(M0(3),Zs(17)),Ig(this),this.o=2,U0(this)):ZL(this,this.Y-n)},(dt=ly.prototype).R=function(){S1(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},dt.T=function(){return S1(this),this.g.concat()},dt.get=function(n,e){return Sg(this.h,n)?this.h[n]:e},dt.set=function(n,e){Sg(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},dt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var zL=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dg(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Dg){this.g=void 0!==e?e:n.g,tS(this,n.j),this.s=n.s,nS(this,n.i),rS(this,n.m),this.l=n.l,e=n.h;var t=new j0;t.i=e.i,e.g&&(t.g=new ly(e.g),t.h=e.h),WL(this,t),this.o=n.o}else n&&(t=String(n).match(zL))?(this.g=!!e,tS(this,t[1]||"",!0),this.s=V0(t[2]||""),nS(this,t[3]||"",!0),rS(this,t[4]),this.l=V0(t[5]||"",!0),WL(this,t[6]||"",!0),this.o=V0(t[7]||"")):(this.g=!!e,this.h=new j0(null,this.g))}function Fd(n){return new Dg(n)}function tS(n,e,t){n.j=t?V0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function nS(n,e,t){n.i=t?V0(e,!0):e}function rS(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function WL(n,e,t){e instanceof j0?(n.h=e,function xq(n,e){e&&!n.j&&(Ef(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(YL(this,r),JL(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=B0(e,Dq)),n.h=new j0(e,n.g))}function fr(n,e,t){n.h.set(e,t)}function iS(n){return fr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function V0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function B0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Tq),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Tq(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Dg.prototype.toString=function(){var n=[],e=this.j;e&&n.push(B0(e,KL,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(B0(e,KL,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(B0(t,"/"==t.charAt(0)?Sq:Iq,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",B0(t,Aq)),n.join("")};var KL=/[#\/\?@]/g,Iq=/[#\?:]/g,Sq=/[#\?]/g,Dq=/[#\?@]/g,Aq=/#/g;function j0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ef(n){n.g||(n.g=new ly,n.h=0,n.i&&function bq(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function YL(n,e){Ef(n),e=uy(n,e),Sg(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Sg((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&S1(n)))}function QL(n,e){return Ef(n),e=uy(n,e),Sg(n.g.h,e)}function JL(n,e,t){YL(n,e),0<t.length&&(n.i=null,n.g.set(uy(n,e),KR(t)),n.h+=t.length)}function uy(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}(dt=j0.prototype).add=function(n,e){Ef(this),this.i=null,n=uy(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},dt.forEach=function(n,e){Ef(this),this.g.forEach(function(t,r){hL(t,function(i){n.call(e,i,r,this)},this)},this)},dt.T=function(){Ef(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},dt.R=function(n){Ef(this);var e=[];if("string"==typeof n)QL(this,n)&&(e=fL(e,this.g.get(uy(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=fL(e,n[t])}return e},dt.set=function(n,e){return Ef(this),this.i=null,QL(this,n=uy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},dt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var u=i;""!==r[s]&&(u+="="+encodeURIComponent(String(r[s]))),n.push(u)}}return this.i=n.join("&")};var kq=class{constructor(n,e){this.h=n,this.g=e}};function XL(n){this.l=n||Rq,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ea&&Gt.g.Ea()&&Gt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Rq=10;function eU(n){return!!n.h||!!n.g&&n.g.size>=n.j}function tU(n){return n.h?1:n.g?n.g.size:0}function D1(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function A1(n,e){n.g?n.g.add(e):n.h=e}function nU(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function rU(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return KR(n.i)}function x1(){}function Nq(){this.g=new x1}function Mq(n,e,t){const r=t||"";try{I1(n,function(i,s){let u=i;x0(i)&&(u=h1(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function sS(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function $0(n){this.l=n.$b||null,this.j=n.ib||!1}function oS(n,e){Mi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=k1,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}XL.prototype.cancel=function(){if(this.i=rU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},x1.prototype.stringify=function(n){return Gt.JSON.stringify(n,void 0)},x1.prototype.parse=function(n){return Gt.JSON.parse(n,void 0)},Ji($0,y1),$0.prototype.g=function(){return new oS(this.l,this.j)},$0.prototype.i=function(n){return function(){return n}}({}),Ji(oS,Mi);var k1=0;function iU(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function H0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,q0(n)}function q0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(dt=oS.prototype).open=function(n,e){if(this.readyState!=k1)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,q0(this)},dt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Gt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,H0(this)),this.readyState=k1},dt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,q0(this)),this.g&&(this.readyState=3,q0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;iU(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},dt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?H0(this):q0(this),3==this.readyState&&iU(this)}},dt.Ua=function(n){this.g&&(this.response=this.responseText=n,H0(this))},dt.Ta=function(n){this.g&&(this.response=n,H0(this))},dt.ha=function(){this.g&&H0(this)},dt.setRequestHeader=function(n,e){this.v.append(n,e)},dt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},dt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(oS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Oq=Gt.JSON.parse;function li(n){Mi.call(this),this.headers=new ly,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sU,this.K=this.L=!1}Ji(li,Mi);var sU="",Fq=/^https?$/i,Lq=["POST","PUT"];function Vq(n){return"content-type"==n.toLowerCase()}function oU(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,aU(n),aS(n)}function aU(n){n.D||(n.D=!0,Xi(n,"complete"),Xi(n,"error"))}function lU(n){if(n.h&&typeof ZR<"u"&&(!n.C[1]||4!=Ld(n)||2!=n.ba()))if(n.v&&4==Ld(n))_1(n.Fa,0,n);else if(Xi(n,"readystatechange"),4==Ld(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(zL)[1]||null;if(!i&&Gt.self&&Gt.self.location){var s=Gt.self.location.protocol;i=s.substr(0,s.length-1)}r=!Fq.test(i?i.toLowerCase():"")}t=r}if(t)Xi(n,"complete"),Xi(n,"success");else{n.m=6;try{var u=2<Ld(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.ba()+"]",aU(n)}}finally{aS(n)}}}function aS(n,e){if(n.g){uU(n);const t=n.g,r=n.C[0]?jI:null;n.g=null,n.C=null,e||Xi(n,"ready");try{t.onreadystatechange=r}catch{}}}function uU(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function Ld(n){return n.g?n.g.readyState:0}function cU(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case sU:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function R1(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Bq(n){let e="";return QR(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):fr(n,e,t))}function G0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function dU(n){this.za=0,this.l=[],this.h=new KI,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=G0("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=G0("baseRetryDelayMs",5e3,n),this.$a=G0("retryDelaySeedMs",1e4,n),this.Ya=G0("forwardChannelMaxRetries",2,n),this.ra=G0("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new XL(n&&n.concurrentRequestLimit),this.Ca=new Nq,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function N1(n){if(hU(n),3==n.G){var e=n.V++,t=Fd(n.F);fr(t,"SID",n.J),fr(t,"RID",e),fr(t,"TYPE","terminate"),Z0(n,t),(e=new F0(n,n.h,e,void 0)).K=2,e.v=iS(Fd(t)),t=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(t=Gt.navigator.sendBeacon(e.v.toString(),"")),!t&&Gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=bU(e.l,null),e.g.ea(e.v)),e.F=Date.now(),L0(e)}vU(n)}function lS(n){n.g&&(O1(n),n.g.cancel(),n.g=null)}function hU(n){lS(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),cS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function M1(n,e){n.l.push(new kq(n.Za++,e)),3==n.G&&uS(n)}function uS(n){eU(n.i)||n.m||(n.m=!0,f1(n.Ha,n),n.C=0)}function fU(n,e){var t;t=e?e.m:n.V++;const r=Fd(n.F);fr(r,"SID",n.J),fr(r,"RID",t),fr(r,"AID",n.U),Z0(n,r),n.o&&n.s&&R1(r,n.o,n.s),t=new F0(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=pU(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),A1(n.i,t),C1(t,r,e)}function Z0(n,e){n.j&&I1({},function(t,r){fr(e,r,t)})}function pU(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Qi(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);let h=!0;for(let g=0;g<t;g++){let y=i[g].h;const E=i[g].g;if(y-=s,0>y)s=Math.max(0,i[g].h-100),h=!1;else try{Mq(E,u,"req"+y+"_")}catch{r&&r(E)}}if(h){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function gU(n){n.g||n.u||(n.Y=1,f1(n.Ga,n),n.A=0)}function P1(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=P0(Qi(n.Ga,n),yU(n,n.A)),n.A++,0))}function O1(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function mU(n){n.g=new F0(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Fd(n.oa);fr(e,"RID","rpc"),fr(e,"SID",n.J),fr(e,"CI",n.N?"0":"1"),fr(e,"AID",n.U),Z0(n,e),fr(e,"TYPE","xmlhttp"),n.o&&n.s&&R1(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=iS(Fd(e)),t.s=null,t.U=!0,HL(t,n)}function cS(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function _U(n,e){var t=null;if(n.g==e){cS(n),O1(n),n.g=null;var r=2}else{if(!D1(n.i,e))return;t=e.D,nU(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Xi(r=YI(),new UL(r,t,e,i)),uS(n)}else gU(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function jq(n,e){return!(tU(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=P0(Qi(n.Ha,n,e),yU(n,n.C)),n.C++,0)))}(n,e)||2==r&&P1(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Ag(n,5);break;case 4:Ag(n,10);break;case 3:Ag(n,6);break;default:Ag(n,2)}}function yU(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ag(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Qi(n.jb,n);t||(t=new Dg("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||tS(t,"https"),iS(t)),function Pq(n,e){const t=new KI;if(Gt.Image){const r=new Image;r.onload=$I(sS,t,r,"TestLoadImage: loaded",!0,e),r.onerror=$I(sS,t,r,"TestLoadImage: error",!1,e),r.onabort=$I(sS,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=$I(sS,t,r,"TestLoadImage: timeout",!1,e),Gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Zs(2);n.G=0,n.j&&n.j.va(e),vU(n),hU(n)}function vU(n){n.G=0,n.I=-1,n.j&&((0!=rU(n.i).length||0!=n.l.length)&&(n.i.i.length=0,KR(n.l),n.l.length=0),n.j.ua())}function wU(n,e,t){let r=function Eq(n){return n instanceof Dg?Fd(n):new Dg(n,void 0)}(t);if(""!=r.i)e&&nS(r,e+"."+r.i),rS(r,r.m);else{const i=Gt.location;r=function Cq(n,e,t,r){var i=new Dg(null,void 0);return n&&tS(i,n),e&&nS(i,e),t&&rS(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&QR(n.aa,function(i,s){fr(r,s,i)}),t=n.sa,(e=n.D)&&t&&fr(r,e,t),fr(r,"VER",n.ma),Z0(n,r),r}function bU(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new li(t&&n.Ba&&!n.qa?new $0({ib:!0}):n.qa)).L=n.H,e}function EU(){}function dS(){if(oy&&!(10<=Number(eq)))throw Error("Environmental error: no available transport.")}function ra(n,e){Mi.call(this),this.g=new dU(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!HI(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!HI(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new cy(this)}function CU(n){v1.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function TU(){w1.call(this),this.status=1}function cy(n){this.g=n}(dt=li.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():b1.g(),this.C=function BL(n){return n.h||(n.h=n.i())}(this.u?this.u:b1),this.g.onreadystatechange=Qi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void oU(this,s)}n=t||"";const i=new ly(this.headers);r&&I1(r,function(s,u){i.set(u,s)}),r=function W6(n){e:{var e=Vq;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Gt.FormData&&n instanceof Gt.FormData,!(0<=dL(Lq,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,u){this.g.setRequestHeader(u,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{uU(this),0<this.B&&((this.K=function Uq(n){return oy&&function X6(){return function K6(n){var e=J6;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=pL(String(qI)).split("."),t=pL("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",s=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=YR(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||YR(0==i[2].length,0==s[2].length)||YR(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qi(this.pa,this)):this.A=_1(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){oU(this,s)}},dt.pa=function(){typeof ZR<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xi(this,"timeout"),this.abort(8))},dt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xi(this,"complete"),Xi(this,"abort"),aS(this))},dt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),aS(this,!0)),li.Z.M.call(this)},dt.Fa=function(){this.s||(this.F||this.v||this.l?lU(this):this.cb())},dt.cb=function(){lU(this)},dt.ba=function(){try{return 2<Ld(this)?this.g.status:-1}catch{return-1}},dt.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},dt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Oq(e)}},dt.Da=function(){return this.m},dt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(dt=dU.prototype).ma=8,dt.G=1,dt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},dt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new F0(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=_L(s),vL(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=pU(this,i,e),fr(t=Fd(this.F),"RID",n),fr(t,"CVER",22),this.D&&fr(t,"X-HTTP-Session-Id",this.D),Z0(this,t),this.o&&s&&R1(t,this.o,s),A1(this.i,i),this.Ra&&fr(t,"TYPE","init"),this.ja?(fr(t,"$req",e),fr(t,"SID","null"),i.$=!0,C1(i,t,null)):C1(i,t,e),this.G=2}}else 3==this.G&&(n?fU(this,n):0==this.l.length||eU(this.i)||fU(this))},dt.Ga=function(){if(this.u=null,mU(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=P0(Qi(this.bb,this),n)}},dt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Zs(10),lS(this),mU(this))},dt.ab=function(){null!=this.v&&(this.v=null,lS(this),P1(this),Zs(19))},dt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Zs(2)):(this.h.info("Failed to ping google.com"),Zs(1))},(dt=EU.prototype).xa=function(){},dt.wa=function(){},dt.va=function(){},dt.ua=function(){},dt.Oa=function(){},dS.prototype.g=function(n,e){return new ra(n,e)},Ji(ra,Mi),ra.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),f1(Qi(n.hb,n,e))),Zs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=wU(n,null,n.W),uS(n)},ra.prototype.close=function(){N1(this.g)},ra.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,M1(this.g,e)}else this.v?((e={}).__data__=h1(n),M1(this.g,e)):M1(this.g,n)},ra.prototype.M=function(){this.g.j=null,delete this.j,N1(this.g),delete this.g,ra.Z.M.call(this)},Ji(CU,v1),Ji(TU,w1),Ji(cy,EU),cy.prototype.xa=function(){Xi(this.g,"a")},cy.prototype.wa=function(n){Xi(this.g,new CU(n))},cy.prototype.va=function(n){Xi(this.g,new TU(n))},cy.prototype.ua=function(){Xi(this.g,"b")},dS.prototype.createWebChannel=dS.prototype.g,ra.prototype.send=ra.prototype.u,ra.prototype.open=ra.prototype.m,ra.prototype.close=ra.prototype.close,QI.NO_ERROR=0,QI.TIMEOUT=8,QI.HTTP_ERROR=6,VL.COMPLETE="complete",jL.EventType=O0,O0.OPEN="a",O0.CLOSE="b",O0.ERROR="c",O0.MESSAGE="d",Mi.prototype.listen=Mi.prototype.N,li.prototype.listenOnce=li.prototype.O,li.prototype.getLastError=li.prototype.La,li.prototype.getLastErrorCode=li.prototype.Da,li.prototype.getStatus=li.prototype.ba,li.prototype.getResponseJson=li.prototype.Qa,li.prototype.getResponseText=li.prototype.ga,li.prototype.send=li.prototype.ea;var $q=Od.createWebChannelTransport=function(){return new dS},Hq=Od.getStatEventTarget=function(){return YI()},F1=Od.ErrorCode=QI,qq=Od.EventType=VL,Gq=Od.Event=Tg,IU=Od.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Zq=Od.FetchXmlHttpFactory=$0,hS=Od.WebChannel=jL,zq=Od.XhrIo=li;const SU="@firebase/firestore";class Pi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pi.UNAUTHENTICATED=new Pi(null),Pi.GOOGLE_CREDENTIALS=new Pi("google-credentials-uid"),Pi.FIRST_PARTY=new Pi("first-party-uid"),Pi.MOCK_USER=new Pi("mock-user");let dy="9.9.2";const Cf=new Yl.Yd("@firebase/firestore");function L1(){return Cf.logLevel}function $e(n,...e){if(Cf.logLevel<=Yl.in.DEBUG){const t=e.map(U1);Cf.debug(`Firestore (${dy}): ${n}`,...t)}}function Xr(n,...e){if(Cf.logLevel<=Yl.in.ERROR){const t=e.map(U1);Cf.error(`Firestore (${dy}): ${n}`,...t)}}function xg(n,...e){if(Cf.logLevel<=Yl.in.WARN){const t=e.map(U1);Cf.warn(`Firestore (${dy}): ${n}`,...t)}}function U1(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${dy}) INTERNAL ASSERTION FAILED: `+n;throw Xr(e),new Error(e)}function jt(n,e){n||ht()}function it(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class DU{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pi.UNAUTHENTICATED))}shutdown(){}}class Qq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Jq{constructor(e){this.t=e,this.currentUser=Pi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Oi,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=u;e.enqueueRetryable((0,be.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},g=y=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Oi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(jt("string"==typeof r.accessToken),new DU(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return jt(null===e||"string"==typeof e),new Pi(e)}}class Xq{constructor(e,t,r){this.type="FirstParty",this.user=Pi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class eG{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Xq(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Pi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tG{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.p;return this.p=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(jt("string"==typeof t.token),this.p=t.token,new AU(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nG(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class xU{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=nG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Zt(n,e){return n<e?-1:n>e?1:0}function hy(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function kU(n){return n+"\0"}class pr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pr.fromMillis(Date.now())}static fromDate(e){return pr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new pr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ut(e)}static min(){return new Ut(new pr(0,0))}static max(){return new Ut(new pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class z0{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===z0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof z0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class hn extends z0{construct(e,t,r){return new hn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new hn(t)}static emptyPath(){return new hn([])}}const rG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ur extends z0{construct(e,t,r){return new Ur(e,t,r)}static isValidIdentifier(e){return rG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ur(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Fe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Fe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Fe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(s(),i++)}if(s(),u)throw new Fe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ur(t)}static emptyPath(){return new Ur([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(hn.fromString(e))}static fromName(e){return new tt(hn.fromString(e).popFirst(5))}static empty(){return new tt(hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new hn(e.slice()))}}class fS{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function V1(n){return n.fields.find(e=>2===e.kind)}function kg(n){return n.fields.filter(e=>2!==e.kind)}fS.UNKNOWN_ID=-1;class pS{constructor(e,t){this.fieldPath=e,this.kind=t}}class W0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new W0(0,ia.min())}}function RU(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ut.fromTimestamp(1e9===r?new pr(t+1,0):new pr(t,r));return new ia(i,tt.empty(),e)}function NU(n){return new ia(n.readTime,n.key,-1)}class ia{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ia(Ut.min(),tt.empty(),-1)}static max(){return new ia(Ut.max(),tt.empty(),-1)}}function B1(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:Zt(n.largestBatchId,e.largestBatchId))}const MU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Tf(n){return j1.apply(this,arguments)}function j1(){return j1=(0,be.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==MU)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),j1.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,s=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++s,u&&s===i&&t()},g=>r(g))}),u=!0,s===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,i)=>{const s=e.length,u=new Array(s);let h=0;for(let g=0;g<s;g++){const y=g;t(e[y]).next(E=>{u[y]=E,++h,h===s&&r(u)},E=>i(E))}})}static doWhile(e,t){return new ce((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class gS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Oi,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new K0(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=$1(r.target.error);this.T.reject(new K0(e,i))}}static open(e,t,r,i){try{return new gS(t,e.transaction(i,r))}catch(s){throw new K0(t,s)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new aG(t)}}class Ql{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===Ql.v((0,O.z$)())&&Xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),Rg(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,O.hl)())return!1;if(Ql.S())return!0;const e=(0,O.z$)(),t=Ql.v(e),r=0<t&&t<10,i=Ql.D(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,be.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{r(u.target.result)},s.onblocked=()=>{i(new K0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new Fe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Fe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new K0(e,h))},s.onupgradeneeded=u=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.P.M(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=r=>t.O(r)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,be.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.k(e);const g=gS.open(s.db,e,u?"readonly":"readwrite",r),y=i(g).next(E=>(g.R(),E)).catch(E=>(g.abort(E),ce.reject(E))).toPromise();return y.catch(()=>{}),yield g.A,y}catch(g){const y=g,E="FirebaseError"!==y.name&&h<3;if($e("SimpleDb","Transaction failed with error:",y.message,"Retrying:",E),s.close(),!E)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class oG{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Rg(this.$.delete())}}class K0 extends Fe{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function If(n){return"IndexedDbTransactionError"===n.name}class aG{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Rg(r)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),Rg(this.store.add(e))}get(e){return Rg(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),Rg(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),Rg(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(u,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new ce((s,u)=>{i.onerror=h=>{u(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,s)=>{r.onerror=u=>{s(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}W(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(s,u,h)=>h.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=s=>{const u=$1(s.target.error);i(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}G(e,t){const r=[];return new ce((i,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const g=new oG(h),y=t(h.primaryKey,h.value,g);if(y instanceof ce){const E=y.catch(I=>(g.done(),ce.reject(I)));r.push(E)}g.isDone?i():null===g.U?h.continue():h.continue(g.U)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Rg(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=$1(r.target.error);t(i)}})}let OU=!1;function $1(n){const e=Ql.v((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return OU||(OU=!0,setTimeout(()=>{throw r},0)),r}}return n}class lG{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;$e("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,be.Z)(function*(){t.task=null;try{$e("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){If(r)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Tf(r)}yield t.Z(1)}))}}class uG{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,be.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,s=!0;return ce.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return $e("IndexBackiller",`Processing collection: ${u}`),this.nt(e,u,i).next(h=>{i-=h,r.add(u)});s=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const u=s.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.st(i,s)).next(h=>($e("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}st(e,t){let r=e;return t.changes.forEach((i,s)=>{const u=NU(s);B1(u,r)>0&&(r=u)}),new ia(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class bo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function FU(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ng(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function LU(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}bo.ot=-1;class Vr{constructor(e,t){this.comparator=e,this.root=t||es.EMPTY}insert(e,t){return new Vr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,es.BLACK,null,null))}remove(e){return new Vr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,es.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mS(this.root,e,this.comparator,!1)}getReverseIterator(){return new mS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mS(this.root,e,this.comparator,!0)}}class mS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class es{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??es.RED,this.left=i??es.EMPTY,this.right=s??es.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new es(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return es.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return es.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,es.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,es.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}es.EMPTY=null,es.RED=!0,es.BLACK=!1,es.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,i){return this}insert(n,e,t){return new es(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pn{constructor(e){this.comparator=e,this.data=new Vr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new UU(this.data.getIterator())}getIteratorFrom(e){return new UU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class UU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fy(n){return n.hasNext()?n.getNext():void 0}class sa{constructor(e){this.fields=e,e.sort(Ur.comparator)}static empty(){return new sa([])}unionWith(e){let t=new Pn(Ur.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new sa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hy(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ii{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ii(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Ii(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ii.EMPTY_BYTE_STRING=new Ii("");const dG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sf(n){if(jt(!!n),"string"==typeof n){let e=0;const t=dG.exec(n);if(jt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Br(n.seconds),nanos:Br(n.nanos)}}function Br(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Mg(n){return"string"==typeof n?Ii.fromBase64String(n):Ii.fromUint8Array(n)}function H1(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function VU(n){const e=n.mapValue.fields.__previous_value__;return H1(e)?VU(e):e}function Y0(n){const e=Sf(n.mapValue.fields.__local_write_time__.timestampValue);return new pr(e.seconds,e.nanos)}class hG{constructor(e,t,r,i,s,u,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=g}}class Ud{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ud("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ud&&e.projectId===this.projectId&&e.database===this.database}}function Q0(n){return null==n}function J0(n){return 0===n&&1/n==-1/0}function BU(n){return"number"==typeof n&&Number.isInteger(n)&&!J0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Df={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_S={nullValue:"NULL_VALUE"};function Pg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?H1(n)?4:qU(n)?9007199254740991:10:ht()}function ac(n,e){if(n===e)return!0;const t=Pg(n);if(t!==Pg(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Y0(n).isEqual(Y0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Sf(r.timestampValue),u=Sf(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Mg(n.bytesValue).isEqual(Mg(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Br(r.geoPointValue.latitude)===Br(i.geoPointValue.latitude)&&Br(r.geoPointValue.longitude)===Br(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Br(r.integerValue)===Br(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Br(r.doubleValue),u=Br(i.doubleValue);return s===u?J0(s)===J0(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return hy(n.arrayValue.values||[],e.arrayValue.values||[],ac);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(FU(s)!==FU(u))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===u[h]||!ac(s[h],u[h])))return!1;return!0}(n,e);default:return ht()}var i}function X0(n,e){return void 0!==(n.values||[]).find(t=>ac(t,e))}function Af(n,e){if(n===e)return 0;const t=Pg(n),r=Pg(e);if(t!==r)return Zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Zt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=Br(i.integerValue||i.doubleValue),h=Br(s.integerValue||s.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return jU(n.timestampValue,e.timestampValue);case 4:return jU(Y0(n),Y0(e));case 5:return Zt(n.stringValue,e.stringValue);case 6:return function(i,s){const u=Mg(i),h=Mg(s);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),h=s.split("/");for(let g=0;g<u.length&&g<h.length;g++){const y=Zt(u[g],h[g]);if(0!==y)return y}return Zt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=Zt(Br(i.latitude),Br(s.latitude));return 0!==u?u:Zt(Br(i.longitude),Br(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],h=s.values||[];for(let g=0;g<u.length&&g<h.length;++g){const y=Af(u[g],h[g]);if(y)return y}return Zt(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Df.mapValue&&s===Df.mapValue)return 0;if(i===Df.mapValue)return 1;if(s===Df.mapValue)return-1;const u=i.fields||{},h=Object.keys(u),g=s.fields||{},y=Object.keys(g);h.sort(),y.sort();for(let E=0;E<h.length&&E<y.length;++E){const I=Zt(h[E],y[E]);if(0!==I)return I;const k=Af(u[h[E]],g[y[E]]);if(0!==k)return k}return Zt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw ht()}}function jU(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Zt(n,e);const t=Sf(n),r=Sf(e),i=Zt(t.seconds,r.seconds);return 0!==i?i:Zt(t.nanos,r.nanos)}function py(n){return q1(n)}function q1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Sf(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Mg(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=q1(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const h of i)u?u=!1:s+=",",s+=`${h}:${q1(r.fields[h])}`;return s+"}"}(n.mapValue):ht();var e}function Og(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function G1(n){return!!n&&"integerValue"in n}function eb(n){return!!n&&"arrayValue"in n}function $U(n){return!!n&&"nullValue"in n}function HU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yS(n){return!!n&&"mapValue"in n}function tb(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ng(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=tb(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tb(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qU(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function fG(n){return"nullValue"in n?_S:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Og(Ud.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function pG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Og(Ud.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Df:ht()}function GU(n,e){const t=Af(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ZU(n,e){const t=Af(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ts{constructor(e){this.value=e}static empty(){return new ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tb(t)}setAll(e){let t=Ur.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=tb(u):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());yS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ac(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];yS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ng(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ts(tb(this.value))}}function zU(n){const e=[];return Ng(n.fields,(t,r)=>{const i=new Ur([t]);if(yS(r)){const s=zU(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new sa(e)}class zn{constructor(e,t,r,i,s,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=u}static newInvalidDocument(e){return new zn(e,0,Ut.min(),Ut.min(),ts.empty(),0)}static newFoundDocument(e,t,r){return new zn(e,1,t,Ut.min(),r,0)}static newNoDocument(e,t){return new zn(e,2,t,Ut.min(),ts.empty(),0)}static newUnknownDocument(e,t){return new zn(e,3,t,Ut.min(),ts.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gG{constructor(e,t=null,r=[],i=[],s=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=h,this.ut=null}}function WU(n,e=null,t=[],r=[],i=null,s=null,u=null){return new gG(n,e,t,r,i,s,u)}function Fg(n){const e=it(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+py(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Q0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>py(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>py(r)).join(",")),e.ut=t}return e.ut}function nb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!TG(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ac(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!XU(n.startAt,e.startAt)&&XU(n.endAt,e.endAt)}function vS(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function wS(n,e){return n.filters.filter(t=>t instanceof ns&&t.field.isEqual(e))}function KU(n,e,t){let r=_S,i=!0;for(const s of wS(n,e)){let u=_S,h=!0;switch(s.op){case"<":case"<=":u=fG(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,h=!1;break;case"!=":case"not-in":u=_S}GU({value:r,inclusive:i},{value:u,inclusive:h})<0&&(r=u,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];GU({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function YU(n,e,t){let r=Df,i=!0;for(const s of wS(n,e)){let u=Df,h=!0;switch(s.op){case">=":case">":u=pG(s.value),h=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,h=!1;break;case"!=":case"not-in":u=Df}ZU({value:r,inclusive:i},{value:u,inclusive:h})>0&&(r=u,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];ZU({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class ns extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new _G(e,t,r):"array-contains"===t?new wG(e,r):"in"===t?new bG(e,r):"not-in"===t?new EG(e,r):"array-contains-any"===t?new CG(e,r):new ns(e,t,r)}static ct(e,t,r){return"in"===t?new yG(e,r):new vG(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Af(t,this.value)):null!==t&&Pg(this.value)===Pg(t)&&this.at(Af(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class _G extends ns{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.at(t)}}class yG extends ns{constructor(e,t){super(e,"in",t),this.keys=QU(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vG extends ns{constructor(e,t){super(e,"not-in",t),this.keys=QU(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function QU(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}class wG extends ns{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return eb(t)&&X0(t.arrayValue,this.value)}}class bG extends ns{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&X0(this.value.arrayValue,t)}}class EG extends ns{constructor(e,t){super(e,"not-in",t)}matches(e){if(X0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!X0(this.value.arrayValue,t)}}class CG extends ns{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!eb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>X0(this.value.arrayValue,r))}}class xf{constructor(e,t){this.position=e,this.inclusive=t}}class gy{constructor(e,t="asc"){this.field=e,this.dir=t}}function TG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function JU(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?tt.comparator(tt.fromName(u.referenceValue),t.key):Af(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function XU(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ac(n.position[t],e.position[t]))return!1;return!0}class Vd{constructor(e,t=null,r=[],i=[],s=null,u="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=h,this.endAt=g,this.lt=null,this.ft=null}}function e2(n,e,t,r,i,s,u,h){return new Vd(n,e,t,r,i,s,u,h)}function my(n){return new Vd(n)}function t2(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Z1(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function z1(n){for(const e of n.filters)if(e.ht())return e.field;return null}function W1(n){return null!==n.collectionGroup}function _y(n){const e=it(n);if(null===e.lt){e.lt=[];const t=z1(e),r=Z1(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new gy(t)),e.lt.push(new gy(Ur.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new gy(Ur.keyField(),s))}}}return e.lt}function Eo(n){const e=it(n);if(!e.ft)if("F"===e.limitType)e.ft=WU(e.path,e.collectionGroup,_y(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of _y(e))t.push(new gy(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new xf(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new xf(e.startAt.position,e.startAt.inclusive):null;e.ft=WU(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function bS(n,e,t){return new Vd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rb(n,e){return nb(Eo(n),Eo(e))&&n.limitType===e.limitType}function n2(n){return`${Fg(Eo(n))}|lt:${n.limitType}`}function K1(n){return`Query(target=${function mG(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${py(r.value)}`;var r}).join(", ")}]`),Q0(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>py(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>py(t)).join(",")),`Target(${e})`}(Eo(n))}; limitType=${n.limitType})`}function Y1(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):tt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const h=JU(i,s,u);return i.inclusive?h<=0:h<0}(t.startAt,_y(t),r)||t.endAt&&!function(i,s,u){const h=JU(i,s,u);return i.inclusive?h>=0:h>0}(t.endAt,_y(t),r)));var t,r}function r2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function i2(n){return(e,t)=>{let r=!1;for(const i of _y(n)){const s=IG(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function IG(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):function(i,s,u){const h=s.data.field(i),g=u.data.field(i);return null!==h&&null!==g?Af(h,g):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function s2(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:J0(e)?"-0":e}}function o2(n){return{integerValue:""+n}}function a2(n,e){return BU(e)?o2(e):s2(n,e)}class ES{constructor(){this._=void 0}}function SG(n,e,t){return n instanceof yy?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Lg?u2(n,e):n instanceof Ug?c2(n,e):function(r,i){const s=l2(r,i),u=d2(s)+d2(r._t);return G1(s)&&G1(r._t)?o2(u):s2(r.wt,u)}(n,e)}function DG(n,e,t){return n instanceof Lg?u2(n,e):n instanceof Ug?c2(n,e):t}function l2(n,e){return n instanceof vy?G1(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class yy extends ES{}class Lg extends ES{constructor(e){super(),this.elements=e}}function u2(n,e){const t=h2(e);for(const r of n.elements)t.some(i=>ac(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ug extends ES{constructor(e){super(),this.elements=e}}function c2(n,e){let t=h2(e);for(const r of n.elements)t=t.filter(i=>!ac(i,r));return{arrayValue:{values:t}}}class vy extends ES{constructor(e,t){super(),this.wt=e,this._t=t}}function d2(n){return Br(n.integerValue||n.doubleValue)}function h2(n){return eb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ib{constructor(e,t){this.field=e,this.transform=t}}class xG{constructor(e,t){this.version=e,this.transformResults=t}}class xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function CS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class TS{}function f2(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new by(n.key,xr.none()):new wy(n.key,n.data,xr.none());{const t=n.data,r=ts.empty();let i=new Pn(Ur.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new Bd(n.key,r,new sa(i.toArray()),xr.none())}}function kG(n,e,t){n instanceof wy?function(r,i,s){const u=r.value.clone(),h=m2(r.fieldTransforms,i,s.transformResults);u.setAll(h),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Bd?function(r,i,s){if(!CS(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=m2(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(g2(r)),h.setAll(u),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function sb(n,e,t,r){return n instanceof wy?function(i,s,u,h){if(!CS(i.precondition,s))return u;const g=i.value.clone(),y=_2(i.fieldTransforms,h,s);return g.setAll(y),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof Bd?function(i,s,u,h){if(!CS(i.precondition,s))return u;const g=_2(i.fieldTransforms,h,s),y=s.data;return y.setAll(g2(i)),y.setAll(g),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(u=t,CS(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u);var s,u}function RG(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=l2(r.transform,i||null);null!=s&&(null===t&&(t=ts.empty()),t.set(r.field,s))}return t||null}function p2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&hy(t,r,(i,s)=>function AG(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Lg&&r instanceof Lg||t instanceof Ug&&r instanceof Ug?hy(t.elements,r.elements,ac):t instanceof vy&&r instanceof vy?ac(t._t,r._t):t instanceof yy&&r instanceof yy);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class wy extends TS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bd extends TS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function g2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function m2(n,e,t){const r=new Map;jt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,h=e.data.field(s.field);r.set(s.field,DG(u,h,t[i]))}return r}function _2(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,SG(s,u,e))}return r}class by extends TS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Q1 extends TS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class NG{constructor(e){this.count=e}}var ui,fn;function y2(n){switch(n){default:return ht();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function v2(n){if(void 0===n)return Xr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case ui.OK:return fe.OK;case ui.CANCELLED:return fe.CANCELLED;case ui.UNKNOWN:return fe.UNKNOWN;case ui.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case ui.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case ui.INTERNAL:return fe.INTERNAL;case ui.UNAVAILABLE:return fe.UNAVAILABLE;case ui.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case ui.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case ui.NOT_FOUND:return fe.NOT_FOUND;case ui.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case ui.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case ui.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case ui.ABORTED:return fe.ABORTED;case ui.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case ui.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case ui.DATA_LOSS:return fe.DATA_LOSS;default:return ht()}}(fn=ui||(ui={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";class kf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ng(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return LU(this.inner)}size(){return this.innerSize}}const MG=new Vr(tt.comparator);function Co(){return MG}const w2=new Vr(tt.comparator);function ob(...n){let e=w2;for(const t of n)e=e.insert(t.key,t);return e}function b2(n){let e=w2;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function lc(){return ab()}function E2(){return ab()}function ab(){return new kf(n=>n.toString(),(n,e)=>n.isEqual(e))}const PG=new Vr(tt.comparator),OG=new Pn(tt.comparator);function Qt(...n){let e=OG;for(const t of n)e=e.add(t);return e}const FG=new Pn(Zt);function IS(){return FG}class lb{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,ub.createSynthesizedTargetChangeForCurrentChange(e,t)),new lb(Ut.min(),r,IS(),Co(),Qt())}}class ub{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ub(Ii.EMPTY_BYTE_STRING,t,Qt(),Qt(),Qt())}}class SS{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class C2{constructor(e,t){this.targetId=e,this.It=t}}class T2{constructor(e,t,r=Ii.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class I2{constructor(){this.Tt=0,this.Et=D2(),this.At=Ii.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Qt(),t=Qt(),r=Qt();return this.Et.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new ub(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=D2()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class LG{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=Co(),this.Bt=S2(),this.Lt=new Pn(Zt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const s=i.target;if(vS(s))if(0===r){const u=new tt(s.path);this.Kt(t,u,zn.newNoDocument(u,Ut.min()))}else jt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((s,u)=>{const h=this.Ht(u);if(h){if(s.current&&vS(h.target)){const g=new tt(h.target.path);null!==this.$t.get(g)||this.Xt(u,g)||this.Kt(u,g,zn.newNoDocument(g,e))}s.vt&&(t.set(u,s.St()),s.Dt())}});let r=Qt();this.Bt.forEach((s,u)=>{let h=!0;u.forEachWhile(g=>{const y=this.Ht(g);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.$t.forEach((s,u)=>u.setReadTime(e));const i=new lb(e,t,this.Lt,this.$t,r);return this.$t=Co(),this.Bt=S2(),this.Lt=new Pn(Zt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new I2,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Pn(Zt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new I2),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function S2(){return new Vr(tt.comparator)}function D2(){return new Vr(tt.comparator)}const UG={asc:"ASCENDING",desc:"DESCENDING"},VG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class BG{constructor(e,t){this.databaseId=e,this.dt=t}}function cb(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A2(n,e){return n.dt?e.toBase64():e.toUint8Array()}function jG(n,e){return cb(n,e.toTimestamp())}function Fi(n){return jt(!!n),Ut.fromTimestamp(function(e){const t=Sf(e);return new pr(t.seconds,t.nanos)}(n))}function J1(n,e){return(t=n,new hn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function x2(n){const e=hn.fromString(n);return jt(U2(e)),e}function db(n,e){return J1(n.databaseId,e.path)}function uc(n,e){const t=x2(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(R2(t))}function X1(n,e){return J1(n.databaseId,e)}function k2(n){const e=x2(n);return 4===e.length?hn.emptyPath():R2(e)}function hb(n){return new hn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function R2(n){return jt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function N2(n,e,t){return{name:db(n,e),fields:t.value.mapValue.fields}}function M2(n,e,t){const r=uc(n,e.name),i=Fi(e.updateTime),s=new ts({mapValue:{fields:e.fields}}),u=zn.newFoundDocument(r,i,s);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function fb(n,e){let t;if(e instanceof wy)t={update:N2(n,e.key,e.value)};else if(e instanceof by)t={delete:db(n,e.key)};else if(e instanceof Bd)t={update:N2(n,e.key,e.data),updateMask:YG(e.fieldMask)};else{if(!(e instanceof Q1))return ht();t={verify:db(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const u=s.transform;if(u instanceof yy)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Lg)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ug)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof vy)return{fieldPath:s.field.canonicalString(),increment:u._t};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:jG(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),t;var i}function eN(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?xr.updateTime(Fi(i.updateTime)):void 0!==i.exists?xr.exists(i.exists):xr.none():xr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let h=null;"setToServerValue"in u?(jt("REQUEST_TIME"===u.setToServerValue),h=new yy):"appendMissingElements"in u?h=new Lg(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new Ug(u.removeAllFromArray.values||[]):"increment"in u?h=new vy(s,u.increment):ht();const g=Ur.fromServerFormat(u.fieldPath);return new ib(g,h)}(n,i)):[];var i;if(e.update){const i=uc(n,e.update.name),s=new ts({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new sa((e.updateMask.fieldPaths||[]).map(y=>Ur.fromServerFormat(y)));return new Bd(i,s,u,t,r)}return new wy(i,s,t,r)}if(e.delete){const i=uc(n,e.delete);return new by(i,t)}if(e.verify){const i=uc(n,e.verify);return new Q1(i,t)}return ht()}function P2(n,e){return{documents:[X1(n,e.path)]}}function O2(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=X1(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=X1(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const y=g.map(E=>function(I){if("=="===I.op){if(HU(I.value))return{unaryFilter:{field:Ey(I.field),op:"IS_NAN"}};if($U(I.value))return{unaryFilter:{field:Ey(I.field),op:"IS_NULL"}}}else if("!="===I.op){if(HU(I.value))return{unaryFilter:{field:Ey(I.field),op:"IS_NOT_NAN"}};if($U(I.value))return{unaryFilter:{field:Ey(I.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ey(I.field),op:zG(I.op),value:I.value}}}(E));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(g){if(0!==g.length)return g.map(y=>{return{field:Ey((E=y).field),direction:ZG(E.dir)};var E})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=(y=e.limit,n.dt||Q0(y)?y:{value:y});var y,h,g;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function F2(n){let e=k2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){jt(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let s=[];t.where&&(s=L2(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(E=>{return new gy(Cy((I=E).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let h=null;t.limit&&(h=function(E){let I;return I="object"==typeof E?E.value:E,Q0(I)?null:I}(t.limit));let g=null;var E;t.startAt&&(g=new xf((E=t.startAt).values||[],!!E.before));let y=null;return t.endAt&&(y=function(E){return new xf(E.values||[],!E.before)}(t.endAt)),e2(e,i,u,s,h,"F",g,y)}function L2(n){return n?void 0!==n.unaryFilter?[KG(n)]:void 0!==n.fieldFilter?[WG(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>L2(e)).reduce((e,t)=>e.concat(t)):ht():[]}function ZG(n){return UG[n]}function zG(n){return VG[n]}function Ey(n){return{fieldPath:n.canonicalString()}}function Cy(n){return Ur.fromServerFormat(n.fieldPath)}function WG(n){return ns.create(Cy(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function KG(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Cy(n.unaryFilter.field);return ns.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Cy(n.unaryFilter.field);return ns.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Cy(n.unaryFilter.field);return ns.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Cy(n.unaryFilter.field);return ns.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function YG(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function U2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function zs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=V2(e)),e=QG(n.get(t),e);return V2(e)}function QG(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function V2(n){return n+"\x01\x01"}function cc(n){const e=n.length;if(jt(e>=2),2===e)return jt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),hn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&ht(),n.charAt(u+1)){case"\x01":const h=n.substring(s,u);let g;0===i.length?g=h:(i+=h,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(s,u),i+="\0";break;case"\x11":i+=n.substring(s,u+1);break;default:ht()}s=u+2}return new hn(r)}const B2=["userId","batchId"];function DS(n,e){return[n,zs(e)]}function j2(n,e,t){return[n,zs(e),t]}const JG={},XG=["prefixPath","collectionGroup","readTime","documentId"],eZ=["prefixPath","collectionGroup","documentId"],tZ=["collectionGroup","readTime","prefixPath","documentId"],nZ=["canonicalId","targetId"],rZ=["targetId","path"],iZ=["path","targetId"],sZ=["collectionId","parent"],oZ=["indexId","uid"],aZ=["uid","sequenceNumber"],lZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uZ=["indexId","uid","orderedDocumentKey"],cZ=["userId","collectionPath","documentId"],dZ=["userId","collectionPath","largestBatchId"],hZ=["userId","collectionGroup","largestBatchId"],$2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fZ=[...$2,"documentOverlays"],H2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],q2=H2,pZ=[...q2,"indexConfiguration","indexState","indexEntries"];class tN extends PU{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Li(n,e){const t=it(n);return Ql.N(t.ee,e)}class nN{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&kG(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=sb(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=sb(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=E2();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let h=this.applyToLocalView(u,s.mutatedFields);h=t.has(i.key)?null:h;const g=f2(u,h);null!==g&&r.set(i.key,g),u.isValidDocument()||u.convertToNoDocument(Ut.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&hy(this.mutations,e.mutations,(t,r)=>p2(t,r))&&hy(this.baseMutations,e.baseMutations,(t,r)=>p2(t,r))}}class rN{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){jt(e.mutations.length===r.length);let i=PG;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new rN(e,t,r,i)}}class iN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Rf{constructor(e,t,r,i,s=Ut.min(),u=Ut.min(),h=Ii.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new Rf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Rf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Rf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class G2{constructor(e){this.ne=e}}function Z2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:AS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:db(i=n.ne,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:cb(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Vg(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:Vg(e.version)}}var i,s;return r}function AS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Vg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bg(n){const e=new pr(n.seconds,n.nanoseconds);return Ut.fromTimestamp(e)}function jg(n,e){const t=(e.baseMutations||[]).map(s=>eN(n.ne,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>eN(n.ne,s)),i=pr.fromMillis(e.localWriteTimeMs);return new nN(e.batchId,i,t,r)}function pb(n){const e=Bg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Bg(n.lastLimboFreeSnapshotVersion):Ut.min();let r;var i;return void 0!==n.query.documents?(jt(1===(i=n.query).documents.length),r=Eo(my(k2(i.documents[0])))):r=Eo(F2(n.query)),new Rf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ii.fromBase64String(n.resumeToken))}function z2(n,e){const t=Vg(e.snapshotVersion),r=Vg(e.lastLimboFreeSnapshotVersion);let i;i=vS(e.target)?P2(n.ne,e.target):O2(n.ne,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fg(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sN(n){const e=F2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?bS(e,e.limit,"L"):e}function oN(n,e){return new iN(e.largestBatchId,eN(n.ne,e.overlayMutation))}function W2(n,e){const t=e.path.lastSegment();return[n,zs(e.path.popLast()),t]}function K2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Vg(r.readTime),documentKey:zs(r.documentKey.path),largestBatchId:r.largestBatchId}}class mZ{getBundleMetadata(e,t){return Y2(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Bg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Y2(e).put({bundleId:(r=t).id,createTime:Vg(Fi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Q2(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:sN(i.bundledQuery),readTime:Bg(i.readTime)};var i})}saveNamedQuery(e,t){return Q2(e).put({name:(r=t).name,readTime:Vg(Fi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Y2(n){return Li(n,"bundles")}function Q2(n){return Li(n,"namedQueries")}class xS{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new xS(e,t.uid||"")}getOverlay(e,t){return gb(e).get(W2(this.userId,t)).next(r=>r?oN(this.wt,r):null)}getOverlays(e,t){const r=lc();return ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,u)=>{const h=new iN(t,u);i.push(this.ie(e,h))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(zs(u.getCollectionPath())));const s=[];return i.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);s.push(gb(e).W("collectionPathOverlayIndex",h))}),ce.waitFor(s)}getOverlaysForCollection(e,t,r){const i=lc(),s=zs(t),u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return gb(e).K("collectionPathOverlayIndex",u).next(h=>{for(const g of h){const y=oN(this.wt,g);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=lc();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return gb(e).J({index:"collectionGroupOverlayIndex",range:h},(g,y,E)=>{const I=oN(this.wt,y);s.size()<i||I.largestBatchId===u?(s.set(I.getKey(),I),u=I.largestBatchId):E.done()}).next(()=>s)}ie(e,t){return gb(e).put(function(r,i,s){const[u,h,g]=W2(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:g,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:fb(r.ne,s.mutation)}}(this.wt,this.userId,t))}}function gb(n){return Li(n,"documentOverlays")}class $g{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Br(e.integerValue));else if("doubleValue"in e){const r=Br(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),J0(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Mg(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?qU(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):ht()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),tt.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function _Z(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function J2(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=_Z(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}$g.ye=new $g;class yZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=J2(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=J2(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class vZ{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class wZ{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class mb{constructor(){this.Oe=new yZ,this.Fe=new vZ(this.Oe),this.$e=new wZ(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class Hg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Hg(this.indexId,this.documentKey,this.arrayValue,r)}}function qg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=X2(n.arrayValue,e.arrayValue),0!==t?t:(t=X2(n.directionalValue,e.directionalValue),0!==t?t:tt.comparator(n.documentKey,e.documentKey)))}function X2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class bZ{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=V1(e);if(void 0!==t&&!this.Qe(t))return!1;const r=kg(e);let i=0,s=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const u=r[i];if(!this.je(this.Ke,u)||!this.We(this.Ue[s++],u))return!1;++i}for(;i<r.length;++i)if(s>=this.Ue.length||!this.We(this.Ue[s++],r[i]))return!1;return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class EZ{constructor(){this.ze=new aN}addToCollectionParentIndex(e,t){return this.ze.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(ia.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(ia.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class aN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pn(hn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pn(hn.comparator)).toArray()}}const kS=new Uint8Array(0);class CZ{constructor(e,t){this.user=e,this.databaseId=t,this.He=new aN,this.Je=new kf(r=>Fg(r),(r,i)=>nb(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const s={collectionId:r,parent:zs(i)};return eV(e).put(s)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[kU(t),""],!1,!0);return eV(e).K(i).next(s=>{for(const u of s){if(u.collectionId!==t)break;r.push(cc(u.parent))}return r})}addFieldIndex(e,t){const r=RS(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;delete i.indexId;const s=r.add(i);if(t.indexState){const u=yb(e);return s.next(h=>{u.put(K2(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=RS(e),i=yb(e),s=_b(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=_b(e);let i=!0;const s=new Map;return ce.forEach(this.Ye(t),u=>this.Xe(e,u).next(h=>{i&&(i=!!h),s.set(u,h)})).next(()=>{if(i){let u=Qt();const h=[];return ce.forEach(s,(g,y)=>{var E;$e("IndexedDbIndexManager",`Using index ${E=g,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(Ge=>`${Ge.fieldPath}:${Ge.kind}`).join(",")}`} to execute ${Fg(t)}`);const I=function(Ge,Le){const st=V1(Le);if(void 0===st)return null;for(const ct of wS(Ge,st.fieldPath))switch(ct.op){case"array-contains-any":return ct.value.arrayValue.values||[];case"array-contains":return[ct.value]}return null}(y,g),k=function(Ge,Le){const st=new Map;for(const ct of kg(Le))for(const zt of wS(Ge,ct.fieldPath))switch(zt.op){case"==":case"in":st.set(ct.fieldPath.canonicalString(),zt.value);break;case"not-in":case"!=":return st.set(ct.fieldPath.canonicalString(),zt.value),Array.from(st.values())}return null}(y,g),R=function(Ge,Le){const st=[];let ct=!0;for(const zt of kg(Le)){const _r=0===zt.kind?KU(Ge,zt.fieldPath,Ge.startAt):YU(Ge,zt.fieldPath,Ge.startAt);st.push(_r.value),ct&&(ct=_r.inclusive)}return new xf(st,ct)}(y,g),F=function(Ge,Le){const st=[];let ct=!0;for(const zt of kg(Le)){const _r=0===zt.kind?YU(Ge,zt.fieldPath,Ge.endAt):KU(Ge,zt.fieldPath,Ge.endAt);st.push(_r.value),ct&&(ct=_r.inclusive)}return new xf(st,ct)}(y,g),W=this.Ze(g,y,R),ee=this.Ze(g,y,F),me=this.tn(g,y,k),Me=this.en(g.indexId,I,W,R.inclusive,ee,F.inclusive,me);return ce.forEach(Me,Ge=>r.j(Ge,t.limit).next(Le=>{Le.forEach(st=>{const ct=tt.fromSegments(st.documentKey);u.has(ct)||(u=u.add(ct),h.push(ct))})}))}).next(()=>h)}return ce.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,s,u,h){const g=(null!=t?t.length:1)*Math.max(r.length,s.length),y=g/(null!=t?t.length:1),E=[];for(let I=0;I<g;++I){const k=t?this.nn(t[I/y]):kS,R=this.sn(e,k,r[I%y],i),F=this.rn(e,k,s[I%y],u),W=h.map(ee=>this.sn(e,k,ee,!0));E.push(...this.createRange(R,F,W))}return E}sn(e,t,r,i){const s=new Hg(e,tt.empty(),t,r);return i?s:s.Le()}rn(e,t,r,i){const s=new Hg(e,tt.empty(),t,r);return i?s.Le():s}Xe(e,t){const r=new bZ(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let u=null;for(const h of s)r.Ge(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;return ce.forEach(this.Ye(t),i=>this.Xe(e,i).next(s=>{s?0!==r&&s.fields.length<function(u){let h=new Pn(Ur.comparator),g=!1;for(const y of u.filters){const E=y;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?g=!0:h=h.add(E.field))}for(const y of u.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(g?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new mb;for(const i of kg(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const u=r.Be(i.kind);$g.ye.re(s,u)}return r.Me()}nn(e){const t=new mb;return $g.ye.re(e,t.Be(0)),t.Me()}un(e,t){const r=new mb;return $g.ye.re(Og(this.databaseId,t),r.Be(function(i){const s=kg(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Me()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new mb);let s=0;for(const u of kg(e)){const h=r[s++];for(const g of i)if(this.cn(t,u.fieldPath)&&eb(h))i=this.an(i,u,h);else{const y=g.Be(u.kind);$g.ye.re(h,y)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Me();return t}an(e,t,r){const i=[...e],s=[];for(const u of r.arrayValue.values||[])for(const h of i){const g=new mb;g.seed(h.Me()),$g.ye.re(u,g.Be(t.kind)),s.push(g)}return s}cn(e,t){return!!e.filters.find(r=>r instanceof ns&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=RS(e),i=yb(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(s=>{const u=[];return ce.forEach(s,h=>i.get([h.indexId,this.uid]).next(g=>{u.push(function(y,E){const I=E?new W0(E.sequenceNumber,new ia(Bg(E.readTime),new tt(cc(E.documentKey)),E.largestBatchId)):W0.empty(),k=y.fields.map(([R,F])=>new pS(Ur.fromServerFormat(R),F));return new fS(y.indexId,y.collectionGroup,k,I)}(h,g))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Zt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=RS(e),s=yb(e);return this.ln(e).next(u=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ce.forEach(h,g=>s.put(K2(g.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,s)=>{const u=r.get(i.collectionGroup);return(u?ce.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ce.forEach(h,g=>this.fn(e,i,g).next(y=>{const E=this.dn(s,g);return y.isEqual(E)?ce.resolve():this._n(e,s,g,y,E)}))))})}wn(e,t,r,i){return _b(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return _b(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=_b(e);let s=new Pn(qg);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(u,h)=>{s=s.add(new Hg(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}dn(e,t){let r=new Pn(qg);const i=this.on(t,e);if(null==i)return r;const s=V1(t);if(null!=s){const u=e.data.field(s.fieldPath);if(eb(u))for(const h of u.arrayValue.values||[])r=r.add(new Hg(t.indexId,e.key,this.nn(h),i))}else r=r.add(new Hg(t.indexId,e.key,kS,i));return r}_n(e,t,r,i,s){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,g,y,E,I){const k=h.getIterator(),R=g.getIterator();let F=fy(k),W=fy(R);for(;F||W;){let ee=!1,me=!1;if(F&&W){const Me=y(F,W);Me<0?me=!0:Me>0&&(ee=!0)}else null!=F?me=!0:ee=!0;ee?(E(W),W=fy(R)):me?(I(F),F=fy(k)):(F=fy(k),W=fy(R))}}(i,s,qg,h=>{u.push(this.wn(e,t,r,h))},h=>{u.push(this.mn(e,t,r,h))}),ce.waitFor(u)}ln(e){let t=1;return yb(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>qg(u,h)).filter((u,h,g)=>!h||0!==qg(u,g[h-1]));const i=[];i.push(e);for(const u of r){const h=qg(u,e),g=qg(u,t);if(0===h)i[0]=e.Le();else if(h>0&&g<0)i.push(u),i.push(u.Le());else if(g>0)break}i.push(t);const s=[];for(let u=0;u<i.length;u+=2)s.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,kS,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,kS,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(tV)}getMinOffset(e,t){return ce.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||ht())).next(tV)}}function eV(n){return Li(n,"collectionParents")}function _b(n){return Li(n,"indexEntries")}function RS(n){return Li(n,"indexConfiguration")}function yb(n){return Li(n,"indexState")}function tV(n){jt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;B1(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ia(e.readTime,e.documentKey,t)}const nV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class To{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new To(e,To.DEFAULT_COLLECTION_PERCENTILE,To.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function rV(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],u=IDBKeyRange.only(t.batchId);let h=0;const g=r.J({range:u},(E,I,k)=>(h++,k.delete()));s.push(g.next(()=>{jt(1===h)}));const y=[];for(const E of t.mutations){const I=j2(e,E.key.path,t.batchId);s.push(i.delete(I)),y.push(E.key)}return ce.waitFor(s).next(()=>y)}function NS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}To.DEFAULT_COLLECTION_PERCENTILE=10,To.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,To.DEFAULT=new To(41943040,To.DEFAULT_COLLECTION_PERCENTILE,To.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),To.DISABLED=new To(-1,0,0);class MS{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){jt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new MS(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nf(e).J({index:"userMutationsIndex",range:r},(i,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Ty(e),u=Nf(e);return u.add({}).next(h=>{jt("number"==typeof h);const g=new nN(h,t,r,i),y=function(k,R,F){const W=F.baseMutations.map(me=>fb(k.ne,me)),ee=F.mutations.map(me=>fb(k.ne,me));return{userId:R,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:W,mutations:ee}}(this.wt,this.userId,g),E=[];let I=new Pn((k,R)=>Zt(k.canonicalString(),R.canonicalString()));for(const k of i){const R=j2(this.userId,k.key.path,h);I=I.add(k.key.path.popLast()),E.push(u.put(y)),E.push(s.put(R,JG))}return I.forEach(k=>{E.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.gn[h]=g.keys()}),ce.waitFor(E).next(()=>g)})}lookupMutationBatch(e,t){return Nf(e).get(t).next(r=>r?(jt(r.userId===this.userId),jg(this.wt,r)):null)}yn(e,t){return this.gn[t]?ce.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Nf(e).J({index:"userMutationsIndex",range:i},(u,h,g)=>{h.userId===this.userId&&(jt(h.batchId>=r),s=jg(this.wt,h)),g.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Nf(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,u)=>{r=s.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nf(e).K("userMutationsIndex",t).next(r=>r.map(i=>jg(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=DS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Ty(e).J({range:i},(u,h,g)=>{const[y,E,I]=u,k=cc(E);if(y===this.userId&&t.path.isEqual(k))return Nf(e).get(I).next(R=>{if(!R)throw ht();jt(R.userId===this.userId),s.push(jg(this.wt,R))});g.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(Zt);const i=[];return t.forEach(s=>{const u=DS(this.userId,s.path),h=IDBKeyRange.lowerBound(u),g=Ty(e).J({range:h},(y,E,I)=>{const[k,R,F]=y,W=cc(R);k===this.userId&&s.path.isEqual(W)?r=r.add(F):I.done()});i.push(g)}),ce.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=DS(this.userId,r),u=IDBKeyRange.lowerBound(s);let h=new Pn(Zt);return Ty(e).J({range:u},(g,y,E)=>{const[I,k,R]=g,F=cc(k);I===this.userId&&r.isPrefixOf(F)?F.length===i&&(h=h.add(R)):E.done()}).next(()=>this.pn(e,h))}pn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Nf(e).get(s).next(u=>{if(null===u)throw ht();jt(u.userId===this.userId),r.push(jg(this.wt,u))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return rV(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ty(e).J({range:r},(s,u,h)=>{if(s[0]===this.userId){const g=cc(s[1]);i.push(g)}else h.done()}).next(()=>{jt(0===i.length)})})}containsKey(e,t){return iV(e,this.userId,t)}Tn(e){return sV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function iV(n,e,t){const r=DS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let u=!1;return Ty(n).J({range:s,H:!0},(h,g,y)=>{const[E,I,k]=h;E===e&&I===i&&(u=!0),y.done()}).next(()=>u)}function Nf(n){return Li(n,"mutations")}function Ty(n){return Li(n,"documentMutations")}function sV(n){return Li(n,"mutationQueues")}class Gg{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Gg(0)}static Rn(){return new Gg(-1)}}class TZ{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Gg(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Ut.fromTimestamp(new pr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Iy(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(jt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Iy(e).J((u,h)=>{const g=pb(h);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,s.push(this.removeTargetData(e,g)))}).next(()=>ce.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Iy(e).J((r,i)=>{const s=pb(i);t(s)})}bn(e){return oV(e).get("targetGlobalKey").next(t=>(jt(null!==t),t))}Pn(e,t){return oV(e).put("targetGlobalKey",t)}vn(e,t){return Iy(e).put(z2(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Fg(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Iy(e).J({range:i,index:"queryTargetsIndex"},(u,h,g)=>{const y=pb(h);nb(t,y.target)&&(s=y,g.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Mf(e);return t.forEach(u=>{const h=zs(u.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,u))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=Mf(e);return ce.forEach(t,s=>{const u=zs(s.path);return ce.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Mf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Mf(e);let s=Qt();return i.J({range:r,H:!0},(u,h,g)=>{const y=cc(u[1]),E=new tt(y);s=s.add(E)}).next(()=>s)}containsKey(e,t){const r=zs(t.path),i=IDBKeyRange.bound([r],[kU(r)],!1,!0);let s=0;return Mf(e).J({index:"documentTargetsIndex",H:!0,range:i},([u,h],g,y)=>{0!==u&&(s++,y.done())}).next(()=>s>0)}te(e,t){return Iy(e).get(t).next(r=>r?pb(r):null)}}function Iy(n){return Li(n,"targets")}function oV(n){return Li(n,"targetGlobal")}function Mf(n){return Li(n,"targetDocuments")}function aV([n,e],[t,r]){const i=Zt(n,t);return 0===i?Zt(e,r):i}class IZ{constructor(e){this.Sn=e,this.buffer=new Pn(aV),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();aV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SZ{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,be.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){If(r)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Tf(r)}yield t.kn(3e5)}))}}class DZ{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(bo.ot);const r=new IZ(t);return this.Mn.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.Mn.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(nV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nV):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let r,i,s,u,h,g,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),i=this.params.maximumSequenceNumbersToCollect):i=I,u=Date.now(),this.nthSequenceNumber(e,i))).next(I=>(r=I,h=Date.now(),this.removeTargets(e,r,t))).next(I=>(s=I,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(I=>(y=Date.now(),L1()<=Yl.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-E}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${s} targets in `+(g-h)+`ms\n\tRemoved ${I} documents in `+(y-g)+`ms\nTotal Duration: ${y-E}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:I})))}}class AZ{constructor(e,t){this.db=e,this.garbageCollector=new DZ(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return PS(e,r)}removeReference(e,t,r){return PS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return PS(e,t)}Un(e,t){return function(r,i){let s=!1;return sV(r).Y(u=>iV(r,u,i).next(h=>(h&&(s=!0),ce.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Ln(e,(u,h)=>{if(h<=t){const g=this.Un(e,u).next(y=>{if(!y)return s++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Ut.min()),Mf(e).delete([0,zs(u.path)])))});i.push(g)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return PS(e,t)}Ln(e,t){const r=Mf(e);let i,s=bo.ot;return r.J({index:"documentTargetsIndex"},([u,h],{path:g,sequenceNumber:y})=>{0===u?(s!==bo.ot&&t(new tt(cc(i)),s),s=y,i=g):s=bo.ot}).next(()=>{s!==bo.ot&&t(new tt(cc(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function PS(n,e){return Mf(n).put((r=n.currentSequenceNumber,{targetId:0,path:zs(e.path),sequenceNumber:r}));var r}class lV{constructor(){this.changes=new kf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xZ{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Zg(e).put(r)}removeEntry(e,t,r){return Zg(e).delete(function(i,s){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],AS(s),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=zn.newInvalidDocument(t);return Zg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(vb(t))},(i,s)=>{r=this.Kn(t,s)}).next(()=>r)}Gn(e,t){let r={size:0,document:zn.newInvalidDocument(t)};return Zg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(vb(t))},(i,s)=>{r={document:this.Kn(t,s),size:NS(s)}}).next(()=>r)}getEntries(e,t){let r=Co();return this.Qn(e,t,(i,s)=>{const u=this.Kn(i,s);r=r.insert(i,u)}).next(()=>r)}jn(e,t){let r=Co(),i=new Vr(tt.comparator);return this.Qn(e,t,(s,u)=>{const h=this.Kn(s,u);r=r.insert(s,h),i=i.insert(s,NS(u))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return ce.resolve();let i=new Pn(hV);t.forEach(g=>i=i.add(g));const s=IDBKeyRange.bound(vb(i.first()),vb(i.last())),u=i.getIterator();let h=u.getNext();return Zg(e).J({index:"documentKeyIndex",range:s},(g,y,E)=>{const I=tt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&hV(h,I)<0;)r(h,null),h=u.getNext();h&&h.isEqual(I)&&(r(h,y),h=u.hasNext()?u.getNext():null),h?E.q(vb(h)):E.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),AS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zg(e).K(IDBKeyRange.bound(i,s,!0)).next(u=>{let h=Co();for(const g of u){const y=this.Kn(tt.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,r,i){let s=Co();const u=dV(t,r),h=dV(t,ia.max());return Zg(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(g,y,E)=>{const I=this.Kn(tt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(I.key,I),s.size===i&&E.done()}).next(()=>s)}newChangeBuffer(e){return new kZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return cV(e).get("remoteDocumentGlobalKey").next(t=>(jt(!!t),t))}qn(e,t){return cV(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function gZ(n,e){let t;if(e.document)t=M2(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=Bg(e.noDocument.readTime);t=zn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=tt.fromSegments(e.unknownDocument.path),i=Bg(e.unknownDocument.version);t=zn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new pr(r[0],r[1]);return Ut.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Ut.min()))return r}return zn.newInvalidDocument(e)}}function uV(n){return new xZ(n)}class kZ extends lV{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new kf(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Pn((s,u)=>Zt(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const h=this.Hn.get(s);if(t.push(this.zn.removeEntry(e,s,h.readTime)),u.isValidDocument()){const g=Z2(this.zn.wt,u);i=i.add(s.path.popLast());const y=NS(g);r+=y-h.size,t.push(this.zn.addEntry(e,s,g))}else if(r-=h.size,this.trackRemovals){const g=Z2(this.zn.wt,u.convertToNoDocument(Ut.min()));t.push(this.zn.addEntry(e,s,g))}}),i.forEach(s=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.zn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((s,u)=>{this.Hn.set(s,{size:u,readTime:r.get(s).readTime})}),r))}}function cV(n){return Li(n,"remoteDocumentGlobal")}function Zg(n){return Li(n,"remoteDocumentsV14")}function vb(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function dV(n,e){const t=e.documentKey.path.toArray();return[n,AS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function hV(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Zt(t[s],r[s]),i)return i;return i=Zt(t.length,r.length),i||(i=Zt(t[t.length-2],r[r.length-2]),i||Zt(t[t.length-1],r[r.length-1]))}class RZ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&sb(r.mutation,i,sa.empty(),pr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Qt()){const i=lc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=ob();return s.forEach((h,g)=>{u=u.insert(h,g.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=lc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Qt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,i){let s=Co();const u=ab(),h=ab();return t.forEach((g,y)=>{const E=r.get(y.key);i.has(y.key)&&(void 0===E||E.mutation instanceof Bd)?s=s.insert(y.key,y):void 0!==E&&(u.set(y.key,E.mutation.getFieldMask()),sb(E.mutation,y,E.mutation.getFieldMask(),pr.now()))}),this.recalculateAndSaveOverlays(e,s).next(g=>(g.forEach((y,E)=>u.set(y,E)),t.forEach((y,E)=>{var I;return h.set(y,new RZ(E,null!==(I=u.get(y))&&void 0!==I?I:null))}),h))}recalculateAndSaveOverlays(e,t){const r=ab();let i=new Vr((u,h)=>u-h),s=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(g=>{const y=t.get(g);if(null===y)return;let E=r.get(g)||sa.empty();E=h.applyToLocalView(y,E),r.set(g,E);const I=(i.get(h.batchId)||Qt()).add(g);i=i.insert(h.batchId,I)})}).next(()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),y=g.key,E=g.value,I=E2();E.forEach(k=>{if(!s.has(k)){const R=f2(t.get(k),r.get(k));null!==R&&I.set(k,R),s=s.add(k)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,I))}return ce.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return tt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):W1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ce.resolve(lc());let h=-1,g=s;return u.next(y=>ce.forEach(y,(E,I)=>(h<I.largestBatchId&&(h=I.largestBatchId),s.get(E)?ce.resolve():this.getBaseDocument(e,E,I).next(k=>{g=g.insert(E,k)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,g,y,Qt())).next(E=>({batchId:h,changes:b2(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next(r=>{let i=ob();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=ob();return this.indexManager.getCollectionParents(e,i).next(u=>ce.forEach(u,h=>{const g=(y=t,E=h.child(i),new Vd(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(y=>{y.forEach((E,I)=>{s=s.insert(E,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((h,g)=>{const y=g.getKey();null===i.get(y)&&(i=i.insert(y,zn.newInvalidDocument(y)))});let u=ob();return i.forEach((h,g)=>{const y=s.get(h);void 0!==y&&sb(y.mutation,g,sa.empty(),pr.now()),Y1(t,g)&&(u=u.insert(h,g))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ce.resolve(zn.newInvalidDocument(t))}}class NZ{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ce.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Fi(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:sN(r.bundledQuery),readTime:Fi(r.readTime)}),ce.resolve();var r}}class MZ{constructor(){this.overlays=new Vr(tt.comparator),this.Xn=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=lc();return ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ie(e,t,s)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=lc(),s=t.length+1,u=new tt(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const g=h.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&g.largestBatchId>r&&i.set(g.getKey(),g)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Vr((y,E)=>y-E);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let E=s.get(y.largestBatchId);null===E&&(E=lc(),s=s.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const h=lc(),g=s.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,E)=>h.set(y,E)),!(h.size()>=i)););return ce.resolve(h)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new iN(t,r));let s=this.Xn.get(t);void 0===s&&(s=Qt(),this.Xn.set(t,s)),this.Xn.set(t,s.add(r.key))}}class lN{constructor(){this.Zn=new Pn(Ui.ts),this.es=new Pn(Ui.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Ui(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Ui(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new tt(new hn([])),r=new Ui(t,e),i=new Ui(t,e+1),s=[];return this.es.forEachInRange([r,i],u=>{this.rs(u),s.push(u.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new tt(new hn([])),r=new Ui(t,e),i=new Ui(t,e+1);let s=Qt();return this.es.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new Ui(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ui{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return tt.comparator(e.key,t.key)||Zt(e.ls,t.ls)}static ns(e,t){return Zt(e.ls,t.ls)||tt.comparator(e.key,t.key)}}class PZ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Pn(Ui.ts)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.fs;this.fs++;const u=new nN(s,t,r,i);this.mutationQueue.push(u);for(const h of i)this.ds=this.ds.add(new Ui(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ce.resolve(u)}lookupMutationBatch(e,t){return ce.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),s=i<0?0:i;return ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ui(t,0),i=new Ui(t,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([r,i],u=>{const h=this._s(u.ls);s.push(h)}),ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(Zt);return t.forEach(i=>{const s=new Ui(i,0),u=new Ui(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,u],h=>{r=r.add(h.ls)})}),ce.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;tt.isDocumentKey(s)||(s=s.child(""));const u=new Ui(new tt(s),0);let h=new Pn(Zt);return this.ds.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(g.ls)),!0)},u),ce.resolve(this.gs(h))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){jt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ce.forEach(t.mutations,i=>{const s=new Ui(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Ui(t,0),i=this.ds.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class OZ{constructor(e){this.ps=e,this.docs=new Vr(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let r=Co();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():zn.newInvalidDocument(i))}),ce.resolve(r)}getAllFromCollection(e,t,r){let i=Co();const s=new tt(t.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:h,value:{document:g}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||B1(NU(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ht()}Is(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FZ(this)}getSize(e){return ce.resolve(this.size)}}class FZ extends lV{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class LZ{constructor(e){this.persistence=e,this.Ts=new kf(t=>Fg(t),nb),this.lastRemoteSnapshotVersion=Ut.min(),this.highestTargetId=0,this.Es=0,this.As=new lN,this.targetCount=0,this.Rs=Gg.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ce.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Gg(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.vn(t),ce.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Ts.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Ts.delete(u),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ce.waitFor(s).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.As.containsKey(t))}}class pV{constructor(e,t){this.bs={},this.overlays={},this.Ps=new bo(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new LZ(this),this.indexManager=new EZ,this.remoteDocumentCache=new OZ(r=>this.referenceDelegate.Ss(r)),this.wt=new G2(t),this.Ds=new NZ(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new MZ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new PZ(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new UZ(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(s=>this.referenceDelegate.xs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ns(e,t){return ce.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class UZ extends PU{constructor(e){super(),this.currentSequenceNumber=e}}class OS{constructor(e){this.persistence=e,this.ks=new lN,this.Ms=null}static Os(e){return new OS(e)}get Fs(){if(this.Ms)return this.Ms;throw ht()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ce.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Fs.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Fs,r=>{const i=tt.fromPath(r);return this.$s(e,i).next(s=>{s||t.removeEntry(i,Ut.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ce.or([()=>ce.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class VZ{constructor(e){this.wt=e}M(e,t,r,i){const s=new gS("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",B2,{unique:!0}),h.createObjectStore("documentMutations"),gV(e),function(h){h.createObjectStore("remoteDocuments")}(e));let u=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),gV(e)),u=u.next(()=>function(h){const g=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ut.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,g){return g.store("mutations").K().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",B2,{unique:!0});const E=g.store("mutations"),I=y.map(k=>E.put(k));return ce.waitFor(I)})}(e,s))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Bs(s))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(s)))),r<7&&i>=7&&(u=u.next(()=>this.Us(s))),r<8&&i>=8&&(u=u.next(()=>this.qs(e,s))),r<9&&i>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.Ks(s))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(h){const g=h.createObjectStore("documentOverlays",{keyPath:cZ});g.createIndex("collectionPathOverlayIndex",dZ,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",hZ,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(h){const g=h.createObjectStore("remoteDocumentsV14",{keyPath:XG});g.createIndex("documentKeyIndex",eZ),g.createIndex("collectionGroupIndex",tZ)}(e)).next(()=>this.Gs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.Qs(e,s))),r<15&&i>=15&&(u=u.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:oZ}).createIndex("sequenceNumberIndex",aZ,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:lZ}).createIndex("documentKeyIndex",uZ,{unique:!1})}(e))),u}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=NS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>ce.forEach(i,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",u).next(h=>ce.forEach(h,g=>{jt(g.userId===s.userId);const y=jg(this.wt,g);return rV(e,s.userId,y).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((u,h)=>{const g=new hn(u),y=[0,zs(g)];s.push(t.get(y).next(E=>E?ce.resolve():t.put({targetId:0,path:zs(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(s))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:sZ});const r=t.store("collectionParents"),i=new aN,s=u=>{if(i.add(u)){const h=u.lastSegment(),g=u.popLast();return r.put({collectionId:h,parent:zs(g)})}};return t.store("remoteDocuments").J({H:!0},(u,h)=>{const g=new hn(u);return s(g.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([u,h,g],y)=>{const E=cc(h);return s(E.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const s=pb(i),u=z2(this.wt,s);return t.put(u)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,u)=>{const h=t.store("remoteDocumentsV14"),g=(y=u,y.document?new tt(hn.fromString(y.document.name).popFirst(5)):y.noDocument?tt.fromSegments(y.noDocument.path):y.unknownDocument?tt.fromSegments(y.unknownDocument.path):ht()).path.toArray();var y;const E={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(h.put(E))}).next(()=>ce.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=uV(this.wt),s=new pV(OS.Os,this.wt.ne);return r.K().next(u=>{const h=new Map;return u.forEach(g=>{var y;let E=null!==(y=h.get(g.userId))&&void 0!==y?y:Qt();jg(this.wt,g).keys().forEach(I=>E=E.add(I)),h.set(g.userId,E)}),ce.forEach(h,(g,y)=>{const E=new Pi(y),I=xS.se(this.wt,E),k=s.getIndexManager(E),R=MS.se(E,this.wt,k,s.referenceDelegate);return new fV(i,R,I,k).recalculateAndSaveOverlaysForDocumentKeys(new tN(t,bo.ot),g).next()})})}}function gV(n){n.createObjectStore("targetDocuments",{keyPath:rZ}).createIndex("documentTargetsIndex",iZ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nZ,{unique:!0}),n.createObjectStore("targetGlobal")}const uN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cN{constructor(e,t,r,i,s,u,h,g,y,E,I=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=s,this.window=u,this.document=h,this.Ws=y,this.zs=E,this.Hs=I,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=k=>Promise.resolve(),!cN.V())throw new Fe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AZ(this,i),this.ei=t+"main",this.wt=new G2(g),this.ni=new Ql(this.ei,this.Hs,new VZ(this.wt)),this.Vs=new TZ(this.referenceDelegate,this.wt),this.remoteDocumentCache=uV(this.wt),this.Ds=new mZ,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===E&&Xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(fe.FAILED_PRECONDITION,uN);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new bo(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,be.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>FS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(If(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return wb(e).get("owner").next(t=>ce.resolve(this.di(t)))}_i(e){return FS(e).delete(this.clientId)}wi(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Li(r,"clientMetadata");return i.K().next(s=>{const u=e.gi(s,18e5),h=s.filter(g=>-1===u.indexOf(g));return ce.forEach(h,g=>i.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ce.resolve(!0):wb(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Fe(fe.FAILED_PRECONDITION,uN);return!1}}return!(!this.networkEnabled||!this.inForeground)||FS(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new tN(t,bo.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>FS(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return MS.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new CZ(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return xS.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){$e("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(u=this.Hs)?pZ:14===u?q2:13===u?H2:12===u?fZ:11===u?$2:void ht();var u;let h;return this.ni.runTransaction(e,i,s,g=>(h=new tN(g,this.Ps?this.Ps.next():bo.ot),"readwrite-primary"===t?this.ai(h).next(y=>!!y||this.hi(h)).next(y=>{if(!y)throw Xr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Fe(fe.FAILED_PRECONDITION,MU);return r(h)}).next(y=>this.fi(h).next(()=>y)):this.bi(h).next(()=>r(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}bi(e){return wb(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(fe.FAILED_PRECONDITION,uN)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wb(e).put("owner",t)}static V(){return Ql.V()}li(e){const t=wb(e);return t.get("owner").next(r=>this.di(r)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Xr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,O.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return $e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Xr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wb(n){return Li(n,"owner")}function FS(n){return Li(n,"clientMetadata")}function dN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class hN{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=Qt(),i=Qt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hN(e,t.fromCache,r,i)}}class mV{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(s=>s||this.xi(e,t,i,r)).next(s=>s||this.Ni(e,t))}Ci(e,t){if(t2(t))return ce.resolve(null);let r=Eo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=bS(t,null,"F"),r=Eo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=Qt(...s);return this.Di.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.ki(t,h);return this.Mi(t,y,u,g.readTime)?this.Ci(e,bS(t,null,"F")):this.Oi(e,y,t,g)}))})))}xi(e,t,r,i){return t2(t)||i.isEqual(Ut.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(s=>{const u=this.ki(t,s);return this.Mi(t,u,r,i)?this.Ni(e,t):(L1()<=Yl.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),K1(t)),this.Oi(e,u,t,RU(i,-1)))})}ki(e,t){let r=new Pn(i2(e));return t.forEach((i,s)=>{Y1(e,s)&&(r=r.add(s))}),r}Mi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ni(e,t){return L1()<=Yl.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",K1(t)),this.Di.getDocumentsMatchingQuery(e,t,ia.min())}Oi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class BZ{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new Vr(Zt),this.Bi=new kf(s=>Fg(s),nb),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fV(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function _V(n,e,t,r){return new BZ(n,e,t,r)}function yV(n,e){return fN.apply(this,arguments)}function fN(){return fN=(0,be.Z)(function*(n,e){const t=it(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const u=[],h=[];let g=Qt();for(const y of i){u.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of s){h.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(r,g).next(y=>({Ki:y,removedBatchIds:u,addedBatchIds:h}))})})}),fN.apply(this,arguments)}function vV(n){const e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function wV(n,e,t){let r=Qt(),i=Qt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=Co();return t.forEach((h,g)=>{const y=s.get(h);g.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),g.isNoDocument()&&g.version.isEqual(Ut.min())?(e.removeEntry(h,g.readTime),u=u.insert(h,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||0===g.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(h,g)):$e("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",g.version)}),{Gi:u,Qi:i}})}function HZ(n,e){const t=it(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sy(n,e){const t=it(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(s=>s?(i=s,ce.resolve(i)):t.Vs.allocateTargetId(r).next(u=>(i=new Rf(e,u,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Dy(n,e,t){return pN.apply(this,arguments)}function pN(){return pN=(0,be.Z)(function*(n,e,t){const r=it(n),i=r.$i.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!If(u))throw u;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),pN.apply(this,arguments)}function LS(n,e,t){const r=it(n);let i=Ut.min(),s=Qt();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,g,y){const E=it(h),I=E.Bi.get(y);return void 0!==I?ce.resolve(E.$i.get(I)):E.Vs.getTargetData(g,y)}(r,u,Eo(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(u,h.targetId).next(g=>{s=g})}).next(()=>r.Fi.getDocumentsMatchingQuery(u,e,t?i:Ut.min(),t?s:Qt())).next(h=>(CV(r,r2(e),h),{documents:h,ji:s})))}function bV(n,e){const t=it(n),r=it(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.te(s,e).next(u=>u?u.target:null))}function EV(n,e){const t=it(n),r=t.Li.get(e)||Ut.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,RU(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(CV(t,e,i),i))}function CV(n,e,t){let r=Ut.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Li.set(e,r)}function gN(){return gN=(0,be.Z)(function*(n,e,t,r){const i=it(n);let s=Qt(),u=Co();for(const y of t){const E=e.Wi(y.metadata.name);y.document&&(s=s.add(E));const I=e.zi(y);I.setReadTime(e.Hi(y.metadata.readTime)),u=u.insert(E,I)}const h=i.Ui.newChangeBuffer({trackRemovals:!0}),g=yield Sy(i,(y=r,Eo(my(hn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>wV(y,h,u).next(E=>(h.apply(y),E)).next(E=>i.Vs.removeMatchingKeysForTargetId(y,g.targetId).next(()=>i.Vs.addMatchingKeys(y,s,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,E.Gi,E.Qi)).next(()=>E.Gi)))}),gN.apply(this,arguments)}function GZ(n,e){return mN.apply(this,arguments)}function mN(){return mN=(0,be.Z)(function*(n,e,t=Qt()){const r=yield Sy(n,Eo(sN(e.bundledQuery))),i=it(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const u=Fi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ds.saveNamedQuery(s,e);const h=r.withResumeToken(Ii.EMPTY_BYTE_STRING,u);return i.$i=i.$i.insert(h.targetId,h),i.Vs.updateTargetData(s,h).next(()=>i.Vs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Vs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(s,e))})}),mN.apply(this,arguments)}function TV(n,e){return`firestore_clients_${n}_${e}`}function IV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _N(n,e){return`firestore_targets_${n}_${e}`}class US{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let s,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(s=new Fe(i.error.code,i.error.message))),u?new US(e,t,i.state,s):(Xr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bb{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Fe(r.error.code,r.error.message))),s?new bb(e,r.state,i):(Xr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class VS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=IS();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=BU(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new VS(e,s):(Xr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class yN{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new yN(t.clientId,t.onlineState):(Xr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class vN{constructor(){this.activeTargetIds=IS()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wN{constructor(e,t,r,i,s){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Vr(Zt),this.started=!1,this.ir=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=TV(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new vN),this.cr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const s=e.getItem(TV(e.persistenceKey,i));if(s){const u=VS.Ji(i,s);u&&(e.sr=e.sr.insert(u.clientId,u))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(_N(this.persistenceKey,e));if(r){const i=bb.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_N(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(s){let u=bo.ot;if(null!=s)try{const h=JSON.parse(s);jt("number"==typeof h),u=h}catch(h){Xr("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==bo.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Nr(s)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new US(this.currentUser,e,t,r),s=IV(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Yi())}pr(e){const t=IV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=_N(this.persistenceKey,e),s=new bb(e,t,r);this.setItem(i,s.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return VS.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return US.Ji(new Pi(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return bb.Ji(i,t)}wr(e){return yN.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),s=this.gr(r),u=[],h=[];return s.forEach(g=>{i.has(g)||u.push(g)}),i.forEach(g=>{s.has(g)||h.push(g)}),this.syncEngine.Or(u,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=IS();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class SV{constructor(){this.Fr=new vN,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new vN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ZZ{Br(e){}shutdown(){}}class DV{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const zZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class WZ{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class KZ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,s){const u=this.oo(e,t);$e("RestConnection","Sending: ",u,r);const h={};return this.uo(h,i,s),this.co(e,u,h,r).then(g=>($e("RestConnection","Received: ",g),g),g=>{throw xg("RestConnection",`${e} failed with error: `,g,"url: ",u,"request:",r),g})}ao(e,t,r,i,s,u){return this.ro(e,t,r,i,s)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+dy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,t){return`${this.so}/v1/${t}:${zZ[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((s,u)=>{const h=new zq;h.listenOnce(qq.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case F1.NO_ERROR:const y=h.getResponseJson();$e("Connection","XHR received:",JSON.stringify(y)),s(y);break;case F1.TIMEOUT:$e("Connection",'RPC "'+e+'" timed out'),u(new Fe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case F1.HTTP_ERROR:const E=h.getStatus();if($e("Connection",'RPC "'+e+'" failed with status:',E,"response text:",h.getResponseText()),E>0){const I=h.getResponseJson().error;if(I&&I.status&&I.message){const k=function(R){const F=R.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(F)>=0?F:fe.UNKNOWN}(I.status);u(new Fe(k,I.message))}else u(new Fe(fe.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Fe(fe.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{$e("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);h.send(t,"POST",g,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$q(),u=Hq(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new Zq({})),this.uo(h.initMessageHeaders,t,r),(0,O.uI)()||(0,O.b$)()||(0,O.d)()||(0,O.w1)()||(0,O.Mn)()||(0,O.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const g=i.join("");$e("Connection","Creating WebChannel: "+g,h);const y=s.createWebChannel(g,h);let E=!1,I=!1;const k=new WZ({jr:F=>{I?$e("Connection","Not sending because WebChannel is closed:",F):(E||($e("Connection","Opening WebChannel transport."),y.open(),E=!0),$e("Connection","WebChannel sending:",F),y.send(F))},Wr:()=>y.close()}),R=(F,W,ee)=>{F.listen(W,me=>{try{ee(me)}catch(Me){setTimeout(()=>{throw Me},0)}})};return R(y,hS.EventType.OPEN,()=>{I||$e("Connection","WebChannel transport opened.")}),R(y,hS.EventType.CLOSE,()=>{I||(I=!0,$e("Connection","WebChannel transport closed"),k.eo())}),R(y,hS.EventType.ERROR,F=>{I||(I=!0,xg("Connection","WebChannel transport errored:",F),k.eo(new Fe(fe.UNAVAILABLE,"The operation could not be completed")))}),R(y,hS.EventType.MESSAGE,F=>{var W;if(!I){const ee=F.data[0];jt(!!ee);const Me=ee.error||(null===(W=ee[0])||void 0===W?void 0:W.error);if(Me){$e("Connection","WebChannel received error:",Me);const Ge=Me.status;let Le=function(ct){const zt=ui[ct];if(void 0!==zt)return v2(zt)}(Ge),st=Me.message;void 0===Le&&(Le=fe.INTERNAL,st="Unknown error status: "+Ge+" with message "+Me.message),I=!0,k.eo(new Fe(Le,st)),y.close()}else $e("Connection","WebChannel received:",ee),k.no(ee)}}),R(u,Gq.STAT_EVENT,F=>{F.stat===IU.PROXY?$e("Connection","Detected buffering proxy"):F.stat===IU.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.Zr()},0),k}}function AV(){return typeof window<"u"?window:null}function BS(){return typeof document<"u"?document:null}function Eb(n){return new BG(n,!0)}class bN{constructor(e,t,r=1e3,i=1.5,s=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class xV{constructor(e,t,r,i,s,u,h,g){this.js=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new bN(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,be.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,be.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Xr(t.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Fe(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,be.Z)(function*(){e.state=0,e.start()}))}qo(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YZ extends xV{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.wt=s}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function HG(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:ht(),i=e.targetChange.targetIds||[],s=function(g,y){return g.dt?(jt(void 0===y||"string"==typeof y),Ii.fromBase64String(y||"")):(jt(void 0===y||y instanceof Uint8Array),Ii.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(g){const y=void 0===g.code?fe.UNKNOWN:v2(g.code);return new Fe(y,g.message||"")}(u);t=new T2(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=uc(n,r.document.name),s=Fi(r.document.updateTime),u=new ts({mapValue:{fields:r.document.fields}}),h=zn.newFoundDocument(i,s,u);t=new SS(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=uc(n,r.document),s=r.readTime?Fi(r.readTime):Ut.min(),u=zn.newNoDocument(i,s);t=new SS([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=uc(n,r.document);t=new SS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,s=new NG(r.count||0);t=new C2(r.targetId,s)}}var g;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return Ut.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Ut.min():s.readTime?Fi(s.readTime):Ut.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=hb(this.wt),t.addTarget=function(i,s){let u;const h=s.target;return u=vS(h)?{documents:P2(i,h)}:{query:O2(i,h)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=A2(i,s.resumeToken):s.snapshotVersion.compareTo(Ut.min())>0&&(u.readTime=cb(i,s.snapshotVersion.toTimestamp())),u}(this.wt,e);const r=function GG(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=hb(this.wt),t.removeTarget=e,this.Oo(t)}}class QZ extends xV{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(jt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function qG(n,e){return n&&n.length>0?(jt(void 0!==e),n.map(t=>function(r,i){let s=Fi(r.updateTime?r.updateTime:i);return s.isEqual(Ut.min())&&(s=Fi(i)),new xG(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Fi(e.commitTime);return this.listener.Jo(r,t)}return jt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=hb(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>fb(this.wt,r))};this.Oo(t)}}class JZ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Fe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(fe.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.bo.ao(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Fe(fe.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class XZ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Xr(t),this.su=!1):$e("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class ez{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(h=>{r.enqueueAndForget((0,be.Z)(function*(){var g;Pf(u)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,be.Z)(function*(y){const E=it(y);E.lu.add(4),yield Ay(E),E._u.set("Unknown"),E.lu.delete(4),yield Cb(E)}),function(y){return g.apply(this,arguments)})(u))}))}),this._u=new XZ(r,i)}}function Cb(n){return EN.apply(this,arguments)}function EN(){return EN=(0,be.Z)(function*(n){if(Pf(n))for(const e of n.fu)yield e(!0)}),EN.apply(this,arguments)}function Ay(n){return CN.apply(this,arguments)}function CN(){return CN=(0,be.Z)(function*(n){for(const e of n.fu)yield e(!1)}),CN.apply(this,arguments)}function jS(n,e){const t=it(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),SN(t)?IN(t):ky(t).Co()&&TN(t,e))}function Tb(n,e){const t=it(n),r=ky(t);t.hu.delete(e),r.Co()&&kV(t,e),0===t.hu.size&&(r.Co()?r.ko():Pf(t)&&t._u.set("Unknown"))}function TN(n,e){n.wu.Nt(e.targetId),ky(n).Qo(e)}function kV(n,e){n.wu.Nt(e),ky(n).jo(e)}function IN(n){n.wu=new LG({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),ky(n).start(),n._u.iu()}function SN(n){return Pf(n)&&!ky(n).Do()&&n.hu.size>0}function Pf(n){return 0===it(n).lu.size}function RV(n){n.wu=void 0}function tz(n){return DN.apply(this,arguments)}function DN(){return DN=(0,be.Z)(function*(n){n.hu.forEach((e,t)=>{TN(n,e)})}),DN.apply(this,arguments)}function nz(n,e){return AN.apply(this,arguments)}function AN(){return AN=(0,be.Z)(function*(n,e){RV(n),SN(n)?(n._u.uu(e),IN(n)):n._u.set("Unknown")}),AN.apply(this,arguments)}function rz(n,e,t){return xN.apply(this,arguments)}function xN(){return xN=(0,be.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof T2&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(i,s){const u=s.cause;for(const h of s.targetIds)i.hu.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i.hu.delete(h),i.wu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield $S(n,r)}else if(e instanceof SS?n.wu.Ut(e):e instanceof C2?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Ut.min()))try{const r=yield vV(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.wu.Yt(s);return u.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.hu.get(g);y&&i.hu.set(g,y.withResumeToken(h.resumeToken,s))}}),u.targetMismatches.forEach(h=>{const g=i.hu.get(h);if(!g)return;i.hu.set(h,g.withResumeToken(Ii.EMPTY_BYTE_STRING,g.snapshotVersion)),kV(i,h);const y=new Rf(g.target,h,1,g.sequenceNumber);TN(i,y)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield $S(n,r)}var r}),xN.apply(this,arguments)}function $S(n,e,t){return kN.apply(this,arguments)}function kN(){return kN=(0,be.Z)(function*(n,e,t){if(!If(e))throw e;n.lu.add(1),yield Ay(n),n._u.set("Offline"),t||(t=()=>vV(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Cb(n)}))}),kN.apply(this,arguments)}function NV(n,e){return e().catch(t=>$S(n,t,e))}function xy(n){return RN.apply(this,arguments)}function RN(){return RN=(0,be.Z)(function*(n){const e=it(n),t=Of(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;iz(e);)try{const i=yield HZ(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,sz(e,i)}catch(i){yield $S(e,i)}MV(e)&&PV(e)}),RN.apply(this,arguments)}function iz(n){return Pf(n)&&n.au.length<10}function sz(n,e){n.au.push(e);const t=Of(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function MV(n){return Pf(n)&&!Of(n).Do()&&n.au.length>0}function PV(n){Of(n).start()}function oz(n){return NN.apply(this,arguments)}function NN(){return NN=(0,be.Z)(function*(n){Of(n).Xo()}),NN.apply(this,arguments)}function az(n){return MN.apply(this,arguments)}function MN(){return MN=(0,be.Z)(function*(n){const e=Of(n);for(const t of n.au)e.Ho(t.mutations)}),MN.apply(this,arguments)}function lz(n,e,t){return PN.apply(this,arguments)}function PN(){return PN=(0,be.Z)(function*(n,e,t){const r=n.au.shift(),i=rN.from(r,e,t);yield NV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield xy(n)}),PN.apply(this,arguments)}function uz(n,e){return ON.apply(this,arguments)}function ON(){return ON=(0,be.Z)(function*(n,e){var t;e&&Of(n).zo&&(yield(t=(0,be.Z)(function*(r,i){if(y2(s=i.code)&&s!==fe.ABORTED){const u=r.au.shift();Of(r).No(),yield NV(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield xy(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),MV(n)&&PV(n)}),ON.apply(this,arguments)}function OV(n,e){return FN.apply(this,arguments)}function FN(){return FN=(0,be.Z)(function*(n,e){const t=it(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=Pf(t);t.lu.add(3),yield Ay(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Cb(t)}),FN.apply(this,arguments)}function LN(n,e){return UN.apply(this,arguments)}function UN(){return UN=(0,be.Z)(function*(n,e){const t=it(n);e?(t.lu.delete(2),yield Cb(t)):e||(t.lu.add(2),yield Ay(t),t._u.set("Unknown"))}),UN.apply(this,arguments)}function ky(n){return n.mu||(n.mu=function(e,t,r){const i=it(e);return i.tu(),new YZ(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:tz.bind(null,n),Jr:nz.bind(null,n),Go:rz.bind(null,n)}),n.fu.push(function(){var e=(0,be.Z)(function*(t){t?(n.mu.No(),SN(n)?IN(n):n._u.set("Unknown")):(yield n.mu.stop(),RV(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Of(n){return n.gu||(n.gu=function(e,t,r){const i=it(e);return i.tu(),new QZ(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:oz.bind(null,n),Jr:uz.bind(null,n),Yo:az.bind(null,n),Jo:lz.bind(null,n)}),n.fu.push(function(){var e=(0,be.Z)(function*(t){t?(n.gu.No(),yield xy(n)):(yield n.gu.stop(),n.au.length>0&&($e("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class VN{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,h=new VN(e,t,u,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ry(n,e){if(Xr("AsyncQueue",`${e}: ${n}`),If(n))return new Fe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Ny{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=ob(),this.sortedSet=new Vr(this.comparator)}static emptySet(e){return new Ny(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ny)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ny;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class FV{constructor(){this.yu=new Vr(tt.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):ht():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class My{constructor(e,t,r,i,s,u,h,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=g}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(u=>{s.push({type:0,doc:u})}),new My(e,t,Ny.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class cz{constructor(){this.Iu=void 0,this.listeners=[]}}class dz{constructor(){this.queries=new kf(e=>n2(e),rb),this.onlineState="Unknown",this.Tu=new Set}}function BN(n,e){return jN.apply(this,arguments)}function jN(){return jN=(0,be.Z)(function*(n,e){const t=it(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new cz),i)try{s.Iu=yield t.onListen(r)}catch(u){const h=Ry(u,`Initialization of query '${K1(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.Eu(t.onlineState),s.Iu&&e.Au(s.Iu)&&qN(t)}),jN.apply(this,arguments)}function $N(n,e){return HN.apply(this,arguments)}function HN(){return HN=(0,be.Z)(function*(n,e){const t=it(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),HN.apply(this,arguments)}function hz(n,e){const t=it(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.Au(i)&&(r=!0);u.Iu=i}}r&&qN(t)}function fz(n,e,t){const r=it(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function qN(n){n.Tu.forEach(e=>{e.next()})}class GN{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new My(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=My.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class pz{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class LV{constructor(e){this.wt=e}Wi(e){return uc(this.wt,e)}zi(e){return e.metadata.exists?M2(this.wt,e.document,!1):zn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Fi(e)}}class gz{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UV(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=hn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new LV(this.wt);for(const i of e)if(i.metadata.queries){const s=r.Wi(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||Qt()).add(s);t.set(u,h)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function qZ(n,e,t,r){return gN.apply(this,arguments)}(e.localStore,new LV(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield GZ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function UV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class VV{constructor(e){this.key=e}}class BV{constructor(e){this.key=e}}class jV{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Qt(),this.mutatedKeys=Qt(),this.Lu=i2(e),this.Uu=new Ny(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new FV,i=t?t.Uu:this.Uu;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,I)=>{const k=i.get(E),R=Y1(this.query,I)?I:null,F=!!k&&this.mutatedKeys.has(k.key),W=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let ee=!1;k&&R?k.data.isEqual(R.data)?F!==W&&(r.track({type:3,doc:R}),ee=!0):this.Qu(k,R)||(r.track({type:2,doc:R}),ee=!0,(g&&this.Lu(R,g)>0||y&&this.Lu(R,y)<0)&&(h=!0)):!k&&R?(r.track({type:0,doc:R}),ee=!0):k&&!R&&(r.track({type:1,doc:k}),ee=!0,(g||y)&&(h=!0)),ee&&(R?(u=u.add(R),s=W?s.add(E):s.delete(E)):(u=u.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const E="F"===this.query.limitType?u.last():u.first();u=u.delete(E.key),s=s.delete(E.key),r.track({type:1,doc:E})}return{Uu:u,Gu:r,Mi:h,mutatedKeys:s}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((y,E)=>function(I,k){const R=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return R(I)-R(k)}(y.type,E.type)||this.Lu(y.doc,E.doc)),this.ju(r);const u=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,g=h!==this.$u;return this.$u=h,0!==s.length||g?{snapshot:new My(this.query,e.Uu,i,s,e.mutatedKeys,0===h,g,!1),zu:u}:{zu:u}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new FV,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Qt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new BV(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new VV(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Qt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return My.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class mz{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _z{constructor(e){this.key=e,this.Xu=!1}}class yz{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.Zu={},this.tc=new kf(h=>n2(h),rb),this.ec=new Map,this.nc=new Set,this.sc=new Vr(tt.comparator),this.ic=new Map,this.rc=new lN,this.oc={},this.uc=new Map,this.cc=Gg.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function vz(n,e){return ZN.apply(this,arguments)}function ZN(){return ZN=(0,be.Z)(function*(n,e){const t=gM(n);let r,i;const s=t.tc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const u=yield Sy(t.localStore,Eo(e));t.isPrimaryClient&&jS(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield zN(t,e,r,"current"===h)}return i}),ZN.apply(this,arguments)}function zN(n,e,t,r){return WN.apply(this,arguments)}function WN(){return WN=(0,be.Z)(function*(n,e,t,r){n.hc=(E,I,k)=>{return(R=(0,be.Z)(function*(F,W,ee,me){let Me=W.view.Ku(ee);Me.Mi&&(Me=yield LS(F.localStore,W.query,!1).then(({documents:st})=>W.view.Ku(st,Me)));const Ge=me&&me.targetChanges.get(W.targetId),Le=W.view.applyChanges(Me,F.isPrimaryClient,Ge);return iM(F,W.targetId,Le.zu),Le.snapshot}),function(F,W,ee,me){return R.apply(this,arguments)})(n,E,I,k);var R};const i=yield LS(n.localStore,e,!0),s=new jV(e,i.ji),u=s.Ku(i.documents),h=ub.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),g=s.applyChanges(u,n.isPrimaryClient,h);iM(n,t,g.zu);const y=new mz(e,t,s);return n.tc.set(e,y),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),g.snapshot}),WN.apply(this,arguments)}function wz(n,e){return KN.apply(this,arguments)}function KN(){return KN=(0,be.Z)(function*(n,e){const t=it(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(s=>!rb(s,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Dy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Tb(t.remoteStore,r.targetId),Py(t,r.targetId)}).catch(Tf))):(Py(t,r.targetId),yield Dy(t.localStore,r.targetId,!0))}),KN.apply(this,arguments)}function YN(){return YN=(0,be.Z)(function*(n,e,t){const r=mM(n);try{const i=yield function(s,u){const h=it(s),g=pr.now(),y=u.reduce((k,R)=>k.add(R.key),Qt());let E,I;return h.persistence.runTransaction("Locally write mutations","readwrite",k=>{let R=Co(),F=Qt();return h.Ui.getEntries(k,y).next(W=>{R=W,R.forEach((ee,me)=>{me.isValidDocument()||(F=F.add(ee))})}).next(()=>h.localDocuments.getOverlayedDocuments(k,R)).next(W=>{E=W;const ee=[];for(const me of u){const Me=RG(me,E.get(me.key).overlayedDocument);null!=Me&&ee.push(new Bd(me.key,Me,zU(Me.value.mapValue),xr.exists(!0)))}return h.mutationQueue.addMutationBatch(k,g,ee,u)}).next(W=>{I=W;const ee=W.applyToLocalDocumentSet(E,F);return h.documentOverlayCache.saveOverlays(k,W.batchId,ee)})}).then(()=>({batchId:I.batchId,changes:b2(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,h){let g=s.oc[s.currentUser.toKey()];g||(g=new Vr(Zt)),g=g.insert(u,h),s.oc[s.currentUser.toKey()]=g}(r,i.batchId,t),yield jd(r,i.changes),yield xy(r.remoteStore)}catch(i){const s=Ry(i,"Failed to persist write");t.reject(s)}}),YN.apply(this,arguments)}function $V(n,e){return QN.apply(this,arguments)}function QN(){return QN=(0,be.Z)(function*(n,e){const t=it(n);try{const r=yield function $Z(n,e){const t=it(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const h=[];e.targetChanges.forEach((E,I)=>{const k=i.get(I);if(!k)return;h.push(t.Vs.removeMatchingKeys(s,E.removedDocuments,I).next(()=>t.Vs.addMatchingKeys(s,E.addedDocuments,I)));let R=k.withSequenceNumber(s.currentSequenceNumber);var F,W,ee;e.targetMismatches.has(I)?R=R.withResumeToken(Ii.EMPTY_BYTE_STRING,Ut.min()).withLastLimboFreeSnapshotVersion(Ut.min()):E.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(E.resumeToken,r)),i=i.insert(I,R),W=R,ee=E,(0===(F=k).resumeToken.approximateByteSize()||W.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8||ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0)&&h.push(t.Vs.updateTargetData(s,R))});let g=Co(),y=Qt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,E))}),h.push(wV(s,u,e.documentUpdates).next(E=>{g=E.Gi,y=E.Qi})),!r.isEqual(Ut.min())){const E=t.Vs.getLastRemoteSnapshotVersion(s).next(I=>t.Vs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(E)}return ce.waitFor(h).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,g,y)).next(()=>g)}).then(s=>(t.$i=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.ic.get(s);u&&(jt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Xu=!0:i.modifiedDocuments.size>0?jt(u.Xu):i.removedDocuments.size>0&&(jt(u.Xu),u.Xu=!1))}),yield jd(t,r,e)}catch(r){yield Tf(r)}}),QN.apply(this,arguments)}function HV(n,e,t){const r=it(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((s,u)=>{const h=u.view.Eu(e);h.snapshot&&i.push(h.snapshot)}),function(s,u){const h=it(s);h.onlineState=u;let g=!1;h.queries.forEach((y,E)=>{for(const I of E.listeners)I.Eu(u)&&(g=!0)}),g&&qN(h)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ez(n,e,t){return JN.apply(this,arguments)}function JN(){return JN=(0,be.Z)(function*(n,e,t){const r=it(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),s=i&&i.key;if(s){let u=new Vr(tt.comparator);u=u.insert(s,zn.newNoDocument(s,Ut.min()));const h=Qt().add(s),g=new lb(Ut.min(),new Map,new Pn(Zt),u,h);yield $V(r,g),r.sc=r.sc.remove(s),r.ic.delete(e),sM(r)}else yield Dy(r.localStore,e,!1).then(()=>Py(r,e,t)).catch(Tf)}),JN.apply(this,arguments)}function Cz(n,e){return XN.apply(this,arguments)}function XN(){return XN=(0,be.Z)(function*(n,e){const t=it(n),r=e.batch.batchId;try{const i=yield function jZ(n,e){const t=it(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Ui.newChangeBuffer({trackRemovals:!0});return function(u,h,g,y){const E=g.batch,I=E.keys();let k=ce.resolve();return I.forEach(R=>{k=k.next(()=>y.getEntry(h,R)).next(F=>{const W=g.docVersions.get(R);jt(null!==W),F.version.compareTo(W)<0&&(E.applyToRemoteDocument(F,g),F.isValidDocument()&&(F.setReadTime(g.commitVersion),y.addEntry(F)))})}),k.next(()=>u.mutationQueue.removeMutationBatch(h,E))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=Qt();for(let g=0;g<u.mutationResults.length;++g)u.mutationResults[g].transformResults.length>0&&(h=h.add(u.batch.mutations[g].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);rM(t,r,null),nM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield jd(t,i)}catch(i){yield Tf(i)}}),XN.apply(this,arguments)}function Tz(n,e,t){return eM.apply(this,arguments)}function eM(){return eM=(0,be.Z)(function*(n,e,t){const r=it(n);try{const i=yield function(s,u){const h=it(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return h.mutationQueue.lookupMutationBatch(g,u).next(E=>(jt(null!==E),y=E.keys(),h.mutationQueue.removeMutationBatch(g,E))).next(()=>h.mutationQueue.performConsistencyCheck(g)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(g,y,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>h.localDocuments.getDocuments(g,y))})}(r.localStore,e);rM(r,e,t),nM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield jd(r,i)}catch(i){yield Tf(i)}}),eM.apply(this,arguments)}function tM(){return tM=(0,be.Z)(function*(n,e){const t=it(n);Pf(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const u=it(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=Ry(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),tM.apply(this,arguments)}function nM(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function rM(n,e,t){const r=it(n);let i=r.oc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Py(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||qV(n,r)})}function qV(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(Tb(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),sM(n))}function iM(n,e,t){for(const r of t)r instanceof VV?(n.rc.addReference(r.key,e),Sz(n,r)):r instanceof BV?($e("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||qV(n,r.key)):ht()}function Sz(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||($e("SyncEngine","New document in limbo: "+t),n.nc.add(r),sM(n))}function sM(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new tt(hn.fromString(e)),r=n.cc.next();n.ic.set(r,new _z(t)),n.sc=n.sc.insert(t,r),jS(n.remoteStore,new Rf(Eo(my(t.path)),r,2,bo.ot))}}function jd(n,e,t){return oM.apply(this,arguments)}function oM(){return oM=(0,be.Z)(function*(n,e,t){const r=it(n),i=[],s=[],u=[];var h;r.tc.isEmpty()||(r.tc.forEach((h,g)=>{u.push(r.hc(g,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,y.fromCache?"not-current":"current"),i.push(y);const E=hN.Vi(g.targetId,y);s.push(E)}}))}),yield Promise.all(u),r.Zu.Go(i),yield(h=(0,be.Z)(function*(g,y){const E=it(g);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>ce.forEach(y,k=>ce.forEach(k.Pi,R=>E.persistence.referenceDelegate.addReference(I,k.targetId,R)).next(()=>ce.forEach(k.vi,R=>E.persistence.referenceDelegate.removeReference(I,k.targetId,R)))))}catch(I){if(!If(I))throw I;$e("LocalStore","Failed to update sequence numbers: "+I)}for(const I of y){const k=I.targetId;if(!I.fromCache){const R=E.$i.get(k),W=R.withLastLimboFreeSnapshotVersion(R.snapshotVersion);E.$i=E.$i.insert(k,W)}}}),function(g,y){return h.apply(this,arguments)})(r.localStore,s))}),oM.apply(this,arguments)}function Dz(n,e){return aM.apply(this,arguments)}function aM(){return aM=(0,be.Z)(function*(n,e){const t=it(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield yV(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(u=>{u.forEach(h=>{h.reject(new Fe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield jd(t,r.Ki)}var i}),aM.apply(this,arguments)}function Az(n,e){const t=it(n),r=t.ic.get(e);if(r&&r.Xu)return Qt().add(r.key);{let i=Qt();const s=t.ec.get(e);if(!s)return i;for(const u of s){const h=t.tc.get(u);i=i.unionWith(h.view.qu)}return i}}function xz(n,e){return lM.apply(this,arguments)}function lM(){return lM=(0,be.Z)(function*(n,e){const t=it(n),r=yield LS(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&iM(t,e.targetId,i.zu),i}),lM.apply(this,arguments)}function kz(n,e){return uM.apply(this,arguments)}function uM(){return uM=(0,be.Z)(function*(n,e){const t=it(n);return EV(t.localStore,e).then(r=>jd(t,r))}),uM.apply(this,arguments)}function Rz(n,e,t,r){return cM.apply(this,arguments)}function cM(){return cM=(0,be.Z)(function*(n,e,t,r){const i=it(n),s=yield function(u,h){const g=it(u),y=it(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.yn(E,h).next(I=>I?g.localDocuments.getDocuments(E,I):ce.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield xy(i.remoteStore):"acknowledged"===t||"rejected"===t?(rM(i,e,r||null),nM(i,e),h=e,it(it(i.localStore).mutationQueue).In(h)):ht(),yield jd(i,s)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),cM.apply(this,arguments)}function dM(){return dM=(0,be.Z)(function*(n,e){const t=it(n);if(gM(t),mM(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield GV(t,r.toArray());t.ac=!0,yield LN(t.remoteStore,!0);for(const s of i)jS(t.remoteStore,s)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((s,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Py(t,u),Dy(t.localStore,u,!0))),Tb(t.remoteStore,u)}),yield i,yield GV(t,r),function(s){const u=it(s);u.ic.forEach((h,g)=>{Tb(u.remoteStore,g)}),u.rc.cs(),u.ic=new Map,u.sc=new Vr(tt.comparator)}(t),t.ac=!1,yield LN(t.remoteStore,!1)}}),dM.apply(this,arguments)}function GV(n,e,t){return hM.apply(this,arguments)}function hM(){return hM=(0,be.Z)(function*(n,e,t){const r=it(n),i=[],s=[];for(const u of e){let h;const g=r.ec.get(u);if(g&&0!==g.length){h=yield Sy(r.localStore,Eo(g[0]));for(const y of g){const E=r.tc.get(y),I=yield xz(r,E);I.snapshot&&s.push(I.snapshot)}}else{const y=yield bV(r.localStore,u);h=yield Sy(r.localStore,y),yield zN(r,ZV(y),u,!1)}i.push(h)}return r.Zu.Go(s),i}),hM.apply(this,arguments)}function ZV(n){return e2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Mz(n){const e=it(n);return it(it(e.localStore).persistence).Ri()}function Pz(n,e,t,r){return fM.apply(this,arguments)}function fM(){return fM=(0,be.Z)(function*(n,e,t,r){const i=it(n);if(i.ac)return void $e("SyncEngine","Ignoring unexpected query state notification.");const s=i.ec.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const u=yield EV(i.localStore,r2(s[0])),h=lb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield jd(i,u,h);break}case"rejected":yield Dy(i.localStore,e,!0),Py(i,e,r);break;default:ht()}}),fM.apply(this,arguments)}function Oz(n,e,t){return pM.apply(this,arguments)}function pM(){return pM=(0,be.Z)(function*(n,e,t){const r=gM(n);if(r.ac){for(const i of e){if(r.ec.has(i)){$e("SyncEngine","Adding an already active target "+i);continue}const s=yield bV(r.localStore,i),u=yield Sy(r.localStore,s);yield zN(r,ZV(s),u.targetId,!1),jS(r.remoteStore,u)}for(const i of t)r.ec.has(i)&&(yield Dy(r.localStore,i,!1).then(()=>{Tb(r.remoteStore,i),Py(r,i)}).catch(Tf))}}),pM.apply(this,arguments)}function gM(n){const e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$V.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Az.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ez.bind(null,e),e.Zu.Go=hz.bind(null,e.eventManager),e.Zu.lc=fz.bind(null,e.eventManager),e}function mM(n){const e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tz.bind(null,e),e}class zV{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.wt=Eb(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return _V(this.persistence,new mV,e.initialUser,this.wt)}_c(e){return new pV(OS.Os,this.wt)}dc(e){return new SV}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class WV extends zV{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield mM(r.yc.syncEngine),yield xy(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return _V(this.persistence,new mV,e.initialUser,this.wt)}mc(e,t){return new SZ(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new uG(t,this.persistence);return new lG(e.asyncQueue,r)}_c(e){const t=dN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?To.withCacheSize(this.cacheSizeBytes):To.DEFAULT;return new cN(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,AV(),BS(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new SV}}class Lz extends WV{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof wN&&(r.sharedClientState.syncEngine={kr:Rz.bind(null,i),Mr:Pz.bind(null,i),Or:Oz.bind(null,i),Ri:Mz.bind(null,i),Nr:kz.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var s=(0,be.Z)(function*(u){yield function Nz(n,e){return dM.apply(this,arguments)}(r.yc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}dc(e){const t=AV();if(!wN.V(t))throw new Fe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wN(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class _M{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>HV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Dz.bind(null,r.syncEngine),yield LN(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new dz}createDatastore(e){const t=Eb(e.databaseInfo.databaseId),r=new KZ(e.databaseInfo);return new JZ(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>HV(this.syncEngine,h,0),u=DV.V()?new DV:new ZZ,new ez(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,h,g,y){const E=new yz(r,i,s,u,h,g);return y&&(E.ac=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=it(t);$e("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Ay(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function KV(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class HS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Uz{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Oi,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,be.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const s=yield e.vc(i);return new pz(JSON.parse(s),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,be.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,be.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Vz{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,be.Z)(function*(s,u){const h=it(s),g=hb(h.wt)+"/documents",y={documents:u.map(R=>db(h.wt,R))},E=yield h.ao("BatchGetDocuments",g,y,u.length),I=new Map;E.forEach(R=>{const F=function $G(n,e){return"found"in e?function(t,r){jt(!!r.found);const i=uc(t,r.found.name),s=Fi(r.found.updateTime),u=new ts({mapValue:{fields:r.found.fields}});return zn.newFoundDocument(i,s,u)}(n,e):"missing"in e?function(t,r){jt(!!r.missing),jt(!!r.readTime);const i=uc(t,r.missing),s=Fi(r.readTime);return zn.newNoDocument(i,s)}(n,e):ht()}(h.wt,R);I.set(F.key.toString(),F)});const k=[];return u.forEach(R=>{const F=I.get(R.toString());jt(!!F),k.push(F)}),k}),function(s,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new by(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=tt.fromPath(i);e.mutations.push(new Q1(s,e.precondition(s)))}),yield(r=(0,be.Z)(function*(i,s){const u=it(i),h=hb(u.wt)+"/documents",g={writes:s.map(y=>fb(u.wt,y))};yield u.ro("Commit",h,g)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=Ut.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?xr.updateTime(t):xr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ut.min()))throw new Fe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xr.updateTime(t)}return xr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Bz{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Dc=r.maxAttempts,this.So=new bN(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,be.Z)(function*(){const t=new Vz(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Nc(s)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!Q0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!y2(t)}return!1}}class jz{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pi.UNAUTHENTICATED,this.clientId=xU.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,be.Z)(function*(h){$e("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>($e("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ry(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function YV(n,e){return yM.apply(this,arguments)}function yM(){return yM=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,be.Z)(function*(s){r.isEqual(s)||(yield yV(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),yM.apply(this,arguments)}function QV(n,e){return vM.apply(this,arguments)}function vM(){return vM=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield wM(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>OV(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>OV(e.remoteStore,s)),n.onlineComponents=e}),vM.apply(this,arguments)}function wM(n){return bM.apply(this,arguments)}function bM(){return bM=(0,be.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield YV(n,new zV)),n.offlineComponents}),bM.apply(this,arguments)}function qS(n){return EM.apply(this,arguments)}function EM(){return EM=(0,be.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield QV(n,new _M)),n.onlineComponents}),EM.apply(this,arguments)}function JV(n){return wM(n).then(e=>e.persistence)}function GS(n){return wM(n).then(e=>e.localStore)}function XV(n){return qS(n).then(e=>e.remoteStore)}function CM(n){return qS(n).then(e=>e.syncEngine)}function Oy(n){return TM.apply(this,arguments)}function TM(){return TM=(0,be.Z)(function*(n){const e=yield qS(n),t=e.eventManager;return t.onListen=vz.bind(null,e.syncEngine),t.onUnlisten=wz.bind(null,e.syncEngine),t}),TM.apply(this,arguments)}function eB(n,e,t={}){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,s,u,h,g){const y=new HS({next:I=>{s.enqueueAndForget(()=>$N(i,E));const k=I.docs.has(u);!k&&I.fromCache?g.reject(new Fe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&I.fromCache&&h&&"server"===h.source?g.reject(new Fe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),E=new GN(my(u.path),y,{includeMetadataChanges:!0,Du:!0});return BN(i,E)}(yield Oy(n),n.asyncQueue,e,t,r)})),r.promise}function tB(n,e,t={}){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,s,u,h,g){const y=new HS({next:I=>{s.enqueueAndForget(()=>$N(i,E)),I.fromCache&&"server"===h.source?g.reject(new Fe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),E=new GN(u,y,{includeMetadataChanges:!0,Du:!0});return BN(i,E)}(yield Oy(n),n.asyncQueue,e,t,r)})),r.promise}const nB=new Map;function IM(n,e,t){if(!t)throw new Fe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rB(n,e,t,r){if(!0===e&&!0===r)throw new Fe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iB(n){if(!tt.isDocumentKey(n))throw new Fe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sB(n){if(tt.isDocumentKey(n))throw new Fe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ZS(n);throw new Fe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function oB(n,e){if(e<=0)throw new Fe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class aB{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,rB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ib{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aB({}),this._settingsFrozen=!1,e instanceof Ud?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Fe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ud(i.options.projectId)}(e))}get app(){if(!this._app)throw new Fe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aB(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Yq;switch(t.type){case"gapi":const r=t.client;return jt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new eG(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Fe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nB.get(e);t&&($e("ComponentProvider","Removing Datastore"),nB.delete(e),t.terminate())}(this),Promise.resolve()}}class ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ir(this.firestore,e,this._key)}}class vs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vs(this.firestore,e,this._query)}}class dc extends vs{constructor(e,t,r){super(e,t,my(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ir(this.firestore,null,new tt(e))}withConverter(e){return new dc(this.firestore,e,this._path)}}function lB(n,e,...t){if(n=(0,O.m9)(n),IM("collection","path",e),n instanceof Ib){const r=hn.fromString(e,...t);return sB(r),new dc(n,null,r)}{if(!(n instanceof ir||n instanceof dc))throw new Fe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hn.fromString(e,...t));return sB(r),new dc(n.firestore,null,r)}}function zS(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=xU.I()),IM("doc","path",e),n instanceof Ib){const r=hn.fromString(e,...t);return iB(r),new ir(n,null,new tt(r))}{if(!(n instanceof ir||n instanceof dc))throw new Fe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hn.fromString(e,...t));return iB(r),new ir(n.firestore,n instanceof dc?n.converter:null,new tt(r))}}function uB(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof ir||n instanceof dc)&&(e instanceof ir||e instanceof dc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function cB(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof vs&&e instanceof vs&&n.firestore===e.firestore&&rb(n._query,e._query)&&n.converter===e.converter}class Jz{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new bN(this,"async_queue_retry"),this.Kc=()=>{const t=BS();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=BS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=BS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Oi;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,be.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!If(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Xr("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=VN.createAndSchedule(this,e,t,r,s=>this.Wc(s));return this.$c.push(i),i}Gc(){this.Bc&&ht()}verifyOperationInProgress(){}zc(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function SM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Xz{constructor(){this._progressObserver={},this._taskCompletionResolver=new Oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class gr extends Ib{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Jz,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||dB(this),this._firestoreClient.terminate()}}function ci(n){return n._firestoreClient||dB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function dB(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new hG(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new jz(n._authCredentials,n._appCheckCredentials,n._queue,r)}function hB(n,e,t){const r=new Oi;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield YV(n,t),yield QV(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(u=s).name?u.code===fe.FAILED_PRECONDITION||u.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw s;xg("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var u})).then(()=>r.promise)}function fB(n){if(n._initialized||n._terminated)throw new Fe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $d{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hc(Ii.fromBase64String(e))}catch(t){throw new Fe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new hc(Ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zg{constructor(e){this._methodName=e}}class WS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}}const u4=/^__.*__$/;class c4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Bd(e,this.data,this.fieldMask,t,this.fieldTransforms):new wy(e,this.data,t,this.fieldTransforms)}}class pB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class KS{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new KS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return JS(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(gB(this.Zc)&&u4.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class d4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||Eb(e)}aa(e,t,r,i=!1){return new KS({Zc:e,methodName:t,ca:r,path:Ur.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Wg(n){const e=n._freezeSettings(),t=Eb(n._databaseId);return new d4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function YS(n,e,t,r,i,s={}){const u=n.aa(s.merge||s.mergeFields?2:0,e,t,i);kM("Data must be an object, but it was:",u,r);const h=yB(r,u);let g,y;if(s.merge)g=new sa(u.fieldMask),y=u.fieldTransforms;else if(s.mergeFields){const E=[];for(const I of s.mergeFields){const k=RM(e,I,t);if(!u.contains(k))throw new Fe(fe.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);wB(E,k)||E.push(k)}g=new sa(E),y=u.fieldTransforms.filter(I=>g.covers(I.field))}else g=null,y=u.fieldTransforms;return new c4(new ts(h),g,y)}class Sb extends zg{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sb}}function mB(n,e,t){return new KS({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class DM extends zg{_toFieldTransform(e){return new ib(e.path,new yy)}isEqual(e){return e instanceof DM}}class h4 extends zg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=mB(this,e,!0),r=this.ha.map(s=>Kg(s,t)),i=new Lg(r);return new ib(e.path,i)}isEqual(e){return this===e}}class f4 extends zg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=mB(this,e,!0),r=this.ha.map(s=>Kg(s,t)),i=new Ug(r);return new ib(e.path,i)}isEqual(e){return this===e}}class p4 extends zg{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new vy(e.wt,a2(e.wt,this.la));return new ib(e.path,t)}isEqual(e){return this===e}}function AM(n,e,t,r){const i=n.aa(1,e,t);kM("Data must be an object, but it was:",i,r);const s=[],u=ts.empty();Ng(r,(g,y)=>{const E=QS(e,g,t);y=(0,O.m9)(y);const I=i.ia(E);if(y instanceof Sb)s.push(E);else{const k=Kg(y,I);null!=k&&(s.push(E),u.set(E,k))}});const h=new sa(s);return new pB(u,h,i.fieldTransforms)}function xM(n,e,t,r,i,s){const u=n.aa(1,e,t),h=[RM(e,r,t)],g=[i];if(s.length%2!=0)throw new Fe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<s.length;k+=2)h.push(RM(e,s[k])),g.push(s[k+1]);const y=[],E=ts.empty();for(let k=h.length-1;k>=0;--k)if(!wB(y,h[k])){const R=h[k];let F=g[k];F=(0,O.m9)(F);const W=u.ia(R);if(F instanceof Sb)y.push(R);else{const ee=Kg(F,W);null!=ee&&(y.push(R),E.set(R,ee))}}const I=new sa(y);return new pB(E,I,u.fieldTransforms)}function _B(n,e,t,r=!1){return Kg(t,n.aa(r?4:3,e))}function Kg(n,e){if(vB(n=(0,O.m9)(n)))return kM("Unsupported field value:",e,n),yB(n,e);if(n instanceof zg)return function(t,r){if(!gB(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const u of t){let h=Kg(u,r.ra(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return a2(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=pr.fromDate(t);return{timestampValue:cb(r.wt,i)}}if(t instanceof pr){const i=new pr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:cb(r.wt,i)}}if(t instanceof WS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hc)return{bytesValue:A2(r.wt,t._byteString)};if(t instanceof ir){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:J1(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${ZS(t)}`)}(n,e)}function yB(n,e){const t={};return LU(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ng(n,(r,i)=>{const s=Kg(i,e.ea(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function vB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof pr||n instanceof WS||n instanceof hc||n instanceof ir||n instanceof zg)}function kM(n,e,t){if(!vB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ZS(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function RM(n,e,t){if((e=(0,O.m9)(e))instanceof $d)return e._internalPath;if("string"==typeof e)return QS(n,e);throw JS("Field path arguments must be of type string or ",n,!1,void 0,t)}const g4=new RegExp("[~\\*/\\[\\]]");function QS(n,e,t){if(e.search(g4)>=0)throw JS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $d(...e.split("."))._internalPath}catch{throw JS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function JS(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(s||u)&&(g+=" (found",s&&(g+=` in field ${r}`),u&&(g+=` in document ${i}`),g+=")"),new Fe(fe.INVALID_ARGUMENT,h+n+g)}function wB(n,e){return n.some(t=>t.isEqual(e))}class Db{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ir(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new m4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(XS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class m4 extends Db{data(){return super.data()}}function XS(n,e){return"string"==typeof e?QS(n,e):e instanceof $d?e._internalPath:e._delegate._internalPath}class Yg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hd extends Db{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ab(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(XS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ab extends Hd{data(e={}){return super.data(e)}}class Ff{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Yg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ab(this._firestore,this._userDataWriter,r.key,r,new Yg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new Ab(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Yg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new Ab(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Yg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return 0!==u.type&&(g=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),y=s.indexOf(u.doc.key)),{type:_4(u.type),doc:h,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function _4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function bB(n,e){return n instanceof Hd&&e instanceof Hd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ff&&e instanceof Ff&&n._firestore===e._firestore&&cB(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function EB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xb{}function Lf(n,...e){for(const t of e)n=t._apply(n);return n}class y4 extends xb{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=Wg(e.firestore),r=function(i,s,u,h,g,y,E){let I;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Fe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){AB(E,y);const R=[];for(const F of E)R.push(DB(h,i,F));I={arrayValue:{values:R}}}else I=DB(h,i,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||AB(E,y),I=_B(u,"where",E,"in"===y||"not-in"===y);const k=ns.create(g,y,I);return function(R,F){if(F.ht()){const ee=z1(R);if(null!==ee&&!ee.isEqual(F.field))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ee.toString()}' and '${F.field.toString()}'`);const me=Z1(R);null!==me&&xB(0,F.field,me)}const W=function(ee,me){for(const Me of ee.filters)if(me.indexOf(Me.op)>=0)return Me.op;return null}(R,function(ee){switch(ee){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(F.op));if(null!==W)throw new Fe(fe.INVALID_ARGUMENT,W===F.op?`Invalid query. You cannot use more than one '${F.op.toString()}' filter.`:`Invalid query. You cannot use '${F.op.toString()}' filters with '${W.toString()}' filters.`)}(i,k),k}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new vs(e.firestore,e.converter,function(i,s){const u=i.filters.concat([s]);return new Vd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class w4 extends xb{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Fe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new gy(i,s);return function(h,g){if(null===Z1(h)){const y=z1(h);null!==y&&xB(0,y,g.field)}}(r,u),u}(e._query,this.fa,this.wa);return new vs(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Vd(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class CB extends xb{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new vs(e.firestore,e.converter,bS(e._query,this.ma,this.ga))}}class TB extends xb{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=SB(e,this.type,this.ya,this.pa);return new vs(e.firestore,e.converter,(i=t,new Vd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class IB extends xb{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=SB(e,this.type,this.ya,this.pa);return new vs(e.firestore,e.converter,(i=t,new Vd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function SB(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof Db)return function(i,s,u,h,g){if(!h)throw new Fe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const E of _y(i))if(E.field.isKeyField())y.push(Og(s,h.key));else{const I=h.data.field(E.field);if(H1(I))throw new Fe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const k=E.field.canonicalString();throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}y.push(I)}return new xf(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Wg(n.firestore);return function(s,u,h,g,y,E){const I=s.explicitOrderBy;if(y.length>I.length)throw new Fe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let R=0;R<y.length;R++){const F=y[R];if(I[R].field.isKeyField()){if("string"!=typeof F)throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof F}`);if(!W1(s)&&-1!==F.indexOf("/"))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${F}' contains a slash.`);const W=s.path.child(hn.fromString(F));if(!tt.isDocumentKey(W))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${W}' is not because it contains an odd number of segments.`);const ee=new tt(W);k.push(Og(u,ee))}else{const W=_B(h,g,F);k.push(W)}}return new xf(k,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function DB(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Fe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!W1(e)&&-1!==t.indexOf("/"))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(hn.fromString(t));if(!tt.isDocumentKey(r))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Og(n,new tt(r))}if(t instanceof ir)return Og(n,t._key);throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ZS(t)}.`)}function AB(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function xB(n,e,t){if(!t.isEqual(e))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const A4={maxAttempts:5};class NM{convertValue(e,t="none"){switch(Pg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const r={};return Ng(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new WS(Br(e.latitude),Br(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=VU(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Y0(e));default:return null}}convertTimestamp(e){const t=Sf(e);return new pr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=hn.fromString(e);jt(U2(r));const i=new Ud(r.get(1),r.get(3)),s=new tt(r.popFirst(5));return i.isEqual(t)||Xr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function eD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class x4 extends NM{constructor(e){super(),this.firestore=e}convertBytes(e){return new hc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}class kB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wg(e)}set(e,t,r){this._verifyNotCommitted();const i=Uf(e,this._firestore),s=eD(i.converter,t,r),u=YS(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,xr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Uf(e,this._firestore);let u;return u="string"==typeof(t=(0,O.m9)(t))||t instanceof $d?xM(this._dataReader,"WriteBatch.update",s._key,t,r,i):AM(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,xr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Uf(e,this._firestore);return this._mutations=this._mutations.concat(new by(t._key,xr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Uf(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Fe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Qg extends NM{constructor(e){super(),this.firestore=e}convertBytes(e){return new hc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}function RB(n,e,t){n=dn(n,ir);const r=dn(n.firestore,gr),i=eD(n.converter,e,t);return Fy(r,[YS(Wg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,xr.none())])}function NB(n,e,t,...r){n=dn(n,ir);const i=dn(n.firestore,gr),s=Wg(i);let u;return u="string"==typeof(e=(0,O.m9)(e))||e instanceof $d?xM(s,"updateDoc",n._key,e,t,r):AM(s,"updateDoc",n._key,e),Fy(i,[u.toMutation(n._key,xr.exists(!0))])}function MB(n,...e){var t,r,i;n=(0,O.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||SM(e[u])||(s=e[u],u++);const h={includeMetadataChanges:s.includeMetadataChanges};if(SM(e[u])){const I=e[u];e[u]=null===(t=I.next)||void 0===t?void 0:t.bind(I),e[u+1]=null===(r=I.error)||void 0===r?void 0:r.bind(I),e[u+2]=null===(i=I.complete)||void 0===i?void 0:i.bind(I)}let g,y,E;if(n instanceof ir)y=dn(n.firestore,gr),E=my(n._key.path),g={next:I=>{e[u]&&e[u](MM(y,n,I))},error:e[u+1],complete:e[u+2]};else{const I=dn(n,vs);y=dn(I.firestore,gr),E=I._query;const k=new Qg(y);g={next:R=>{e[u]&&e[u](new Ff(y,k,I,R))},error:e[u+1],complete:e[u+2]},EB(n._query)}return function(I,k,R,F){const W=new HS(F),ee=new GN(k,W,R);return I.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return BN(yield Oy(I),ee)})),()=>{W.Tc(),I.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return $N(yield Oy(I),ee)}))}}(ci(y),E,h,g)}function Fy(n,e){return function(t,r){const i=new Oi;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function bz(n,e,t){return YN.apply(this,arguments)}(yield CM(t),r,i)})),i.promise}(ci(n),e)}function MM(n,e,t){const r=t.docs.get(e._key),i=new Qg(n);return new Hd(n,i,e._key,r,new Yg(t.hasPendingWrites,t.fromCache),e.converter)}class V4 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wg(e)}get(e){const t=Uf(e,this._firestore),r=new x4(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ht();const s=i[0];if(s.isFoundDocument())return new Db(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new Db(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const i=Uf(e,this._firestore),s=eD(i.converter,t,r),u=YS(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const s=Uf(e,this._firestore);let u;return u="string"==typeof(t=(0,O.m9)(t))||t instanceof $d?xM(this._dataReader,"Transaction.update",s._key,t,r,i):AM(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,u),this}delete(e){const t=Uf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Uf(e,this._firestore),r=new Qg(this._firestore);return super.get(e).then(i=>new Hd(this._firestore,r,t._key,i._document,new Yg(!1,!1),t.converter))}}!function(n,e=!0){dy=Hs.SDK_VERSION,(0,Hs._registerComponent)(new Kl.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new gr(i,new Jq(t.getProvider("auth-internal")),new tG(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),(0,Hs.registerVersion)(SU,"3.4.14",n),(0,Hs.registerVersion)(SU,"3.4.14","esm2017")}();function PM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function OB(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function FB(){if(!function cG(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}class kb{constructor(e){this._delegate=e}static fromBase64String(e){return FB(),new kb(hc.fromBase64String(e))}static fromUint8Array(e){return OB(),new kb(hc.fromUint8Array(e))}toBase64(){return FB(),this._delegate.toBase64()}toUint8Array(){return OB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function OM(n){return function W4(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class K4{enableIndexedDbPersistence(e,t){return function t4(n,e){fB(n=dn(n,gr));const t=ci(n),r=n._freezeSettings(),i=new _M;return hB(t,i,new WV(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function n4(n){fB(n=dn(n,gr));const e=ci(n),t=n._freezeSettings(),r=new _M;return hB(e,r,new Lz(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function r4(n){if(n._initialized&&!n._terminated)throw new Fe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Oi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!Ql.V())return Promise.resolve();const i=r+"main";yield Ql.delete(i)}),function(r){return t.apply(this,arguments)})(dN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class LB{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ud||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&xg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Yz(n,e,t,r={}){var i;const s=(n=dn(n,Ib))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&xg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=Pi.MOCK_USER;else{u=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Fe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Pi(g)}n._authCredentials=new Qq(new DU(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function s4(n){return function $z(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield JV(n),t=yield XV(n);return e.setNetworkEnabled(!0),function(r){const i=it(r);return i.lu.delete(0),Cb(i)}(t)}))}(ci(n=dn(n,gr)))}(this._delegate)}disableNetwork(){return function o4(n){return function Hz(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield JV(n),t=yield XV(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(i){const s=it(i);s.lu.add(0),yield Ay(s),s._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ci(n=dn(n,gr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function i4(n){return function(e){const t=new Oi;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function Iz(n,e){return tM.apply(this,arguments)}(yield CM(e),t)})),t.promise}(ci(n=dn(n,gr)))}(this._delegate)}onSnapshotsInSync(e){return function U4(n,e){return function Zz(n,e){const t=new HS(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield Oy(n),i=t,it(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield Oy(n),i=t,void it(r).Tu.delete(i);var r,i}))}}(ci(n=dn(n,gr)),SM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ly(this,lB(this._delegate,e))}catch(t){throw Ws(t,"collection()","Firestore.collection()")}}doc(e){try{return new Qa(this,zS(this._delegate,e))}catch(t){throw Ws(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ks(this,function Qz(n,e){if(n=dn(n,Ib),IM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vs(n,null,(t=e,new Vd(hn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ws(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function B4(n,e,t){n=dn(n,gr);const r=Object.assign(Object.assign({},A4),t);return function(i){if(i.maxAttempts<1)throw new Fe(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function zz(n,e,t){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const i=yield(s=n,qS(s).then(u=>u.datastore));var s;new Bz(n.asyncQueue,i,t,e,r).run()})),r.promise}(ci(n),i=>e(new V4(n,i)),r)}(this._delegate,t=>e(new UB(this,t)))}batch(){return ci(this._delegate),new VB(new kB(this._delegate,e=>Fy(this._delegate,e)))}loadBundle(e){return function a4(n,e){const t=ci(n=dn(n,gr)),r=new Xz;return function Wz(n,e,t,r){const i=function(s,u){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,g=function(g,y){if(g instanceof Uint8Array)return KV(g,y);if(g instanceof ArrayBuffer)return KV(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new Uz(g,u);var g}(t,Eb(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function Fz(n,e,t){const r=it(n);var i;(i=(0,be.Z)(function*(s,u,h){try{const g=yield u.getMetadata();if(yield function(k,R){const F=it(k),W=Fi(R.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",ee=>F.Ds.getBundleMetadata(ee,R.id)).then(ee=>!!ee&&ee.createTime.compareTo(W)>=0)}(s.localStore,g))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(k=g).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);h._updateProgress(UV(g));const y=new gz(g,s.localStore,u.wt);let E=yield u.fc();for(;E;){const k=yield y.Nu(E);k&&h._updateProgress(k),E=yield u.fc()}const I=yield y.complete();return yield jd(s,I.Ou,void 0),yield function(k,R){const F=it(k);return F.persistence.runTransaction("Save bundle","readwrite",W=>F.Ds.saveBundleMetadata(W,R))}(s.localStore,g),h._completeWith(I.progress),Promise.resolve(I.Mu)}catch(g){return xg("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g),Promise.resolve(new Set)}var k}),function(s,u,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield CM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function l4(n,e){return function Kz(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const i=it(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ds.getNamedQuery(s,r))}(yield GS(n),e)}))}(ci(n=dn(n,gr)),e).then(t=>t?new vs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ks(this,t):null)}}class tD extends NM{constructor(e){super(),this.firestore=e}convertBytes(e){return new kb(new hc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Qa.forKey(t,this.firestore,null)}}class UB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new tD(e)}get(e){const t=Xg(e);return this._delegate.get(t).then(r=>new Rb(this._firestore,new Hd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Xg(e);return r?(PM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Xg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Xg(e);return this._delegate.delete(t),this}}class VB{constructor(e){this._delegate=e}set(e,t,r){const i=Xg(e);return r?(PM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Xg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Xg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Jg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Ab(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Nb(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Jg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Jg(e,new tD(e),t),i.set(t,s)),s}}Jg.INSTANCES=new WeakMap;class Qa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Qa(t,new ir(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new Qa(t,new ir(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ly(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ly(this.firestore,lB(this._delegate,e))}catch(t){throw Ws(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof ir&&uB(this._delegate,e)}set(e,t){t=PM("DocumentReference.set",t);try{return t?RB(this._delegate,e,t):RB(this._delegate,e)}catch(r){throw Ws(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?NB(this._delegate,e):NB(this._delegate,e,t,...r)}catch(i){throw Ws(i,"updateDoc()","DocumentReference.update()")}}delete(){return function F4(n){return Fy(dn(n.firestore,gr),[new by(n._key,xr.none())])}(this._delegate)}onSnapshot(...e){const t=BB(e),r=jB(e,i=>new Rb(this.firestore,new Hd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return MB(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function R4(n){n=dn(n,ir);const e=dn(n.firestore,gr),t=ci(e),r=new Qg(e);return function qz(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,s,u){try{const h=yield function(g,y){const E=it(g);return E.persistence.runTransaction("read document","readonly",I=>E.localDocuments.getDocument(I,y))}(i,s);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new Fe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=Ry(h,`Failed to get document '${s} from cache`);u.reject(g)}}),function(i,s,u){return r.apply(this,arguments)})(yield GS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Hd(e,r,n._key,i,new Yg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function N4(n){n=dn(n,ir);const e=dn(n.firestore,gr);return eB(ci(e),n._key,{source:"server"}).then(t=>MM(e,n,t))}(this._delegate):function k4(n){n=dn(n,ir);const e=dn(n.firestore,gr);return eB(ci(e),n._key).then(t=>MM(e,n,t))}(this._delegate),t.then(r=>new Rb(this.firestore,new Hd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Qa(this.firestore,this._delegate.withConverter(e?Jg.getInstance(this.firestore,e):null))}}function Ws(n,e,t){return n.message=n.message.replace(e,t),n}function BB(n){for(const e of n)if("object"==typeof e&&!OM(e))return e;return{}}function jB(n,e){var t,r;let i;return i=OM(n[0])?n[0]:OM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Rb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Qa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bB(this._delegate,e._delegate)}}class Nb extends Rb{data(e){const t=this._delegate.data(e);return function Kq(n,e){n||ht()}(void 0!==t),t}}class Ks{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tD(e)}where(e,t,r){try{return new Ks(this.firestore,Lf(this._delegate,function v4(n,e,t){const r=e,i=XS("where",n);return new y4(i,r,t)}(e,t,r)))}catch(i){throw Ws(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ks(this.firestore,Lf(this._delegate,function b4(n,e="asc"){const t=e,r=XS("orderBy",n);return new w4(r,t)}(e,t)))}catch(r){throw Ws(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ks(this.firestore,Lf(this._delegate,function E4(n){return oB("limit",n),new CB("limit",n,"F")}(e)))}catch(t){throw Ws(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ks(this.firestore,Lf(this._delegate,function C4(n){return oB("limitToLast",n),new CB("limitToLast",n,"L")}(e)))}catch(t){throw Ws(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ks(this.firestore,Lf(this._delegate,function T4(...n){return new TB("startAt",n,!0)}(...e)))}catch(t){throw Ws(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ks(this.firestore,Lf(this._delegate,function I4(...n){return new TB("startAfter",n,!1)}(...e)))}catch(t){throw Ws(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ks(this.firestore,Lf(this._delegate,function S4(...n){return new IB("endBefore",n,!1)}(...e)))}catch(t){throw Ws(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ks(this.firestore,Lf(this._delegate,function D4(...n){return new IB("endAt",n,!0)}(...e)))}catch(t){throw Ws(t,"endAt()","Query.endAt()")}}isEqual(e){return cB(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function P4(n){n=dn(n,vs);const e=dn(n.firestore,gr),t=ci(e),r=new Qg(e);return function Gz(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,s,u){try{const h=yield LS(i,s,!0),g=new jV(s,h.ji),y=g.Ku(h.documents),E=g.applyChanges(y,!1);u.resolve(E.snapshot)}catch(h){const g=Ry(h,`Failed to execute query '${s} against cache`);u.reject(g)}}),function(i,s,u){return r.apply(this,arguments)})(yield GS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ff(e,r,n,i))}(this._delegate):"server"===e?.source?function O4(n){n=dn(n,vs);const e=dn(n.firestore,gr),t=ci(e),r=new Qg(e);return tB(t,n._query,{source:"server"}).then(i=>new Ff(e,r,n,i))}(this._delegate):function M4(n){n=dn(n,vs);const e=dn(n.firestore,gr),t=ci(e),r=new Qg(e);return EB(n._query),tB(t,n._query).then(i=>new Ff(e,r,n,i))}(this._delegate),t.then(r=>new FM(this.firestore,new Ff(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=BB(e),r=jB(e,i=>new FM(this.firestore,new Ff(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return MB(this._delegate,t,r)}withConverter(e){return new Ks(this.firestore,this._delegate.withConverter(e?Jg.getInstance(this.firestore,e):null))}}class Q4{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Nb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class FM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ks(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Nb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Q4(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Nb(this._firestore,r))})}isEqual(e){return bB(this._delegate,e._delegate)}}class Ly extends Ks{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Qa(this.firestore,e):null}doc(e){try{return new Qa(this.firestore,void 0===e?zS(this._delegate):zS(this._delegate,e))}catch(t){throw Ws(t,"doc()","CollectionReference.doc()")}}add(e){return function L4(n,e){const t=dn(n.firestore,gr),r=zS(n),i=eD(n.converter,e);return Fy(t,[YS(Wg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,xr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Qa(this.firestore,t))}isEqual(e){return uB(this._delegate,e._delegate)}withConverter(e){return new Ly(this.firestore,this._delegate.withConverter(e?Jg.getInstance(this.firestore,e):null))}}function Xg(n){return dn(n,ir)}class LM{constructor(...e){this._delegate=new $d(...e)}static documentId(){return new LM(Ur.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof $d&&this._delegate._internalPath.isEqual(e._internalPath)}}class em{constructor(e){this._delegate=e}static serverTimestamp(){const e=function $4(){return new DM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new em(e)}static delete(){const e=function j4(){return new Sb("deleteField")}();return e._methodName="FieldValue.delete",new em(e)}static arrayUnion(...e){const t=function H4(...n){return new h4("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new em(t)}static arrayRemove(...e){const t=function q4(...n){return new f4("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new em(t)}static increment(e){const t=function G4(n){return new p4("increment",n)}(e);return t._methodName="FieldValue.increment",new em(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const J4={Firestore:LB,GeoPoint:WS,Timestamp:pr,Blob:kb,Transaction:UB,WriteBatch:VB,DocumentReference:Qa,DocumentSnapshot:Rb,Query:Ks,QueryDocumentSnapshot:Nb,QuerySnapshot:FM,CollectionReference:Ly,FieldPath:LM,FieldValue:em,setLogLevel:function Y4(n){!function Wq(n){Cf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function eW(n){(function X4(n,e){n.INTERNAL.registerComponent(new Kl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},J4)))})(n,(e,t)=>new LB(e,t,new K4)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(GR.Z);var nD=U(5363);function $B(n,e){return(0,Kc.m)(e)?Bn(()=>n,e):Bn(()=>n)}var UM=U(9468);U(5867);const qB=new Map,sW={activated:!1,tokenObservers:[]},oW={initialized:!1,enabled:!1};function Vi(n){return qB.get(n)||sW}function Jl(n,e){qB.set(n,e)}function iD(){return oW}const BM="https://content-firebaseappcheck.googleapis.com/v1",uW="exchangeDebugToken",GB={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class dW{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function hW(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ys=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function HM(){return HM=(0,be.Z)(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const R=yield u.getHeartbeatsHeader();R&&(s["X-Firebase-Client"]=R)}const h={method:"POST",body:JSON.stringify(e),headers:s};let g,y;try{g=yield fetch(n,h)}catch(R){throw Ys.create("fetch-network-error",{originalErrorMessage:null===(r=R)||void 0===r?void 0:r.message})}if(200!==g.status)throw Ys.create("fetch-status-error",{httpStatus:g.status});try{y=yield g.json()}catch(R){throw Ys.create("fetch-parse-error",{originalErrorMessage:null===(i=R)||void 0===i?void 0:i.message})}const E=y.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Ys.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const I=1e3*Number(E[1]),k=Date.now();return{token:y.token,expireTimeMillis:k+I,issuedAtTimeMillis:k}}),HM.apply(this,arguments)}const _W="firebase-app-check-database",yW=1,Mb="firebase-app-check-store";let aD=null;function qM(){return qM=(0,be.Z)(function*(n,e){const r=(yield function WB(){return aD||(aD=new Promise((n,e)=>{var t;try{const r=indexedDB.open(_W,yW);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(Ys.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Mb,{keyPath:"compositeKey"})}}catch(r){e(Ys.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),aD)}()).transaction(Mb,"readwrite"),s=r.objectStore(Mb).put({compositeKey:n,value:e});return new Promise((u,h)=>{s.onsuccess=g=>{u()},r.onerror=g=>{var y;h(Ys.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})}),qM.apply(this,arguments)}const Pb=new Yl.Yd("@firebase/app-check");function JB(n,e){return(0,O.hl)()?function wW(n,e){return function KB(n,e){return qM.apply(this,arguments)}(function QB(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Pb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function WM(){return WM=(0,be.Z)(function*(){const n=iD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),WM.apply(this,arguments)}const SW={error:"UNKNOWN_ERROR"};function DW(n){return O.US.encodeString(JSON.stringify(n),!1)}function lD(n){return KM.apply(this,arguments)}function KM(){return KM=(0,be.Z)(function*(n,e=!1){const t=n.app;!function ZB(n){if(!Vi(n).activated)throw Ys.create("use-before-activation",{appName:n.name})}(t);const r=Vi(t);let s,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&uD(g)&&(i=g)}if(!e&&i&&uD(i))return{token:i.token};let h,u=!1;if(function XB(){return iD().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function $M(n,e){return HM.apply(this,arguments)}(function mW(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${BM}/projects/${t}/apps/${r}:${uW}?key=${i}`,body:{debug_token:e}}}(t,yield function ej(){return WM.apply(this,arguments)}()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),u=!0);const g=yield r.exchangeTokenPromise;return yield JB(t,g),Jl(t,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(g=>(r.exchangeTokenPromise=void 0,g)),u=!0),i=yield r.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?Pb.warn(g.message):Pb.error(g),s=g}return i?(h={token:i.token},Jl(t,Object.assign(Object.assign({},r),{token:i})),yield JB(t,i)):h=function xW(n){return{token:DW(SW),error:n}}(s),u&&function nj(n,e){const t=Vi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h}),KM.apply(this,arguments)}function QM(n,e){const t=Vi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Jl(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function tj(n){const{app:e}=n,t=Vi(e);let r=t.tokenRefresher;r||(r=function AW(n){const{app:e}=n;return new dW((0,be.Z)(function*(){let r;if(r=Vi(e).token?yield lD(n,!0):yield lD(n),r.error)throw r.error}),()=>!0,()=>{const t=Vi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},GB.RETRIAL_MIN_WAIT,GB.RETRIAL_MAX_WAIT)}(n),Jl(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function uD(n){return n.expireTimeMillis-Date.now()>0}class kW{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Vi(this.app);for(const t of e)QM(this.app,t.next);return Promise.resolve()}}const cj="app-check-internal";!function qW(){(0,Hs._registerComponent)(new Kl.wA("app-check",n=>function RW(n,e){return new kW(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(cj).initialize()})),(0,Hs._registerComponent)(new Kl.wA(cj,n=>function NW(n){return{getToken:e=>lD(n,e),addTokenListener:e=>function YM(n,e,t,r){const{app:i}=n,s=Vi(i),u={next:t,error:r,type:e};if(Jl(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,u]})),s.token&&uD(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),tj(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>tj(n))}(n,"INTERNAL",e),removeTokenListener:e=>QM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Hs.registerVersion)("@firebase/app-check","0.5.12")}();class Ob{constructor(){return(0,En.vb)("app-check")}}typeof window<"u"&&window;var nP=U(127);const rP=new a.OlP("angularfire2.auth.use-emulator"),iP=new a.OlP("angularfire2.auth.settings"),sP=new a.OlP("angularfire2.auth.tenant-id"),oP=new a.OlP("angularfire2.auth.langugage-code"),aP=new a.OlP("angularfire2.auth.use-device-language"),lP=new a.OlP("angularfire.auth.persistence"),uP=(n,e,t,r,i,s,u,h)=>(0,Ti.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,s&&g.useDeviceLanguage(),u)for(const[y,E]of Object.entries(u))g.settings[y]=E;return h&&g.setPersistence(h),g},[t,r,i,s,u,h]);let cP=(()=>{class n{constructor(t,r,i,s,u,h,g,y,E,I,k,R){const F=new er.x,W=Ne(void 0).pipe((0,nD.Q)(u.outsideAngular),Bn(()=>s.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,1451)))),(0,D.U)(()=>(0,Ti.on)(t,s,r)),(0,D.U)(ee=>uP(ee,s,h,y,E,I,g,k)),uI({bufferSize:1,refCount:!1}));if(ou(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ne(null);else{W.pipe(Go()).subscribe();const me=W.pipe(Bn(Le=>Le.getRedirectResult().then(st=>st,()=>null)),En.iC,uI({bufferSize:1,refCount:!1})),Me=W.pipe(Bn(Le=>new Vn.y(st=>({unsubscribe:s.runOutsideAngular(()=>Le.onAuthStateChanged(ct=>st.next(ct),ct=>st.error(ct),()=>st.complete()))})))),Ge=W.pipe(Bn(Le=>new Vn.y(st=>({unsubscribe:s.runOutsideAngular(()=>Le.onIdTokenChanged(ct=>st.next(ct),ct=>st.error(ct),()=>st.complete()))}))));this.authState=me.pipe($B(Me),(0,UM.R)(u.outsideAngular),(0,nD.Q)(u.insideAngular)),this.user=me.pipe($B(Ge),(0,UM.R)(u.outsideAngular),(0,nD.Q)(u.insideAngular)),this.idToken=this.user.pipe(Bn(Le=>Le?(0,Ht.D)(Le.getIdToken()):Ne(null))),this.idTokenResult=this.user.pipe(Bn(Le=>Le?(0,Ht.D)(Le.getIdTokenResult()):Ne(null))),this.credential=(0,z_.T)(me,F,this.authState.pipe(fs(Le=>!Le))).pipe((0,D.U)(Le=>Le?.user?Le:null),(0,UM.R)(u.outsideAngular),(0,nD.Q)(u.insideAngular))}return(0,Ti.pX)(this,W,s,{spy:{apply:(ee,me,Me)=>{(ee.startsWith("signIn")||ee.startsWith("createUser"))&&Me.then(Ge=>F.next(Ge))}}})}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Ti.Dh),a.LFG(Ti.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(En.HU),a.LFG(rP,8),a.LFG(iP,8),a.LFG(sP,8),a.LFG(oP,8),a.LFG(aP,8),a.LFG(lP,8),a.LFG(Ob,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function hj(n,e){return function YW(n,e=W_.z){return new Vn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function dP(n,e){return hj(n,e).pipe((0,D.U)(t=>({payload:t,type:"query"})))}function dD(n,e){return dP(n,e).pipe(Lu(void 0),qR(),(0,D.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const g=i.find(E=>E.doc.ref.isEqual(u.ref)),y=t?.payload.docs.find(E=>E.ref.isEqual(u.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(u.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),s}))}function fj(n,e,t){return dD(n,t).pipe(Zo((r,i)=>function JW(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function XW(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return hP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return hP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return hP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),K_(),(0,D.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function hP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function pj(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class gj{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=dD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,D.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Lu(void 0),qR(),fs(([r,i])=>i.length>0||!r),(0,D.U)(([r,i])=>i),En.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pj(e);return fj(this.query,t,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return dP(this.query,this.afs.schedulers.outsideAngular).pipe((0,D.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),En.iC)}get(e){return(0,Ht.D)(this.query.get(e)).pipe(En.iC)}add(e){return this.ref.add(e)}doc(e){return new mj(this.ref.doc(e),this.afs)}}class mj{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=vj(r,t);return new gj(i,s,this.afs)}snapshotChanges(){return function QW(n,e){return hj(n,e).pipe(Lu(void 0),qR(),(0,D.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,D.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ht.D)(this.ref.get(e)).pipe(En.iC)}}class e8{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?dD(this.query,this.afs.schedulers.outsideAngular).pipe((0,D.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),fs(t=>t.length>0),En.iC):dD(this.query,this.afs.schedulers.outsideAngular).pipe(En.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pj(e);return fj(this.query,t,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return dP(this.query,this.afs.schedulers.outsideAngular).pipe((0,D.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),En.iC)}get(e){return(0,Ht.D)(this.query.get(e)).pipe(En.iC)}}const _j=new a.OlP("angularfire2.enableFirestorePersistence"),yj=new a.OlP("angularfire2.firestore.persistenceSettings"),t8=new a.OlP("angularfire2.firestore.settings"),n8=new a.OlP("angularfire2.firestore.use-emulator");function vj(n,e=(t=>t)){return{query:e(n),ref:n}}let oa=(()=>{class n{constructor(t,r,i,s,u,h,g,y,E,I,k,R,F,W,ee,me,Me){this.schedulers=g;const Ge=(0,Ti.on)(t,h,r),Le=E;I&&uP(Ge,h,k,F,W,ee,R,me),[this.firestore,this.persistenceEnabled$]=(0,Ti.cc)(`${Ge.name}.firestore`,"AngularFirestore",Ge.name,()=>{const st=h.runOutsideAngular(()=>Ge.firestore());if(s&&st.settings(s),Le&&st.useEmulator(...Le),i&&!ou(u)){const ct=()=>{try{return(0,Ht.D)(st.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(zt){return typeof console<"u"&&console.warn(zt),Ne(!1)}};return[st,h.runOutsideAngular(ct)]}return[st,Ne(!1)]},[s,Le,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=vj(i,r),h=this.schedulers.ngZone.run(()=>s);return new gj(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),s=this.firestore.collectionGroup(t);return new e8(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new mj(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Ti.Dh),a.LFG(Ti.xv,8),a.LFG(_j,8),a.LFG(t8,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(En.HU),a.LFG(yj,8),a.LFG(n8,8),a.LFG(cP,8),a.LFG(rP,8),a.LFG(iP,8),a.LFG(sP,8),a.LFG(oP,8),a.LFG(aP,8),a.LFG(lP,8),a.LFG(Ob,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),r8=(()=>{class n{constructor(){nP.Z.registerVersion("angularfire",En.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:_j,useValue:!0},{provide:yj,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[oa]}),n})(),Uy=(()=>{class n extends A0{constructor(t){super(),this.firestore=t,this.collection=t.collection(Pd.ACCOUNTS)}login(t){return this.firestore.collection(Pd.ACCOUNTS,r=>r.where("deleted","==",!1).where("email","==",t.username).where("password","==",t.password).limit(1)).valueChanges()}create(t){return this.collection.doc(t.id).set(t),Ne(t)}delete(t){return this.fetch(t).subscribe({next:i=>(i.deleted=!0,this.update(i.id,i)),error:i=>Ne(),complete:()=>Ne()}),Ne()}fetch(t){return Ne()}fetchAll(){return this.collection.valueChanges()}update(t,r){const i=this.firestore.doc(t);return(0,Ht.D)(i.update(r))}search(t,r){let i=this.collection.ref;return console.log(t),t.forEach(s=>{i.where(s.field,s.comparator,s.value)}),(0,Ht.D)(i.get()).pipe((0,D.U)(s=>{const u=[];return s.forEach(h=>{u.push(h.data())}),console.log(u),u}))}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(oa))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hD=(()=>{class n extends PR{constructor(t){super(),this.firestore=t,this.collection=t.collection(Pd.CLIENTS)}create(t){return this.collection.doc(t.id).set(t),Ne(t)}delete(t){return Ne()}fetch(t){return Ne()}fetchAll(){return this.collection.valueChanges()}update(t,r){const i=this.firestore.doc(t);return(0,Ht.D)(i.update(r))}search(t,r){return Ne()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(oa))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fD=(()=>{class n extends OI{constructor(t){super(),this.firestore=t,this.collection=t.collection(Pd.PROJECTS)}create(t){return this.collection.doc(t.id).set(t),Ne(t)}delete(t){return Ne()}fetch(t){return Ne()}fetchAll(){return this.collection.valueChanges()}update(t,r){const i=this.firestore.doc(t);return(0,Ht.D)(i.update(r))}search(t,r){return Ne()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(oa))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fb=(()=>{class n extends VI{constructor(t){super(),this.firestore=t,this.collection=t.collection(Pd.RESOURCES)}create(t){return this.collection.doc(t.id).set(t),Ne(t)}delete(t){return(0,Ht.D)(this.collection.doc(t).delete())}fetch(t){return Ne()}fetchByProject(t){return this.firestore.collection(Pd.RESOURCES,r=>r.where("project","==",t)).valueChanges()}update(t,r){const i=this.firestore.doc(t);return(0,Ht.D)(i.update(r))}search(t,r){return Ne()}fetchAll(){return this.firestore.collection(Pd.RESOURCES,t=>t.where("delete","==",!1)).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(oa))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fP=(()=>{class n extends Rt{constructor(t){super(),this.firestore=t,this.collection=t.collection(Pd.WORKING_DAYS)}create(t){return Ne()}delete(t){return Ne()}fetch(t){return Ne()}fetchAll(){return this.collection.valueChanges()}update(t,r){const i=this.firestore.doc(t);return(0,Ht.D)(i.update(r))}search(t,r){return Ne()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(oa))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pD=(()=>{class n extends Y{constructor(t){super(),this.firestore=t,this.collection=t.collection(Pd.CURRENCY_EXCHANGE)}create(t){return this.collection.doc(t.id).set(t),Ne(t)}delete(t){return Ne()}fetch(t){return Ne()}fetchAll(){return this.collection.valueChanges()}update(t,r){const i=this.firestore.doc(t);return(0,Ht.D)(i.update(r))}search(t,r){return Ne()}static#e=this.\u0275fac=function(r){return new(r||n)(a.LFG(oa))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const i8=[{provide:yf,useClass:cL},{deps:[oa],provide:Uy,useFactory:n=>new Uy(n)},{deps:[Uy],provide:BR,useFactory:n=>new BR(n)},{deps:[Uy],provide:$R,useFactory:n=>new $R(n)},{deps:[Uy],provide:HR,useFactory:n=>new HR(n)},{deps:[Uy],provide:jR,useFactory:n=>new jR(n)}],s8=[{provide:D0,useClass:aL},{deps:[oa],provide:hD,useFactory:n=>new hD(n)},{deps:[hD],provide:OR,useFactory:n=>new OR(n)},{deps:[hD],provide:FR,useFactory:n=>new FR(n)}],o8=[{provide:PI,useClass:LI},{deps:[oa],provide:fD,useFactory:n=>new fD(n)},{deps:[fD],provide:FI,useFactory:n=>new FI(n)},{deps:[fD],provide:S0,useFactory:n=>new S0(n)}],a8=[{provide:lL,useClass:uL},{deps:[oa],provide:Fb,useFactory:n=>new Fb(n)},{deps:[Fb],provide:LR,useFactory:n=>new LR(n)},{deps:[Fb],provide:VR,useFactory:n=>new VR(n)},{deps:[Fb],provide:UR,useFactory:n=>new UR(n)}],l8=[{provide:et,useClass:Bt},{deps:[oa],provide:fP,useFactory:n=>new fP(n)},{deps:[fP],provide:Pe,useFactory:n=>new Pe(n)}],u8=[{provide:M,useClass:He},{deps:[oa],provide:pD,useFactory:n=>new pD(n)},{deps:[pD],provide:Ee,useFactory:n=>new Ee(n)},{deps:[pD],provide:ne,useFactory:n=>new ne(n)}],c8_firebase={apiKey:"AIzaSyAg_FtlI1_5LgKh0cgXEMxQ_XFp2uAskkU",authDomain:"estimate-674a4.firebaseapp.com",projectId:"estimate-674a4",storageBucket:"estimate-674a4.appspot.com",messagingSenderId:"484728303804",appId:"1:484728303804:web:ce5e31020ba5e783d160b9",measurementId:"G-W9WFLFDK8R"},wj="firebasestorage.googleapis.com",bj="storageBucket";class jr extends O.ZR{constructor(e,t){super(pP(e),`Firebase Storage: ${t} (${pP(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jr.prototype)}_codeEquals(e){return pP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function pP(n){return"storage/"+n}function gP(){return new jr("unknown","An unknown error occurred, please check the error payload for server response.")}function Ej(){return new jr("canceled","User canceled the upload/download.")}function Cj(){return new jr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Vy(n){return new jr("invalid-argument",n)}function Tj(){return new jr("app-deleted","The Firebase app was deleted.")}function Ij(n){return new jr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Lb(n,e){return new jr("invalid-format","String does not match format '"+n+"': "+e)}function Ub(n){throw new jr("internal-error","Internal error: "+n)}class ws{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ws.makeFromUrl(e,t)}catch{return new ws(e,"")}if(""===r.path)return r;throw function b8(n){return new jr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Le){Le.path_=decodeURIComponent(Le.path)}const I=t.replace(/[.]/g,"\\."),Ge=[{regex:h,indices:{bucket:1,path:3},postModify:function s(Le){"/"===Le.path.charAt(Le.path.length-1)&&(Le.path_=Le.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${I}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===wj?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Le=0;Le<Ge.length;Le++){const st=Ge[Le],ct=st.regex.exec(e);if(ct){let _r=ct[st.indices.path];_r||(_r=""),r=new ws(ct[st.indices.bucket],_r),st.postModify(r);break}}if(null==r)throw function w8(n){return new jr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class I8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function gD(n){return"string"==typeof n||n instanceof String}function Sj(n){return mP()&&n instanceof Blob}function mP(){return typeof Blob<"u"}function _P(n,e,t,r){if(r<e)throw Vy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Vy(`Invalid value for '${n}'. Expected ${t} or less.`)}function qd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Dj(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Vf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Vf||(Vf={})),Vf))();class R8{constructor(e,t,r,i,s,u,h,g,y,E,I){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=E,this.connectionFactory_=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,R)=>{this.resolve_=k,this.reject_=R,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,u=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());!function A8(n){return void 0!==n}(g)?s():s(g)}catch(g){u(g)}else if(null!==h){const g=gP();g.serverResponse=h.getErrorText(),u(this.errorCallback_?this.errorCallback_(h,g):g)}else u(i.canceled?this.appDelete_?Tj():Ej():function v8(){return new jr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new mD(!1,null,!0)):this.backoffId_=function S8(n,e,t){let r=1,i=null,s=null,u=!1,h=0;function g(){return 2===h}let y=!1;function E(...ee){y||(y=!0,e.apply(null,ee))}function I(ee){i=setTimeout(()=>{i=null,n(R,g())},ee)}function k(){s&&clearTimeout(s)}function R(ee,...me){if(y)return void k();if(ee)return k(),void E.call(null,ee,...me);if(g()||u)return k(),void E.call(null,ee,...me);let Ge;r<64&&(r*=2),1===h?(h=2,Ge=0):Ge=1e3*(r+Math.random()),I(Ge)}let F=!1;function W(ee){F||(F=!0,k(),!y&&(null!==i?(ee||(h=2),clearTimeout(i),I(0)):ee||(h=1)))}return I(0),s=setTimeout(()=>{u=!0,W(!0)},t),W}((r,i)=>{if(i)return void r(!1,new mD(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const u=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(u),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(u),this.pendingConnection_=null;const h=s.getErrorCode()===Vf.NO_ERROR,g=s.getStatus();if(!h||this.isRetryStatusCode_(g)){const E=s.getErrorCode()===Vf.ABORT;return void r(!1,new mD(!1,null,E))}const y=-1!==this.successCodes_.indexOf(g);r(!0,new mD(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function D8(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||s}}class mD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function U8(...n){const e=function L8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(mP())return new Blob(n);throw new jr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const aa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class yP{constructor(e,t){this.data=e,this.contentType=t||null}}function vP(n,e){switch(n){case aa.RAW:return new yP(Aj(e));case aa.BASE64:case aa.BASE64URL:return new yP(xj(n,e));case aa.DATA_URL:return new yP(function $8(n){const e=new kj(n);return e.base64?xj(aa.BASE64,e.rest):function j8(n){let e;try{e=decodeURIComponent(n)}catch{throw Lb(aa.DATA_URL,"Malformed data URL.")}return Aj(e)}(e.rest)}(e),function H8(n){return new kj(n).contentType}(e))}throw gP()}function Aj(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function xj(n,e){switch(n){case aa.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Lb(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case aa.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Lb(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function B8(n){return atob(n)}(e)}catch{throw Lb(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class kj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Lb(aa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function q8(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class fc{constructor(e,t){let r=0,i="";Sj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Sj(this.data_)){const i=function V8(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new fc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new fc(r,!0)}}static getBlob(...e){if(mP()){const t=e.map(r=>r instanceof fc?r.data_:r);return new fc(U8.apply(null,t))}{const t=e.map(u=>gD(u)?vP(aa.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)i[s++]=u[h]}),new fc(i,!0)}}uploadData(){return this.data_}}function wP(n){let e;try{e=JSON.parse(n)}catch{return null}return function k8(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Rj(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function z8(n,e){return e}class Qs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||z8}}let _D=null;function Vb(){if(_D)return _D;const n=[];n.push(new Qs("bucket")),n.push(new Qs("generation")),n.push(new Qs("metageneration")),n.push(new Qs("name","fullPath",!0));const t=new Qs("name");t.xform=function e(s,u){return function W8(n){return!gD(n)||n.length<2?n:Rj(n)}(u)},n.push(t);const i=new Qs("size");return i.xform=function r(s,u){return void 0!==u?Number(u):u},n.push(i),n.push(new Qs("timeCreated")),n.push(new Qs("updated")),n.push(new Qs("md5Hash",null,!0)),n.push(new Qs("cacheControl",null,!0)),n.push(new Qs("contentDisposition",null,!0)),n.push(new Qs("contentEncoding",null,!0)),n.push(new Qs("contentLanguage",null,!0)),n.push(new Qs("contentType",null,!0)),n.push(new Qs("metadata","customMetadata",!0)),_D=n,_D}function Nj(n,e,t){const r=wP(e);return null===r?null:function Y8(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const u=t[s];r[u.local]=u.xform(r,e[u.server])}return function K8(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new ws(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function bP(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const Mj="prefixes",Pj="items";class pc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function gc(n){if(!n)throw gP()}function yD(n,e){return function t(r,i){const s=Nj(n,i,e);return gc(null!==s),s}}function By(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function _8(){return new jr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function m8(){return new jr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function g8(n){return new jr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function y8(n){return new jr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Bb(n){const e=By(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function p8(n){return new jr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function Oj(n,e,t){const i=qd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new pc(i,"GET",yD(n,t),u);return h.errorHandler=Bb(e),h}function n5(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const h=qd(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,E=new pc(h,"GET",function e5(n,e){return function t(r,i){const s=function X8(n,e,t){const r=wP(t);return null===r?null:function J8(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Mj])for(const i of t[Mj]){const s=i.replace(/\/$/,""),u=n._makeStorageReference(new ws(e,s));r.prefixes.push(u)}if(t[Pj])for(const i of t[Pj]){const s=n._makeStorageReference(new ws(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return gc(null!==s),s}}(n,e.bucket),y);return E.urlParams=s,E.errorHandler=By(e),E}function Lj(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function o5(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class vD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function EP(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{gc(!1)}return gc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const c5={STATE_CHANGED:"state_changed"},Js={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function CP(n){switch(n){case"running":case"pausing":case"canceling":return Js.RUNNING;case"paused":return Js.PAUSED;case"success":return Js.SUCCESS;case"canceled":return Js.CANCELED;default:return Js.ERROR}}class d5{constructor(e,t,r){if(function x8(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function jy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let Bj=null;class h5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ub("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ub("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ub("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ub("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ub("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class f5 extends h5{initXhr(){this.xhr_.responseType="text"}}function Xl(){return Bj?Bj():new f5}class jj{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Vb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function a5(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u=Lj(e,r,i),h={name:u.fullPath},g=qd(s,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},I=bP(u,t),F=new pc(g,"POST",function R(W){let ee;EP(W);try{ee=W.getResponseHeader("X-Goog-Upload-URL")}catch{gc(!1)}return gc(gD(ee)),ee},n.maxUploadRetryTime);return F.urlParams=h,F.headers=E,F.body=I,F.errorHandler=By(e),F}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function l5(n,e,t,r){const g=new pc(t,"POST",function s(y){const E=EP(y,["active","final"]);let I=null;try{I=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{gc(!1)}I||gc(!1);const k=Number(I);return gc(!isNaN(k)),new vD(k,r.size(),"final"===E)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=By(e),g}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Xl,t,r);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new vD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let u;try{u=function u5(n,e,t,r,i,s,u,h){const g=new vD(0,0);if(u?(g.current=u.current,g.total=u.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function C8(){return new jr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=g.total-g.current;let E=y;i>0&&(E=Math.min(E,i));const I=g.current,F={"X-Goog-Upload-Command":E===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${g.current}`},W=r.slice(I,I+E);if(null===W)throw Cj();const Ge=new pc(t,"POST",function ee(Le,st){const ct=EP(Le,["active","final"]),zt=g.current+E,_r=r.size();let ca;return ca="final"===ct?yD(e,s)(Le,st):null,new vD(zt,_r,"final"===ct,ca)},e.maxUploadRetryTime);return Ge.headers=F,Ge.body=W.uploadData(),Ge.progressCallback=h||null,Ge.errorHandler=By(n),Ge}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const h=this._ref.storage._makeRequest(u,Xl,i,s);this._request=h,h.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Oj(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Xl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Uj(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},g=function h(){let Ge="";for(let Le=0;Le<2;Le++)Ge+=Math.random().toString().slice(2);return Ge}();u["Content-Type"]="multipart/related; boundary="+g;const y=Lj(e,r,i),E=bP(y,t),R=fc.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+g+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===R)throw Cj();const F={name:y.fullPath},W=qd(s,n.host,n._protocol),me=n.maxUploadRetryTime,Me=new pc(W,"POST",yD(n,t),me);return Me.urlParams=F,Me.headers=u,Me.body=R.uploadData(),Me.errorHandler=By(e),Me}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ej(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=CP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new d5(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(CP(this._state)){case Js.SUCCESS:jy(this._resolve.bind(null,this.snapshot))();break;case Js.CANCELED:case Js.ERROR:jy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(CP(this._state)){case Js.RUNNING:case Js.PAUSED:e.next&&jy(e.next.bind(e,this.snapshot))();break;case Js.SUCCESS:e.complete&&jy(e.complete.bind(e))();break;default:e.error&&jy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class tm{constructor(e,t){this._service=e,this._location=t instanceof ws?t:ws.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new tm(e,t)}get root(){const e=new ws(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Rj(this._location.path)}get storage(){return this._service}get parent(){const e=function G8(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ws(this._location.bucket,e);return new tm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Ij(e)}}function Hj(n,e,t){return TP.apply(this,arguments)}function TP(){return TP=(0,be.Z)(function*(n,e,t){const i=yield qj(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Hj(n,e,i.nextPageToken))}),TP.apply(this,arguments)}function qj(n,e){null!=e&&"number"==typeof e.maxResults&&_P("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=n5(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Xl)}function I5(n){n._throwIfRoot("getDownloadURL");const e=function r5(n,e,t){const i=qd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new pc(i,"GET",function t5(n,e){return function t(r,i){const s=Nj(n,i,e);return gc(null!==s),function Q8(n,e,t,r){const i=wP(e);if(null===i||!gD(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const u=encodeURIComponent;return s.split(",").map(y=>{const I=n.fullPath;return qd("/b/"+u(n.bucket)+"/o/"+u(I),t,r)+Dj({alt:"media",token:y})})[0]}(s,i,n.host,n._protocol)}}(n,t),u);return h.errorHandler=Bb(e),h}(n.storage,n._location,Vb());return n.storage.makeRequestWithTokens(e,Xl).then(t=>{if(null===t)throw function T8(){return new jr("no-download-url","The given file does not have any download URLs.")}();return t})}function Gj(n,e){const t=function Z8(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ws(n._location.bucket,t);return new tm(n.storage,r)}function Zj(n,e){if(n instanceof IP){const t=n;if(null==t._bucket)throw function E8(){return new jr("no-default-bucket","No default bucket found. Did you set the '"+bj+"' property when initializing the app?")}();const r=new tm(t,t._bucket);return null!=e?Zj(r,e):r}return void 0!==e?Gj(n,e):n}function x5(n,e){if(e&&function D5(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof IP)return function A5(n,e){return new tm(n,e)}(n,e);throw Vy("To use ref(service, url), the first argument must be a Storage instance.")}return Zj(n,e)}function zj(n,e){const t=e?.[bj];return null==t?null:ws.makeFromBucketSpec(t,n)}class IP{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=wj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ws.makeFromBucketSpec(i,this._host):zj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ws.makeFromBucketSpec(this._url,e):zj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_P("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_P("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,be.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,be.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tm(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new I8(Tj());{const s=function F8(n,e,t,r,i,s){const u=Dj(n.urlParams),h=n.url+u,g=Object.assign({},n.headers);return function P8(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function N8(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function M8(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(g,s),function O8(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new R8(h,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var r=this;return(0,be.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const Wj="@firebase/storage";function Qj(n,e){return x5(n=(0,O.m9)(n),e)}function B5(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new IP(t,r,i,e,Hs.SDK_VERSION)}!function j5(){(0,Hs._registerComponent)(new Kl.wA("storage",B5,"PUBLIC").setMultipleInstances(!0)),(0,Hs.registerVersion)(Wj,"0.9.9",""),(0,Hs.registerVersion)(Wj,"0.9.9","esm2017")}();class wD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Jj{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new wD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new wD(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?u=>t(new wD(u,this,this._ref)):{next:t.next?u=>t.next(new wD(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class Xj{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Gd(e,this._service))}get items(){return this._delegate.items.map(e=>new Gd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Gd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function U5(n,e){return Gj(n,e)}(this._delegate,e);return new Gd(t,this.storage)}get root(){return new Gd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Gd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Jj(function R5(n,e,t){return function w5(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new jj(n,new fc(e),t)}(n=(0,O.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=aa.RAW,r){this._throwIfRoot("putString");const i=vP(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new Jj(new jj(this._delegate,new fc(i.data,!0),s),this)}listAll(){return function O5(n){return function E5(n){const e={prefixes:[],items:[]};return Hj(n,e).then(()=>e)}(n=(0,O.m9)(n))}(this._delegate).then(e=>new Xj(e,this.storage))}list(e){return function P5(n,e){return qj(n=(0,O.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Xj(t,this.storage))}getMetadata(){return function N5(n){return function C5(n){n._throwIfRoot("getMetadata");const e=Oj(n.storage,n._location,Vb());return n.storage.makeRequestWithTokens(e,Xl)}(n=(0,O.m9)(n))}(this._delegate)}updateMetadata(e){return function M5(n,e){return function T5(n,e){n._throwIfRoot("updateMetadata");const t=function i5(n,e,t,r){const s=qd(e.fullServerUrl(),n.host,n._protocol),h=bP(t,r),y=n.maxOperationRetryTime,E=new pc(s,"PATCH",yD(n,r),y);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=h,E.errorHandler=Bb(e),E}(n.storage,n._location,e,Vb());return n.storage.makeRequestWithTokens(t,Xl)}(n=(0,O.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function F5(n){return I5(n=(0,O.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function L5(n){return function S5(n){n._throwIfRoot("deleteObject");const e=function s5(n,e){const r=qd(e.fullServerUrl(),n.host,n._protocol),h=new pc(r,"DELETE",function u(g,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=Bb(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Xl)}(n=(0,O.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Ij(e)}}class e${constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(t$(e))throw Vy("ref() expected a child path but got a URL, use refFromURL instead.");return new Gd(Qj(this._delegate,e),this)}refFromURL(e){if(!t$(e))throw Vy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ws.makeFromUrl(e,this._delegate.host)}catch{throw Vy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Gd(Qj(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function V5(n,e,t,r={}){!function k5(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,O.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function t$(n){return/^[A-Za-z]+:\/\//.test(n)}function G5(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new e$(t,r)}function n$(n){const e=function z5(n){return new Vn.y(e=>{const t=u=>e.next(u);t(n.snapshot);const s=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){s()}}).pipe(function d8(n,e=W_.z){return(0,Sn.e)((t,r)=>{let i=null,s=null,u=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function g(){const y=u+n,E=e.now();if(E<y)return i=this.schedule(void 0,y-E),void r.add(i);h()}t.subscribe((0,ye.x)(r,y=>{s=y,u=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,D.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function bD(n){return{getDownloadURL:()=>Ne(void 0).pipe(En.fc,Bn(()=>n.getDownloadURL()),En.iC),getMetadata:()=>Ne(void 0).pipe(En.fc,Bn(()=>n.getMetadata()),En.iC),delete:()=>(0,Ht.D)(n.delete()),child:e=>bD(n.child(e)),updateMetadata:e=>(0,Ht.D)(n.updateMetadata(e)),put:(e,t)=>n$(n.put(e,t)),putString:(e,t,r)=>n$(n.putString(e,t,r)),list:e=>(0,Ht.D)(n.list(e)),listAll:()=>(0,Ht.D)(n.listAll())}}!function Z5(n){const e={TaskState:Js,TaskEvent:c5,StringFormat:aa,Storage:e$,Reference:Gd};n.INTERNAL.registerComponent(new Kl.wA("storage-compat",G5,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(GR.Z);const W5=new a.OlP("angularfire2.storageBucket"),K5=new a.OlP("angularfire2.storage.maxUploadRetryTime"),Y5=new a.OlP("angularfire2.storage.maxOperationRetryTime"),Q5=new a.OlP("angularfire2.storage.use-emulator");let J5=(()=>{class n{constructor(t,r,i,s,u,h,g,y,E,I){const k=(0,Ti.on)(t,u,r);this.storage=(0,Ti.cc)(`${k.name}.storage.${i}`,"AngularFireStorage",k.name,()=>{const R=u.runOutsideAngular(()=>k.storage(i||void 0)),F=E;return F&&R.useEmulator(...F),g&&R.setMaxUploadRetryTime(g),y&&R.setMaxOperationRetryTime(y),R},[g,y])}ref(t){return bD(this.storage.ref(t))}refFromURL(t){return bD(this.storage.refFromURL(t))}upload(t,r,i){return bD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Ti.Dh),a.LFG(Ti.xv,8),a.LFG(W5,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(En.HU),a.LFG(K5,8),a.LFG(Y5,8),a.LFG(Q5,8),a.LFG(Ob,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),X5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),eK=(()=>{class n{constructor(){nP.Z.registerVersion("angularfire",En.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[J5],imports:[X5]}),n})();const r$="@firebase/database";let SP="";function s$(n){SP=n}class rK{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class iK{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const o$=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new rK(e)}}catch{}return new iK},nm=o$("localStorage"),DP=o$("sessionStorage"),$y=new Yl.Yd("@firebase/database"),a$=function(){let n=1;return function(){return n++}}(),l$=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},jb=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=jb.apply(null,r):e+="object"==typeof r?(0,O.Pz)(r):r,e+=" "}return e};let rm=null,u$=!0;const c$=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?($y.logLevel=Yl.in.VERBOSE,rm=$y.log.bind($y),e&&DP.set("logging_enabled",!0)):"function"==typeof n?rm=n:(rm=null,DP.remove("logging_enabled"))},Bi=function(...n){if(!0===u$&&(u$=!1,null===rm&&!0===DP.get("logging_enabled")&&c$(!0)),rm){const e=jb.apply(null,n);rm(e)}},$b=function(n){return function(...e){Bi(n,...e)}},AP=function(...n){const e="FIREBASE INTERNAL ERROR: "+jb(...n);$y.error(e)},mc=function(...n){const e=`FIREBASE FATAL ERROR: ${jb(...n)}`;throw $y.error(e),new Error(e)},bs=function(...n){const e="FIREBASE WARNING: "+jb(...n);$y.warn(e)},ED=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Zd="[MIN_NAME]",_c="[MAX_NAME]",im=function(n,e){if(n===e)return 0;if(n===Zd||e===_c)return-1;if(e===Zd||n===_c)return 1;{const t=CD(n),r=CD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},aK=function(n,e){return n===e?0:n<e?-1:1},Hb=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Pz)(e))},xP=function(n){if("object"!=typeof n||null===n)return(0,O.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Pz)(e[r]),t+=":",t+=xP(n[e[r]]);return t+="}",t},d$=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ji(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const h$=function(n){(0,O.hu)(!ED(n),"Invalid JSON number");const r=1023;let i,s,u,h,g;0===n?(s=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(g=11;g;g-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const E=y.join("");let I="";for(g=0;g<64;g+=8){let k=parseInt(E.substr(g,8),2).toString(16);1===k.length&&(k="0"+k),I+=k}return I.toLowerCase()},dK=new RegExp("^-?(0*)\\d{1,10}$"),f$=-2147483648,kP=2147483647,CD=function(n){if(dK.test(n)){const e=Number(n);if(e>=f$&&e<=kP)return e}return null},Hy=function(n){try{n()}catch(e){setTimeout(()=>{throw bs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},hK=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},qb=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class fK{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){bs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class pK{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Bi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bs(e)}}let Gb=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const y$=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,b$="websocket",E$="long_polling";class NP{constructor(e,t,r,i,s=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=nm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&nm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function C$(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===b$)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==E$)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function gK(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ji(t,(s,u)=>{i.push(s+"="+u)}),r+i.join("&")}class mK{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const MP={},PP={};function OP(n){const e=n.toString();return MP[e]||(MP[e]=new mK),MP[e]}class yK{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Hy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Bf{constructor(e,t,r,i,s,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$b(e),this.stats_=OP(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),C$(t,E$,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new yK(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new FP((...s)=>{const[u,h,g,y,E]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=g;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&y$.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Bf.forceAllow_=!0}static forceDisallow(){Bf.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!Bf.forceAllow_&&(Bf.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=d$(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class FP{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=a$(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=FP.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Bi("frame writing exception"),h.stack&&Bi(h.stack),Bi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Bi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Bi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let ID=null;typeof MozWebSocket<"u"?ID=MozWebSocket:typeof WebSocket<"u"&&(ID=WebSocket);let qy=(()=>{class n{constructor(t,r,i,s,u,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$b(this.connId),this.stats_=OP(r),this.connURL=n.connectionURL_(r,h,g,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,u){const h={v:"5"};return!(0,O.Yr)()&&typeof location<"u"&&location.hostname&&y$.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),s&&(h.ac=s),u&&(h.p=u),C$(t,b$,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nm.set("previous_websocket_failure",!0);try{let i;if((0,O.Yr)()){i={headers:{"User-Agent":`Firebase/5/${SP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new ID(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==ID&&!n.forceDisallow_}static previouslyFailed(){return nm.isInMemoryStorage||!0===nm.get("previous_websocket_failure")}markConnectionHealthy(){nm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=d$(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),k$=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Bf,qy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=qy&&qy.isAvailable();let i=r&&!qy.previouslyFailed();if(t.webSocketOnly&&(r||bs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[qy];else{const s=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&s.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class L${constructor(e,t,r,i,s,u,h,g,y,E){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$b("c:"+this.id+":"),this.transportManager_=new k$(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=qb(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Hb("t",e),r=Hb("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Hb("t",e),r=Hb("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Hb("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?AP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):AP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&bs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),qb(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qb(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class U${put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class V${constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class SD extends V${constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new SD}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const B$=32,j$=768;class Dn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function _n(){return new Dn("")}function rn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function jf(n){return n.pieces_.length-n.pieceNum_}function jn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Dn(n.pieces_,e)}function UP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Zb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function $$(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Dn(e,0)}function mr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Dn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Dn(t,0)}function sn(n){return n.pieceNum_>=n.pieces_.length}function Xs(n,e){const t=rn(n),r=rn(e);if(null===t)return e;if(t===r)return Xs(jn(n),jn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function BK(n,e){const t=Zb(n,0),r=Zb(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=im(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function VP(n,e){if(jf(n)!==jf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ja(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(jf(n)>jf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class jK{constructor(e,t){this.errorPrefix_=t,this.parts_=Zb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);H$(this)}}function H$(n){if(n.byteLength_>j$)throw new Error(n.errorPrefix_+"has a key path longer than "+j$+" bytes ("+n.byteLength_+").");if(n.parts_.length>B$)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+B$+") or object contains a cycle "+sm(n))}function sm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class BP extends V${constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new BP}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const zb=1e3;let AD,om=(()=>{class n extends U${constructor(t,r,i,s,u,h,g,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=$b("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=zb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");BP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&SD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,u={r:s,a:t,b:r};this.log_((0,O.Pz)(u)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new O.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const g=h.d;"ok"===h.s?r.resolve(g):r.reject(g)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const g={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,g=>{const y=g.d,E=g.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",g),"ok"!==E&&this.removeListen_(i,s),t.onComplete&&t.onComplete(E,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();bs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const u=s.s,h=s.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const u={p:t};s&&(u.q=i,u.t=s),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):AP("Unrecognized action received from server: "+(0,O.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=zb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=zb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,be.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let g=!1,y=null;const E=function(){y?y.close():(g=!0,s())};t.realtime_={close:E,sendRequest:function(R){(0,O.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(R)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[R,F]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);g?Bi("getToken() completed but was canceled"):(Bi("getToken() completed. Creating connection."),t.authToken_=R&&R.accessToken,t.appCheckToken_=F&&F.token,y=new L$(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,W=>{bs(W+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(R){t.log_("Failed to get token: "+R),g||(t.repoInfo_.nodeAdmin&&bs(R),E())}}})()}interrupt(t){Bi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Bi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=zb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>xP(u)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Dn(t).toString();let s;if(this.listens.has(i)){const u=this.listens.get(i);s=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Bi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Bi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+SP.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=SD.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class an{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new an(e,t)}}class DD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new an(Zd,e),i=new an(Zd,t);return 0!==this.compare(r,i)}minPost(){return an.MIN}}class Z$ extends DD{static get __EMPTY_NODE(){return AD}static set __EMPTY_NODE(e){AD=e}compare(e,t){return im(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return an.MIN}maxPost(){return new an(_c,AD)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new an(e,AD)}toString(){return".key"}}const yc=new Z$;class xD{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let $P,eu=(()=>{class n{constructor(t,r,i,s,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Io.EMPTY_NODE,this.right=u??Io.EMPTY_NODE}copy(t,r,i,s,u){return new n(t??this.key,r??this.value,i??this.color,s??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const u=i(t,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===u?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Io.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Io.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Io{constructor(e,t=Io.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Io(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,eu.BLACK,null,null))}remove(e){return new Io(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,eu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new xD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new xD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new xD(this.root_,null,this.comparator_,!0,e)}}function KK(n,e){return im(n.name,e.name)}function jP(n,e){return im(n,e)}Io.EMPTY_NODE=new class WK{copy(e,t,r,i,s){return this}insert(e,t,r){return new eu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const z$=function(n){return"number"==typeof n?"number:"+h$(n):"string:"+n},W$=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===$P||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===$P||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let K$,Y$,Q$,Gy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),W$(this.priorityNode_)}static set __childrenNodeConstructor(t){K$=t}static get __childrenNodeConstructor(){return K$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return sn(t)?this:".priority"===rn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=rn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===jf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(jn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+z$(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?h$(this.value_):this.value_,this.lazyHash_=l$(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(s>=0,"Unknown leaf type: "+r),(0,O.hu)(u>=0,"Unknown leaf type: "+i),s===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Wn=new class XK extends DD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?im(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return an.MIN}maxPost(){return new an(_c,new Gy("[PRIORITY-POST]",Q$))}makePost(e,t){const r=Y$(e);return new an(t,new Gy("[PRIORITY-POST]",r))}toString(){return".priority"}},e7=Math.log(2);class t7{constructor(e){this.count=parseInt(Math.log(e+1)/e7,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const kD=function(n,e,t,r){n.sort(e);const i=function(g,y){const E=y-g;let I,k;if(0===E)return null;if(1===E)return I=n[g],k=t?t(I):I,new eu(k,I.node,eu.BLACK,null,null);{const R=parseInt(E/2,10)+g,F=i(g,R),W=i(R+1,y);return I=n[R],k=t?t(I):I,new eu(k,I.node,eu.BLACK,F,W)}},h=function(g){let y=null,E=null,I=n.length;const k=function(F,W){const ee=I-F,me=I;I-=F;const Me=i(ee+1,me),Ge=n[ee],Le=t?t(Ge):Ge;R(new eu(Le,Ge.node,W,null,Me))},R=function(F){y?(y.left=F,y=F):(E=F,y=F)};for(let F=0;F<g.count;++F){const W=g.nextBitIsOne(),ee=Math.pow(2,g.count-(F+1));W?k(ee,eu.BLACK):(k(ee,eu.BLACK),k(ee,eu.RED))}return E}(new t7(n.length));return new Io(r||e,h)};let HP;const Zy={};class zd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(Zy&&Wn,"ChildrenNode.ts has not been loaded"),HP=HP||new zd({".priority":Zy},{".priority":Wn}),HP}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Io?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==yc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(an.Wrap);let h,u=s.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=s.getNext();h=i?kD(r,e.getCompare()):Zy;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const E=Object.assign({},this.indexes_);return E[g]=h,new zd(E,y)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,s)=>{const u=(0,O.DV)(this.indexSet_,s);if((0,O.hu)(u,"Missing index implementation for "+s),i===Zy){if(u.isDefinedOn(e.node)){const h=[],g=t.getIterator(an.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&h.push(y),y=g.getNext();return h.push(e),kD(h,u.getCompare())}return Zy}{const h=t.get(e.name);let g=i;return h&&(g=g.remove(new an(e.name,h))),g.insert(e,e.node)}});return new zd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===Zy)return i;{const s=t.get(e.name);return s?i.remove(new an(e.name,s)):i}});return new zd(r,this.indexSet_)}}let Wb,Yt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&W$(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Wb||(Wb=new n(new Io(jP),null,zd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Wb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Wb:r}}getChild(t){const r=rn(t);return null===r?this:this.getImmediateChild(r).getChild(jn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new an(t,r);let s,u;r.isEmpty()?(s=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?Wb:this.priorityNode_;return new n(s,h,u)}}updateChild(t,r){const i=rn(t);if(null===i)return r;{(0,O.hu)(".priority"!==rn(t)||1===jf(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(jn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,u=!0;if(this.forEachChild(Wn,(h,g)=>{r[h]=g.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):u=!1}),!t&&u&&s<2*i){const h=[];for(const g in r)h[g]=r[g];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+z$(this.getPriority().val())+":"),this.forEachChild(Wn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":l$(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const u=s.getPredecessorKey(new an(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new an(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new an(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,an.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,an.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)>0;)s.getNext(),u=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Kb?-1:0}withIndex(t){if(t===yc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===yc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Wn),s=r.getIterator(Wn);let u=i.getNext(),h=s.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=s.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===yc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Kb=new class n7 extends Yt{constructor(){super(new Io(jP),Yt.EMPTY_NODE,zd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Yt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(an,{MIN:{value:new an(Zd,Yt.EMPTY_NODE)},MAX:{value:new an(_c,Kb)}}),Z$.__EMPTY_NODE=Yt.EMPTY_NODE,Gy.__childrenNodeConstructor=Yt,function YK(n){$P=n}(Kb),function JK(n){Q$=n}(Kb);const r7=!0;function kr(n,e=null){if(null===n)return Yt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Gy(n,kr(e));if(n instanceof Array||!r7){let t=Yt.EMPTY_NODE;return ji(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const s=kr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(kr(e))}{const t=[];let r=!1;if(ji(n,(u,h)=>{if("."!==u.substring(0,1)){const g=kr(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new an(u,g)))}}),0===t.length)return Yt.EMPTY_NODE;const s=kD(t,KK,u=>u.name,jP);if(r){const u=kD(t,Wn.getCompare());return new Yt(s,kr(e),new zd({".priority":u},{".priority":Wn}))}return new Yt(s,kr(e),zd.Default)}}!function QK(n){Y$=n}(kr);class qP extends DD{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!sn(e)&&".priority"!==rn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?im(e.name,t.name):s}makePost(e,t){const r=kr(e),i=Yt.EMPTY_NODE.updateChild(this.indexPath_,r);return new an(t,i)}maxPost(){const e=Yt.EMPTY_NODE.updateChild(this.indexPath_,Kb);return new an(_c,e)}toString(){return Zb(this.indexPath_,0).join("/")}}const GP=new class i7 extends DD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?im(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return an.MIN}maxPost(){return an.MAX}makePost(e,t){const r=kr(e);return new an(t,r)}toString(){return".value"}},zy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",s7=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=zy.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let u=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=zy.charAt(e[i]);return(0,O.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),eH=function(n){if(n===""+kP)return"-";const e=CD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return _c;const s=zy.charAt(zy.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},tH=function(n){if(n===""+f$)return Zd;const e=CD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+kP:(delete t[t.length-1],t.join("")):(t[t.length-1]=zy.charAt(zy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function nH(n){return{type:"value",snapshotNode:n}}function Wy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Yb(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Qb(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class zP{constructor(e){this.index_=e}updateChild(e,t,r,i,s,u){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(Yb(t,h)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(Wy(t,r)):u.trackChildChange(Qb(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Wn,(i,s)=>{t.hasChild(i)||r.trackChildChange(Yb(i,s))}),t.isLeafNode()||t.forEachChild(Wn,(i,s)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(s)||r.trackChildChange(Qb(i,s,u))}else r.trackChildChange(Wy(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Yt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Jb{constructor(e){this.indexedFilter_=new zP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Jb.getStartPost_(e),this.endPost_=Jb.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,u){return this.matches(new an(t,r))||(r=Yt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Yt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Yt.EMPTY_NODE);const s=this;return t.forEachChild(Wn,(u,h)=>{s.matches(new an(u,h))||(i=i.updateImmediateChild(u,Yt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class a7{constructor(e){this.rangedFilter_=new Jb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,u){return this.rangedFilter_.matches(new an(t,r))||(r=Yt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,u):this.fullLimitUpdateChild_(e,t,r,s,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Yt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Yt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const h=s.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(h.name,h.node),u++}}else{let s,u,h,g;if(i=t.withIndex(this.index_),i=i.updatePriority(Yt.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const I=this.index_.getCompare();h=(k,R)=>I(R,k)}else g=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,E=!1;for(;g.hasNext();){const I=g.getNext();!E&&h(s,I)<=0&&(E=!0),E&&y<this.limit_&&h(I,u)<=0?y++:i=i.updateImmediateChild(I.name,Yt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let u;if(this.reverse_){const I=this.index_.getCompare();u=(k,R)=>I(R,k)}else u=this.index_.getCompare();const h=e;(0,O.hu)(h.numChildren()===this.limit_,"");const g=new an(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),E=this.rangedFilter_.matches(g);if(h.hasChild(t)){const I=h.getImmediateChild(t);let k=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=k&&(k.name===t||h.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const R=null==k?1:u(k,g);if(E&&!r.isEmpty()&&R>=0)return s?.trackChildChange(Qb(t,r,I)),h.updateImmediateChild(t,r);{s?.trackChildChange(Yb(t,I));const W=h.updateImmediateChild(t,Yt.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(s?.trackChildChange(Wy(k.name,k.node)),W.updateImmediateChild(k.name,k.node)):W}}return r.isEmpty()?e:E&&u(y,g)>=0?(null!=s&&(s.trackChildChange(Yb(y.name,y.node)),s.trackChildChange(Wy(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Yt.EMPTY_NODE)):e}}class RD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_c}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Wn}copy(){const e=new RD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function WP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function KP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function ND(n,e){const t=n.copy();return t.index_=e,t}function rH(n){const e={};if(n.isDefault())return e;let t;return n.index_===Wn?t="$priority":n.index_===GP?t="$value":n.index_===yc?t="$key":((0,O.hu)(n.index_ instanceof qP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Pz)(t),n.startSet_&&(e.startAt=(0,O.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,O.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,O.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,O.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function iH(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Wn&&(e.i=n.index_.toString()),e}class MD extends U${constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=$b("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const u=MD.getListenId_(e,r),h={};this.listens_[u]=h;const g=rH(e._queryParams);this.restRequest_(s+".json",g,(y,E)=>{let I=E;if(404===y&&(I=null,y=null),null===y&&this.onDataUpdate_(s,I,!1,r),(0,O.DV)(this.listens_,u)===h){let k;k=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(k,null)}})}unlisten(e,t){const r=MD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=rH(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(s,u)=>{let h=u;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,O.cI)(h.responseText)}catch{bs("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,g)}else 401!==h.status&&404!==h.status&&bs("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class f7{constructor(){this.rootNode_=Yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function PD(){return{value:null,children:new Map}}function Ky(n,e,t){if(sn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=rn(e);n.children.has(r)||n.children.set(r,PD()),Ky(n.children.get(r),e=jn(e),t)}}function YP(n,e){if(sn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Wn,(r,i)=>{Ky(n,new Dn(r),i)}),YP(n,e)}}if(n.children.size>0){const t=rn(e);return e=jn(e),n.children.has(t)&&YP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function QP(n,e,t){null!==n.value?t(e,n.value):function p7(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{QP(i,new Dn(e.toString()+"/"+r),t)})}class g7{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ji(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class y7{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new g7(e);const r=1e4+2e4*Math.random();qb(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ji(e,(i,s)=>{s>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),qb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Xa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Xa||(Xa={})),Xa))();function eO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class OD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Xa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(sn(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Dn(e));return new OD(_n(),t,this.revert)}}return(0,O.hu)(rn(this.path)===e,"operationForChild called for unrelated child."),new OD(jn(this.path),this.affectedTree,this.revert)}}class Xb{constructor(e,t){this.source=e,this.path=t,this.type=Xa.LISTEN_COMPLETE}operationForChild(e){return sn(this.path)?new Xb(this.source,_n()):new Xb(this.source,jn(this.path))}}class am{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Xa.OVERWRITE}operationForChild(e){return sn(this.path)?new am(this.source,_n(),this.snap.getImmediateChild(e)):new am(this.source,jn(this.path),this.snap)}}class Yy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Xa.MERGE}operationForChild(e){if(sn(this.path)){const t=this.children.subtree(new Dn(e));return t.isEmpty()?null:t.value?new am(this.source,_n(),t.value):new Yy(this.source,_n(),t)}return(0,O.hu)(rn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Yy(this.source,jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class $f{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(sn(e))return this.isFullyInitialized()&&!this.filtered_;const t=rn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class v7{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function eE(n,e,t,r,i,s){const u=r.filter(h=>h.type===t);u.sort((h,g)=>function E7(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new an(e.childName,e.snapshotNode),i=new an(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,g)),u.forEach(h=>{const g=function b7(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(g,n.query_))})})}function FD(n,e){return{eventCache:n,serverCache:e}}function tE(n,e,t,r){return FD(new $f(e,t,r),n.serverCache)}function oH(n,e,t,r){return FD(n.eventCache,new $f(e,t,r))}function LD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function lm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let tO;class Kn{constructor(e,t=(()=>(tO||(tO=new Io(aK)),tO))()){this.value=e,this.children=t}static fromObject(e){let t=new Kn(null);return ji(e,(r,i)=>{t=t.set(new Dn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:_n(),value:this.value};if(sn(e))return null;{const r=rn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(jn(e),t);return null!=s?{path:mr(new Dn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(sn(e))return this;{const t=rn(e),r=this.children.get(t);return null!==r?r.subtree(jn(e)):new Kn(null)}}set(e,t){if(sn(e))return new Kn(t,this.children);{const r=rn(e),s=(this.children.get(r)||new Kn(null)).set(jn(e),t),u=this.children.insert(r,s);return new Kn(this.value,u)}}remove(e){if(sn(e))return this.children.isEmpty()?new Kn(null):new Kn(null,this.children);{const t=rn(e),r=this.children.get(t);if(r){const i=r.remove(jn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Kn(null):new Kn(this.value,s)}return this}}get(e){if(sn(e))return this.value;{const t=rn(e),r=this.children.get(t);return r?r.get(jn(e)):null}}setTree(e,t){if(sn(e))return t;{const r=rn(e),s=(this.children.get(r)||new Kn(null)).setTree(jn(e),t);let u;return u=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Kn(this.value,u)}}fold(e){return this.fold_(_n(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(mr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,_n(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(sn(e))return null;{const s=rn(e),u=this.children.get(s);return u?u.findOnPath_(jn(e),mr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,_n(),t)}foreachOnPath_(e,t,r){if(sn(e))return this;{this.value&&r(t,this.value);const i=rn(e),s=this.children.get(i);return s?s.foreachOnPath_(jn(e),mr(t,i),r):new Kn(null)}}foreach(e){this.foreach_(_n(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(mr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class tu{constructor(e){this.writeTree_=e}static empty(){return new tu(new Kn(null))}}function nE(n,e,t){if(sn(e))return new tu(new Kn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const u=Xs(i,e);return s=s.updateChild(u,t),new tu(n.writeTree_.set(i,s))}{const i=new Kn(t),s=n.writeTree_.setTree(e,i);return new tu(s)}}}function nO(n,e,t){let r=n;return ji(t,(i,s)=>{r=nE(r,mr(e,i),s)}),r}function aH(n,e){if(sn(e))return tu.empty();{const t=n.writeTree_.setTree(e,new Kn(null));return new tu(t)}}function rO(n,e){return null!=um(n,e)}function um(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Xs(t.path,e)):null}function lH(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Wn,(r,i)=>{e.push(new an(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new an(r,i.value))}),e}function Hf(n,e){if(sn(e))return n;{const t=um(n,e);return new tu(null!=t?new Kn(t):n.writeTree_.subtree(e))}}function iO(n){return n.writeTree_.isEmpty()}function Qy(n,e){return uH(_n(),n.writeTree_,e)}function uH(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,O.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=uH(mr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(mr(n,".priority"),r)),t}}function UD(n,e){return pH(e,n)}function A7(n,e){if(n.snap)return Ja(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ja(mr(n.path,t),e))return!0;return!1}function k7(n){return n.visible}function cH(n,e,t){let r=tu.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const u=s.path;let h;if(s.snap)Ja(t,u)?(h=Xs(t,u),r=nE(r,h,s.snap)):Ja(u,t)&&(h=Xs(u,t),r=nE(r,_n(),s.snap.getChild(h)));else{if(!s.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(Ja(t,u))h=Xs(t,u),r=nO(r,h,s.children);else if(Ja(u,t))if(h=Xs(u,t),sn(h))r=nO(r,_n(),s.children);else{const g=(0,O.DV)(s.children,rn(h));if(g){const y=g.getChild(jn(h));r=nE(r,_n(),y)}}}}}return r}function dH(n,e,t,r,i){if(r||i){const s=Hf(n.visibleWrites,e);return!i&&iO(s)?t:i||null!=t||rO(s,_n())?Qy(cH(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Ja(y.path,e)||Ja(e,y.path))},e),t||Yt.EMPTY_NODE):null}{const s=um(n.visibleWrites,e);if(null!=s)return s;{const u=Hf(n.visibleWrites,e);return iO(u)?t:null!=t||rO(u,_n())?Qy(u,t||Yt.EMPTY_NODE):null}}}function VD(n,e,t,r){return dH(n.writeTree,n.treePath,e,t,r)}function sO(n,e){return function R7(n,e,t){let r=Yt.EMPTY_NODE;const i=um(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Wn,(s,u)=>{r=r.updateImmediateChild(s,u)}),r;if(t){const s=Hf(n.visibleWrites,e);return t.forEachChild(Wn,(u,h)=>{const g=Qy(Hf(s,new Dn(u)),h);r=r.updateImmediateChild(u,g)}),lH(s).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return lH(Hf(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function hH(n,e,t,r){return function N7(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=mr(e,t);if(rO(n.visibleWrites,s))return null;{const u=Hf(n.visibleWrites,s);return iO(u)?i.getChild(t):Qy(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function BD(n,e){return function P7(n,e){return um(n.visibleWrites,e)}(n.writeTree,mr(n.treePath,e))}function oO(n,e,t){return function M7(n,e,t,r){const i=mr(e,t),s=um(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Qy(Hf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function fH(n,e){return pH(mr(n.treePath,e),n.writeTree)}function pH(n,e){return{treePath:n,writeTree:e}}class U7{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Qb(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Yb(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Wy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Qb(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const gH=new class V7{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class aO{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new $f(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return oO(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:lm(this.viewCache_),s=function L7(n,e,t,r,i,s){return function O7(n,e,t,r,i,s,u){let h;const g=Hf(n.visibleWrites,e),y=um(g,_n());if(null!=y)h=y;else{if(null==t)return[];h=Qy(g,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const E=[],I=u.getCompare(),k=s?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let R=k.getNext();for(;R&&E.length<i;)0!==I(R,r)&&E.push(R),R=k.getNext();return E}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function mH(n,e,t,r,i,s){const u=e.eventCache;if(null!=BD(r,t))return e;{let h,g;if(sn(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=lm(e),I=sO(r,y instanceof Yt?y:Yt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),I,s)}else{const y=VD(r,lm(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=rn(t);if(".priority"===y){(0,O.hu)(1===jf(t),"Can't have a priority with additional path components");const E=u.getNode();g=e.serverCache.getNode();const I=hH(r,t,E,g);h=null!=I?n.filter.updatePriority(E,I):u.getNode()}else{const E=jn(t);let I;if(u.isCompleteForChild(y)){g=e.serverCache.getNode();const k=hH(r,t,u.getNode(),g);I=null!=k?u.getNode().getImmediateChild(y).updateChild(E,k):u.getNode().getImmediateChild(y)}else I=oO(r,y,e.serverCache);h=null!=I?n.filter.updateChild(u.getNode(),y,I,E,i,s):u.getNode()}}return tE(e,h,u.isFullyInitialized()||sn(t),n.filter.filtersNodes())}}function jD(n,e,t,r,i,s,u,h){const g=e.serverCache;let y;const E=u?n.filter:n.filter.getIndexedFilter();if(sn(t))y=E.updateFullNode(g.getNode(),r,null);else if(E.filtersNodes()&&!g.isFiltered()){const R=g.getNode().updateChild(t,r);y=E.updateFullNode(g.getNode(),R,null)}else{const R=rn(t);if(!g.isCompleteForPath(t)&&jf(t)>1)return e;const F=jn(t),ee=g.getNode().getImmediateChild(R).updateChild(F,r);y=".priority"===R?E.updatePriority(g.getNode(),ee):E.updateChild(g.getNode(),R,ee,F,gH,null)}const I=oH(e,y,g.isFullyInitialized()||sn(t),E.filtersNodes());return mH(n,I,t,i,new aO(i,I,s),h)}function lO(n,e,t,r,i,s,u){const h=e.eventCache;let g,y;const E=new aO(i,e,s);if(sn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),g=tE(e,y,!0,n.filter.filtersNodes());else{const I=rn(t);if(".priority"===I)y=n.filter.updatePriority(e.eventCache.getNode(),r),g=tE(e,y,h.isFullyInitialized(),h.isFiltered());else{const k=jn(t),R=h.getNode().getImmediateChild(I);let F;if(sn(k))F=r;else{const W=E.getCompleteChild(I);F=null!=W?".priority"===UP(k)&&W.getChild($$(k)).isEmpty()?W:W.updateChild(k,r):Yt.EMPTY_NODE}g=R.equals(F)?e:tE(e,n.filter.updateChild(h.getNode(),I,F,k,E,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function _H(n,e){return n.eventCache.isCompleteForChild(e)}function yH(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function uO(n,e,t,r,i,s,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=sn(t)?r:new Kn(null).setTree(t,r);const E=e.serverCache.getNode();return y.children.inorderTraversal((I,k)=>{if(E.hasChild(I)){const F=yH(0,e.serverCache.getNode().getImmediateChild(I),k);g=jD(n,g,new Dn(I),F,i,s,u,h)}}),y.children.inorderTraversal((I,k)=>{const R=!e.serverCache.isCompleteForChild(I)&&null===k.value;if(!E.hasChild(I)&&!R){const W=yH(0,e.serverCache.getNode().getImmediateChild(I),k);g=jD(n,g,new Dn(I),W,i,s,u,h)}}),g}class W7{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new zP(r.getIndex()),s=function l7(n){return n.loadsAllData()?new zP(n.getIndex()):n.hasLimit()?new a7(n):new Jb(n)}(r);this.processor_=function B7(n){return{filter:n}}(s);const u=t.serverCache,h=t.eventCache,g=i.updateFullNode(Yt.EMPTY_NODE,u.getNode(),null),y=s.updateFullNode(Yt.EMPTY_NODE,h.getNode(),null),E=new $f(g,u.isFullyInitialized(),i.filtersNodes()),I=new $f(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=FD(I,E),this.eventGenerator_=new v7(this.query_)}get query(){return this.query_}}function Q7(n,e){const t=lm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!sn(e)&&!t.getImmediateChild(rn(e)).isEmpty())?t.getChild(e):null}function vH(n){return 0===n.eventRegistrations_.length}function wH(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function bH(n,e,t,r){e.type===Xa.MERGE&&null!==e.source.queryId&&((0,O.hu)(lm(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(LD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function $7(n,e,t,r,i){const s=new U7;let u,h;if(t.type===Xa.OVERWRITE){const y=t;y.source.fromUser?u=lO(n,e,y.path,y.snap,r,i,s):((0,O.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!sn(y.path),u=jD(n,e,y.path,y.snap,r,i,h,s))}else if(t.type===Xa.MERGE){const y=t;y.source.fromUser?u=function q7(n,e,t,r,i,s,u){let h=e;return r.foreach((g,y)=>{const E=mr(t,g);_H(e,rn(E))&&(h=lO(n,h,E,y,i,s,u))}),r.foreach((g,y)=>{const E=mr(t,g);_H(e,rn(E))||(h=lO(n,h,E,y,i,s,u))}),h}(n,e,y.path,y.children,r,i,s):((0,O.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),u=uO(n,e,y.path,y.children,r,i,h,s))}else if(t.type===Xa.ACK_USER_WRITE){const y=t;u=y.revert?function z7(n,e,t,r,i,s){let u;if(null!=BD(r,t))return e;{const h=new aO(r,e,i),g=e.eventCache.getNode();let y;if(sn(t)||".priority"===rn(t)){let E;if(e.serverCache.isFullyInitialized())E=VD(r,lm(e));else{const I=e.serverCache.getNode();(0,O.hu)(I instanceof Yt,"serverChildren would be complete if leaf node"),E=sO(r,I)}y=n.filter.updateFullNode(g,E,s)}else{const E=rn(t);let I=oO(r,E,e.serverCache);null==I&&e.serverCache.isCompleteForChild(E)&&(I=g.getImmediateChild(E)),y=null!=I?n.filter.updateChild(g,E,I,jn(t),h,s):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(g,E,Yt.EMPTY_NODE,jn(t),h,s):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=VD(r,lm(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,s)))}return u=e.serverCache.isFullyInitialized()||null!=BD(r,_n()),tE(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function G7(n,e,t,r,i,s,u){if(null!=BD(i,t))return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(sn(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return jD(n,e,t,g.getNode().getChild(t),i,s,h,u);if(sn(t)){let y=new Kn(null);return g.getNode().forEachChild(yc,(E,I)=>{y=y.set(new Dn(E),I)}),uO(n,e,t,y,i,s,h,u)}return e}{let y=new Kn(null);return r.foreach((E,I)=>{const k=mr(t,E);g.isCompleteForPath(k)&&(y=y.set(E,g.getNode().getChild(k)))}),uO(n,e,t,y,i,s,h,u)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==Xa.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);u=function Z7(n,e,t,r,i){const s=e.serverCache;return mH(n,oH(e,s.getNode(),s.isFullyInitialized()||sn(t),s.isFiltered()),t,r,gH,i)}(n,e,t.path,r,s)}const g=s.getChanges();return function H7(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=LD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(nH(LD(e)))}}(e,u,g),{viewCache:u,changes:g}}(n.processor_,i,e,t,r);return function j7(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,O.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,EH(n,s.changes,s.viewCache.eventCache.getNode(),null)}function EH(n,e,t,r){return function w7(n,e,t,r){const i=[],s=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function o7(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),eE(n,i,"child_removed",e,r,t),eE(n,i,"child_added",e,r,t),eE(n,i,"child_moved",s,r,t),eE(n,i,"child_changed",e,r,t),eE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let $D,qD;class CH{constructor(){this.views=new Map}}function cO(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,O.hu)(null!=s,"SyncTree gave us an op for an invalid query."),bH(s,e,t,r)}{let s=[];for(const u of n.views.values())s=s.concat(bH(u,e,t,r));return s}}function TH(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=VD(t,i?r:null),g=!1;h?g=!0:r instanceof Yt?(h=sO(t,r),g=!1):(h=Yt.EMPTY_NODE,g=!1);const y=FD(new $f(h,g,!1),new $f(r,i,!1));return new W7(e,y)}return u}function IH(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function qf(n,e){let t=null;for(const r of n.views.values())t=t||Q7(r,e);return t}function SH(n,e){return e._queryParams.loadsAllData()?HD(n):n.views.get(e._queryIdentifier)}function DH(n,e){return null!=SH(n,e)}function Gf(n){return null!=HD(n)}function HD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let a9=1;class AH{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Kn(null),this.pendingWriteTree_=function F7(){return{visibleWrites:tu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dO(n,e,t,r,i){return function T7(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=nE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Jy(n,new am({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Zf(n,e,t=!1){const r=function S7(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function D7(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&A7(h,r.path)?i=!1:Ja(r.path,h.path)&&(s=!0)),u--}return!!i&&(s?(function x7(n){n.visibleWrites=cH(n.allWrites,k7,_n()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=aH(n.visibleWrites,r.path):ji(r.children,g=>{n.visibleWrites=aH(n.visibleWrites,mr(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let s=new Kn(null);return null!=r.snap?s=s.set(_n(),!0):ji(r.children,u=>{s=s.set(new Dn(u),!0)}),Jy(n,new OD(r.path,s,t))}return[]}function rE(n,e,t){return Jy(n,new am({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function GD(n,e,t,r,i=!1){const s=e._path,u=n.syncPointTree_.get(s);let h=[];if(u&&("default"===e._queryIdentifier||DH(u,e))){const g=function i9(n,e,t,r){const i=e._queryIdentifier,s=[];let u=[];const h=Gf(n);if("default"===i)for(const[g,y]of n.views.entries())u=u.concat(wH(y,t,r)),vH(y)&&(n.views.delete(g),y.query._queryParams.loadsAllData()||s.push(y.query));else{const g=n.views.get(i);g&&(u=u.concat(wH(g,t,r)),vH(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||s.push(g.query)))}return h&&!Gf(n)&&s.push(new(function t9(){return(0,O.hu)($D,"Reference.ts has not been loaded"),$D}())(e._repo,e._path)),{removed:s,events:u}}(u,e,t,r);(function n9(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=g.removed;if(h=g.events,!i){const E=-1!==y.findIndex(k=>k._queryParams.loadsAllData()),I=n.syncPointTree_.findOnPath(s,(k,R)=>Gf(R));if(E&&!I){const k=n.syncPointTree_.subtree(s);if(!k.isEmpty()){const R=function p9(n){return n.fold((e,t,r)=>{if(t&&Gf(t))return[HD(t)];{let i=[];return t&&(i=IH(t)),ji(r,(s,u)=>{i=i.concat(u)}),i}})}(k);for(let F=0;F<R.length;++F){const W=R[F],ee=W.query,me=NH(n,W);n.listenProvider_.startListening(sE(ee),iE(n,ee),me.hashFn,me.onComplete)}}}!I&&y.length>0&&!r&&(E?n.listenProvider_.stopListening(sE(e),null):y.forEach(k=>{const R=n.queryToTagMap.get(zD(k));n.listenProvider_.stopListening(sE(k),R)}))}!function g9(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=zD(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,y)}return h}function xH(n,e,t,r){const i=fO(n,r);if(null!=i){const s=pO(i),u=s.path,h=s.queryId,g=Xs(u,e);return gO(n,u,new am(eO(h),g,t))}return[]}function hO(n,e,t,r=!1){const i=e._path;let s=null,u=!1;n.syncPointTree_.foreachOnPath(i,(k,R)=>{const F=Xs(k,i);s=s||qf(R,F),u=u||Gf(R)});let g,h=n.syncPointTree_.get(i);h?(u=u||Gf(h),s=s||qf(h,_n())):(h=new CH,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=s?g=!0:(g=!1,s=Yt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((R,F)=>{const W=qf(F,_n());W&&(s=s.updateImmediateChild(R,W))}));const y=DH(h,e);if(!y&&!e._queryParams.loadsAllData()){const k=zD(e);(0,O.hu)(!n.queryToTagMap.has(k),"View does not exist, but we have a tag");const R=function m9(){return a9++}();n.queryToTagMap.set(k,R),n.tagToQueryMap.set(R,k)}let I=function r9(n,e,t,r,i,s){const u=TH(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function J7(n,e){n.eventRegistrations_.push(e)}(u,t),function X7(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Wn,(s,u)=>{r.push(Wy(s,u))}),t.isFullyInitialized()&&r.push(nH(t.getNode())),EH(n,r,t.getNode(),e)}(u,t)}(h,e,t,UD(n.pendingWriteTree_,i),s,g);if(!y&&!u&&!r){const k=SH(h,e);I=I.concat(function _9(n,e,t){const r=e._path,i=iE(n,e),s=NH(n,t),u=n.listenProvider_.startListening(sE(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!Gf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((y,E,I)=>{if(!sn(y)&&E&&Gf(E))return[HD(E).query];{let k=[];return E&&(k=k.concat(IH(E).map(R=>R.query))),ji(I,(R,F)=>{k=k.concat(F)}),k}});for(let y=0;y<g.length;++y){const E=g[y];n.listenProvider_.stopListening(sE(E),iE(n,E))}}return u}(n,e,k))}return I}function ZD(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(u,h)=>{const y=qf(h,Xs(u,e));if(y)return y});return dH(i,e,s,t,!0)}function Jy(n,e){return kH(e,n.syncPointTree_,null,UD(n.pendingWriteTree_,_n()))}function kH(n,e,t,r){if(sn(n.path))return RH(n,e,t,r);{const i=e.get(_n());null==t&&null!=i&&(t=qf(i,_n()));let s=[];const u=rn(n.path),h=n.operationForChild(u),g=e.children.get(u);if(g&&h){const y=t?t.getImmediateChild(u):null,E=fH(r,u);s=s.concat(kH(h,g,y,E))}return i&&(s=s.concat(cO(i,n,r,t))),s}}function RH(n,e,t,r){const i=e.get(_n());null==t&&null!=i&&(t=qf(i,_n()));let s=[];return e.children.inorderTraversal((u,h)=>{const g=t?t.getImmediateChild(u):null,y=fH(r,u),E=n.operationForChild(u);E&&(s=s.concat(RH(E,h,g,y)))}),i&&(s=s.concat(cO(i,n,r,t))),s}function NH(n,e){const t=e.query,r=iE(n,t);return{hashFn:()=>(function K7(n){return n.viewCache_.serverCache.getNode()}(e)||Yt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function d9(n,e,t){const r=fO(n,t);if(r){const i=pO(r),s=i.path,u=i.queryId,h=Xs(s,e);return gO(n,s,new Xb(eO(u),h))}return[]}(n,t._path,r):function c9(n,e){return Jy(n,new Xb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function cK(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return GD(n,t,null,s)}}}}function iE(n,e){const t=zD(e);return n.queryToTagMap.get(t)}function zD(n){return n._path.toString()+"$"+n._queryIdentifier}function fO(n,e){return n.tagToQueryMap.get(e)}function pO(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Dn(n.substr(0,e))}}function gO(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),cO(r,t,UD(n.pendingWriteTree_,e),null)}function sE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function o9(){return(0,O.hu)(qD,"Reference.ts has not been loaded"),qD}())(n._repo,n._path):n}class mO{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new mO(t)}node(){return this.node_}}class _O{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=mr(this.path_,e);return new _O(this.syncTree_,t)}node(){return ZD(this.syncTree_,this.path_)}}const y9=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},MH=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?v9(n[".sv"],e,t):"object"==typeof n[".sv"]?w9(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},v9=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},w9=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},PH=function(n,e,t,r){return vO(e,new _O(t,n),r)},yO=function(n,e,t){return vO(n,new mO(e),t)};function vO(n,e,t){const r=n.getPriority().val(),i=MH(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const u=n,h=MH(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new Gy(h,kr(i)):n}{const u=n;return s=u,i!==u.getPriority().val()&&(s=s.updatePriority(new Gy(i))),u.forEachChild(Wn,(h,g)=>{const y=vO(g,e.getImmediateChild(h),t);y!==g&&(s=s.updateImmediateChild(h,y))}),s}}class wO{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function WD(n,e){let t=e instanceof Dn?e:new Dn(e),r=n,i=rn(t);for(;null!==i;){const s=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new wO(i,r,s),t=jn(t),i=rn(t)}return r}function cm(n){return n.node.value}function bO(n,e){n.node.value=e,EO(n)}function OH(n){return n.node.childCount>0}function KD(n,e){ji(n.node.children,(t,r)=>{e(new wO(t,n,r))})}function FH(n,e,t,r){t&&!r&&e(n),KD(n,i=>{FH(i,e,!0,r)}),t&&r&&e(n)}function oE(n){return new Dn(null===n.parent?n.name:oE(n.parent)+"/"+n.name)}function EO(n){null!==n.parent&&function C9(n,e,t){const r=function b9(n){return void 0===cm(n)&&!OH(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,EO(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,EO(n))}(n.parent,n.name,n)}const T9=/[\[\].#$\/\u0000-\u001F\u007F]/,I9=/[\[\].#$\u0000-\u001F\u007F]/,CO=10485760,YD=function(n){return"string"==typeof n&&0!==n.length&&!T9.test(n)},LH=function(n){return"string"==typeof n&&0!==n.length&&!I9.test(n)},aE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ED(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},vc=function(n,e,t,r){r&&void 0===e||lE((0,O.gK)(n,"value"),e,t)},lE=function(n,e,t){const r=t instanceof Dn?new jK(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+sm(r));if("function"==typeof e)throw new Error(n+"contains a function "+sm(r)+" with contents = "+e.toString());if(ED(e))throw new Error(n+"contains "+e.toString()+" "+sm(r));if("string"==typeof e&&e.length>CO/3&&(0,O.ug)(e)>CO)throw new Error(n+"contains a string greater than "+CO+" utf8 bytes "+sm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(ji(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!YD(u)))throw new Error(n+" contains an invalid key ("+u+") "+sm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function $K(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),H$(n)})(r,u),lE(n,h,r),function HK(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+sm(r)+" in addition to actual children.")}},UH=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ji(e,(u,h)=>{const g=new Dn(u);if(lE(i,h,mr(t,g)),".priority"===UP(g)&&!aE(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=Zb(r);for(let u=0;u<s.length;u++)if((".priority"!==s[u]||u!==s.length-1)&&!YD(s[u]))throw new Error(n+"contains an invalid key ("+s[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(BK);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ja(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},TO=function(n,e,t){if(!t||void 0!==e){if(ED(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!aE(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},uE=function(n,e,t,r){if(!(r&&void 0===t||YD(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},cE=function(n,e,t,r){if(!(r&&void 0===t||LH(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},A9=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),cE(n,e,t,r)},el=function(n,e){if(".info"===rn(e))throw new Error(n+" failed = Can't modify data under /.info/")},VH=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!YD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),LH(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class x9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function QD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!VP(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function BH(n,e,t){QD(n,t),jH(n,r=>VP(r,e))}function la(n,e,t){QD(n,t),jH(n,r=>Ja(r,e)||Ja(e,r))}function jH(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(k9(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function k9(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();rm&&Bi("event: "+t.toString()),Hy(r)}}}const $H="repo_interrupt",R9=25;class N9{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new x9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=PD(),this.transactionQueueTree_=new wO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function HH(n){const t=n.infoData_.getNode(new Dn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function dE(n){return y9({timestamp:HH(n)})}function qH(n,e,t,r,i){n.dataUpdateCount++;const s=new Dn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const g=(0,O.UI)(t,y=>kr(y));u=function h9(n,e,t,r){const i=fO(n,r);if(i){const s=pO(i),u=s.path,h=s.queryId,g=Xs(u,e),y=Kn.fromObject(t);return gO(n,u,new Yy(eO(h),g,y))}return[]}(n.serverSyncTree_,s,g,i)}else{const g=kr(t);u=xH(n.serverSyncTree_,s,g,i)}else if(r){const g=(0,O.UI)(t,y=>kr(y));u=function u9(n,e,t){const r=Kn.fromObject(t);return Jy(n,new Yy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,g)}else{const g=kr(t);u=rE(n.serverSyncTree_,s,g)}let h=s;u.length>0&&(h=ev(n,s)),la(n.eventQueue_,h,u)}function GH(n,e){IO(n,"connected",e),!1===e&&function L9(n){Xy(n,"onDisconnectEvents");const e=dE(n),t=PD();QP(n.onDisconnect_,_n(),(i,s)=>{const u=PH(i,s,n.serverSyncTree_,e);Ky(t,i,u)});let r=[];QP(t,_n(),(i,s)=>{r=r.concat(rE(n.serverSyncTree_,i,s));const u=xO(n,i);ev(n,u)}),n.onDisconnect_=PD(),la(n.eventQueue_,_n(),r)}(n)}function IO(n,e,t){const r=new Dn("/.info/"+e),i=kr(t);n.infoData_.updateSnapshot(r,i);const s=rE(n.infoSyncTree_,r,i);la(n.eventQueue_,r,s)}function JD(n){return n.nextWriteId_++}function SO(n,e,t,r,i){Xy(n,"set",{path:e.toString(),value:t,priority:r});const s=dE(n),u=kr(t,r),h=ZD(n.serverSyncTree_,e),g=yO(u,h,s),y=JD(n),E=dO(n.serverSyncTree_,e,g,y,!0);QD(n.eventQueue_,E),n.server_.put(e.toString(),u.val(!0),(k,R)=>{const F="ok"===k;F||bs("set at "+e+" failed: "+k);const W=Zf(n.serverSyncTree_,y,!F);la(n.eventQueue_,e,W),zf(0,i,k,R)});const I=xO(n,e);ev(n,I),la(n.eventQueue_,I,[])}function U9(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&YP(n.onDisconnect_,e),zf(0,t,r,i)})}function ZH(n,e,t,r){const i=kr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,u)=>{"ok"===s&&Ky(n.onDisconnect_,e,i),zf(0,r,s,u)})}function DO(n,e,t){let r;r=".info"===rn(e._path)?GD(n.infoSyncTree_,e,t):GD(n.serverSyncTree_,e,t),BH(n.eventQueue_,e._path,r)}function zH(n){n.persistentConnection_&&n.persistentConnection_.interrupt($H)}function Xy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Bi(t,...e)}function zf(n,e,t,r){e&&Hy(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const u=new Error(s);u.code=i,e(u)}})}function AO(n,e,t){return ZD(n.serverSyncTree_,e,t)||Yt.EMPTY_NODE}function XD(n,e=n.transactionQueueTree_){if(e||eA(n,e),cm(e)){const t=KH(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function q9(n,e,t){const r=t.map(y=>y.currentWriteId),i=AO(n,e,r);let s=i;const u=i.hash();for(let y=0;y<t.length;y++){const E=t[y];(0,O.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const I=Xs(e,E.path);s=s.updateChild(I,E.currentOutputSnapshotRaw)}const h=s.val(!0),g=e;n.server_.put(g.toString(),h,y=>{Xy(n,"transaction put response",{path:g.toString(),status:y});let E=[];if("ok"===y){const I=[];for(let k=0;k<t.length;k++)t[k].status=2,E=E.concat(Zf(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&I.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();eA(n,WD(n.transactionQueueTree_,e)),XD(n,n.transactionQueueTree_),la(n.eventQueue_,e,E);for(let k=0;k<I.length;k++)Hy(I[k])}else{if("datastale"===y)for(let I=0;I<t.length;I++)t[I].status=3===t[I].status?4:0;else{bs("transaction at "+g.toString()+" failed: "+y);for(let I=0;I<t.length;I++)t[I].status=4,t[I].abortReason=y}ev(n,e)}},u)}(n,oE(e),t)}else OH(e)&&KD(e,t=>{XD(n,t)})}function ev(n,e){const t=WH(n,e),r=oE(t);return function G9(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],y=Xs(t,g.path);let I,E=!1;if((0,O.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)E=!0,I=g.abortReason,i=i.concat(Zf(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=R9)E=!0,I="maxretry",i=i.concat(Zf(n.serverSyncTree_,g.currentWriteId,!0));else{const k=AO(n,g.path,u);g.currentInputSnapshot=k;const R=e[h].update(k.val());if(void 0!==R){lE("transaction failed: Data returned ",R,g.path);let F=kr(R);"object"==typeof R&&null!=R&&(0,O.r3)(R,".priority")||(F=F.updatePriority(k.getPriority()));const ee=g.currentWriteId,me=dE(n),Me=yO(F,k,me);g.currentOutputSnapshotRaw=F,g.currentOutputSnapshotResolved=Me,g.currentWriteId=JD(n),u.splice(u.indexOf(ee),1),i=i.concat(dO(n.serverSyncTree_,g.path,Me,g.currentWriteId,g.applyLocally)),i=i.concat(Zf(n.serverSyncTree_,ee,!0))}else E=!0,I="nodata",i=i.concat(Zf(n.serverSyncTree_,g.currentWriteId,!0))}la(n.eventQueue_,t,i),i=[],E&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===I?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(I),!1,null)))}eA(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Hy(r[h]);XD(n,n.transactionQueueTree_)}(n,KH(n,t),r),r}function WH(n,e){let t,r=n.transactionQueueTree_;for(t=rn(e);null!==t&&void 0===cm(r);)r=WD(r,t),t=rn(e=jn(e));return r}function KH(n,e){const t=[];return YH(n,e,t),t.sort((r,i)=>r.order-i.order),t}function YH(n,e,t){const r=cm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);KD(e,i=>{YH(n,i,t)})}function eA(n,e){const t=cm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,bO(e,t.length>0?t:void 0)}KD(e,r=>{eA(n,r)})}function xO(n,e){const t=oE(WH(n,e)),r=WD(n.transactionQueueTree_,e);return function E9(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{kO(n,i)}),kO(n,r),FH(r,i=>{kO(n,i)}),t}function kO(n,e){const t=cm(e);if(t){const r=[];let i=[],s=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,O.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,t[u].status=3,t[u].abortReason="set"):((0,O.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Zf(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?bO(e,void 0):t.length=s+1,la(n.eventQueue_,oE(e),i);for(let u=0;u<r.length;u++)Hy(r[u])}}const RO=function(n,e){const t=W9(n),r=t.namespace;return"firebase.com"===t.domain&&mc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&mc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&bs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new NP(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Dn(t.pathString)}},W9=function(n){let e="",t="",r="",i="",s="",u=!0,h="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let E=n.indexOf("/");-1===E&&(E=n.length);let I=n.indexOf("?");-1===I&&(I=n.length),e=n.substring(0,Math.min(E,I)),E<I&&(i=function Z9(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(E,I)));const k=function z9(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):bs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,I)));y=e.indexOf(":"),y>=0?(u="https"===h||"wss"===h,g=parseInt(e.substring(y+1),10)):y=e.length;const R=e.slice(0,y);if("localhost"===R.toLowerCase())t="localhost";else if(R.split(".").length<=2)t=R;else{const F=e.indexOf(".");r=e.substring(0,F).toLowerCase(),t=e.substring(F+1),s=r}"ns"in k&&(s=k.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:s}};class QH{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Pz)(this.snapshot.exportVal())}}class JH{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class NO{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class XH{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return U9(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){el("OnDisconnect.remove",this._path);const e=new O.BH;return ZH(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){el("OnDisconnect.set",this._path),vc("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return ZH(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){el("OnDisconnect.setWithPriority",this._path),vc("OnDisconnect.setWithPriority",e,this._path,!1),TO("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function V9(n,e,t,r,i){const s=kr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(u,h)=>{"ok"===u&&Ky(n.onDisconnect_,e,s),zf(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){el("OnDisconnect.update",this._path),UH("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function B9(n,e,t,r){if((0,O.xb)(t))return Bi("onDisconnect().update() called with empty data.  Don't do anything."),void zf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&ji(t,(u,h)=>{const g=kr(h);Ky(n.onDisconnect_,mr(e,u),g)}),zf(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class So{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return sn(this._path)?null:UP(this._path)}get ref(){return new tl(this._repo,this._path)}get _queryIdentifier(){const e=iH(this._queryParams),t=xP(e);return"{}"===t?"default":t}get _queryObject(){return iH(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof So))return!1;const t=this._repo===e._repo,r=VP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function VK(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function tA(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Wf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===yc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Zd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==_c)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Wn){if(null!=e&&!aE(e)||null!=t&&!aE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof qP||n.getIndex()===GP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function nA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class tl extends So{constructor(e,t){super(e,t,new RD,!1)}get parent(){const e=$$(this._path);return null===e?null:new tl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class dm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Dn(e),r=hm(this.ref,e);return new dm(this._node.getChild(t),r,Wn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new dm(i,hm(this.ref,r),Wn)))}hasChild(e){const t=new Dn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function e3(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?hm(n._root,e):n._root}function t3(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=RO(e,n._repo.repoInfo_.nodeAdmin);VH("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&mc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),e3(n,t.path.toString())}function hm(n,e){return null===rn((n=(0,O.m9)(n))._path)?A9("child","path",e,!1):cE("child","path",e,!1),new tl(n._repo,mr(n._path,e))}function MO(n,e){n=(0,O.m9)(n),el("set",n._path),vc("set",e,n._path,!1);const t=new O.BH;return SO(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function X9(n,e){UH("update",e,n._path,!1);const t=new O.BH;return function F9(n,e,t,r){Xy(n,"update",{path:e.toString(),value:t});let i=!0;const s=dE(n),u={};if(ji(t,(h,g)=>{i=!1,u[h]=PH(mr(e,h),kr(g),n.serverSyncTree_,s)}),i)Bi("update() called with empty data.  Don't do anything."),zf(0,r,"ok",void 0);else{const h=JD(n),g=function l9(n,e,t,r){!function I7(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=nO(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Kn.fromObject(t);return Jy(n,new Yy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);QD(n.eventQueue_,g),n.server_.merge(e.toString(),t,(y,E)=>{const I="ok"===y;I||bs("update at "+e+" failed: "+y);const k=Zf(n.serverSyncTree_,h,!I),R=k.length>0?ev(n,e):e;la(n.eventQueue_,R,k),zf(0,r,y,E)}),ji(t,y=>{const E=xO(n,mr(e,y));ev(n,E)}),la(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function eY(n){n=(0,O.m9)(n);const e=new NO(()=>{}),t=new hE(e);return function O9(n,e,t){const r=function f9(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,E)=>{const I=Xs(y,t);r=r||qf(E,I)});let i=n.syncPointTree_.get(t);i?r=r||qf(i,_n()):(i=new CH,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,u=s?new $f(r,!0,!1):null;return function Y7(n){return LD(n.viewCache_)}(TH(i,e,UD(n.pendingWriteTree_,e._path),s?u.getNode():Yt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=kr(i).withIndex(e._queryParams.getIndex());let u;if(hO(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=rE(n.serverSyncTree_,e._path,s);else{const h=iE(n.serverSyncTree_,e);u=xH(n.serverSyncTree_,e._path,s,h)}return la(n.eventQueue_,e._path,u),GD(n.serverSyncTree_,e,t,null,!0),s},i=>(Xy(n,"get for query "+(0,O.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new dm(r,new tl(n._repo,n._path),n._queryParams.getIndex()))}class hE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new QH("value",this,new dm(e.snapshotNode,new tl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new JH(this,e,t):null}matches(e){return e instanceof hE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class rA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new JH(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=hm(new tl(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new QH(e.type,this,new dm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof rA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function fE(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const g=t,y=(E,I)=>{DO(n._repo,n,h),g(E,I)};y.userCallback=t.userCallback,y.context=t.context,t=y}const u=new NO(t,s||void 0),h="value"===e?new hE(u):new rA(e,u);return function j9(n,e,t){let r;r=".info"===rn(e._path)?hO(n.infoSyncTree_,e,t):hO(n.serverSyncTree_,e,t),BH(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>DO(n._repo,n,h)}function PO(n,e,t,r){return fE(n,"value",e,t,r)}function n3(n,e,t,r){return fE(n,"child_added",e,t,r)}function r3(n,e,t,r){return fE(n,"child_changed",e,t,r)}function i3(n,e,t,r){return fE(n,"child_moved",e,t,r)}function s3(n,e,t,r){return fE(n,"child_removed",e,t,r)}function o3(n,e,t){let r=null;const i=t?new NO(t):null;"value"===e?r=new hE(i):e&&(r=new rA(e,i)),DO(n._repo,n,r)}class nu{}class a3 extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){vc("endAt",this._value,e._path,!0);const t=KP(e._queryParams,this._value,this._key);if(nA(t),Wf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new So(e._repo,e._path,t,e._orderByCalled)}}class nY extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){vc("endBefore",this._value,e._path,!1);const t=function h7(n,e,t){let r,i;return n.index_===yc?("string"==typeof e&&(e=tH(e)),i=KP(n,e,t)):(r=null==t?Zd:tH(t),i=KP(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(nA(t),Wf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new So(e._repo,e._path,t,e._orderByCalled)}}class l3 extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){vc("startAt",this._value,e._path,!0);const t=WP(e._queryParams,this._value,this._key);if(nA(t),Wf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new So(e._repo,e._path,t,e._orderByCalled)}}class sY extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){vc("startAfter",this._value,e._path,!1);const t=function d7(n,e,t){let r;if(n.index_===yc)"string"==typeof e&&(e=eH(e)),r=WP(n,e,t);else{let i;i=null==t?_c:eH(t),r=WP(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(nA(t),Wf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new So(e._repo,e._path,t,e._orderByCalled)}}class aY extends nu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new So(e._repo,e._path,function u7(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class uY extends nu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new So(e._repo,e._path,function c7(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class dY extends nu{constructor(e){super(),this._path=e}_apply(e){tA(e,"orderByChild");const t=new Dn(this._path);if(sn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new qP(t),i=ND(e._queryParams,r);return Wf(i),new So(e._repo,e._path,i,!0)}}class fY extends nu{_apply(e){tA(e,"orderByKey");const t=ND(e._queryParams,yc);return Wf(t),new So(e._repo,e._path,t,!0)}}class gY extends nu{_apply(e){tA(e,"orderByPriority");const t=ND(e._queryParams,Wn);return Wf(t),new So(e._repo,e._path,t,!0)}}class _Y extends nu{_apply(e){tA(e,"orderByValue");const t=ND(e._queryParams,GP);return Wf(t),new So(e._repo,e._path,t,!0)}}class vY extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(vc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new a3(this._value,this._key)._apply(new l3(this._value,this._key)._apply(e))}}function ru(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function e9(n){(0,O.hu)(!$D,"__referenceConstructor has already been defined"),$D=n})(tl),function s9(n){(0,O.hu)(!qD,"__referenceConstructor has already been defined"),qD=n}(tl);const bY="FIREBASE_DATABASE_EMULATOR_HOST",OO={};let u3=!1;function c3(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||mc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,u=RO(s,i),h=u.repoInfo;typeof process<"u"&&process.env&&(y=process.env[bY]),y?(g=!0,s=`http://${y}?ns=${h.namespace}`,u=RO(s,i),h=u.repoInfo):g=!u.repoInfo.secure;const E=i&&g?new Gb(Gb.OWNER):new pK(n.name,n.options,e);VH("Invalid Firebase Database URL",u),sn(u.path)||mc("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function TY(n,e,t,r){let i=OO[e.name];i||(i={},OO[e.name]=i);let s=i[n.toURLString()];return s&&mc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new N9(n,u3,t,r),i[n.toURLString()]=s,s}(h,n,E,new fK(n.name,t));return new SY(I,n)}class SY{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function M9(n,e,t){if(n.stats_=OP(n.repoInfo_),n.forceRestClient_||hK())n.server_=new MD(n.repoInfo_,(r,i,s,u)=>{qH(n,r,i,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>GH(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new om(n.repoInfo_,e,(r,i,s,u)=>{qH(n,r,i,s,u)},r=>{GH(n,r)},r=>{!function P9(n,e){ji(e,(t,r)=>{IO(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function _K(n,e){const t=n.toString();return PP[t]||(PP[t]=e()),PP[t]}(n.repoInfo_,()=>new y7(n.stats_,n.server_)),n.infoData_=new f7,n.infoSyncTree_=new AH({startListening:(r,i,s,u)=>{let h=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(h=rE(n.infoSyncTree_,r._path,g),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),IO(n,"connected",!1),n.serverSyncTree_=new AH({startListening:(r,i,s,u)=>(n.server_.listen(r,s,i,(h,g)=>{const y=u(h,g);la(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new tl(this._repo,_n())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function CY(n,e){const t=OO[e];(!t||t[n.key]!==n)&&mc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),zH(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&mc("Cannot call "+e+" on a deleted database.")}}function d3(){k$.IS_TRANSPORT_INITIALIZED&&bs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function DY(){d3(),Bf.forceDisallow()}function AY(){d3(),qy.forceDisallow(),Bf.forceAllow()}function NY(n,e){c$(n,e)}const PY={".sv":"timestamp"};class LY{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}om.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},om.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function MY(n){s$(Hs.SDK_VERSION),(0,Hs._registerComponent)(new Kl.wA("database",(e,{instanceIdentifier:t})=>c3(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Hs.registerVersion)(r$,"0.13.5",n),(0,Hs.registerVersion)(r$,"0.13.5","esm2017")}();const jY=new Yl.Yd("@firebase/database-compat"),h3=function(n){jY.warn("FIREBASE WARNING: "+n)};class qY{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,h3("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class GY{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Kf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),cE("DataSnapshot.child","path",e,!1),new Kf(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),cE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Kf(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new ua(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class rs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const u=rs.getCancelAndContextArgs_("Query.on",r,i),h=(y,E)=>{t.call(u.context,new Kf(this.database,y),E)};h.userCallback=t,h.context=u.context;const g=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return PO(this._delegate,h,g),t;case"child_added":return n3(this._delegate,h,g),t;case"child_removed":return s3(this._delegate,h,g),t;case"child_changed":return r3(this._delegate,h,g),t;case"child_moved":return i3(this._delegate,h,g),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,o3(this._delegate,e,i)}else o3(this._delegate,e)}get(){return eY(this._delegate).then(e=>new Kf(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const s=rs.getCancelAndContextArgs_("Query.once",r,i),u=new O.BH,h=(y,E)=>{const I=new Kf(this.database,y);t&&t.call(s.context,I,E),u.resolve(I)};h.userCallback=t,h.context=s.context;const g=y=>{s.cancel&&s.cancel.call(s.context,y),u.reject(y)};switch(e){case"value":PO(this._delegate,h,g,{onlyOnce:!0});break;case"child_added":n3(this._delegate,h,g,{onlyOnce:!0});break;case"child_removed":s3(this._delegate,h,g,{onlyOnce:!0});break;case"child_changed":r3(this._delegate,h,g,{onlyOnce:!0});break;case"child_moved":i3(this._delegate,h,g,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new rs(this.database,ru(this._delegate,function lY(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new aY(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new rs(this.database,ru(this._delegate,function cY(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uY(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new rs(this.database,ru(this._delegate,function hY(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return cE("orderByChild","path",n,!1),new dY(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new rs(this.database,ru(this._delegate,function pY(){return new fY}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new rs(this.database,ru(this._delegate,function mY(){return new gY}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new rs(this.database,ru(this._delegate,function yY(){return new _Y}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new rs(this.database,ru(this._delegate,function iY(n=null,e){return uE("startAt","key",e,!0),new l3(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new rs(this.database,ru(this._delegate,function oY(n,e){return uE("startAfter","key",e,!0),new sY(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new rs(this.database,ru(this._delegate,function tY(n,e){return uE("endAt","key",e,!0),new a3(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new rs(this.database,ru(this._delegate,function rY(n,e){return uE("endBefore","key",e,!0),new nY(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new rs(this.database,ru(this._delegate,function wY(n,e){return uE("equalTo","key",e,!0),new vY(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof rs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ua(this.database,new tl(this._delegate._repo,this._delegate._path))}}class ua extends rs{constructor(e,t){super(e,new So(t._repo,t._path,new RD,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ua(this.database,hm(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ua(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new ua(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=MO(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,h3("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}el("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=X9(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function J9(n,e,t){if(el("setWithPriority",n._path),vc("setWithPriority",e,n._path,!1),TO("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return SO(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function Y9(n){return el("remove",n._path),MO(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function UY(n,e,t){var r;if(n=(0,O.m9)(n),el("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new O.BH,h=PO(n,()=>{});return function H9(n,e,t,r,i,s){Xy(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:a$(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=AO(n,e,void 0);u.currentInputSnapshot=h;const g=u.update(h.val());if(void 0===g)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{lE("transaction failed: Data returned ",g,u.path),u.status=0;const y=WD(n.transactionQueueTree_,e),E=cm(y)||[];let I;E.push(u),bO(y,E),"object"==typeof g&&null!==g&&(0,O.r3)(g,".priority")?(I=(0,O.DV)(g,".priority"),(0,O.hu)(aE(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(ZD(n.serverSyncTree_,e)||Yt.EMPTY_NODE).getPriority().val();const k=dE(n),R=kr(g,I),F=yO(R,h,k);u.currentOutputSnapshotRaw=R,u.currentOutputSnapshotResolved=F,u.currentWriteId=JD(n);const W=dO(n.serverSyncTree_,e,F,u.currentWriteId,u.applyLocally);la(n.eventQueue_,e,W),XD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,y,E)=>{let I=null;g?s.reject(g):(I=new dm(E,new tl(n._repo,n._path),Wn),s.resolve(new LY(y,I)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new GY(s.committed,new Kf(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Q9(n,e){n=(0,O.m9)(n),el("setPriority",n._path),TO("setPriority",e,!1);const t=new O.BH;return SO(n._repo,mr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function K9(n,e){n=(0,O.m9)(n),el("push",n._path),vc("push",e,n._path,!0);const t=HH(n._repo),r=s7(t),i=hm(n,r),s=hm(n,r);let u;return u=null!=e?MO(s,e).then(()=>s):Promise.resolve(s),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new ua(this.database,u));t&&i.then(()=>t(null),u=>t(u));const s=new ua(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return el("Reference.onDisconnect",this._delegate._path),new qY(new XH(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class pE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:DY,forceLongPolling:AY}}useEmulator(e,t,r={}){!function xY(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&mc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&mc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Gb(Gb.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);s=new Gb(u)}!function EY(n,e,t,r){n.repoInfo_=new NP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof ua){const t=t3(this._delegate,e.toString());return new ua(this,t)}{const t=e3(this._delegate,e);return new ua(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=t3(this._delegate,e);return new ua(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function kY(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),zH(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function RY(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function $9(n){n.persistentConnection_&&n.persistentConnection_.resume($H)}(n._repo)}(this._delegate)}}pE.ServerValue={TIMESTAMP:function OY(){return PY}(),increment:n=>function FY(n){return{".sv":{increment:n}}}(n)};var zY=Object.freeze({__proto__:null,initStandalone:function ZY({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){s$(t);const u=new Kl.zt("auth-internal",new Kl.H0("database-standalone"));return u.setComponent(new Kl.wA("auth-internal",()=>r,"PRIVATE")),{instance:new pE(c3(n,u,void 0,e,s),n),namespace:i}}});const WY=pE.ServerValue;function f3(n){return null==n}function p3(n){return"function"==typeof n.set}function g3(n,e){return p3(e)?e:n.ref(e)}function m3(n,e){if(function YY(n){return"string"==typeof n}(n))return e.stringCase();if(p3(n))return e.firebaseCase();if(function QY(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function gE(n,e,t="on",r=W_.z){return new Vn.y(i=>{let s=null;return s=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,D.U)(i=>{const{snapshot:s,prevKey:u}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:u,key:h}}),(0,lI.B)())}function _3(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function eQ(n,e){const{payload:t,prevKey:r,key:i}=e,s=_3(n,i),u=function XY(n,e){if(f3(e))return 0;{const t=_3(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(g=>{const y={payload:g,type:"value",prevKey:h,key:g.key};return h=g.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function y3(n){return(f3(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function v3(n,e,t){return function JY(n,e,t){return gE(n,"value","once",t).pipe(Bn(r=>{const i=[Ne(r)];return e.forEach(s=>i.push(gE(n,s,"on",t))),(0,z_.T)(...i).pipe(Zo(eQ,[]))}),K_())}(n,e=y3(e),t)}function w3(n,e,t){const r=(e=y3(e)).map(i=>gE(n,i,"on",t));return(0,z_.T)(...r)}function b3(n,e){return function(r,i){return m3(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function iQ(n){return function(t){return t?m3(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function E3(n,e){return function(){return gE(n,"value","on",e)}}!function KY(n){n.INTERNAL.registerComponent(new Kl.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new pE(i,r)},"PUBLIC").setServiceProps({Reference:ua,Query:rs,Database:pE,DataSnapshot:Kf,enableLogging:NY,INTERNAL:zY,ServerValue:WY}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.5")}(GR.Z);const aQ=new a.OlP("angularfire2.realtimeDatabaseURL"),lQ=new a.OlP("angularfire2.database.use-emulator");let uQ=(()=>{class n{constructor(t,r,i,s,u,h,g,y,E,I,k,R,F,W,ee){this.schedulers=h;const me=g,Me=(0,Ti.on)(t,u,r);y&&uP(Me,u,E,k,R,F,I,W),this.database=(0,Ti.cc)(`${Me.name}.database.${i}`,"AngularFireDatabase",Me.name,()=>{const Ge=u.runOutsideAngular(()=>Me.database(i||void 0));return me&&Ge.useEmulator(...me),Ge},[me])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>g3(this.database,t));let s=i;return r&&(s=r(i)),function sQ(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:b3(r,"update"),set:b3(r,"set"),push:i=>r.push(i),remove:iQ(r),snapshotChanges:i=>v3(n,i,t).pipe(En.iC),stateChanges:i=>w3(n,i,t).pipe(En.iC),auditTrail:i=>function tQ(n,e,t){return function rQ(n,e,t){return function nQ(n,e){return gE(n,"value","on",e).pipe((0,D.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function tK(...n){const e=(0,Er.jO)(n);return(0,Sn.e)((t,r)=>{const i=n.length,s=new Array(i);let u=n.map(()=>!1),h=!1;for(let g=0;g<i;g++)(0,hs.Xf)(n[g]).subscribe((0,ye.x)(r,y=>{s[g]=y,!h&&!u[g]&&(u[g]=!0,(h=u.every(S.y))&&(u=null))},c0.Z));t.subscribe((0,ye.x)(r,g=>{if(h){const y=[g,...s];r.next(e?e(...y):y)}}))})}(e),(0,D.U)(([i,s])=>{const u=i.lastKeyToLoad,h=s.map(g=>g.key);return{actions:s,lastKeyToLoad:u,loadedKeys:h}}),function nK(n){return(0,Sn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,ye.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,D.U)(i=>i.actions))}(n,w3(n,e).pipe(Zo((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(En.iC),valueChanges:(i,s)=>v3(n,i,t).pipe((0,D.U)(h=>h.map(g=>s&&s.idField?Object.assign(Object.assign({},g.payload.val()),{[s.idField]:g.key}):g.payload.val())),En.iC)}}(s,this)}object(t){return function oQ(n,e){return{query:n,snapshotChanges:()=>E3(n,e.schedulers.outsideAngular)().pipe(En.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>E3(n,e.schedulers.outsideAngular)().pipe(En.iC,(0,D.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>g3(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Ti.Dh),a.LFG(Ti.xv,8),a.LFG(aQ,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(En.HU),a.LFG(lQ,8),a.LFG(cP,8),a.LFG(rP,8),a.LFG(iP,8),a.LFG(sP,8),a.LFG(oP,8),a.LFG(aP,8),a.LFG(lP,8),a.LFG(Ob,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),cQ=(()=>{class n{constructor(){nP.Z.registerVersion("angularfire",En.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[uQ]}),n})(),dQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=a.oAB({type:n,bootstrap:[B6]});static#n=this.\u0275inj=a.cJS({providers:[...i8,...s8,...o8,...a8,...l8,...u8],imports:[Oa,jx,Nk,Mk,zk,JE,II.forRoot(),V6,Ti.hO.initializeApp(c8_firebase),cQ,r8,eK,KF.forRoot()]})}return n})();ph().bootstrapModule(dQ).catch(n=>console.error(n))},5867:(ft,Ie,U)=>{U.d(Ie,{C6:()=>a.getApps,Mq:()=>a.getApp});var a=U(9681);(0,a.registerVersion)("firebase","9.9.3","app")},127:(ft,Ie,U)=>{U.d(Ie,{Z:()=>a.Z});var a=U(3942);a.Z.registerVersion("firebase","9.9.3","app-compat")},1451:(ft,Ie,U)=>{U.r(Ie);var a=U(5861),te=U(3942),L=U(2090),ae=U(9681),se=U(7582),ie=U(1877),we=U(4859);const pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},X_EMAIL_SIGNIN="EMAIL_SIGNIN",X_PASSWORD_RESET="PASSWORD_RESET",X_RECOVER_EMAIL="RECOVER_EMAIL",X_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",X_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",X_VERIFY_EMAIL="VERIFY_EMAIL";const Ke=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},at=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xe=new ie.Yd("@firebase/auth");function Be(v,...p){xe.logLevel<=ie.in.ERROR&&xe.error(`Auth (${ae.SDK_VERSION}): ${v}`,...p)}function De(v,...p){throw Ue(v,...p)}function Te(v,...p){return Ue(v,...p)}function Re(v,p,_){const b=Object.assign(Object.assign({},at()),{[p]:_});return new L.LL("auth","Firebase",b).create(p,{appName:v.name})}function qe(v,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&De(v,"argument-error"),Re(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(v,...p){if("string"!=typeof v){const _=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=v.name),v._errorFactory.create(_,...b)}return _e.create(v,...p)}function H(v,p,..._){if(!v)throw Ue(p,..._)}function Ce(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Be(p),new Error(p)}function Ze(v,p){v||Ce(p)}const Je=new Map;function pt(v){Ze(v instanceof Function,"Expected a class definition");let p=Je.get(v);return p?(Ze(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Je.set(v,p),p)}function yr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Yn(){return"http:"===Hi()||"https:"===Hi()}function Hi(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class de{constructor(p,_){this.shortDelay=p,this.longDelay=_,Ze(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function oe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Yn()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function re(v,p){Ze(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class je{static initialize(p,_,b){this.fetchImpl=p,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vt=new de(3e4,6e4);function Ye(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Wt(v,p,_,b){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,a.Z)(function*(v,p,_,b,x={}){return Kt(v,x,(0,a.Z)(function*(){let P={},K={};b&&("GET"===p?K=b:P={body:JSON.stringify(b)});const ue=(0,L.xO)(Object.assign({key:v.config.apiKey},K)).slice(1),Oe=yield v._getAdditionalHeaders();return Oe["Content-Type"]="application/json",v.languageCode&&(Oe["X-Firebase-Locale"]=v.languageCode),je.fetch()(vr(v,v.config.apiHost,_,ue),Object.assign({method:p,headers:Oe,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Kt(v,p,_){return on.apply(this,arguments)}function on(){return(on=(0,a.Z)(function*(v,p,_){v._canInitEmulator=!1;const b=Object.assign(Object.assign({},Ve),p);try{const x=new An(v),P=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const K=yield P.json();if("needConfirmation"in K)throw On(v,"account-exists-with-different-credential",K);if(P.ok&&!("errorMessage"in K))return K;{const ue=P.ok?K.errorMessage:K.error.message,[Oe,rt]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Oe)throw On(v,"credential-already-in-use",K);if("EMAIL_EXISTS"===Oe)throw On(v,"email-already-in-use",K);if("USER_DISABLED"===Oe)throw On(v,"user-disabled",K);const St=b[Oe]||Oe.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw Re(v,St,rt);De(v,St)}}catch(x){if(x instanceof L.ZR)throw x;De(v,"network-request-failed")}})).apply(this,arguments)}function en(v,p,_,b){return sr.apply(this,arguments)}function sr(){return(sr=(0,a.Z)(function*(v,p,_,b,x={}){const P=yield Wt(v,p,_,b,x);return"mfaPendingCredential"in P&&De(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function vr(v,p,_,b){const x=`${p}${_}?${b}`;return v.config.emulator?re(v.config,x):`${v.config.apiScheme}://${x}`}class An{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(Te(this.auth,"network-request-failed")),vt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function On(v,p,_){const b={appName:v.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const x=Te(v,p,b);return x.customData._tokenResponse=_,x}function xn(){return(xn=(0,a.Z)(function*(v,p){return Wt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function qi(){return(qi=(0,a.Z)(function*(v,p){return Wt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function kn(){return(kn=(0,a.Z)(function*(v,p){return Wt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function $r(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function yn(){return(yn=(0,a.Z)(function*(v,p=!1){const _=(0,L.m9)(v),b=yield _.getIdToken(p),x=At(b);H(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const P="object"==typeof x.firebase?x.firebase:void 0,K=P?.sign_in_provider;return{claims:x,token:b,authTime:$r(wt(x.auth_time)),issuedAtTime:$r(wt(x.iat)),expirationTime:$r(wt(x.exp)),signInProvider:K||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function wt(v){return 1e3*Number(v)}function At(v){var p;const[_,b,x]=v.split(".");if(void 0===_||void 0===b||void 0===x)return Be("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,L.tV)(b);return P?JSON.parse(P):(Be("Failed to decode base64 JWT payload"),null)}catch(P){return Be("Caught error parsing JWT payload as JSON",null===(p=P)||void 0===p?void 0:p.toString()),null}}function $n(v,p){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,a.Z)(function*(v,p,_=!1){if(_)return p;try{return yield p}catch(b){throw b instanceof L.ZR&&function Ts({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(b)&&v.auth.currentUser===v&&(yield v.auth.signOut()),b}})).apply(this,arguments)}class Nr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,a.Z)(function*(){yield _.iteration()}),b)}iteration(){var p=this;return(0,a.Z)(function*(){var _;try{yield p.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null===(_=b)||void 0===_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class ha{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=$r(this.lastLoginAt),this.creationTime=$r(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function un(v){return hi.apply(this,arguments)}function hi(){return hi=(0,a.Z)(function*(v){var p;const _=v.auth,b=yield v.getIdToken(),x=yield $n(v,function Cs(v,p){return kn.apply(this,arguments)}(_,{idToken:b}));H(x?.users.length,_,"internal-error");const P=x.users[0];v._notifyReloadListener(P);const K=null!==(p=P.providerUserInfo)&&void 0!==p&&p.length?function j(v){return v.map(p=>{var{providerId:_}=p,b=(0,se._T)(p,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}(P.providerUserInfo):[],ue=function $(v,p){return[...v.filter(b=>!p.some(x=>x.providerId===b.providerId)),...p]}(v.providerData,K),St=!!v.isAnonymous&&!(v.email&&P.passwordHash||ue?.length),Et={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ue,metadata:new ha(P.createdAt,P.lastLoginAt),isAnonymous:St};Object.assign(v,Et)}),hi.apply(this,arguments)}function Q(){return(Q=(0,a.Z)(function*(v){const p=(0,L.m9)(v);yield un(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function z(){return(z=(0,a.Z)(function*(v,p){const _=yield Kt(v,{},(0,a.Z)(function*(){const b=(0,L.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:P}=v.config,K=vr(v,x,"/v1/token",`key=${P}`),ue=yield v._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",je.fetch()(K,{method:"POST",headers:ue,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Se{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){H(p.idToken,"internal-error"),H(typeof p.idToken<"u","internal-error"),H(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Gi(v){const p=At(v);return H(p,"internal-error"),H(typeof p.exp<"u","internal-error"),H(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var b=this;return(0,a.Z)(function*(){return H(!b.accessToken||b.refreshToken,p,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var b=this;return(0,a.Z)(function*(){const{accessToken:x,refreshToken:P,expiresIn:K}=yield function Z(v,p){return z.apply(this,arguments)}(p,_);b.updateTokensAndExpiration(x,P,Number(K))})()}updateTokensAndExpiration(p,_,b){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,_){const{refreshToken:b,accessToken:x,expirationTime:P}=_,K=new Se;return b&&(H("string"==typeof b,"internal-error",{appName:p}),K.refreshToken=b),x&&(H("string"==typeof x,"internal-error",{appName:p}),K.accessToken=x),P&&(H("number"==typeof P,"internal-error",{appName:p}),K.expirationTime=P),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Se,this.toJSON())}_performRefresh(){return Ce("not implemented")}}function We(v,p){H("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class mt{constructor(p){var{uid:_,auth:b,stsTokenManager:x}=p,P=(0,se._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new ha(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,a.Z)(function*(){const b=yield $n(_,_.stsTokenManager.getToken(_.auth,p));return H(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(p){return function pn(v){return yn.apply(this,arguments)}(this,p)}reload(){return function Jt(v){return Q.apply(this,arguments)}(this)}_assign(p){this!==p&&(H(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new mt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var b=this;return(0,a.Z)(function*(){let x=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),x=!0),_&&(yield un(b)),yield b.auth._persistUserIfCurrent(b),x&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,a.Z)(function*(){const _=yield p.getIdToken();return yield $n(p,function di(v,p){return xn.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var b,x,P,K,ue,Oe,rt,St;const Et=null!==(b=_.displayName)&&void 0!==b?b:void 0,Sr=null!==(x=_.email)&&void 0!==x?x:void 0,si=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,ud=null!==(K=_.photoURL)&&void 0!==K?K:void 0,Rp=null!==(ue=_.tenantId)&&void 0!==ue?ue:void 0,zu=null!==(Oe=_._redirectEventId)&&void 0!==Oe?Oe:void 0,Np=null!==(rt=_.createdAt)&&void 0!==rt?rt:void 0,Uh=null!==(St=_.lastLoginAt)&&void 0!==St?St:void 0,{uid:Vh,emailVerified:Ol,isAnonymous:ps,providerData:Fl,stsTokenManager:Ll}=_;H(Vh&&Ll,p,"internal-error");const Pm=Se.fromJSON(this.name,Ll);H("string"==typeof Vh,p,"internal-error"),We(Et,p.name),We(Sr,p.name),H("boolean"==typeof Ol,p,"internal-error"),H("boolean"==typeof ps,p,"internal-error"),We(si,p.name),We(ud,p.name),We(Rp,p.name),We(zu,p.name),We(Np,p.name),We(Uh,p.name);const Bh=new mt({uid:Vh,auth:p,email:Sr,emailVerified:Ol,displayName:Et,isAnonymous:ps,photoURL:ud,phoneNumber:si,tenantId:Rp,stsTokenManager:Pm,createdAt:Np,lastLoginAt:Uh});return Fl&&Array.isArray(Fl)&&(Bh.providerData=Fl.map(Om=>Object.assign({},Om))),zu&&(Bh._redirectEventId=zu),Bh}static _fromIdTokenResponse(p,_,b=!1){return(0,a.Z)(function*(){const x=new Se;x.updateFromServerResponse(_);const P=new mt({uid:_.localId,auth:p,stsTokenManager:x,isAnonymous:b});return yield un(P),P})()}}const cn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(_,b){var x=this;return(0,a.Z)(function*(){x.storage[_]=b})()}_get(_){var b=this;return(0,a.Z)(function*(){const x=b.storage[_];return void 0===x?null:x})()}_remove(_){var b=this;return(0,a.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return v.type="NONE",v})();function wn(v,p,_){return`firebase:${v}:${p}:${_}`}class Ot{constructor(p,_,b){this.persistence=p,this.auth=_,this.userKey=b;const{config:x,name:P}=this.auth;this.fullUserKey=wn(this.userKey,x.apiKey,P),this.fullPersistenceKey=wn("persistence",x.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,a.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?mt._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,a.Z)(function*(){if(_.persistence===p)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,b="authUser"){return(0,a.Z)(function*(){if(!_.length)return new Ot(pt(cn),p,b);const x=(yield Promise.all(_.map(function(){var rt=(0,a.Z)(function*(St){if(yield St._isAvailable())return St});return function(St){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let P=x[0]||pt(cn);const K=wn(b,p.config.apiKey,p.name);let ue=null;for(const rt of _)try{const St=yield rt._get(K);if(St){const Et=mt._fromJSON(p,St);rt!==P&&(ue=Et),P=rt;break}}catch{}const Oe=x.filter(rt=>rt._shouldAllowMigration);return P._shouldAllowMigration&&Oe.length?(P=Oe[0],ue&&(yield P._set(K,ue.toJSON())),yield Promise.all(_.map(function(){var rt=(0,a.Z)(function*(St){if(St!==P)try{yield St._remove(K)}catch{}});return function(St){return rt.apply(this,arguments)}}())),new Ot(P,p,b)):new Ot(P,p,b)})()}}function Hn(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(iu(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(wr(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(fa(p))return"Blackberry";if(Mr(p))return"Webos";if(Xt(p))return"Safari";if((p.includes("chrome/")||eo(p))&&!p.includes("edge/"))return"Chrome";if(is(p))return"Android";{const b=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function wr(v=(0,L.z$)()){return/firefox\//i.test(v)}function Xt(v=(0,L.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function eo(v=(0,L.z$)()){return/crios\//i.test(v)}function iu(v=(0,L.z$)()){return/iemobile/i.test(v)}function is(v=(0,L.z$)()){return/android/i.test(v)}function fa(v=(0,L.z$)()){return/blackberry/i.test(v)}function Mr(v=(0,L.z$)()){return/webos/i.test(v)}function ss(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Jf(v=(0,L.z$)()){return ss(v)||is(v)||Mr(v)||fa(v)||/windows phone/i.test(v)||iu(v)}function ga(v,p=[]){let _;switch(v){case"Browser":_=Hn((0,L.z$)());break;case"Worker":_=`${Hn((0,L.z$)())}-${v}`;break;default:_=v}const b=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${ae.SDK_VERSION}/${b}`}class Kd{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const b=P=>new Promise((K,ue)=>{try{K(p(P))}catch(Oe){ue(Oe)}});b.onAbort=_,this.queue.push(b);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,a.Z)(function*(){var b;if(_.auth.currentUser===p)return;const x=[];try{for(const P of _.queue)yield P(p),P.onAbort&&x.push(P.onAbort)}catch(P){x.reverse();for(const K of x)try{K()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(b=P)||void 0===b?void 0:b.message})}})()}}class Yd{constructor(p,_,b){this.app=p,this.heartbeatServiceProvider=_,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ec(this),this.idTokenSubscription=new Ec(this),this.beforeStateQueue=new Kd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(p,_){var b=this;return _&&(this._popupRedirectResolver=pt(_)),this._initializationPromise=this.queue((0,a.Z)(function*(){var x,P;if(!b._deleted&&(b.persistenceManager=yield Ot.create(b,p),!b._deleted)){if(null!==(x=b._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(P=b.currentUser)||void 0===P?void 0:P.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,a.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,a.Z)(function*(){var b;const x=yield _.assertedPersistence.getCurrentUser();let P=x,K=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ue=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,Oe=P?._redirectEventId,rt=yield _.tryRedirectSignIn(p);(!ue||ue===Oe)&&rt?.user&&(P=rt.user,K=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(K)try{yield _.beforeStateQueue.runMiddleware(P)}catch(ue){P=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ue))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return H(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(p){var _=this;return(0,a.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,a.Z)(function*(){var b;try{yield un(p)}catch(x){if("auth/network-request-failed"!==(null===(b=x)||void 0===b?void 0:b.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function he(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,a.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,a.Z)(function*(){const b=p?(0,L.m9)(p):null;return b&&H(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(p,_=!1){var b=this;return(0,a.Z)(function*(){if(!b._deleted)return p&&H(b.tenantId===p.tenantId,b,"tenant-id-mismatch"),_||(yield b.beforeStateQueue.runMiddleware(p)),b.queue((0,a.Z)(function*(){yield b.directlySetCurrentUser(p),b.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,a.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,a.Z)(function*(){yield _.assertedPersistence.setPersistence(pt(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new L.LL("auth","Firebase",p())}onAuthStateChanged(p,_,b){return this.registerStateListener(this.authStateSubscription,p,_,b)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,b){return this.registerStateListener(this.idTokenSubscription,p,_,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var b=this;return(0,a.Z)(function*(){const x=yield b.getOrInitRedirectPersistenceManager(_);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,a.Z)(function*(){if(!_.redirectPersistenceManager){const b=p&&pt(p)||_._popupRedirectResolver;H(b,_,"argument-error"),_.redirectPersistenceManager=yield Ot.create(_,[pt(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,a.Z)(function*(){var b,x;return _._isInitialized&&(yield _.queue((0,a.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===p?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,a.Z)(function*(){if(p===_.currentUser)return _.queue((0,a.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,b,x){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),K=this._isInitialized?Promise.resolve():this._initializationPromise;return H(K,this,"internal-error"),K.then(()=>P(this.currentUser)),"function"==typeof _?p.addObserver(_,b,x):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,a.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=ga(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,a.Z)(function*(){var _;const b={"X-Client-Version":p.clientVersion};p.app.options.appId&&(b["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(b["X-Firebase-Client"]=x),b})()}}function Ln(v){return(0,L.m9)(v)}class Ec{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Qn(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Is(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Do{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Ce("not implemented")}_getIdTokenResponse(p){return Ce("not implemented")}_linkToIdToken(p,_){return Ce("not implemented")}_getReauthenticationResolver(p){return Ce("not implemented")}}function qr(v,p){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,a.Z)(function*(v,p){return Wt(v,"POST","/v1/accounts:resetPassword",Ye(v,p))})).apply(this,arguments)}function Di(v,p){return nt.apply(this,arguments)}function nt(){return(nt=(0,a.Z)(function*(v,p){return Wt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Tn(){return(Tn=(0,a.Z)(function*(v,p){return Wt(v,"POST","/v1/accounts:update",Ye(v,p))})).apply(this,arguments)}function Ss(){return(Ss=(0,a.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithPassword",Ye(v,p))})).apply(this,arguments)}function Jn(v,p){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,a.Z)(function*(v,p){return Wt(v,"POST","/v1/accounts:sendOobCode",Ye(v,p))})).apply(this,arguments)}function ma(){return(ma=(0,a.Z)(function*(v,p){return Jn(v,p)})).apply(this,arguments)}function $t(){return($t=(0,a.Z)(function*(v,p){return Jn(v,p)})).apply(this,arguments)}function to(){return(to=(0,a.Z)(function*(v,p){return Jn(v,p)})).apply(this,arguments)}function Zi(){return(Zi=(0,a.Z)(function*(v,p){return Jn(v,p)})).apply(this,arguments)}function _a(){return(_a=(0,a.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithEmailLink",Ye(v,p))})).apply(this,arguments)}function zi(){return(zi=(0,a.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithEmailLink",Ye(v,p))})).apply(this,arguments)}class no extends Do{constructor(p,_,b,x=null){super("password",b),this._email=p,this._password=_,this._tenantId=x}static _fromEmailAndPassword(p,_){return new no(p,_,"password")}static _fromEmailAndCode(p,_,b=null){return new no(p,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,a.Z)(function*(){switch(_.signInMethod){case"password":return function ei(v,p){return Ss.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Zr(v,p){return _a.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:De(p,"internal-error")}})()}_linkToIdToken(p,_){var b=this;return(0,a.Z)(function*(){switch(b.signInMethod){case"password":return Di(p,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function xo(v,p){return zi.apply(this,arguments)}(p,{idToken:_,email:b._email,oobCode:b._password});default:De(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ds(v,p){return mn.apply(this,arguments)}function mn(){return(mn=(0,a.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithIdp",Ye(v,p))})).apply(this,arguments)}class Ai extends Do{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Ai(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):De("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:x}=_,P=(0,se._T)(_,["providerId","signInMethod"]);if(!b||!x)return null;const K=new Ai(b,x);return K.idToken=P.idToken||void 0,K.accessToken=P.accessToken||void 0,K.secret=P.secret,K.nonce=P.nonce,K.pendingToken=P.pendingToken||null,K}_getIdTokenResponse(p){return Ds(p,this.buildRequest())}_linkToIdToken(p,_){const b=this.buildRequest();return b.idToken=_,Ds(p,b)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Ds(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,L.xO)(_)}return p}}function ya(){return(ya=(0,a.Z)(function*(v,p){return Wt(v,"POST","/v1/accounts:sendVerificationCode",Ye(v,p))})).apply(this,arguments)}function zr(){return(zr=(0,a.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithPhoneNumber",Ye(v,p))})).apply(this,arguments)}function Jd(){return(Jd=(0,a.Z)(function*(v,p){const _=yield en(v,"POST","/v1/accounts:signInWithPhoneNumber",Ye(v,p));if(_.temporaryProof)throw On(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const fi={USER_NOT_FOUND:"user-not-found"};function rl(){return(rl=(0,a.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithPhoneNumber",Ye(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),fi)})).apply(this,arguments)}class Wi extends Do{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Wi({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Wi({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function ko(v,p){return zr.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Wr(v,p){return Jd.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function xi(v,p){return rl.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:b,verificationCode:x}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:b,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:b,phoneNumber:x,temporaryProof:P}=p;return b||_||x||P?new Wi({verificationId:_,verificationCode:b,phoneNumber:x,temporaryProof:P}):null}}class il{constructor(p){var _,b,x,P,K,ue;const Oe=(0,L.zd)((0,L.pd)(p)),rt=null!==(_=Oe.apiKey)&&void 0!==_?_:null,St=null!==(b=Oe.oobCode)&&void 0!==b?b:null,Et=function Ic(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Oe.mode)&&void 0!==x?x:null);H(rt&&St&&Et,"argument-error"),this.apiKey=rt,this.operation=Et,this.code=St,this.continueUrl=null!==(P=Oe.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(K=Oe.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(ue=Oe.tenantId)&&void 0!==ue?ue:null}static parseLink(p){const _=function pi(v){const p=(0,L.zd)((0,L.pd)(v)).link,_=p?(0,L.zd)((0,L.pd)(p)).deep_link_id:null,b=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(b?(0,L.zd)((0,L.pd)(b)).link:null)||b||_||p||v}(p);try{return new il(_)}catch{return null}}}let Sc=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,b){return no._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const x=il.parseLink(b);return H(x,"argument-error"),no._fromEmailAndCode(_,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class As{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class va extends As{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class sl extends va{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return H("providerId"in _&&"signInMethod"in _,"argument-error"),Ai._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return H(p.idToken||p.accessToken,"argument-error"),Ai._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return sl.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return sl.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:x,pendingToken:P,nonce:K,providerId:ue}=p;if(!b&&!x&&!_&&!P||!ue)return null;try{return new sl(ue)._credential({idToken:_,accessToken:b,nonce:K,pendingToken:P})}catch{return null}}}let Dc=(()=>{class v extends va{constructor(){super("facebook.com")}static credential(_){return Ai._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),ep=(()=>{class v extends va{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return Ai._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:x}=_;if(!b&&!x)return null;try{return v.credential(b,x)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),tp=(()=>{class v extends va{constructor(){super("github.com")}static credential(_){return Ai._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class wa extends Do{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Ds(p,this.buildRequest())}_linkToIdToken(p,_){const b=this.buildRequest();return b.idToken=_,Ds(p,b)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Ds(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:x,pendingToken:P}=_;return b&&x&&P&&b===x?new wa(b,P):null}static _create(p,_){return new wa(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class as extends As{constructor(p){H(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return as.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return as.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=wa.fromJSON(p);return H(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:b}=p;if(!_||!b)return null;try{return wa._create(b,_)}catch{return null}}}let _m=(()=>{class v extends va{constructor(){super("twitter.com")}static credential(_,b){return Ai._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:x}=_;if(!b||!x)return null;try{return v.credential(b,x)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function su(v,p){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,a.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signUp",Ye(v,p))})).apply(this,arguments)}class ni{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,b,x=!1){return(0,a.Z)(function*(){const P=yield mt._fromIdTokenResponse(p,b,x),K=xc(b);return new ni({user:P,providerId:K,_tokenResponse:b,operationType:_})})()}static _forOperation(p,_,b){return(0,a.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const x=xc(b);return new ni({user:p,providerId:x,_tokenResponse:b,operationType:_})})()}}function xc(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function No(){return(No=(0,a.Z)(function*(v){var p;const _=Ln(v);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new ni({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield su(_,{returnSecureToken:!0}),x=yield ni._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class ou extends L.ZR{constructor(p,_,b,x){var P;super(_.code,_.message),this.operationType=b,this.user=x,Object.setPrototypeOf(this,ou.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,_,b,x){return new ou(p,_,b,x)}}function Mo(v,p,_,b){return("reauthenticate"===p?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?ou._fromErrorAndOperation(v,P,p,b):P})}function Po(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function ba(){return ba=(0,a.Z)(function*(v,p){const _=(0,L.m9)(v);yield Oo(!0,_,p);const{providerUserInfo:b}=yield function gt(v,p){return qi.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),x=Po(b||[]);return _.providerData=_.providerData.filter(P=>x.has(P.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),ba.apply(this,arguments)}function lu(v,p){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,a.Z)(function*(v,p,_=!1){const b=yield $n(v,p._linkToIdToken(v.auth,yield v.getIdToken()),_);return ni._forOperation(v,"link",b)})).apply(this,arguments)}function Oo(v,p,_){return ol.apply(this,arguments)}function ol(){return(ol=(0,a.Z)(function*(v,p,_){yield un(p);const x=!1===v?"provider-already-linked":"no-such-provider";H(Po(p.providerData).has(_)===v,p.auth,x)})).apply(this,arguments)}function kc(v,p){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,a.Z)(function*(v,p,_=!1){var b;const{auth:x}=v,P="reauthenticate";try{const K=yield $n(v,Mo(x,P,p,v),_);H(K.idToken,x,"internal-error");const ue=At(K.idToken);H(ue,x,"internal-error");const{sub:Oe}=ue;return H(v.uid===Oe,x,"user-mismatch"),ni._forOperation(v,P,K)}catch(K){throw"auth/user-not-found"===(null===(b=K)||void 0===b?void 0:b.code)&&De(x,"user-mismatch"),K}})).apply(this,arguments)}function Ta(v,p){return gi.apply(this,arguments)}function gi(){return(gi=(0,a.Z)(function*(v,p,_=!1){const b="signIn",x=yield Mo(v,b,p),P=yield ni._fromIdTokenResponse(v,b,x);return _||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Un(v,p){return uu.apply(this,arguments)}function uu(){return(uu=(0,a.Z)(function*(v,p){return Ta(Ln(v),p)})).apply(this,arguments)}function qn(v,p){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,a.Z)(function*(v,p){const _=(0,L.m9)(v);return yield Oo(!1,_,p.providerId),lu(_,p)})).apply(this,arguments)}function Fo(v,p){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,a.Z)(function*(v,p){return kc((0,L.m9)(v),p)})).apply(this,arguments)}function Sa(){return(Sa=(0,a.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithCustomToken",Ye(v,p))})).apply(this,arguments)}function or(){return or=(0,a.Z)(function*(v,p){const _=Ln(v),b=yield function Rc(v,p){return Sa.apply(this,arguments)}(_,{token:p,returnSecureToken:!0}),x=yield ni._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(x.user),x}),or.apply(this,arguments)}class al{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?Da._fromServerResponse(p,_):De(p,"internal-error")}}class Da extends al{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new Da(_)}}function cu(v,p,_){var b;H((null===(b=_.url)||void 0===b?void 0:b.length)>0,v,"invalid-continue-uri"),H(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(H(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(H(_.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function ll(){return ll=(0,a.Z)(function*(v,p,_){const b=(0,L.m9)(v),x={requestType:"PASSWORD_RESET",email:p};_&&cu(b,x,_),yield function ti(v,p){return $t.apply(this,arguments)}(b,x)}),ll.apply(this,arguments)}function Mt(){return(Mt=(0,a.Z)(function*(v,p,_){yield qr((0,L.m9)(v),{oobCode:p,newPassword:_})})).apply(this,arguments)}function eh(){return eh=(0,a.Z)(function*(v,p){yield function Ft(v,p){return Tn.apply(this,arguments)}((0,L.m9)(v),{oobCode:p})}),eh.apply(this,arguments)}function hu(v,p){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,a.Z)(function*(v,p){const _=(0,L.m9)(v),b=yield qr(_,{oobCode:p}),x=b.requestType;switch(H(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(b.mfaInfo,_,"internal-error");default:H(b.email,_,"internal-error")}let P=null;return b.mfaInfo&&(P=al._fromServerResponse(Ln(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:P},operation:x}})).apply(this,arguments)}function fu(){return(fu=(0,a.Z)(function*(v,p){const{data:_}=yield hu((0,L.m9)(v),p);return _.email})).apply(this,arguments)}function Pc(){return(Pc=(0,a.Z)(function*(v,p,_){const b=Ln(v),x=yield su(b,{returnSecureToken:!0,email:p,password:_}),P=yield ni._fromIdTokenResponse(b,"signIn",x);return yield b._updateCurrentUser(P.user),P})).apply(this,arguments)}function Oc(){return Oc=(0,a.Z)(function*(v,p,_){const b=(0,L.m9)(v),x={requestType:"EMAIL_SIGNIN",email:p};H(_.handleCodeInApp,b,"argument-error"),_&&cu(b,x,_),yield function Cc(v,p){return to.apply(this,arguments)}(b,x)}),Oc.apply(this,arguments)}function cl(){return(cl=(0,a.Z)(function*(v,p,_){const b=(0,L.m9)(v),x=Sc.credentialWithLink(p,_||yr());return H(x._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Un(b,x)})).apply(this,arguments)}function mi(){return(mi=(0,a.Z)(function*(v,p){return Wt(v,"POST","/v1/accounts:createAuthUri",Ye(v,p))})).apply(this,arguments)}function mu(){return mu=(0,a.Z)(function*(v,p){const b={identifier:p,continueUri:Yn()?yr():"http://localhost"},{signinMethods:x}=yield function pu(v,p){return mi.apply(this,arguments)}((0,L.m9)(v),b);return x||[]}),mu.apply(this,arguments)}function Fc(){return Fc=(0,a.Z)(function*(v,p){const _=(0,L.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&cu(_.auth,x,p);const{email:P}=yield function Rn(v,p){return ma.apply(this,arguments)}(_.auth,x);P!==v.email&&(yield v.reload())}),Fc.apply(this,arguments)}function ar(){return ar=(0,a.Z)(function*(v,p,_){const b=(0,L.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};_&&cu(b.auth,P,_);const{email:K}=yield function Tc(v,p){return Zi.apply(this,arguments)}(b.auth,P);K!==v.email&&(yield v.reload())}),ar.apply(this,arguments)}function ro(){return(ro=(0,a.Z)(function*(v,p){return Wt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ls(){return ls=(0,a.Z)(function*(v,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const b=(0,L.m9)(v),P={idToken:yield b.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},K=yield $n(b,function _i(v,p){return ro.apply(this,arguments)}(b.auth,P));b.displayName=K.displayName||null,b.photoURL=K.photoUrl||null;const ue=b.providerData.find(({providerId:Oe})=>"password"===Oe);ue&&(ue.displayName=b.displayName,ue.photoURL=b.photoURL),yield b._updateTokensIfNecessary(K)}),ls.apply(this,arguments)}function ih(v,p,_){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,a.Z)(function*(v,p,_){const{auth:b}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(P.email=p),_&&(P.password=_);const K=yield $n(v,Di(b,P));yield v._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class ks{constructor(p,_,b={}){this.isNewUser=p,this.providerId=_,this.profile=b}}class sh extends ks{constructor(p,_,b,x){super(p,_,b),this.username=x}}class Vc extends ks{constructor(p,_){super(p,"facebook.com",_)}}class oh extends sh{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class rp extends ks{constructor(p,_){super(p,"google.com",_)}}class yu extends sh{constructor(p,_,b){super(p,"twitter.com",_,b)}}function ip(v){const{user:p,_tokenResponse:_}=v;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Uc(v){var p,_;if(!v)return null;const{providerId:b}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!b&&v?.idToken){const K=null===(_=null===(p=At(v.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(K)return new ks(P,"anonymous"!==K&&"custom"!==K?K:null)}if(!b)return null;switch(b){case"facebook.com":return new Vc(P,x);case"github.com":return new oh(P,x);case"google.com":return new rp(P,x);case"twitter.com":return new yu(P,x,v.screenName||null);case"custom":case"anonymous":return new ks(P,null);default:return new ks(P,b,x)}}(_)}class xa{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new xa("enroll",p)}static _fromMfaPendingCredential(p){return new xa("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,b;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return xa._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(b=p.multiFactorSession)&&void 0!==b&&b.idToken)return xa._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Bc{constructor(p,_,b){this.session=p,this.hints=_,this.signInResolver=b}static _fromError(p,_){const b=Ln(p),x=_.customData._serverResponse,P=(x.mfaInfo||[]).map(ue=>al._fromServerResponse(b,ue));H(x.mfaPendingCredential,b,"internal-error");const K=xa._fromMfaPendingCredential(x.mfaPendingCredential);return new Bc(K,P,function(){var ue=(0,a.Z)(function*(Oe){const rt=yield Oe._process(b,K);delete x.mfaInfo,delete x.mfaPendingCredential;const St=Object.assign(Object.assign({},x),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(_.operationType){case"signIn":const Et=yield ni._fromIdTokenResponse(b,_.operationType,St);return yield b._updateCurrentUser(Et.user),Et;case"reauthenticate":return H(_.user,b,"internal-error"),ni._forOperation(_.user,_.operationType,St);default:De(b,"internal-error")}});return function(Oe){return ue.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,a.Z)(function*(){return _.signInResolver(p)})()}}class hl{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>al._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new hl(p)}getSession(){var p=this;return(0,a.Z)(function*(){return xa._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var b=this;return(0,a.Z)(function*(){const x=p,P=yield b.getSession(),K=yield $n(b.user,x._process(b.user.auth,P,_));return yield b.user._updateTokensIfNecessary(K),b.user.reload()})()}unenroll(p){var _=this;return(0,a.Z)(function*(){var b;const x="string"==typeof p?p:p.uid,P=yield _.user.getIdToken(),K=yield $n(_.user,function wm(v,p){return Wt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ye(v,p))}(_.user.auth,{idToken:P,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ue})=>ue!==x),yield _.user._updateTokensIfNecessary(K);try{yield _.user.reload()}catch(ue){if("auth/user-token-expired"!==(null===(b=ue)||void 0===b?void 0:b.code))throw ue}})()}}const Vo=new WeakMap,io="__sak";class fl{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(io,"1"),this.storage.removeItem(io),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const vu=(()=>{class v extends fl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pl(){const v=(0,L.z$)();return Xt(v)||ss(v)}()&&function bc(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Jf(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const x=this.storage.getItem(b),P=this.localCache[b];x!==P&&_(b,P,x)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((ue,Oe,rt)=>{this.notifyListeners(ue,rt)});const x=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(x);if(_.newValue!==ue)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!b)return}const P=()=>{const ue=this.storage.getItem(x);!b&&this.localCache[x]===ue||this.notifyListeners(x,ue)},K=this.storage.getItem(x);!function Qf(){return(0,L.w1)()&&10===document.documentMode}()||K===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,b){this.localCache[_]=b;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var x=()=>super._set,P=this;return(0,a.Z)(function*(){yield x().call(P,_,b),P.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,x=this;return(0,a.Z)(function*(){const P=yield b().call(x,_);return x.localCache[_]=JSON.stringify(P),P})()}_remove(_){var b=()=>super._remove,x=this;return(0,a.Z)(function*(){yield b().call(x,_),delete x.localCache[_]})()}}return v.type="LOCAL",v})(),Bo=(()=>{class v extends fl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return v.type="SESSION",v})();let op=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(P=>P.isListeningto(_));if(b)return b;const x=new v(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,a.Z)(function*(){const x=_,{eventId:P,eventType:K,data:ue}=x.data,Oe=b.handlersMap[K];if(!Oe?.size)return;x.ports[0].postMessage({status:"ack",eventId:P,eventType:K});const rt=Array.from(Oe).map(function(){var Et=(0,a.Z)(function*(Sr){return Sr(x.origin,ue)});return function(Sr){return Et.apply(this,arguments)}}()),St=yield function ch(v){return Promise.all(v.map(function(){var p=(0,a.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return p.apply(this,arguments)}}()))}(rt);x.ports[0].postMessage({status:"done",eventId:P,eventType:K,response:St})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function jo(v="",p=10){let _="";for(let b=0;b<p;b++)_+=Math.floor(10*Math.random());return v+_}class gl{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,b=50){var x=this;return(0,a.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let K,ue;return new Promise((Oe,rt)=>{const St=jo("",20);P.port1.start();const Et=setTimeout(()=>{rt(new Error("unsupported_event"))},b);ue={messageChannel:P,onMessage(Sr){const si=Sr;if(si.data.eventId===St)switch(si.data.status){case"ack":clearTimeout(Et),K=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Oe(si.data.response);break;default:clearTimeout(Et),clearTimeout(K),rt(new Error("invalid_response"))}}},x.handlers.add(ue),P.port1.addEventListener("message",ue.onMessage),x.target.postMessage({eventType:p,eventId:St,data:_},[P.port2])}).finally(()=>{ue&&x.removeMessageHandler(ue)})})()}}function Nn(){return window}function Rs(){return typeof Nn().WorkerGlobalScope<"u"&&"function"==typeof Nn().importScripts}function Ra(){return(Ra=(0,a.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const wu="firebaseLocalStorageDb",bu=1,oo="firebaseLocalStorage",Na="fbase_key";class Ma{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function yl(v,p){return v.transaction([oo],p?"readwrite":"readonly").objectStore(oo)}function Eu(){const v=indexedDB.open(wu,bu);return new Promise((p,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const b=v.result;try{b.createObjectStore(oo,{keyPath:Na})}catch(x){_(x)}}),v.addEventListener("success",(0,a.Z)(function*(){const b=v.result;b.objectStoreNames.contains(oo)?p(b):(b.close(),yield function vl(){const v=indexedDB.deleteDatabase(wu);return new Ma(v).toPromise()}(),p(yield Eu()))}))})}function Fr(v,p,_){return wl.apply(this,arguments)}function wl(){return(wl=(0,a.Z)(function*(v,p,_){const b=yl(v,!0).put({[Na]:p,value:_});return new Ma(b).toPromise()})).apply(this,arguments)}function ao(){return(ao=(0,a.Z)(function*(v,p){const _=yl(v,!1).get(p),b=yield new Ma(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function bl(v,p){const _=yl(v,!0).delete(p);return new Ma(_).toPromise()}const $o=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,a.Z)(function*(){return _.db||(_.db=yield Eu()),_.db})()}_withRetries(_){var b=this;return(0,a.Z)(function*(){let x=0;for(;;)try{const P=yield b._openDb();return yield _(P)}catch(P){if(x++>3)throw P;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,a.Z)(function*(){return Rs()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,a.Z)(function*(){_.receiver=op._getInstance(function _l(){return Rs()?self:null}()),_.receiver._subscribe("keyChanged",function(){var b=(0,a.Z)(function*(x,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(x,P){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,a.Z)(function*(x,P){return["keyChanged"]});return function(x,P){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,a.Z)(function*(){var b,x;if(_.activeServiceWorker=yield function Ns(){return Ra.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new gl(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);P&&null!==(b=P[0])&&void 0!==b&&b.fulfilled&&null!==(x=P[0])&&void 0!==x&&x.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,a.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function $c(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Eu();return yield Fr(_,io,"1"),yield bl(_,io),!0}catch{}return!1})()}_withPendingWrite(_){var b=this;return(0,a.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var x=this;return(0,a.Z)(function*(){return x._withPendingWrite((0,a.Z)(function*(){return yield x._withRetries(P=>Fr(P,_,b)),x.localCache[_]=b,x.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,a.Z)(function*(){const x=yield b._withRetries(P=>function Pa(v,p){return ao.apply(this,arguments)}(P,_));return b.localCache[_]=x,x})()}_remove(_){var b=this;return(0,a.Z)(function*(){return b._withPendingWrite((0,a.Z)(function*(){return yield b._withRetries(x=>bl(x,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,a.Z)(function*(){const b=yield _._withRetries(K=>{const ue=yl(K,!1).getAll();return new Ma(ue).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const x=[],P=new Set;for(const{fbase_key:K,value:ue}of b)P.add(K),JSON.stringify(_.localCache[K])!==JSON.stringify(ue)&&(_.notifyListeners(K,ue),x.push(K));for(const K of Object.keys(_.localCache))_.localCache[K]&&!P.has(K)&&(_.notifyListeners(K,null),x.push(K));return x})()}notifyListeners(_,b){this.localCache[_]=b;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Tu(){return(Tu=(0,a.Z)(function*(v){return(yield Wt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function cs(v){return new Promise((p,_)=>{const b=document.createElement("script");b.setAttribute("src",v),b.onload=p,b.onerror=x=>{const P=Te("internal-error");P.customData=x,_(P)},b.type="text/javascript",b.charset="UTF-8",function Ho(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(b)})}function hh(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Ki=1e12;class bm{constructor(p){this.auth=p,this.counter=Ki,this._widgets=new Map}render(p,_){const b=this.counter;return this._widgets.set(b,new fh(p,this.auth.name,_||{})),this.counter++,b}reset(p){var _;const b=p||Ki;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Ki))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,a.Z)(function*(){var b;return null===(b=_._widgets.get(p||Ki))||void 0===b||b.execute(),""})()}}class fh{constructor(p,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;H(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Su(v){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<v;b++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ph=hh("rcb"),qc=new de(3e4,6e4);class Ps{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Nn().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return H(function Oa(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Nn().grecaptcha):new Promise((b,x)=>{const P=Nn().setTimeout(()=>{x(Te(p,"network-request-failed"))},qc.get());Nn()[ph]=()=>{Nn().clearTimeout(P),delete Nn()[ph];const ue=Nn().grecaptcha;if(!ue)return void x(Te(p,"internal-error"));const Oe=ue.render;ue.render=(rt,St)=>{const Et=Oe(rt,St);return this.counter++,Et},this.hostLanguage=_,b(ue)},cs(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:ph,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),x(Te(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=Nn().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Au{load(p){return(0,a.Z)(function*(){return new bm(p)})()}clearedOneInstance(){}}const gh="recaptcha",ap={theme:"light",type:"image"};class Tl{constructor(p,_=Object.assign({},ap),b){this.parameters=_,this.type=gh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(b),this.isInvisible="invisible"===this.parameters.size,H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;H(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Au:new Ps,this.validateStartingState()}verify(){var p=this;return(0,a.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(_)||new Promise(P=>{const K=ue=>{ue&&(p.tokenChangeListeners.delete(K),P(ue))};p.tokenChangeListeners.add(K),p.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof p)p(_);else if("string"==typeof p){const b=Nn()[p];"function"==typeof b&&b(_)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,a.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,a.Z)(function*(){H(Yn()&&!Rs(),p.auth,"internal-error"),yield function lp(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function us(v){return Tu.apply(this,arguments)}(p.auth);H(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Gc{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Wi._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Zc(){return(Zc=(0,a.Z)(function*(v,p,_){const b=Ln(v),x=yield mh(b,p,(0,L.m9)(_));return new Gc(x,P=>Un(b,P))})).apply(this,arguments)}function xu(){return(xu=(0,a.Z)(function*(v,p,_){const b=(0,L.m9)(v);yield Oo(!1,b,"phone");const x=yield mh(b.auth,p,(0,L.m9)(_));return new Gc(x,P=>qn(b,P))})).apply(this,arguments)}function cp(){return(cp=(0,a.Z)(function*(v,p,_){const b=(0,L.m9)(v),x=yield mh(b.auth,p,(0,L.m9)(_));return new Gc(x,P=>Fo(b,P))})).apply(this,arguments)}function mh(v,p,_){return dp.apply(this,arguments)}function dp(){return dp=(0,a.Z)(function*(v,p,_){var b;const x=yield _.verify();try{let P;if(H("string"==typeof x,v,"argument-error"),H(_.type===gh,v,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const K=P.session;if("phoneNumber"in P)return H("enroll"===K.type,v,"internal-error"),(yield function sp(v,p){return Wt(v,"POST","/v2/accounts/mfaEnrollment:start",Ye(v,p))}(v,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{H("signin"===K.type,v,"internal-error");const ue=(null===(b=P.multiFactorHint)||void 0===b?void 0:b.uid)||P.multiFactorUid;return H(ue,v,"missing-multi-factor-info"),(yield function Cl(v,p){return Wt(v,"POST","/v2/accounts/mfaSignIn:start",Ye(v,p))}(v,{mfaPendingCredential:K.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield function Qd(v,p){return ya.apply(this,arguments)}(v,{phoneNumber:P.phoneNumber,recaptchaToken:x});return K}}finally{_._reset()}}),dp.apply(this,arguments)}function hp(){return(hp=(0,a.Z)(function*(v,p){yield lu((0,L.m9)(v),p)})).apply(this,arguments)}let zc=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Ln(_)}verifyPhoneNumber(_,b){return mh(this.auth,_,(0,L.m9)(b))}static credential(_,b){return Wi._fromVerification(_,b)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:x}=_;return b&&x?Wi._fromTokenResponse(b,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function bn(v,p){return p?pt(p):(H(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Ru extends Do{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ds(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Ds(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Ds(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function Nu(v){return Ta(v.auth,new Ru(v),v.bypassAuthState)}function Wc(v){const{auth:p,user:_}=v;return H(_,p,"internal-error"),kc(_,new Ru(v),v.bypassAuthState)}function yi(v){return ds.apply(this,arguments)}function ds(){return(ds=(0,a.Z)(function*(v){const{auth:p,user:_}=v;return H(_,p,"internal-error"),lu(_,new Ru(v),v.bypassAuthState)})).apply(this,arguments)}class Mu{constructor(p,_,b,x,P=!1){this.auth=p,this.resolver=b,this.user=x,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,a.Z)(function*(b,x){p.pendingPromise={resolve:b,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(b,x){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,a.Z)(function*(){const{urlResponse:b,sessionId:x,postBody:P,tenantId:K,error:ue,type:Oe}=p;if(ue)return void _.reject(ue);const rt={auth:_.auth,requestUri:b,sessionId:x,tenantId:K||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Oe)(rt))}catch(St){_.reject(St)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Nu;case"linkViaPopup":case"linkViaRedirect":return yi;case"reauthViaPopup":case"reauthViaRedirect":return Wc;default:De(this.auth,"internal-error")}}resolve(p){Ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Il=new de(2e3,1e4);function Pu(){return(Pu=(0,a.Z)(function*(v,p,_){const b=Ln(v);qe(v,p,As);const x=bn(b,_);return new Ht(b,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function yh(){return(yh=(0,a.Z)(function*(v,p,_){const b=(0,L.m9)(v);qe(b.auth,p,As);const x=bn(b.auth,_);return new Ht(b.auth,"reauthViaPopup",p,x,b).executeNotNull()})).apply(this,arguments)}function ii(){return(ii=(0,a.Z)(function*(v,p,_){const b=(0,L.m9)(v);qe(b.auth,p,As);const x=bn(b.auth,_);return new Ht(b.auth,"linkViaPopup",p,x,b).executeNotNull()})).apply(this,arguments)}let Ht=(()=>{class v extends Mu{constructor(_,b,x,P,K){super(_,b,P,K),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,a.Z)(function*(){const b=yield _.execute();return H(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,a.Z)(function*(){Ze(1===_.filter.length,"Popup operations only handle one event");const b=jo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Te(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,x;this.pollId=null!==(x=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Il.get())};_()}}return v.currentPopupAction=null,v})();const Er="pendingRedirect",Ne=new Map;class er extends Mu{constructor(p,_,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,a.Z)(function*(){let b=Ne.get(_.auth._key());if(!b){try{const P=(yield function Yi(v,p){return Os.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;b=()=>Promise.resolve(P)}catch(x){b=()=>Promise.reject(x)}Ne.set(_.auth._key(),b)}return _.bypassAuthState||Ne.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,b=this;return(0,a.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(b,p);if("unknown"!==p.type){if(p.eventId){const x=yield b.auth._redirectUserForId(p.eventId);if(x)return b.user=x,_().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function Os(){return(Os=(0,a.Z)(function*(v,p){const _=Dl(p),b=Sl(v);if(!(yield b._isAvailable()))return!1;const x="true"===(yield b._get(_));return yield b._remove(_),x})).apply(this,arguments)}function La(v,p){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,a.Z)(function*(v,p){return Sl(v)._set(Dl(p),"true")})).apply(this,arguments)}function vh(v,p){Ne.set(v._key(),p)}function Sl(v){return pt(v._redirectPersistence)}function Dl(v){return wn(Er,v.config.apiKey,v.name)}function Ou(v,p,_){return function Fu(v,p,_){return S.apply(this,arguments)}(v,p,_)}function S(){return(S=(0,a.Z)(function*(v,p,_){const b=Ln(v);qe(v,p,As);const x=bn(b,_);return yield La(x,b),x._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function D(v,p,_){return function N(v,p,_){return B.apply(this,arguments)}(v,p,_)}function B(){return(B=(0,a.Z)(function*(v,p,_){const b=(0,L.m9)(v);qe(b.auth,p,As);const x=bn(b.auth,_);yield La(x,b.auth);const P=yield _t(b);return x._openRedirect(b.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function J(v,p,_){return function le(v,p,_){return ye.apply(this,arguments)}(v,p,_)}function ye(){return(ye=(0,a.Z)(function*(v,p,_){const b=(0,L.m9)(v);qe(b.auth,p,As);const x=bn(b.auth,_);yield Oo(!1,b,p.providerId),yield La(x,b.auth);const P=yield _t(b);return x._openRedirect(b.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function bt(){return(bt=(0,a.Z)(function*(v,p){return yield Ln(v)._initializationPromise,It(v,p,!1)})).apply(this,arguments)}function It(v,p){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,a.Z)(function*(v,p,_=!1){const b=Ln(v),x=bn(b,p),K=yield new er(b,x,_).execute();return K&&!_&&(delete K.user._redirectEventId,yield b._persistUserIfCurrent(K.user),yield b._setRedirectUser(null,p)),K})).apply(this,arguments)}function _t(v){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,a.Z)(function*(v){const p=jo(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class hs{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(_=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Kc(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qo(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var b;if(p.error&&!qo(p)){const x=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(Te(this.auth,x))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const b=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ua(p))}saveEventToCache(p){this.cachedEventUids.add(Ua(p)),this.lastProcessedEventTime=Date.now()}}function Ua(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function qo({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function lo(v){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,a.Z)(function*(v,p={}){return Wt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Fs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sn=/^https?/;function pp(){return(pp=(0,a.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield lo(v);for(const _ of p)try{if(Bn(_))return}catch{}De(v,"unauthorized-domain")})).apply(this,arguments)}function Bn(v){const p=yr(),{protocol:_,hostname:b}=new URL(p);if(v.startsWith("chrome-extension://")){const K=new URL(v);return""===K.hostname&&""===b?"chrome-extension:"===_&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&K.hostname===b}if(!Sn.test(_))return!1;if(Fs.test(v))return b===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(b)}const Yc=new de(3e4,6e4);function Lu(){const v=Nn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let lr=null;const iv=new de(5e3,15e3),mp="__/auth/iframe",Go="emulator/auth/iframe",xl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kl(v){const p=v.config;H(p.authDomain,v,"auth-domain-config-required");const _=p.emulator?re(p,Go):`https://${v.config.authDomain}/${mp}`,b={apiKey:p.apiKey,appName:v.name,v:ae.SDK_VERSION},x=vi.get(v.config.apiHost);x&&(b.eid=x);const P=v._getFrameworks();return P.length&&(b.fw=P.join(",")),`${_}?${(0,L.xO)(b).slice(1)}`}function Zo(){return Zo=(0,a.Z)(function*(v){const p=yield function gp(v){return lr=lr||function fs(v){return new Promise((p,_)=>{var b,x,P;function K(){Lu(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Lu(),_(Te(v,"network-request-failed"))},timeout:Yc.get()})}if(null!==(x=null===(b=Nn().gapi)||void 0===b?void 0:b.iframes)&&void 0!==x&&x.Iframe)p(gapi.iframes.getContext());else{if(null===(P=Nn().gapi)||void 0===P||!P.load){const ue=hh("iframefcb");return Nn()[ue]=()=>{gapi.load?K():_(Te(v,"network-request-failed"))},cs(`https://apis.google.com/js/api.js?onload=${ue}`).catch(Oe=>_(Oe))}K()}}).catch(p=>{throw lr=null,p})}(v),lr}(v),_=Nn().gapi;return H(_,v,"internal-error"),p.open({where:document.body,url:kl(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xl,dontclear:!0},b=>new Promise(function(){var x=(0,a.Z)(function*(P,K){yield b.restyle({setHideOnLeave:!1});const ue=Te(v,"network-request-failed"),Oe=Nn().setTimeout(()=>{K(ue)},iv.get());function rt(){Nn().clearTimeout(Oe),P(b)}b.ping(rt).then(rt,()=>{K(ue)})});return function(P,K){return x.apply(this,arguments)}}()))}),Zo.apply(this,arguments)}const wh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bh=500,Tm=600,_p="_blank",Eh="http://localhost";class Tt{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Uu="__/auth/handler",Im="emulator/auth/handler";function Jc(v,p,_,b,x,P){H(v.config.authDomain,v,"auth-domain-config-required"),H(v.config.apiKey,v,"invalid-api-key");const K={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:b,v:ae.SDK_VERSION,eventId:x};if(p instanceof As){p.setDefaultLanguage(v.languageCode),K.providerId=p.providerId||"",(0,L.xb)(p.getCustomParameters())||(K.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Oe,rt]of Object.entries(P||{}))K[Oe]=rt}if(p instanceof va){const Oe=p.getScopes().filter(rt=>""!==rt);Oe.length>0&&(K.scopes=Oe.join(","))}v.tenantId&&(K.tid=v.tenantId);const ue=K;for(const Oe of Object.keys(ue))void 0===ue[Oe]&&delete ue[Oe];return`${function uo({config:v}){return v.emulator?re(v,Im):`https://${v.authDomain}/${Uu}`}(v)}?${(0,L.xO)(ue).slice(1)}`}const Ch="webStorageSupport",Th=class Sm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bo,this._completeRedirectFn=It,this._overrideRedirectResult=vh}_openPopup(p,_,b,x){var P=this;return(0,a.Z)(function*(){var K;Ze(null===(K=P.eventManagers[p._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const ue=Jc(p,_,b,yr(),x);return function Qc(v,p,_,b=bh,x=Tm){const P=Math.max((window.screen.availHeight-x)/2,0).toString(),K=Math.max((window.screen.availWidth-b)/2,0).toString();let ue="";const Oe=Object.assign(Object.assign({},wh),{width:b.toString(),height:x.toString(),top:P,left:K}),rt=(0,L.z$)().toLowerCase();_&&(ue=eo(rt)?_p:_),wr(rt)&&(p=p||Eh,Oe.scrollbars="yes");const St=Object.entries(Oe).reduce((Sr,[si,ud])=>`${Sr}${si}=${ud},`,"");if(function pa(v=(0,L.z$)()){var p;return ss(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(rt)&&"_self"!==ue)return function sv(v,p){const _=document.createElement("a");_.href=v,_.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(p||"",ue),new Tt(null);const Et=window.open(p||"",ue,St);H(Et,v,"popup-blocked");try{Et.focus()}catch{}return new Tt(Et)}(p,ue,jo())})()}_openRedirect(p,_,b,x){var P=this;return(0,a.Z)(function*(){return yield P._originValidation(p),function ml(v){Nn().location.href=v}(Jc(p,_,b,yr(),x)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:x,promise:P}=this.eventManagers[_];return x?Promise.resolve(x):(Ze(P,"If manager is not set, promise should be"),P)}const b=this.initAndGetManager(p);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(p){var _=this;return(0,a.Z)(function*(){const b=yield function _E(v){return Zo.apply(this,arguments)}(p),x=new hs(p);return b.register("authEvent",P=>(H(P?.authEvent,p,"invalid-auth-event"),{status:x.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:x},_.iframes[p._key()]=b,x})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(Ch,{type:Ch},x=>{var P;const K=null===(P=x?.[0])||void 0===P?void 0:P[Ch];void 0!==K&&_(!!K),De(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Al(v){return pp.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Jf()||Xt()||ss()}};class yE{constructor(p){this.factorId=p}_process(p,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,b);case"signin":return this._finalizeSignIn(p,_.credential);default:return Ce("unexpected MultiFactorSessionType")}}}class Ir extends yE{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Ir(p)}_finalizeEnroll(p,_,b){return function vm(v,p){return Wt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ye(v,p))}(p,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function dh(v,p){return Wt(v,"POST","/v2/accounts/mfaSignIn:finalize",Ye(v,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let tr=(()=>{class v{constructor(){}static assertion(_){return Ir._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var Rl="@firebase/auth";class Ih{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,a.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(b=>{var x;p((null===(x=b)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);_&&(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Va(){return window}!function Xc(v){(0,ae._registerComponent)(new we.wA("auth",(p,{options:_})=>{const b=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),{apiKey:P,authDomain:K}=b.options;return((ue,Oe)=>{H(P&&!P.includes(":"),"invalid-api-key",{appName:ue.name}),H(!K?.includes(":"),"argument-error",{appName:ue.name});const rt={apiKey:P,authDomain:K,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ga(v)},St=new Yd(ue,Oe,rt);return function Cn(v,p){const _=p?.persistence||[],b=(Array.isArray(_)?_:[_]).map(pt);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(b,p?.popupRedirectResolver)}(St,_),St})(b,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,b)=>{p.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new we.wA("auth-internal",p=>{const _=Ln(p.getProvider("auth").getImmediate());return new Ih(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Rl,"0.20.5",function Kr(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ae.registerVersion)(Rl,"0.20.5","esm2017")}("Browser");const Am=2e3;function Vu(){return Vu=(0,a.Z)(function*(v,p,_){var b;const{BuildInfo:x}=Va();Ze(p.sessionId,"AuthEvent did not contain a session ID");const P=yield function Nl(v){return ed.apply(this,arguments)}(p.sessionId),K={};return ss()?K.ibi=x.packageName:is()?K.apn=x.packageName:De(v,"operation-not-supported-in-this-environment"),x.displayName&&(K.appDisplayName=x.displayName),K.sessionId=P,Jc(v,_,p.type,void 0,null!==(b=p.eventId)&&void 0!==b?b:void 0,K)}),Vu.apply(this,arguments)}function qt(){return(qt=(0,a.Z)(function*(v){const{BuildInfo:p}=Va(),_={};ss()?_.iosBundleId=p.packageName:is()?_.androidPackageName=p.packageName:De(v,"operation-not-supported-in-this-environment"),yield lo(v,_)})).apply(this,arguments)}function Wo(){return(Wo=(0,a.Z)(function*(v,p,_){const{cordova:b}=Va();let x=()=>{};try{yield new Promise((P,K)=>{let ue=null;function Oe(){var Et;P();const Sr=null===(Et=b.plugins.browsertab)||void 0===Et?void 0:Et.close;"function"==typeof Sr&&Sr(),"function"==typeof _?.close&&_.close()}function rt(){ue||(ue=window.setTimeout(()=>{K(Te(v,"redirect-cancelled-by-user"))},Am))}function St(){"visible"===document?.visibilityState&&rt()}p.addPassiveListener(Oe),document.addEventListener("resume",rt,!1),is()&&document.addEventListener("visibilitychange",St,!1),x=()=>{p.removePassiveListener(Oe),document.removeEventListener("resume",rt,!1),document.removeEventListener("visibilitychange",St,!1),ue&&window.clearTimeout(ue)}})}finally{x()}})).apply(this,arguments)}function ed(){return(ed=(0,a.Z)(function*(v){const p=function td(v){if(Ze(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),_=new Uint8Array(p);for(let b=0;b<v.length;b++)_[b]=v.charCodeAt(b);return _}(v),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Sh=20;class nd extends hs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,a.Z)(function*(){yield p.initPromise})()}}function bp(v){return co.apply(this,arguments)}function co(){return(co=(0,a.Z)(function*(v){const p=yield Ah()._get(rd(v));return p&&(yield Ah()._remove(rd(v))),p})).apply(this,arguments)}function Ep(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<Sh;_++){const b=Math.floor(Math.random()*p.length);v.push(p.charAt(b))}return v.join("")}function Ah(){return pt(vu)}function rd(v){return wn("authEvent",v.config.apiKey,v.name)}function Ml(v){if(!v?.includes("?"))return{};const[p,..._]=v.split("?");return(0,L.zd)(_.join("?"))}const dv=class cv{constructor(){this._redirectPersistence=Bo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=It,this._overrideRedirectResult=vh}_initialize(p){var _=this;return(0,a.Z)(function*(){const b=p._key();let x=_.eventManagers.get(b);return x||(x=new nd(p),_.eventManagers.set(b,x),_.attachCallbackListeners(p,x)),x})()}_openPopup(p){De(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,b,x){var P=this;return(0,a.Z)(function*(){!function wp(v){var p,_,b,x,P,K,ue,Oe,rt,St;const Et=Va();H("function"==typeof(null===(p=Et?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),H(typeof(null===(_=Et?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),H("function"==typeof(null===(P=null===(x=null===(b=Et?.cordova)||void 0===b?void 0:b.plugins)||void 0===x?void 0:x.browsertab)||void 0===P?void 0:P.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(Oe=null===(ue=null===(K=Et?.cordova)||void 0===K?void 0:K.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Oe?void 0:Oe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(St=null===(rt=Et?.cordova)||void 0===rt?void 0:rt.InAppBrowser)||void 0===St?void 0:St.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const K=yield P._initialize(p);yield K.initialized(),K.resetRedirect(),function fp(){Ne.clear()}(),yield P._originValidation(p);const ue=function Dh(v,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:Ep(),postBody:null,tenantId:v.tenantId,error:Te(v,"no-auth-event")}}(p,b,x);yield function ju(v,p){return Ah()._set(rd(v),p)}(p,ue);const Oe=yield function vp(v,p,_){return Vu.apply(this,arguments)}(p,ue,_),rt=yield function Bu(v){const{cordova:p}=Va();return new Promise(_=>{p.plugins.browsertab.isAvailable(b=>{let x=null;b?p.plugins.browsertab.openUrl(v):x=p.InAppBrowser.open(v,function gm(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(x)})})}(Oe);return function ov(v,p,_){return Wo.apply(this,arguments)}(p,K,rt)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function zo(v){return qt.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:b,handleOpenURL:x,BuildInfo:P}=Va(),K=setTimeout((0,a.Z)(function*(){yield bp(p),_.onEvent(Cp())}),500),ue=function(){var St=(0,a.Z)(function*(Et){clearTimeout(K);const Sr=yield bp(p);let si=null;Sr&&Et?.url&&(si=function $u(v,p){var _,b;const x=function lv(v){const p=Ml(v),_=p.link?decodeURIComponent(p.link):void 0,b=Ml(_).link,x=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Ml(x).link||x||b||_||v}(p);if(x.includes("/__/auth/callback")){const P=Ml(x),K=P.firebaseError?function av(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,ue=null===(b=null===(_=K?.code)||void 0===_?void 0:_.split("auth/"))||void 0===b?void 0:b[1],Oe=ue?Te(ue):null;return Oe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Oe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:x,postBody:null}}return null}(Sr,Et.url)),_.onEvent(si||Cp())});return function(Sr){return St.apply(this,arguments)}}();typeof b<"u"&&"function"==typeof b.subscribe&&b.subscribe(null,ue);const Oe=x,rt=`${P.packageName.toLowerCase()}://`;Va().handleOpenURL=function(){var St=(0,a.Z)(function*(Et){if(Et.toLowerCase().startsWith(rt)&&ue({url:Et}),"function"==typeof Oe)try{Oe(Et)}catch(Sr){console.error(Sr)}});return function(Et){return St.apply(this,arguments)}}()}};function Cp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Te("no-auth-event")}}const hv=1e3;function Ls(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function xm(v=(0,L.z$)()){return!("file:"!==Ls()&&"ionic:"!==Ls()&&"capacitor:"!==Ls()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function sd(){try{const v=self.localStorage,p=jo();if(v)return v.setItem(p,"1"),v.removeItem(p),!function id(v=(0,L.z$)()){return function Ip(){return(0,L.w1)()&&11===document?.documentMode}()||function km(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch{return Us()&&(0,L.hl)()}return!1}function Us(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rh(){return(function kh(){return"http:"===Ls()||"https:"===Ls()}()||(0,L.ru)()||xm())&&!function Ba(){return(0,L.b$)()||(0,L.UG)()}()&&sd()&&!Us()}function Nh(){return xm()&&typeof document<"u"}function Ko(){return(Ko=(0,a.Z)(function*(){return!!Nh()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},hv);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const Ri={LOCAL:"local",NONE:"none",SESSION:"session"},Yo=H,od="persistence";function ho(v){return ad.apply(this,arguments)}function ad(){return(ad=(0,a.Z)(function*(v){yield v._initializationPromise;const p=qu(),_=wn(od,v.config.apiKey,v.name);p&&p.setItem(_,v._getPersistence())})).apply(this,arguments)}function qu(){var v;try{return(null===(v=function Dp(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Rm=H;class fo{constructor(){this.browserResolver=pt(Th),this.cordovaResolver=pt(dv),this.underlyingResolver=null,this._redirectPersistence=Bo,this._completeRedirectFn=It,this._overrideRedirectResult=vh}_initialize(p){var _=this;return(0,a.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,b,x){var P=this;return(0,a.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(p,_,b,x)})()}_openRedirect(p,_,b,x){var P=this;return(0,a.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(p,_,b,x)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Nh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Rm(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,a.Z)(function*(){if(p.underlyingResolver)return;const _=yield function Sp(){return Ko.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function Gu(v){return v.unwrap()}function Ap(v){return Zu(v)}function Zu(v){const{_tokenResponse:p}=v instanceof L.ZR?v.customData:v;if(!p)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return zc.credentialFromResult(v);const _=p.providerId;if(!_||_===pe.PASSWORD)return null;let b;switch(_){case pe.GOOGLE:b=ep;break;case pe.FACEBOOK:b=Dc;break;case pe.GITHUB:b=tp;break;case pe.TWITTER:b=_m;break;default:const{oauthIdToken:x,oauthAccessToken:P,oauthTokenSecret:K,pendingToken:ue,nonce:Oe}=p;return P||K||x||ue?ue?_.startsWith("saml.")?wa._create(_,ue):Ai._fromParams({providerId:_,signInMethod:_,pendingToken:ue,idToken:x,accessToken:P}):new sl(_).credential({idToken:x,accessToken:P,rawNonce:Oe}):null}return v instanceof L.ZR?b.credentialFromError(v):b.credentialFromResult(v)}function ur(v,p){return p.catch(_=>{throw _ instanceof L.ZR&&function ja(v,p){var _,b;const x=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(b=p)||void 0===b?void 0:b.code))p.resolver=new fv(v,function Or(v,p){var _;const b=(0,L.m9)(v),x=p;return H(p.customData.operationType,b,"argument-error"),H(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),Bc._fromError(b,x)}(v,p));else if(x){const P=Zu(p),K=p;P&&(K.credential=P,K.tenantId=x.tenantId||void 0,K.email=x.email||void 0,K.phoneNumber=x.phoneNumber||void 0)}}(v,_),_}).then(_=>{const x=_.user;return{operationType:_.operationType,credential:Ap(_),additionalUserInfo:ip(_),user:Qo.getOrCreate(x)}})}function Pl(v,p){return $a.apply(this,arguments)}function $a(){return($a=(0,a.Z)(function*(v,p){const _=yield p;return{verificationId:_.verificationId,confirm:b=>ur(v,_.confirm(b))}})).apply(this,arguments)}class fv{constructor(p,_){this.resolver=_,this.auth=function po(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return ur(Gu(this.auth),this.resolver.resolveSignIn(p))}}class Qo{constructor(p){this._delegate=p,this.multiFactor=function jc(v){const p=(0,L.m9)(v);return Vo.has(p)||Vo.set(p,hl._fromUser(p)),Vo.get(p)}(p)}static getOrCreate(p){return Qo.USER_MAP.has(p)||Qo.USER_MAP.set(p,new Qo(p)),Qo.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,a.Z)(function*(){return ur(_.auth,qn(_._delegate,p))})()}linkWithPhoneNumber(p,_){var b=this;return(0,a.Z)(function*(){return Pl(b.auth,function Em(v,p,_){return xu.apply(this,arguments)}(b._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,a.Z)(function*(){return ur(_.auth,function Cm(v,p,_){return ii.apply(this,arguments)}(_._delegate,p,fo))})()}linkWithRedirect(p){var _=this;return(0,a.Z)(function*(){return yield ho(Ln(_.auth)),J(_._delegate,p,fo)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,a.Z)(function*(){return ur(_.auth,Fo(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return Pl(this.auth,function up(v,p,_){return cp.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return ur(this.auth,function _h(v,p,_){return yh.apply(this,arguments)}(this._delegate,p,fo))}reauthenticateWithRedirect(p){var _=this;return(0,a.Z)(function*(){return yield ho(Ln(_.auth)),D(_._delegate,p,fo)})()}sendEmailVerification(p){return function nh(v,p){return Fc.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,a.Z)(function*(){return yield function au(v,p){return ba.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function rh(v,p){return ih((0,L.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function dl(v,p){return ih((0,L.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function ku(v,p){return hp.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Uo(v,p){return ls.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function _u(v,p,_){return ar.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qo.USER_MAP=new WeakMap;const Ph=H;let Nm=(()=>{class v{constructor(_,b){if(this.app=_,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=_.options;Ph(x,"invalid-api-key",{appName:_.name}),Ph(x,"invalid-api-key",{appName:_.name});const P=typeof window<"u"?fo:void 0;this._delegate=b.initialize({options:{persistence:pv(x,_.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,b){!function ln(v,p,_){const b=Ln(v);H(b._canInitEmulator,b,"emulator-config-failed"),H(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const x=!!_?.disableWarnings,P=Qn(p),{host:K,port:ue}=function br(v){const p=Qn(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(b);if(x){const P=x[1];return{host:P,port:Is(b.substr(P.length+1))}}{const[P,K]=b.split(":");return{host:P,port:Is(K)}}}(p);b.config.emulator={url:`${P}//${K}${null===ue?"":`:${ue}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:K,port:ue,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Hr(){function v(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,b)}applyActionCode(_){return function du(v,p){return eh.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return hu(this._delegate,_)}confirmPasswordReset(_,b){return function ul(v,p,_){return Mt.apply(this,arguments)}(this._delegate,_,b)}createUserWithEmailAndPassword(_,b){var x=this;return(0,a.Z)(function*(){return ur(x._delegate,function np(v,p,_){return Pc.apply(this,arguments)}(x._delegate,_,b))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function gu(v,p){return mu.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function th(v,p){return"EMAIL_SIGNIN"===il.parseLink(p)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,a.Z)(function*(){Ph(Rh(),_._delegate,"operation-not-supported-in-this-environment");const b=yield function Qe(v,p){return bt.apply(this,arguments)}(_._delegate,fo);return b?ur(_._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Tp(v,p){Ln(v)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,b,x){const{next:P,error:K,complete:ue}=Oh(_,b,x);return this._delegate.onAuthStateChanged(P,K,ue)}onIdTokenChanged(_,b,x){const{next:P,error:K,complete:ue}=Oh(_,b,x);return this._delegate.onIdTokenChanged(P,K,ue)}sendSignInLinkToEmail(_,b){return function nn(v,p,_){return Oc.apply(this,arguments)}(this._delegate,_,b)}sendPasswordResetEmail(_,b){return function xs(v,p,_){return ll.apply(this,arguments)}(this._delegate,_,b||void 0)}setPersistence(_){var b=this;return(0,a.Z)(function*(){let x;switch(function Mh(v,p){Yo(Object.values(Ri).includes(p),v,"invalid-persistence-type"),(0,L.b$)()?Yo(p!==Ri.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?Yo(p===Ri.NONE,v,"unsupported-persistence-type"):Us()?Yo(p===Ri.NONE||p===Ri.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):Yo(p===Ri.NONE||sd(),v,"unsupported-persistence-type")}(b._delegate,_),_){case Ri.SESSION:x=Bo;break;case Ri.LOCAL:x=(yield pt($o)._isAvailable())?$o:vu;break;case Ri.NONE:x=cn;break;default:return De("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return ur(this._delegate,function Xd(v){return No.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return ur(this._delegate,Un(this._delegate,_))}signInWithCustomToken(_){return ur(this._delegate,function Lo(v,p){return or.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,b){return ur(this._delegate,function ve(v,p,_){return Un((0,L.m9)(v),Sc.credential(p,_))}(this._delegate,_,b))}signInWithEmailLink(_,b){return ur(this._delegate,function Pr(v,p,_){return cl.apply(this,arguments)}(this._delegate,_,b))}signInWithPhoneNumber(_,b){return Pl(this._delegate,function tn(v,p,_){return Zc.apply(this,arguments)}(this._delegate,_,b))}signInWithPopup(_){var b=this;return(0,a.Z)(function*(){return Ph(Rh(),b._delegate,"operation-not-supported-in-this-environment"),ur(b._delegate,function Fa(v,p,_){return Pu.apply(this,arguments)}(b._delegate,_,fo))})()}signInWithRedirect(_){var b=this;return(0,a.Z)(function*(){return Ph(Rh(),b._delegate,"operation-not-supported-in-this-environment"),yield ho(b._delegate),Ou(b._delegate,_,fo)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Mc(v,p){return fu.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ri,v})();function Oh(v,p,_){let b=v;"function"!=typeof v&&({next:b,error:p,complete:_}=v);const x=b;return{next:K=>x(K&&Qo.getOrCreate(K)),error:p,complete:_}}function pv(v,p){const _=function ld(v,p){const _=qu();if(!_)return[];const b=wn(od,v,p);switch(_.getItem(b)){case Ri.NONE:return[cn];case Ri.LOCAL:return[$o,Bo];case Ri.SESSION:return[Bo];default:return[]}}(v,p);if(typeof self<"u"&&!_.includes($o)&&_.push($o),typeof window<"u")for(const b of[vu,Bo])_.includes(b)||_.push(b);return _.includes(cn)||_.push(cn),_}class Fh{constructor(){this.providerId="phone",this._delegate=new zc(Gu(te.Z.auth()))}static credential(p,_){return zc.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}Fh.PHONE_SIGN_IN_METHOD=zc.PHONE_SIGN_IN_METHOD,Fh.PROVIDER_ID=zc.PROVIDER_ID;const Lh=H;class xp{constructor(p,_,b=te.Z.app()){var x;Lh(null===(x=b.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new Tl(p,_,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function kp(v){v.INTERNAL.registerComponent(new we.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),b=p.getProvider("auth");return new Nm(_,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:X_EMAIL_SIGNIN,PASSWORD_RESET:X_PASSWORD_RESET,RECOVER_EMAIL:X_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:X_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:X_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:X_VERIFY_EMAIL}},EmailAuthProvider:Sc,FacebookAuthProvider:Dc,GithubAuthProvider:tp,GoogleAuthProvider:ep,OAuthProvider:sl,SAMLAuthProvider:as,PhoneAuthProvider:Fh,PhoneMultiFactorGenerator:tr,RecaptchaVerifier:xp,TwitterAuthProvider:_m,Auth:Nm,AuthCredential:Do,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.18")}(te.Z)},9751:(ft,Ie,U)=>{U.d(Ie,{y:()=>ge});var a=U(930),te=U(727),L=U(8822),ae=U(9635),se=U(2416),ie=U(576),we=U(2806);let ge=(()=>{class X{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const Ke=new X;return Ke.source=this,Ke.operator=Ae,Ke}subscribe(Ae,Ke,at){const _e=function q(X){return X&&X instanceof a.Lv||function G(X){return X&&(0,ie.m)(X.next)&&(0,ie.m)(X.error)&&(0,ie.m)(X.complete)}(X)&&(0,te.Nn)(X)}(Ae)?Ae:new a.Hp(Ae,Ke,at);return(0,we.x)(()=>{const{operator:ke,source:xe}=this;_e.add(ke?ke.call(_e,xe):xe?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(Ke){Ae.error(Ke)}}forEach(Ae,Ke){return new(Ke=pe(Ke))((at,_e)=>{const ke=new a.Hp({next:xe=>{try{Ae(xe)}catch(Be){_e(Be),ke.unsubscribe()}},error:_e,complete:at});this.subscribe(ke)})}_subscribe(Ae){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(Ae)}[L.L](){return this}pipe(...Ae){return(0,ae.U)(Ae)(this)}toPromise(Ae){return new(Ae=pe(Ae))((Ke,at)=>{let _e;this.subscribe(ke=>_e=ke,ke=>at(ke),()=>Ke(_e))})}}return X.create=ze=>new X(ze),X})();function pe(X){var ze;return null!==(ze=X??se.v.Promise)&&void 0!==ze?ze:Promise}},7579:(ft,Ie,U)=>{U.d(Ie,{x:()=>we});var a=U(9751),te=U(727);const ae=(0,U(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=U(8737),ie=U(2806);let we=(()=>{class pe extends a.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const X=new ge(this,this);return X.operator=q,X}_throwIfClosed(){if(this.closed)throw new ae}next(q){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(q)}})}error(q){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:X}=this;for(;X.length;)X.shift().error(q)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:X,isStopped:ze,observers:Ae}=this;return X||ze?te.Lc:(this.currentObservers=null,Ae.push(q),new te.w0(()=>{this.currentObservers=null,(0,se.P)(Ae,q)}))}_checkFinalizedStatuses(q){const{hasError:X,thrownError:ze,isStopped:Ae}=this;X?q.error(ze):Ae&&q.complete()}asObservable(){const q=new a.y;return q.source=this,q}}return pe.create=(G,q)=>new ge(G,q),pe})();class ge extends we{constructor(G,q){super(),this.destination=G,this.source=q}next(G){var q,X;null===(X=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===X||X.call(q,G)}error(G){var q,X;null===(X=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===X||X.call(q,G)}complete(){var G,q;null===(q=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===q||q.call(G)}_subscribe(G){var q,X;return null!==(X=null===(q=this.source)||void 0===q?void 0:q.subscribe(G))&&void 0!==X?X:te.Lc}}},930:(ft,Ie,U)=>{U.d(Ie,{Hp:()=>at,Lv:()=>X});var a=U(576),te=U(727),L=U(2416),ae=U(7849),se=U(5032);const ie=pe("C",void 0,void 0);function pe(De,Te,Re){return{kind:De,value:Te,error:Re}}var G=U(3410),q=U(2806);class X extends te.w0{constructor(Te){super(),this.isStopped=!1,Te?(this.destination=Te,(0,te.Nn)(Te)&&Te.add(this)):this.destination=Be}static create(Te,Re,qe){return new at(Te,Re,qe)}next(Te){this.isStopped?xe(function ge(De){return pe("N",De,void 0)}(Te),this):this._next(Te)}error(Te){this.isStopped?xe(function we(De){return pe("E",void 0,De)}(Te),this):(this.isStopped=!0,this._error(Te))}complete(){this.isStopped?xe(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Te){this.destination.next(Te)}_error(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Ae(De,Te){return ze.call(De,Te)}class Ke{constructor(Te){this.partialObserver=Te}next(Te){const{partialObserver:Re}=this;if(Re.next)try{Re.next(Te)}catch(qe){_e(qe)}}error(Te){const{partialObserver:Re}=this;if(Re.error)try{Re.error(Te)}catch(qe){_e(qe)}else _e(Te)}complete(){const{partialObserver:Te}=this;if(Te.complete)try{Te.complete()}catch(Re){_e(Re)}}}class at extends X{constructor(Te,Re,qe){let Ue;if(super(),(0,a.m)(Te)||!Te)Ue={next:Te??void 0,error:Re??void 0,complete:qe??void 0};else{let H;this&&L.v.useDeprecatedNextContext?(H=Object.create(Te),H.unsubscribe=()=>this.unsubscribe(),Ue={next:Te.next&&Ae(Te.next,H),error:Te.error&&Ae(Te.error,H),complete:Te.complete&&Ae(Te.complete,H)}):Ue=Te}this.destination=new Ke(Ue)}}function _e(De){L.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(De):(0,ae.h)(De)}function xe(De,Te){const{onStoppedNotification:Re}=L.v;Re&&G.z.setTimeout(()=>Re(De,Te))}const Be={closed:!0,next:se.Z,error:function ke(De){throw De},complete:se.Z}},727:(ft,Ie,U)=>{U.d(Ie,{Lc:()=>ie,w0:()=>se,Nn:()=>we});var a=U(576);const L=(0,U(3888).d)(pe=>function(q){pe(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((X,ze)=>`${ze+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var ae=U(8737);class se{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Ae of q)Ae.remove(this);else q.remove(this);const{initialTeardown:X}=this;if((0,a.m)(X))try{X()}catch(Ae){G=Ae instanceof L?Ae.errors:[Ae]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Ae of ze)try{ge(Ae)}catch(Ke){G=G??[],Ke instanceof L?G=[...G,...Ke.errors]:G.push(Ke)}}if(G)throw new L(G)}}add(G){var q;if(G&&G!==this)if(this.closed)ge(G);else{if(G instanceof se){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(G)}}_hasParent(G){const{_parentage:q}=this;return q===G||Array.isArray(q)&&q.includes(G)}_addParent(G){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(G),q):q?[q,G]:G}_removeParent(G){const{_parentage:q}=this;q===G?this._parentage=null:Array.isArray(q)&&(0,ae.P)(q,G)}remove(G){const{_finalizers:q}=this;q&&(0,ae.P)(q,G),G instanceof se&&G._removeParent(this)}}se.EMPTY=(()=>{const pe=new se;return pe.closed=!0,pe})();const ie=se.EMPTY;function we(pe){return pe instanceof se||pe&&"closed"in pe&&(0,a.m)(pe.remove)&&(0,a.m)(pe.add)&&(0,a.m)(pe.unsubscribe)}function ge(pe){(0,a.m)(pe)?pe():pe.unsubscribe()}},2416:(ft,Ie,U)=>{U.d(Ie,{v:()=>a});const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ft,Ie,U)=>{U.d(Ie,{E:()=>te});const te=new(U(9751).y)(se=>se.complete())},8996:(ft,Ie,U)=>{U.d(Ie,{D:()=>Te});var a=U(8421),te=U(5363),L=U(9468),ie=U(9751),ge=U(2202),pe=U(576),G=U(9672);function X(Re,qe){if(!Re)throw new Error("Iterable cannot be null");return new ie.y(Ue=>{(0,G.f)(Ue,qe,()=>{const H=Re[Symbol.asyncIterator]();(0,G.f)(Ue,qe,()=>{H.next().then(Ce=>{Ce.done?Ue.complete():Ue.next(Ce.value)})},0,!0)})})}var ze=U(3670),Ae=U(8239),Ke=U(1144),at=U(6495),_e=U(2206),ke=U(4532),xe=U(3260);function Te(Re,qe){return qe?function De(Re,qe){if(null!=Re){if((0,ze.c)(Re))return function ae(Re,qe){return(0,a.Xf)(Re).pipe((0,L.R)(qe),(0,te.Q)(qe))}(Re,qe);if((0,Ke.z)(Re))return function we(Re,qe){return new ie.y(Ue=>{let H=0;return qe.schedule(function(){H===Re.length?Ue.complete():(Ue.next(Re[H++]),Ue.closed||this.schedule())})})}(Re,qe);if((0,Ae.t)(Re))return function se(Re,qe){return(0,a.Xf)(Re).pipe((0,L.R)(qe),(0,te.Q)(qe))}(Re,qe);if((0,_e.D)(Re))return X(Re,qe);if((0,at.T)(Re))return function q(Re,qe){return new ie.y(Ue=>{let H;return(0,G.f)(Ue,qe,()=>{H=Re[ge.h](),(0,G.f)(Ue,qe,()=>{let Ce,Ze;try{({value:Ce,done:Ze}=H.next())}catch(Je){return void Ue.error(Je)}Ze?Ue.complete():Ue.next(Ce)},0,!0)}),()=>(0,pe.m)(H?.return)&&H.return()})}(Re,qe);if((0,xe.L)(Re))return function Be(Re,qe){return X((0,xe.Q)(Re),qe)}(Re,qe)}throw(0,ke.z)(Re)}(Re,qe):(0,a.Xf)(Re)}},8421:(ft,Ie,U)=>{U.d(Ie,{Xf:()=>ze});var a=U(7582),te=U(1144),L=U(8239),ae=U(9751),se=U(3670),ie=U(2206),we=U(4532),ge=U(6495),pe=U(3260),G=U(576),q=U(7849),X=U(8822);function ze(De){if(De instanceof ae.y)return De;if(null!=De){if((0,se.c)(De))return function Ae(De){return new ae.y(Te=>{const Re=De[X.L]();if((0,G.m)(Re.subscribe))return Re.subscribe(Te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,te.z)(De))return function Ke(De){return new ae.y(Te=>{for(let Re=0;Re<De.length&&!Te.closed;Re++)Te.next(De[Re]);Te.complete()})}(De);if((0,L.t)(De))return function at(De){return new ae.y(Te=>{De.then(Re=>{Te.closed||(Te.next(Re),Te.complete())},Re=>Te.error(Re)).then(null,q.h)})}(De);if((0,ie.D)(De))return ke(De);if((0,ge.T)(De))return function _e(De){return new ae.y(Te=>{for(const Re of De)if(Te.next(Re),Te.closed)return;Te.complete()})}(De);if((0,pe.L)(De))return function xe(De){return ke((0,pe.Q)(De))}(De)}throw(0,we.z)(De)}function ke(De){return new ae.y(Te=>{(function Be(De,Te){var Re,qe,Ue,H;return(0,a.mG)(this,void 0,void 0,function*(){try{for(Re=(0,a.KL)(De);!(qe=yield Re.next()).done;)if(Te.next(qe.value),Te.closed)return}catch(Ce){Ue={error:Ce}}finally{try{qe&&!qe.done&&(H=Re.return)&&(yield H.call(Re))}finally{if(Ue)throw Ue.error}}Te.complete()})})(De,Te).catch(Re=>Te.error(Re))})}},6451:(ft,Ie,U)=>{U.d(Ie,{T:()=>ie});var a=U(8189),te=U(8421),L=U(515),ae=U(3269),se=U(8996);function ie(...we){const ge=(0,ae.yG)(we),pe=(0,ae._6)(we,1/0),G=we;return G.length?1===G.length?(0,te.Xf)(G[0]):(0,a.J)(pe)((0,se.D)(G,ge)):L.E}},5403:(ft,Ie,U)=>{U.d(Ie,{x:()=>te});var a=U(930);function te(ae,se,ie,we,ge){return new L(ae,se,ie,we,ge)}class L extends a.Lv{constructor(se,ie,we,ge,pe,G){super(se),this.onFinalize=pe,this.shouldUnsubscribe=G,this._next=ie?function(q){try{ie(q)}catch(X){se.error(X)}}:super._next,this._error=ge?function(q){try{ge(q)}catch(X){se.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(q){se.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(ft,Ie,U)=>{U.d(Ie,{U:()=>L});var a=U(4482),te=U(5403);function L(ae,se){return(0,a.e)((ie,we)=>{let ge=0;ie.subscribe((0,te.x)(we,pe=>{we.next(ae.call(se,pe,ge++))}))})}},8189:(ft,Ie,U)=>{U.d(Ie,{J:()=>L});var a=U(5577),te=U(4671);function L(ae=1/0){return(0,a.z)(te.y,ae)}},5577:(ft,Ie,U)=>{U.d(Ie,{z:()=>ge});var a=U(4004),te=U(8421),L=U(4482),ae=U(9672),se=U(5403),we=U(576);function ge(pe,G,q=1/0){return(0,we.m)(G)?ge((X,ze)=>(0,a.U)((Ae,Ke)=>G(X,Ae,ze,Ke))((0,te.Xf)(pe(X,ze))),q):("number"==typeof G&&(q=G),(0,L.e)((X,ze)=>function ie(pe,G,q,X,ze,Ae,Ke,at){const _e=[];let ke=0,xe=0,Be=!1;const De=()=>{Be&&!_e.length&&!ke&&G.complete()},Te=qe=>ke<X?Re(qe):_e.push(qe),Re=qe=>{Ae&&G.next(qe),ke++;let Ue=!1;(0,te.Xf)(q(qe,xe++)).subscribe((0,se.x)(G,H=>{ze?.(H),Ae?Te(H):G.next(H)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(ke--;_e.length&&ke<X;){const H=_e.shift();Ke?(0,ae.f)(G,Ke,()=>Re(H)):Re(H)}De()}catch(H){G.error(H)}}))};return pe.subscribe((0,se.x)(G,Te,()=>{Be=!0,De()})),()=>{at?.()}}(X,ze,pe,q)))}},5363:(ft,Ie,U)=>{U.d(Ie,{Q:()=>ae});var a=U(9672),te=U(4482),L=U(5403);function ae(se,ie=0){return(0,te.e)((we,ge)=>{we.subscribe((0,L.x)(ge,pe=>(0,a.f)(ge,se,()=>ge.next(pe),ie),()=>(0,a.f)(ge,se,()=>ge.complete(),ie),pe=>(0,a.f)(ge,se,()=>ge.error(pe),ie)))})}},3099:(ft,Ie,U)=>{U.d(Ie,{B:()=>se});var a=U(8421),te=U(7579),L=U(930),ae=U(4482);function se(we={}){const{connector:ge=(()=>new te.x),resetOnError:pe=!0,resetOnComplete:G=!0,resetOnRefCountZero:q=!0}=we;return X=>{let ze,Ae,Ke,at=0,_e=!1,ke=!1;const xe=()=>{Ae?.unsubscribe(),Ae=void 0},Be=()=>{xe(),ze=Ke=void 0,_e=ke=!1},De=()=>{const Te=ze;Be(),Te?.unsubscribe()};return(0,ae.e)((Te,Re)=>{at++,!ke&&!_e&&xe();const qe=Ke=Ke??ge();Re.add(()=>{at--,0===at&&!ke&&!_e&&(Ae=ie(De,q))}),qe.subscribe(Re),!ze&&at>0&&(ze=new L.Hp({next:Ue=>qe.next(Ue),error:Ue=>{ke=!0,xe(),Ae=ie(Be,pe,Ue),qe.error(Ue)},complete:()=>{_e=!0,xe(),Ae=ie(Be,G),qe.complete()}}),(0,a.Xf)(Te).subscribe(ze))})(X)}}function ie(we,ge,...pe){if(!0===ge)return void we();if(!1===ge)return;const G=new L.Hp({next:()=>{G.unsubscribe(),we()}});return(0,a.Xf)(ge(...pe)).subscribe(G)}},9468:(ft,Ie,U)=>{U.d(Ie,{R:()=>te});var a=U(4482);function te(L,ae=0){return(0,a.e)((se,ie)=>{ie.add(L.schedule(()=>se.subscribe(ie),ae))})}},8505:(ft,Ie,U)=>{U.d(Ie,{b:()=>se});var a=U(576),te=U(4482),L=U(5403),ae=U(4671);function se(ie,we,ge){const pe=(0,a.m)(ie)||we||ge?{next:ie,error:we,complete:ge}:ie;return pe?(0,te.e)((G,q)=>{var X;null===(X=pe.subscribe)||void 0===X||X.call(pe);let ze=!0;G.subscribe((0,L.x)(q,Ae=>{var Ke;null===(Ke=pe.next)||void 0===Ke||Ke.call(pe,Ae),q.next(Ae)},()=>{var Ae;ze=!1,null===(Ae=pe.complete)||void 0===Ae||Ae.call(pe),q.complete()},Ae=>{var Ke;ze=!1,null===(Ke=pe.error)||void 0===Ke||Ke.call(pe,Ae),q.error(Ae)},()=>{var Ae,Ke;ze&&(null===(Ae=pe.unsubscribe)||void 0===Ae||Ae.call(pe)),null===(Ke=pe.finalize)||void 0===Ke||Ke.call(pe)}))}):ae.y}},4408:(ft,Ie,U)=>{U.d(Ie,{o:()=>se});var a=U(727);class te extends a.w0{constructor(we,ge){super()}schedule(we,ge=0){return this}}const L={setInterval(ie,we,...ge){const{delegate:pe}=L;return pe?.setInterval?pe.setInterval(ie,we,...ge):setInterval(ie,we,...ge)},clearInterval(ie){const{delegate:we}=L;return(we?.clearInterval||clearInterval)(ie)},delegate:void 0};var ae=U(8737);class se extends te{constructor(we,ge){super(we,ge),this.scheduler=we,this.work=ge,this.pending=!1}schedule(we,ge=0){var pe;if(this.closed)return this;this.state=we;const G=this.id,q=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(q,G,ge)),this.pending=!0,this.delay=ge,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(q,this.id,ge),this}requestAsyncId(we,ge,pe=0){return L.setInterval(we.flush.bind(we,this),pe)}recycleAsyncId(we,ge,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return ge;null!=ge&&L.clearInterval(ge)}execute(we,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(we,ge);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(we,ge){let G,pe=!1;try{this.work(we)}catch(q){pe=!0,G=q||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:we,scheduler:ge}=this,{actions:pe}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(pe,this),null!=we&&(this.id=this.recycleAsyncId(ge,we,null)),this.delay=null,super.unsubscribe()}}}},7565:(ft,Ie,U)=>{U.d(Ie,{v:()=>L});var a=U(6063);class te{constructor(se,ie=te.now){this.schedulerActionCtor=se,this.now=ie}schedule(se,ie=0,we){return new this.schedulerActionCtor(this,se).schedule(we,ie)}}te.now=a.l.now;class L extends te{constructor(se,ie=te.now){super(se,ie),this.actions=[],this._active=!1}flush(se){const{actions:ie}=this;if(this._active)return void ie.push(se);let we;this._active=!0;do{if(we=se.execute(se.state,se.delay))break}while(se=ie.shift());if(this._active=!1,we){for(;se=ie.shift();)se.unsubscribe();throw we}}}},4986:(ft,Ie,U)=>{U.d(Ie,{P:()=>ae,z:()=>L});var a=U(4408);const L=new(U(7565).v)(a.o),ae=L},6063:(ft,Ie,U)=>{U.d(Ie,{l:()=>a});const a={now:()=>(a.delegate||Date).now(),delegate:void 0}},3410:(ft,Ie,U)=>{U.d(Ie,{z:()=>a});const a={setTimeout(te,L,...ae){const{delegate:se}=a;return se?.setTimeout?se.setTimeout(te,L,...ae):setTimeout(te,L,...ae)},clearTimeout(te){const{delegate:L}=a;return(L?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(ft,Ie,U)=>{U.d(Ie,{h:()=>te});const te=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ft,Ie,U)=>{U.d(Ie,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ft,Ie,U)=>{U.d(Ie,{_6:()=>ie,jO:()=>ae,yG:()=>se});var a=U(576),te=U(3532);function L(we){return we[we.length-1]}function ae(we){return(0,a.m)(L(we))?we.pop():void 0}function se(we){return(0,te.K)(L(we))?we.pop():void 0}function ie(we,ge){return"number"==typeof L(we)?we.pop():ge}},8737:(ft,Ie,U)=>{function a(te,L){if(te){const ae=te.indexOf(L);0<=ae&&te.splice(ae,1)}}U.d(Ie,{P:()=>a})},3888:(ft,Ie,U)=>{function a(te){const ae=te(se=>{Error.call(se),se.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}U.d(Ie,{d:()=>a})},2806:(ft,Ie,U)=>{U.d(Ie,{O:()=>ae,x:()=>L});var a=U(2416);let te=null;function L(se){if(a.v.useDeprecatedSynchronousErrorHandling){const ie=!te;if(ie&&(te={errorThrown:!1,error:null}),se(),ie){const{errorThrown:we,error:ge}=te;if(te=null,we)throw ge}}else se()}function ae(se){a.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=se)}},9672:(ft,Ie,U)=>{function a(te,L,ae,se=0,ie=!1){const we=L.schedule(function(){ae(),ie?te.add(this.schedule(null,se)):this.unsubscribe()},se);if(te.add(we),!ie)return we}U.d(Ie,{f:()=>a})},4671:(ft,Ie,U)=>{function a(te){return te}U.d(Ie,{y:()=>a})},1144:(ft,Ie,U)=>{U.d(Ie,{z:()=>a});const a=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(ft,Ie,U)=>{U.d(Ie,{D:()=>te});var a=U(576);function te(L){return Symbol.asyncIterator&&(0,a.m)(L?.[Symbol.asyncIterator])}},576:(ft,Ie,U)=>{function a(te){return"function"==typeof te}U.d(Ie,{m:()=>a})},3670:(ft,Ie,U)=>{U.d(Ie,{c:()=>L});var a=U(8822),te=U(576);function L(ae){return(0,te.m)(ae[a.L])}},6495:(ft,Ie,U)=>{U.d(Ie,{T:()=>L});var a=U(2202),te=U(576);function L(ae){return(0,te.m)(ae?.[a.h])}},8239:(ft,Ie,U)=>{U.d(Ie,{t:()=>te});var a=U(576);function te(L){return(0,a.m)(L?.then)}},3260:(ft,Ie,U)=>{U.d(Ie,{L:()=>ae,Q:()=>L});var a=U(7582),te=U(576);function L(se){return(0,a.FC)(this,arguments,function*(){const we=se.getReader();try{for(;;){const{value:ge,done:pe}=yield(0,a.qq)(we.read());if(pe)return yield(0,a.qq)(void 0);yield yield(0,a.qq)(ge)}}finally{we.releaseLock()}})}function ae(se){return(0,te.m)(se?.getReader)}},3532:(ft,Ie,U)=>{U.d(Ie,{K:()=>te});var a=U(576);function te(L){return L&&(0,a.m)(L.schedule)}},4482:(ft,Ie,U)=>{U.d(Ie,{A:()=>te,e:()=>L});var a=U(576);function te(ae){return(0,a.m)(ae?.lift)}function L(ae){return se=>{if(te(se))return se.lift(function(ie){try{return ae(ie,this)}catch(we){this.error(we)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ft,Ie,U)=>{function a(){}U.d(Ie,{Z:()=>a})},9635:(ft,Ie,U)=>{U.d(Ie,{U:()=>L,z:()=>te});var a=U(4671);function te(...ae){return L(ae)}function L(ae){return 0===ae.length?a.y:1===ae.length?ae[0]:function(ie){return ae.reduce((we,ge)=>ge(we),ie)}}},7849:(ft,Ie,U)=>{U.d(Ie,{h:()=>L});var a=U(2416),te=U(3410);function L(ae){te.z.setTimeout(()=>{const{onUnhandledError:se}=a.v;if(!se)throw ae;se(ae)})}},4532:(ft,Ie,U)=>{function a(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ie,{z:()=>a})},4650:(ft,Ie,U)=>{U.d(Ie,{$8M:()=>Du,$WT:()=>Is,$Z:()=>XE,AFp:()=>d0,ALo:()=>Kw,AaK:()=>ge,AsE:()=>C_,BQk:()=>d_,CHM:()=>Oc,CRH:()=>t0,CZH:()=>Q_,CqO:()=>Ju,D6c:()=>wf,EJc:()=>X_,EiD:()=>uA,EpF:()=>RC,F$t:()=>p_,F4k:()=>NC,FYo:()=>xv,FiY:()=>Fu,GfV:()=>NE,Gpc:()=>q,Hsn:()=>LC,JOm:()=>Tt,JVY:()=>St,JZr:()=>at,KtG:()=>th,L6k:()=>Et,LAX:()=>si,LFG:()=>$,Lbi:()=>hI,Lck:()=>vk,MMx:()=>Hw,MR2:()=>fA,NdJ:()=>eg,OlP:()=>tn,Oqu:()=>b_,P3R:()=>CE,PXZ:()=>_R,Q6J:()=>sf,QGY:()=>tw,QbO:()=>nR,Qsj:()=>bA,R0b:()=>Jr,RDi:()=>pv,Rgc:()=>j_,SBq:()=>Zh,Sil:()=>fI,Suo:()=>yg,TTD:()=>au,TgZ:()=>Jp,Tol:()=>cw,Udp:()=>lw,X6Q:()=>IR,XFs:()=>gt,Xpm:()=>pa,Xts:()=>vv,Y36:()=>Qh,YKP:()=>jw,YNc:()=>DC,Yjl:()=>Ec,Yz7:()=>Ye,Z0I:()=>on,ZZ4:()=>I0,_Bn:()=>Bw,_UZ:()=>Xp,_Vd:()=>Gh,_c5:()=>PI,_uU:()=>og,aQg:()=>iy,c2e:()=>rR,cJS:()=>Ct,cg1:()=>S_,d8E:()=>T_,dDg:()=>BF,dqk:()=>pn,eBb:()=>Sr,eFA:()=>bI,eJc:()=>JT,ekj:()=>uw,eoX:()=>hR,f3M:()=>Z,g9A:()=>dI,h0i:()=>df,hGG:()=>vf,hij:()=>E_,iGM:()=>H_,ifc:()=>Hn,ip1:()=>Ci,jDz:()=>xT,kL8:()=>fT,lG2:()=>Ln,lcZ:()=>kk,lqb:()=>dd,lri:()=>cR,mCW:()=>Ol,n5z:()=>fh,oAB:()=>ga,oJD:()=>wE,oxw:()=>FC,pB0:()=>ud,q3G:()=>nr,q4F:()=>ME,qLn:()=>Up,qOj:()=>s_,qZA:()=>u_,qzn:()=>Oe,rWj:()=>dR,sBO:()=>SR,s_b:()=>vo,soG:()=>J_,tb:()=>pR,tp0:()=>D,uIk:()=>_d,vHH:()=>_e,vpe:()=>zl,wAp:()=>Dt,xp6:()=>qE,ynx:()=>c_,z2F:()=>Ya,z3N:()=>ue,zSh:()=>Wu,zs3:()=>Wh});var a=U(7579),te=U(727),L=U(9751),ae=U(6451),se=U(3099);function ie(o){for(let l in o)if(o[l]===ie)return l;throw Error("Could not find renamed property on target object.")}function we(o,l){for(const c in l)l.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=l[c])}function ge(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ge).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const l=o.toString();if(null==l)return""+l;const c=l.indexOf("\n");return-1===c?l:l.substring(0,c)}function pe(o,l){return null==o||""===o?null===l?"":l:null==l||""===l?o:o+" "+l}const G=ie({__forward_ref__:ie});function q(o){return o.__forward_ref__=q,o.toString=function(){return ge(this())},o}function X(o){return ze(o)?o():o}function ze(o){return"function"==typeof o&&o.hasOwnProperty(G)&&o.__forward_ref__===q}function Ae(o){return o&&!!o.\u0275providers}const at="https://g.co/ng/security#xss";class _e extends Error{constructor(l,c){super(ke(l,c)),this.code=l}}function ke(o,l){return`NG0${Math.abs(o)}${l?": "+l.trim():""}`}function xe(o){return"string"==typeof o?o:null==o?"":String(o)}function qe(o,l){throw new _e(-201,!1)}function de(o,l){null==o&&function re(o,l,c,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${c} ${d} ${l} <=Actual]`))}(l,o,null,"!=")}function Ye(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Ct(o){return{providers:o.providers||[],imports:o.imports||[]}}function Kt(o){return en(o,An)||en(o,di)}function on(o){return null!==Kt(o)}function en(o,l){return o.hasOwnProperty(l)?o[l]:null}function vr(o){return o&&(o.hasOwnProperty(On)||o.hasOwnProperty(xn))?o[On]:null}const An=ie({\u0275prov:ie}),On=ie({\u0275inj:ie}),di=ie({ngInjectableDef:ie}),xn=ie({ngInjectorDef:ie});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let qi;function kn(o){const l=qi;return qi=o,l}function $r(o,l,c){const d=Kt(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&gt.Optional?null:void 0!==l?l:void qe(ge(o))}const pn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Gi={},$n="__NG_DI_FLAG__",Fn="ngTempTokenPath",Ts="ngTokenPath",Nr=/\n/gm,ha="\u0275",un="__source";let hi;function Jt(o){const l=hi;return hi=o,l}function Q(o,l=gt.Default){if(void 0===hi)throw new _e(-203,!1);return null===hi?$r(o,void 0,l):hi.get(o,l&gt.Optional?null:void 0,l)}function $(o,l=gt.Default){return(function Cs(){return qi}()||Q)(X(o),l)}function Z(o,l=gt.Default){return $(o,z(l))}function z(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function Se(o){const l=[];for(let c=0;c<o.length;c++){const d=X(o[c]);if(Array.isArray(d)){if(0===d.length)throw new _e(900,!1);let f,m=gt.Default;for(let w=0;w<d.length;w++){const C=d[w],T=mt(C);"number"==typeof T?-1===T?f=C.token:m|=T:f=C}l.push($(f,m))}else l.push($(d))}return l}function We(o,l){return o[$n]=l,o.prototype[$n]=l,o}function mt(o){return o[$n]}function wn(o){return{toString:o}.toString()}var Ot=(()=>((Ot=Ot||{})[Ot.OnPush=0]="OnPush",Ot[Ot.Default=1]="Default",Ot))(),Hn=(()=>{return(o=Hn||(Hn={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Hn;var o})();const wr={},Xt=[],eo=ie({\u0275cmp:ie}),iu=ie({\u0275dir:ie}),is=ie({\u0275pipe:ie}),fa=ie({\u0275mod:ie}),Mr=ie({\u0275fac:ie}),ss=ie({__NG_ELEMENT_ID__:ie});let gm=0;function pa(o){return wn(()=>{const l=Do(o),c={...l,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===Ot.OnPush,directiveDefs:null,pipeDefs:null,dependencies:l.standalone&&o.dependencies||null,getStandaloneInjector:null,data:o.data||{},encapsulation:o.encapsulation||Hn.Emulated,id:"c"+gm++,styles:o.styles||Xt,_:null,schemas:o.schemas||null,tView:null};qr(c);const d=o.dependencies;return c.directiveDefs=Ao(d,!1),c.pipeDefs=Ao(d,!0),c})}function Jf(o){return ln(o)||Qn(o)}function bc(o){return null!==o}function ga(o){return wn(()=>({type:o.type,bootstrap:o.bootstrap||Xt,declarations:o.declarations||Xt,imports:o.imports||Xt,exports:o.exports||Xt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function Yd(o,l){if(null==o)return wr;const c={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),c[f]=d,l&&(l[f]=m)}return c}function Ln(o){return wn(()=>{const l=Do(o);return qr(l),l})}function Ec(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function ln(o){return o[eo]||null}function Qn(o){return o[iu]||null}function br(o){return o[is]||null}function Is(o){const l=ln(o)||Qn(o)||br(o);return null!==l&&l.standalone}function Hr(o,l){const c=o[fa]||null;if(!c&&!0===l)throw new Error(`Type ${ge(o)} does not have '\u0275mod' property.`);return c}function Do(o){const l={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:l,exportAs:o.exportAs||null,standalone:!0===o.standalone,selectors:o.selectors||Xt,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Yd(o.inputs,l),outputs:Yd(o.outputs)}}function qr(o){o.features?.forEach(l=>l(o))}function Ao(o,l){if(!o)return null;const c=l?br:Jf;return()=>("function"==typeof o?o():o).map(d=>c(d)).filter(bc)}const Di=0,nt=1,Ft=2,Tn=3,ei=4,Ss=5,Jn=6,Gr=7,Rn=8,ma=9,ti=10,$t=11,Cc=12,to=13,Tc=14,Zi=15,Zr=16,_a=17,xo=18,zi=19,no=20,Ds=21,mn=22,Ai=1,Qd=2,ya=7,ko=8,zr=9,Wr=10;function fi(o){return Array.isArray(o)&&"object"==typeof o[Ai]}function xi(o){return Array.isArray(o)&&!0===o[Ai]}function rl(o){return 0!=(4&o.flags)}function Wi(o){return o.componentOffset>-1}function Ic(o){return 1==(1&o.flags)}function pi(o){return!!o.template}function il(o){return 0!=(256&o[Ft])}function Mo(o,l){return o.hasOwnProperty(Mr)?o[Mr]:null}class Po{constructor(l,c,d){this.previousValue=l,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function au(){return ba}function ba(o){return o.type.prototype.ngOnChanges&&(o.setInput=Ea),lu}function lu(){const o=ol(this),l=o?.current;if(l){const c=o.previous;if(c===wr)o.previous=l;else for(let d in l)c[d]=l[d];o.current=null,this.ngOnChanges(l)}}function Ea(o,l,c,d){const f=this.declaredInputs[c],m=ol(o)||function kc(o,l){return o[Oo]=l}(o,{previous:wr,current:null}),w=m.current||(m.current={}),C=m.previous,T=C[f];w[f]=new Po(T&&T.currentValue,l,C===wr),o[d]=l}au.ngInherit=!0;const Oo="__ngSimpleChanges__";function ol(o){return o[Oo]||null}const gi=function(o,l,c){};function qn(o){for(;Array.isArray(o);)o=o[Di];return o}function Fo(o,l){return qn(l[o])}function Xn(o,l){return qn(l[o.index])}function Sa(o,l){return o.data[l]}function or(o,l){const c=l[o];return fi(c)?c:c[Di]}function Da(o){return 64==(64&o[Ft])}function xs(o,l){return null==l?null:o[l]}function ll(o){o[xo]=0}function ul(o,l){o[Ss]+=l;let c=o,d=o[Tn];for(;null!==d&&(1===l&&1===c[Ss]||-1===l&&0===c[Ss]);)d[Ss]+=l,c=d,d=d[Tn]}const Mt={lFrame:tv(null),bindingsEnabled:!0};function fu(){return Mt.bindingsEnabled}function ve(){return Mt.lFrame.lView}function nn(){return Mt.lFrame.tView}function Oc(o){return Mt.lFrame.contextLView=o,o[Rn]}function th(o){return Mt.lFrame.contextLView=null,o}function Pr(){let o=cl();for(;null!==o&&64===o.type;)o=o.parent;return o}function cl(){return Mt.lFrame.currentTNode}function mi(o,l){const c=Mt.lFrame;c.currentTNode=o,c.isParent=l}function gu(){return Mt.lFrame.isParent}function mu(){Mt.lFrame.isParent=!1}function Uo(){return Mt.lFrame.bindingIndex++}function ls(o){const l=Mt.lFrame,c=l.bindingIndex;return l.bindingIndex=l.bindingIndex+o,c}function ih(o,l){const c=Mt.lFrame;c.bindingIndex=c.bindingRootIndex=o,Uc(l)}function Uc(o){Mt.lFrame.currentDirectiveIndex=o}function ks(o){const l=Mt.lFrame.currentDirectiveIndex;return-1===l?null:o[l]}function sh(){return Mt.lFrame.currentQueryIndex}function Vc(o){Mt.lFrame.currentQueryIndex=o}function oh(o){const l=o[nt];return 2===l.type?l.declTNode:1===l.type?o[Jn]:null}function rp(o,l,c){if(c&gt.SkipSelf){let f=l,m=o;for(;!(f=f.parent,null!==f||c&gt.Host||(f=oh(m),null===f||(m=m[Zi],10&f.type))););if(null===f)return!1;l=f,o=m}const d=Mt.lFrame=ip();return d.currentTNode=l,d.lView=o,!0}function yu(o){const l=ip(),c=o[nt];Mt.lFrame=l,l.currentTNode=c.firstChild,l.lView=o,l.tView=c,l.contextLView=o,l.bindingIndex=c.bindingStartIndex,l.inI18n=!1}function ip(){const o=Mt.lFrame,l=null===o?null:o.child;return null===l?tv(o):l}function tv(o){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=l),l}function nv(){const o=Mt.lFrame;return Mt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const ah=nv;function ym(){const o=nv();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function ri(){return Mt.lFrame.selectedIndex}function Aa(o){Mt.lFrame.selectedIndex=o}function In(){const o=Mt.lFrame;return Sa(o.tView,o.selectedIndex)}function hl(o,l){for(let c=l.directiveStart,d=l.directiveEnd;c<d;c++){const m=o.data[c].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:C,ngAfterViewInit:T,ngAfterViewChecked:A,ngOnDestroy:M}=m;w&&(o.contentHooks??(o.contentHooks=[])).push(-c,w),C&&((o.contentHooks??(o.contentHooks=[])).push(c,C),(o.contentCheckHooks??(o.contentCheckHooks=[])).push(c,C)),T&&(o.viewHooks??(o.viewHooks=[])).push(-c,T),A&&((o.viewHooks??(o.viewHooks=[])).push(c,A),(o.viewCheckHooks??(o.viewCheckHooks=[])).push(c,A)),null!=M&&(o.destroyHooks??(o.destroyHooks=[])).push(c,M)}}function Vo(o,l,c){fl(o,l,3,c)}function jc(o,l,c,d){(3&o[Ft])===c&&fl(o,l,c,d)}function io(o,l){let c=o[Ft];(3&c)===l&&(c&=2047,c+=1,o[Ft]=c)}function fl(o,l,c,d){const m=d??-1,w=l.length-1;let C=0;for(let T=void 0!==d?65535&o[xo]:0;T<w;T++)if("number"==typeof l[T+1]){if(C=l[T],null!=d&&C>=d)break}else l[T]<0&&(o[xo]+=65536),(C<m||-1==m)&&(pl(o,c,l,T),o[xo]=(4294901760&o[xo])+T+2),T++}function pl(o,l,c,d){const f=c[d]<0,m=c[d+1],C=o[f?-c[d]:c[d]];if(f){if(o[Ft]>>11<o[xo]>>16&&(3&o[Ft])===l){o[Ft]+=2048,gi(4,C,m);try{m.call(C)}finally{gi(5,C,m)}}}else{gi(4,C,m);try{m.call(C)}finally{gi(5,C,m)}}}const ka=-1;class so{constructor(l,c,d){this.factory=l,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Nn(o,l,c){let d=0;for(;d<c.length;){const f=c[d];if("number"==typeof f){if(0!==f)break;d++;const m=c[d++],w=c[d++],C=c[d++];o.setAttribute(l,w,C,m)}else{const m=f,w=c[++d];Rs(m)?o.setProperty(l,m,w):o.setAttribute(l,m,w),d++}}return d}function ml(o){return 3===o||4===o||6===o}function Rs(o){return 64===o.charCodeAt(0)}function Ns(o,l){if(null!==l&&0!==l.length)if(null===o||0===o.length)o=l.slice();else{let c=-1;for(let d=0;d<l.length;d++){const f=l[d];"number"==typeof f?c=f:0===c||Ra(o,c,f,null,-1===c||2===c?l[++d]:null)}}return o}function Ra(o,l,c,d,f){let m=0,w=o.length;if(-1===l)w=-1;else for(;m<o.length;){const C=o[m++];if("number"==typeof C){if(C===l){w=-1;break}if(C>l){w=m-1;break}}}for(;m<o.length;){const C=o[m];if("number"==typeof C)break;if(C===c){if(null===d)return void(null!==f&&(o[m+1]=f));if(d===o[m+1])return void(o[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==w&&(o.splice(w,0,l),m=w+1),o.splice(m++,0,c),null!==d&&o.splice(m++,0,d),null!==f&&o.splice(m++,0,f)}function $c(o){return o!==ka}function _l(o){return 32767&o}function bu(o,l){let c=function wu(o){return o>>16}(o),d=l;for(;c>0;)d=d[Zi],c--;return d}let oo=!0;function Na(o){const l=oo;return oo=o,l}const yl=255,vl=5;let Eu=0;const Fr={};function Pa(o,l){const c=bl(o,l);if(-1!==c)return c;const d=l[nt];d.firstCreatePass&&(o.injectorIndex=l.length,ao(d.data,o),ao(l,null),ao(d.blueprint,null));const f=Cu(o,l),m=o.injectorIndex;if($c(f)){const w=_l(f),C=bu(f,l),T=C[nt].data;for(let A=0;A<8;A++)l[m+A]=C[w+A]|T[w+A]}return l[m+8]=f,m}function ao(o,l){o.push(0,0,0,0,0,0,0,0,l)}function bl(o,l){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===l[o.injectorIndex+8]?-1:o.injectorIndex}function Cu(o,l){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,d=null,f=l;for(;null!==f;){if(d=qc(f),null===d)return ka;if(c++,f=f[Zi],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return ka}function El(o,l,c){!function wl(o,l,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(ss)&&(d=c[ss]),null==d&&(d=c[ss]=Eu++);const f=d&yl;l.data[o+(f>>vl)]|=1<<f}(o,l,c)}function $o(o,l,c){if(c&gt.Optional||void 0!==o)return o;qe()}function Cl(o,l,c,d){if(c&gt.Optional&&void 0===d&&(d=null),!(c&(gt.Self|gt.Host))){const f=o[ma],m=kn(void 0);try{return f?f.get(l,d,c&gt.Optional):$r(l,d,c&gt.Optional)}finally{kn(m)}}return $o(d,0,c)}function dh(o,l,c,d=gt.Default,f){if(null!==o){if(1024&l[Ft]){const w=function ph(o,l,c,d,f){let m=o,w=l;for(;null!==m&&null!==w&&1024&w[Ft]&&!(256&w[Ft]);){const C=us(m,w,c,d|gt.Self,Fr);if(C!==Fr)return C;let T=m.parent;if(!T){const A=w[Ds];if(A){const M=A.get(c,Fr,d);if(M!==Fr)return M}T=qc(w),w=w[Zi]}m=T}return f}(o,l,c,d,Fr);if(w!==Fr)return w}const m=us(o,l,c,d,Fr);if(m!==Fr)return m}return Cl(l,c,d,f)}function us(o,l,c,d,f){const m=function hh(o){if("string"==typeof o)return o.charCodeAt(0)||0;const l=o.hasOwnProperty(ss)?o[ss]:void 0;return"number"==typeof l?l>=0?l&yl:bm:l}(c);if("function"==typeof m){if(!rp(l,o,d))return d&gt.Host?$o(f,0,d):Cl(l,c,d,f);try{const w=m(d);if(null!=w||d&gt.Optional)return w;qe()}finally{ah()}}else if("number"==typeof m){let w=null,C=bl(o,l),T=ka,A=d&gt.Host?l[Zr][Jn]:null;for((-1===C||d&gt.SkipSelf)&&(T=-1===C?Cu(o,l):l[C+8],T!==ka&&Ms(d,!1)?(w=l[nt],C=_l(T),l=bu(T,l)):C=-1);-1!==C;){const M=l[nt];if(Iu(m,C,M.data)){const V=Tu(C,l,c,w,d,A);if(V!==Fr)return V}T=l[C+8],T!==ka&&Ms(d,l[nt].data[C+8]===A)&&Iu(m,C,l)?(w=M,C=_l(T),l=bu(T,l)):C=-1}}return f}function Tu(o,l,c,d,f,m){const w=l[nt],C=w.data[o+8],M=Ho(C,w,c,null==d?Wi(C)&&oo:d!=w&&0!=(3&C.type),f&gt.Host&&m===C);return null!==M?cs(l,w,M,C):Fr}function Ho(o,l,c,d,f){const m=o.providerIndexes,w=l.data,C=1048575&m,T=o.directiveStart,M=m>>20,Y=f?C+M:o.directiveEnd;for(let ne=d?C:C+M;ne<Y;ne++){const Ee=w[ne];if(ne<T&&c===Ee||ne>=T&&Ee.type===c)return ne}if(f){const ne=w[T];if(ne&&pi(ne)&&ne.type===c)return T}return null}function cs(o,l,c,d){let f=o[c];const m=l.data;if(function ki(o){return o instanceof so}(f)){const w=f;w.resolving&&function De(o,l){const c=l?`. Dependency path: ${l.join(" > ")} > ${o}`:"";throw new _e(-200,`Circular dependency in DI detected for ${o}${c}`)}(function Be(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():xe(o)}(m[c]));const C=Na(w.canSeeViewProviders);w.resolving=!0;const T=w.injectImpl?kn(w.injectImpl):null;rp(o,d,gt.Default);try{f=o[c]=w.factory(void 0,m,o,d),l.firstCreatePass&&c>=d.directiveStart&&function wm(o,l,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=l.type.prototype;if(d){const w=ba(l);(c.preOrderHooks??(c.preOrderHooks=[])).push(o,w),(c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(o,w)}f&&(c.preOrderHooks??(c.preOrderHooks=[])).push(0-o,f),m&&((c.preOrderHooks??(c.preOrderHooks=[])).push(o,m),(c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(o,m))}(c,m[c],l)}finally{null!==T&&kn(T),Na(C),w.resolving=!1,ah()}}return f}function Iu(o,l,c){return!!(c[l+(o>>vl)]&1<<o)}function Ms(o,l){return!(o&gt.Self||o&gt.Host&&l)}class Ki{constructor(l,c){this._tNode=l,this._lView=c}get(l,c,d){return dh(this._tNode,this._lView,l,z(d),c)}}function bm(){return new Ki(Pr(),ve())}function fh(o){return wn(()=>{const l=o.prototype.constructor,c=l[Mr]||Su(l),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const m=f[Mr]||Su(f);if(m&&m!==c)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Su(o){return ze(o)?()=>{const l=Su(X(o));return l&&l()}:Mo(o)}function qc(o){const l=o[nt],c=l.type;return 2===c?l.declTNode:1===c?o[Jn]:null}function Du(o){return function Hc(o,l){if("class"===l)return o.classes;if("style"===l)return o.styles;const c=o.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const m=c[f];if(ml(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(m===l)return c[f+1];f+=2}}}return null}(Pr(),o)}const Oa="__parameters__";function Tl(o,l,c){return wn(()=>{const d=function ap(o){return function(...c){if(o){const d=o(...c);for(const f in d)this[f]=d[f]}}}(l);function f(...m){if(this instanceof f)return d.apply(this,m),this;const w=new f(...m);return C.annotation=w,C;function C(T,A,M){const V=T.hasOwnProperty(Oa)?T[Oa]:Object.defineProperty(T,Oa,{value:[]})[Oa];for(;V.length<=M;)V.push(null);return(V[M]=V[M]||[]).push(w),T}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class tn{constructor(l,c){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Ye({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ds(o,l){o.forEach(c=>Array.isArray(c)?ds(c,l):l(c))}function Mu(o,l,c){l>=o.length?o.push(c):o.splice(l,0,c)}function Il(o,l){return l>=o.length-1?o.pop():o.splice(l,1)[0]}function Fa(o,l){const c=[];for(let d=0;d<o;d++)c.push(l);return c}function ii(o,l,c){let d=Er(o,l);return d>=0?o[1|d]=c:(d=~d,function yh(o,l,c,d){let f=o.length;if(f==l)o.push(c,d);else if(1===f)o.push(d,o[0]),o[0]=c;else{for(f--,o.push(o[f-1],o[f]);f>l;)o[f]=o[f-2],f--;o[l]=c,o[l+1]=d}}(o,d,l,c)),d}function Ht(o,l){const c=Er(o,l);if(c>=0)return o[1|c]}function Er(o,l){return function er(o,l,c){let d=0,f=o.length>>c;for(;f!==d;){const m=d+(f-d>>1),w=o[m<<c];if(l===w)return m<<c;w>l?f=m:d=m+1}return~(f<<c)}(o,l,1)}const Fu=We(Tl("Optional"),8),D=We(Tl("SkipSelf"),4);var Tt=(()=>((Tt=Tt||{})[Tt.Important=1]="Important",Tt[Tt.DashCase=2]="DashCase",Tt))();const Jc=new Map;let uo=0;const Ih="__ngContext__";function Kr(o,l){fi(l)?(o[Ih]=l[no],function Sm(o){Jc.set(o[no],o)}(l)):o[Ih]=l}let wp;function Nl(o,l){return wp(o,l)}function td(o){const l=o[Tn];return xi(l)?l[Tn]:l}function Dh(o){return bp(o[to])}function ju(o){return bp(o[ei])}function bp(o){for(;null!==o&&!xi(o);)o=o[ei];return o}function co(o,l,c,d,f){if(null!=d){let m,w=!1;xi(d)?m=d:fi(d)&&(w=!0,d=d[Di]);const C=qn(d);0===o&&null!==c?null==f?Ip(l,c,C):Ba(l,c,C,f||null,!0):1===o&&null!==c?Ba(l,c,C,f||null,!0):2===o?function ad(o,l,c){const d=Us(o,l);d&&function id(o,l,c,d){o.removeChild(l,c,d)}(o,d,l,c)}(l,C,w):3===o&&l.destroyNode(C),null!=m&&function Gu(o,l,c,d,f){const m=c[ya];m!==qn(c)&&co(l,o,d,m,f);for(let C=Wr;C<c.length;C++){const T=c[C];qu(T[nt],T,o,l,d,m)}}(l,o,m,c,f)}}function rd(o,l,c){return o.createElement(l,c)}function Cp(o,l){const c=o[zr],d=c.indexOf(l),f=l[Tn];512&l[Ft]&&(l[Ft]&=-513,ul(f,-1)),c.splice(d,1)}function Tp(o,l){if(o.length<=Wr)return;const c=Wr+l,d=o[c];if(d){const f=d[_a];null!==f&&f!==o&&Cp(f,d),l>0&&(o[c-1][ei]=d[ei]);const m=Il(o,Wr+l);!function av(o,l){qu(o,l,l[$t],2,null,null),l[Di]=null,l[Jn]=null}(d[nt],d);const w=m[zi];null!==w&&w.detachView(m[nt]),d[Tn]=null,d[ei]=null,d[Ft]&=-65}return d}function xh(o,l){if(!(128&l[Ft])){const c=l[$t];c.destroyNode&&qu(o,l,c,3,null,null),function uv(o){let l=o[to];if(!l)return Hu(o[nt],o);for(;l;){let c=null;if(fi(l))c=l[to];else{const d=l[Wr];d&&(c=d)}if(!c){for(;l&&!l[ei]&&l!==o;)fi(l)&&Hu(l[nt],l),l=l[Tn];null===l&&(l=o),fi(l)&&Hu(l[nt],l),c=l&&l[ei]}l=c}}(l)}}function Hu(o,l){if(!(128&l[Ft])){l[Ft]&=-65,l[Ft]|=128,function Ls(o,l){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let d=0;d<c.length;d+=2){const f=l[c[d]];if(!(f instanceof so)){const m=c[d+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const C=f[m[w]],T=m[w+1];gi(4,C,T);try{T.call(C)}finally{gi(5,C,T)}}else{gi(4,f,m);try{m.call(f)}finally{gi(5,f,m)}}}}}(o,l),function hv(o,l){const c=o.cleanup,d=l[Gr];let f=-1;if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const w=c[m+3];w>=0?d[f=w]():d[f=-w].unsubscribe(),m+=2}else{const w=d[f=c[m+1]];c[m].call(w)}if(null!==d){for(let m=f+1;m<d.length;m++)(0,d[m])();l[Gr]=null}}(o,l),1===l[nt].type&&l[$t].destroy();const c=l[_a];if(null!==c&&xi(l[Tn])){c!==l[Tn]&&Cp(c,l);const d=l[zi];null!==d&&d.detachView(o)}!function yE(o){Jc.delete(o[no])}(l)}}function kh(o,l,c){return function xm(o,l,c){let d=l;for(;null!==d&&40&d.type;)d=(l=d).parent;if(null===d)return c[Di];{const{componentOffset:f}=d;if(f>-1){const{encapsulation:m}=o.data[d.directiveStart+f];if(m===Hn.None||m===Hn.Emulated)return null}return Xn(d,c)}}(o,l.parent,c)}function Ba(o,l,c,d,f){o.insertBefore(l,c,d,f)}function Ip(o,l,c){o.appendChild(l,c)}function km(o,l,c,d,f){null!==d?Ba(o,l,c,d,f):Ip(o,l,c)}function Us(o,l){return o.parentNode(l)}function Nh(o,l,c){return Ko(o,l,c)}let Dp,ur,Oh,Lh,Ko=function Sp(o,l,c){return 40&o.type?Xn(o,c):null};function Yo(o,l,c,d){const f=kh(o,d,l),m=l[$t],C=Nh(d.parent||l[Jn],d,l);if(null!=f)if(Array.isArray(c))for(let T=0;T<c.length;T++)km(m,f,c[T],C,!1);else km(m,f,c,C,!1);void 0!==Dp&&Dp(m,d,l,c,f)}function od(o,l){if(null!==l){const c=l.type;if(3&c)return Xn(l,o);if(4&c)return ho(-1,o[l.index]);if(8&c){const d=l.child;if(null!==d)return od(o,d);{const f=o[l.index];return xi(f)?ho(-1,f):qn(f)}}if(32&c)return Nl(l,o)()||qn(o[l.index]);{const d=Mh(o,l);return null!==d?Array.isArray(d)?d[0]:od(td(o[Zr]),d):od(o,l.next)}}return null}function Mh(o,l){return null!==l?o[Zr][Jn].projection[l.projection]:null}function ho(o,l){const c=Wr+o+1;if(c<l.length){const d=l[c],f=d[nt].firstChild;if(null!==f)return od(d,f)}return l[ya]}function ld(o,l,c,d,f,m,w){for(;null!=c;){const C=d[c.index],T=c.type;if(w&&0===l&&(C&&Kr(qn(C),d),c.flags|=2),32!=(32&c.flags))if(8&T)ld(o,l,c.child,d,f,m,!1),co(l,o,f,C,m);else if(32&T){const A=Nl(c,d);let M;for(;M=A();)co(l,o,f,M,m);co(l,o,f,C,m)}else 16&T?fo(o,l,d,c,f,m):co(l,o,f,C,m);c=w?c.projectionNext:c.next}}function qu(o,l,c,d,f,m){ld(c,d,o.firstChild,l,f,m,!1)}function fo(o,l,c,d,f,m){const w=c[Zr],T=w[Jn].projection[d.projection];if(Array.isArray(T))for(let A=0;A<T.length;A++)co(l,o,f,T[A],m);else ld(o,l,T,w[Tn],f,m,!0)}function ja(o,l,c){""===c?o.removeAttribute(l,"class"):o.setAttribute(l,"class",c)}function Zu(o,l,c){const{mergedAttrs:d,classes:f,styles:m}=c;null!==d&&Nn(o,l,d),null!==f&&ja(o,l,f),null!==m&&function Ap(o,l,c){o.setAttribute(l,"style",c)}(o,l,m)}function $a(o){return function Pl(){if(void 0===ur&&(ur=null,pn.trustedTypes))try{ur=pn.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return ur}()?.createHTML(o)||o}function pv(o){Oh=o}function xp(){if(void 0===Lh&&(Lh=null,pn.trustedTypes))try{Lh=pn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Lh}function Mm(o){return xp()?.createHTML(o)||o}function v(o){return xp()?.createScriptURL(o)||o}class p{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${at})`}}class _ extends p{getTypeName(){return"HTML"}}class b extends p{getTypeName(){return"Style"}}class x extends p{getTypeName(){return"Script"}}class P extends p{getTypeName(){return"URL"}}class K extends p{getTypeName(){return"ResourceURL"}}function ue(o){return o instanceof p?o.changingThisBreaksApplicationSecurity:o}function Oe(o,l){const c=function rt(o){return o instanceof p&&o.getTypeName()||null}(o);if(null!=c&&c!==l){if("ResourceURL"===c&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${c} (see ${at})`)}return c===l}function St(o){return new _(o)}function Et(o){return new b(o)}function Sr(o){return new x(o)}function si(o){return new P(o)}function ud(o){return new K(o)}class zu{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const c=(new window.DOMParser).parseFromString($a(l),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(l):(c.removeChild(c.firstChild),c)}catch{return null}}}class Np{constructor(l){this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(l){const c=this.inertDocument.createElement("template");return c.innerHTML=$a(l),c}}const Vh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ol(o){return(o=String(o)).match(Vh)?o:"unsafe:"+o}function ps(o){const l={};for(const c of o.split(","))l[c]=!0;return l}function Fl(...o){const l={};for(const c of o)for(const d in c)c.hasOwnProperty(d)&&(l[d]=!0);return l}const Ll=ps("area,br,col,hr,img,wbr"),Pm=ps("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Bh=ps("rp,rt"),Fm=Fl(Ll,Fl(Pm,ps("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Fl(Bh,ps("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Fl(Bh,Pm)),Lm=ps("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Mp=Fl(Lm,ps("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ps("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Vm=ps("script,style,template");class aA{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let c=l.firstChild,d=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?d=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,d&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let f=this.checkClobberedElement(c,c.nextSibling);if(f){c=f;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(l){const c=l.nodeName.toLowerCase();if(!Fm.hasOwnProperty(c))return this.sanitizedSomething=!0,!Vm.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const d=l.attributes;for(let f=0;f<d.length;f++){const m=d.item(f),w=m.name,C=w.toLowerCase();if(!Mp.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let T=m.value;Lm[C]&&(T=Ol(T)),this.buf.push(" ",w,'="',mv(T),'"')}return this.buf.push(">"),!0}endElement(l){const c=l.nodeName.toLowerCase();Fm.hasOwnProperty(c)&&!Ll.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(l){this.buf.push(mv(l))}checkClobberedElement(l,c){if(c&&(l.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return c}}const lA=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gv=/([^\#-~ |!])/g;function mv(o){return o.replace(/&/g,"&amp;").replace(lA,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(gv,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let _v;function uA(o,l){let c=null;try{_v=_v||function Rp(o){const l=new Np(o);return function Uh(){try{return!!(new window.DOMParser).parseFromString($a(""),"text/html")}catch{return!1}}()?new zu(l):l}(o);let d=l?String(l):"";c=_v.getInertBodyElement(d);let f=5,m=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=m,m=c.innerHTML,c=_v.getInertBodyElement(d)}while(d!==m);return $a((new aA).sanitizeChildren(vE(c)||c))}finally{if(c){const d=vE(c)||c;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function vE(o){return"content"in o&&function UO(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var nr=(()=>((nr=nr||{})[nr.NONE=0]="NONE",nr[nr.HTML=1]="HTML",nr[nr.STYLE=2]="STYLE",nr[nr.SCRIPT=3]="SCRIPT",nr[nr.URL=4]="URL",nr[nr.RESOURCE_URL=5]="RESOURCE_URL",nr))();function wE(o){const l=Op();return l?Mm(l.sanitize(nr.HTML,o)||""):Oe(o,"HTML")?Mm(ue(o)):uA(function Fh(){return void 0!==Oh?Oh:typeof document<"u"?document:void 0}(),xe(o))}function bE(o){const l=Op();return l?l.sanitize(nr.URL,o)||"":Oe(o,"URL")?ue(o):Ol(xe(o))}function Bm(o){const l=Op();if(l)return v(l.sanitize(nr.RESOURCE_URL,o)||"");if(Oe(o,"ResourceURL"))return v(ue(o));throw new _e(904,!1)}function CE(o,l,c){return function dA(o,l){return"src"===l&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===l&&("base"===o||"link"===o)?Bm:bE}(l,c)(o)}function Op(){const o=ve();return o&&o[Cc]}const vv=new tn("ENVIRONMENT_INITIALIZER"),cd=new tn("INJECTOR",-1),jh=new tn("INJECTOR_DEF_TYPES");class TE{get(l,c=Gi){if(c===Gi){const d=new Error(`NullInjectorError: No provider for ${ge(l)}!`);throw d.name="NullInjectorError",d}return c}}function fA(o){return{\u0275providers:o}}function Fp(...o){return{\u0275providers:$h(0,o),\u0275fromNgModule:!0}}function $h(o,...l){const c=[],d=new Set;let f;return ds(l,m=>{const w=m;wv(w,c,[],d)&&(f||(f=[]),f.push(w))}),void 0!==f&&IE(f,c),c}function IE(o,l){for(let c=0;c<o.length;c++){const{providers:f}=o[c];bv(f,m=>{l.push(m)})}}function wv(o,l,c,d){if(!(o=X(o)))return!1;let f=null,m=vr(o);const w=!m&&ln(o);if(m||w){if(w&&!w.standalone)return!1;f=o}else{const T=o.ngModule;if(m=vr(T),!m)return!1;f=T}const C=d.has(f);if(w){if(C)return!1;if(d.add(f),w.dependencies){const T="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const A of T)wv(A,l,c,d)}}else{if(!m)return!1;{if(null!=m.imports&&!C){let A;d.add(f);try{ds(m.imports,M=>{wv(M,l,c,d)&&(A||(A=[]),A.push(M))})}finally{}void 0!==A&&IE(A,l)}if(!C){const A=Mo(f)||(()=>new f);l.push({provide:f,useFactory:A,deps:Xt},{provide:jh,useValue:f,multi:!0},{provide:vv,useValue:()=>$(f),multi:!0})}const T=m.providers;null==T||C||bv(T,M=>{l.push(M)})}}return f!==o&&void 0!==o.providers}function bv(o,l){for(let c of o)Ae(c)&&(c=c.\u0275providers),Array.isArray(c)?bv(c,l):l(c)}const pA=ie({provide:String,useValue:ie});function Ev(o){return null!==o&&"object"==typeof o&&pA in o}function Ul(o){return"function"==typeof o}const Wu=new tn("Set Injector scope."),$m={},mA={};let Cv;function Hm(){return void 0===Cv&&(Cv=new TE),Cv}class dd{}class DE extends dd{get destroyed(){return this._destroyed}constructor(l,c,d,f){super(),this.parent=c,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qh(l,w=>this.processProvider(w)),this.records.set(cd,Hh(void 0,this)),f.has("environment")&&this.records.set(dd,Hh(void 0,this));const m=this.records.get(Wu);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(jh.multi,Xt,gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const c=Jt(this),d=kn(void 0);try{return l()}finally{Jt(c),kn(d)}}get(l,c=Gi,d=gt.Default){this.assertNotDestroyed(),d=z(d);const f=Jt(this),m=kn(void 0);try{if(!(d&gt.SkipSelf)){let C=this.records.get(l);if(void 0===C){const T=function Dv(o){return"function"==typeof o||"object"==typeof o&&o instanceof tn}(l)&&Kt(l);C=T&&this.injectableDefInScope(T)?Hh(Tv(l),$m):null,this.records.set(l,C)}if(null!=C)return this.hydrate(l,C)}return(d&gt.Self?Hm():this.parent).get(l,c=d&gt.Optional&&c===Gi?null:c)}catch(w){if("NullInjectorError"===w.name){if((w[Fn]=w[Fn]||[]).unshift(ge(l)),f)throw w;return function vn(o,l,c,d){const f=o[Fn];throw l[un]&&f.unshift(l[un]),o.message=function cn(o,l,c,d=null){o=o&&"\n"===o.charAt(0)&&o.charAt(1)==ha?o.slice(2):o;let f=ge(l);if(Array.isArray(l))f=l.map(ge).join(" -> ");else if("object"==typeof l){let m=[];for(let w in l)if(l.hasOwnProperty(w)){let C=l[w];m.push(w+":"+("string"==typeof C?JSON.stringify(C):ge(C)))}f=`{${m.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${o.replace(Nr,"\n  ")}`}("\n"+o.message,f,c,d),o[Ts]=f,o[Fn]=null,o}(w,l,"R3InjectorError",this.source)}throw w}finally{kn(m),Jt(f)}}resolveInjectorInitializers(){const l=Jt(this),c=kn(void 0);try{const d=this.get(vv.multi,Xt,gt.Self);for(const f of d)f()}finally{Jt(l),kn(c)}}toString(){const l=[],c=this.records;for(const d of c.keys())l.push(ge(d));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(l){let c=Ul(l=X(l))?l:X(l&&l.provide);const d=function yA(o){return Ev(o)?Hh(void 0,o.useValue):Hh(Iv(o),$m)}(l);if(Ul(l)||!0!==l.multi)this.records.get(c);else{let f=this.records.get(c);f||(f=Hh(void 0,$m,!0),f.factory=()=>Se(f.multi),this.records.set(c,f)),c=l,f.multi.push(l)}this.records.set(c,d)}hydrate(l,c){return c.value===$m&&(c.value=mA,c.value=c.factory()),"object"==typeof c.value&&c.value&&function AE(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(l){if(!l.providedIn)return!1;const c=X(l.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function Tv(o){const l=Kt(o),c=null!==l?l.factory:Mo(o);if(null!==c)return c;if(o instanceof tn)throw new _e(204,!1);if(o instanceof Function)return function _A(o){const l=o.length;if(l>0)throw Fa(l,"?"),new _e(204,!1);const c=function sr(o){return o&&(o[An]||o[di])||null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new _e(204,!1)}function Iv(o,l,c){let d;if(Ul(o)){const f=X(o);return Mo(f)||Tv(f)}if(Ev(o))d=()=>X(o.useValue);else if(function SE(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...Se(o.deps||[]));else if(function gA(o){return!(!o||!o.useExisting)}(o))d=()=>$(X(o.useExisting));else{const f=X(o&&(o.useClass||o.provide));if(!function Sv(o){return!!o.deps}(o))return Mo(f)||Tv(f);d=()=>new f(...Se(o.deps))}return d}function Hh(o,l,c=!1){return{factory:o,value:l,multi:c?[]:void 0}}function qh(o,l){for(const c of o)Array.isArray(c)?qh(c,l):c&&Ae(c)?qh(c.\u0275providers,l):l(c)}class vA{}class xE{}class RE{resolveComponentFactory(l){throw function wA(o){const l=Error(`No component factory found for ${ge(o)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=o,l}(l)}}let Gh=(()=>{class o{}return o.NULL=new RE,o})();function qm(){return Vl(Pr(),ve())}function Vl(o,l){return new Zh(Xn(o,l))}let Zh=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=qm,o})();function Lp(o){return o instanceof Zh?o.nativeElement:o}class xv{}let bA=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function EA(){const o=ve(),c=or(Pr().index,o);return(fi(c)?c:o)[$t]}(),o})(),CA=(()=>{class o{}return o.\u0275prov=Ye({token:o,providedIn:"root",factory:()=>null}),o})();class NE{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const ME=new NE("15.2.10"),Gm={},kv="ngOriginalError";function Rv(o){return o[kv]}class Up{constructor(){this._console=console}handleError(l){const c=this._findOriginalError(l);this._console.error("ERROR",l),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(l){let c=l&&Rv(l);for(;c&&Rv(c);)c=Rv(c);return c||null}}function Ha(o){return o instanceof Function?o():o}function VE(o,l,c){let d=o.length;for(;;){const f=o.indexOf(l,c);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=l.length;if(f+m===d||o.charCodeAt(f+m)<=32)return f}c=f+1}}const Nv="ng-template";function Mv(o,l,c){let d=0,f=!0;for(;d<o.length;){let m=o[d++];if("string"==typeof m&&f){const w=o[d++];if(c&&"class"===m&&-1!==VE(w.toLowerCase(),l,0))return!0}else{if(1===m){for(;d<o.length&&"string"==typeof(m=o[d++]);)if(m.toLowerCase()===l)return!0;return!1}"number"==typeof m&&(f=!1)}}return!1}function Pv(o){return 4===o.type&&o.value!==Nv}function zh(o,l,c){return l===(4!==o.type||c?o.value:Nv)}function Ov(o,l,c){let d=4;const f=o.attrs||[],m=function jE(o){for(let l=0;l<o.length;l++)if(ml(o[l]))return l;return o.length}(f);let w=!1;for(let C=0;C<l.length;C++){const T=l[C];if("number"!=typeof T){if(!w)if(4&d){if(d=2|1&d,""!==T&&!zh(o,T,c)||""===T&&1===l.length){if(Jo(d))return!1;w=!0}}else{const A=8&d?T:l[++C];if(8&d&&null!==o.attrs){if(!Mv(o.attrs,A,c)){if(Jo(d))return!1;w=!0}continue}const V=BE(8&d?"class":T,f,Pv(o),c);if(-1===V){if(Jo(d))return!1;w=!0;continue}if(""!==A){let Y;Y=V>m?"":f[V+1].toLowerCase();const ne=8&d?Y:null;if(ne&&-1!==VE(ne,A,0)||2&d&&A!==Y){if(Jo(d))return!1;w=!0}}}}else{if(!w&&!Jo(d)&&!Jo(T))return!1;if(w&&Jo(T))continue;w=!1,d=T|1&d}}return Jo(d)||w}function Jo(o){return 0==(1&o)}function BE(o,l,c,d){if(null===l)return-1;let f=0;if(d||!c){let m=!1;for(;f<l.length;){const w=l[f];if(w===o)return f;if(3===w||6===w)m=!0;else{if(1===w||2===w){let C=l[++f];for(;"string"==typeof C;)C=l[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=m?1:2}return-1}return function $E(o,l){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const d=o[c];if("number"==typeof d)return-1;if(d===l)return c;c++}return-1}(l,o)}function Bp(o,l,c=!1){for(let d=0;d<l.length;d++)if(Ov(o,l[d],c))return!0;return!1}function kA(o,l){e:for(let c=0;c<l.length;c++){const d=l[c];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function HE(o,l){return o?":not("+l.trim()+")":l}function RA(o){let l=o[0],c=1,d=2,f="",m=!1;for(;c<o.length;){let w=o[c];if("string"==typeof w)if(2&d){const C=o[++c];f+="["+w+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+w:4&d&&(f+=" "+w);else""!==f&&!Jo(w)&&(l+=HE(m,f),f=""),d=w,m=m||!Jo(d);c++}return""!==f&&(l+=HE(m,f)),l}const Lt={};function qE(o){GE(nn(),ve(),ri()+o,!1)}function GE(o,l,c,d){if(!d)if(3==(3&l[Ft])){const m=o.preOrderCheckHooks;null!==m&&Vo(l,m,c)}else{const m=o.preOrderHooks;null!==m&&jc(l,m,0,c)}Aa(c)}function zE(o,l=null,c=null,d){const f=Lv(o,l,c,d);return f.resolveInjectorInitializers(),f}function Lv(o,l=null,c=null,d,f=new Set){const m=[c||Xt,Fp(o)];return d=d||("object"==typeof o?void 0:ge(o)),new DE(m,l||Hm(),d||null,f)}let Wh=(()=>{class o{static create(c,d){if(Array.isArray(c))return zE({name:""},d,c,"");{const f=c.name??"";return zE({name:f},c.parent,c.providers,f)}}}return o.THROW_IF_NOT_FOUND=Gi,o.NULL=new TE,o.\u0275prov=Ye({token:o,providedIn:"any",factory:()=>$(cd)}),o.__NG_ELEMENT_ID__=-1,o})();function Qh(o,l=gt.Default){const c=ve();return null===c?$(o,l):dh(Pr(),c,X(o),l)}function XE(){throw new Error("invalid")}function eC(o,l){const c=o.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const m=c[d+1];if(-1!==m){const w=o.data[m];Vc(c[d]),w.contentQueries(2,l[m],m)}}}function Km(o,l,c,d,f,m,w,C,T,A,M){const V=l.blueprint.slice();return V[Di]=f,V[Ft]=76|d,(null!==M||o&&1024&o[Ft])&&(V[Ft]|=1024),ll(V),V[Tn]=V[Zi]=o,V[Rn]=c,V[ti]=w||o&&o[ti],V[$t]=C||o&&o[$t],V[Cc]=T||o&&o[Cc]||null,V[ma]=A||o&&o[ma]||null,V[Jn]=m,V[no]=function Ch(){return uo++}(),V[Ds]=M,V[Zr]=2==l.type?o[Zr]:V,V}function qp(o,l,c,d,f){let m=o.data[l];if(null===m)m=function Ym(o,l,c,d,f){const m=cl(),w=gu(),T=o.data[l]=function YO(o,l,c,d,f,m){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,c,l,d,f);return null===o.firstChild&&(o.firstChild=T),null!==m&&(w?null==m.child&&null!==T.parent&&(m.child=T):null===m.next&&(m.next=T,T.prev=m)),T}(o,l,c,d,f),function rh(){return Mt.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=c,m.value=d,m.attrs=f;const w=function pu(){const o=Mt.lFrame,l=o.currentTNode;return o.isParent?l:l.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return mi(m,!0),m}function Gp(o,l,c,d){if(0===c)return-1;const f=l.length;for(let m=0;m<c;m++)l.push(d),o.blueprint.push(d),o.data.push(null);return f}function Xo(o,l,c){yu(l);try{const d=o.viewQuery;null!==d&&Wv(1,d,c);const f=o.template;null!==f&&$v(o,l,f,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&eC(o,l),o.staticViewQueries&&Wv(2,o.viewQuery,c);const m=o.components;null!==m&&function tC(o,l){for(let c=0;c<l.length;c++)fx(o,l[c])}(l,m)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{l[Ft]&=-5,ym()}}function Qm(o,l,c,d){const f=l[Ft];if(128!=(128&f)){yu(l);try{ll(l),function ro(o){return Mt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&$v(o,l,c,2,d);const w=3==(3&f);if(w){const A=o.preOrderCheckHooks;null!==A&&Vo(l,A,null)}else{const A=o.preOrderHooks;null!==A&&jc(l,A,0,null),io(l,0)}if(function dx(o){for(let l=Dh(o);null!==l;l=ju(l)){if(!l[Qd])continue;const c=l[zr];for(let d=0;d<c.length;d++){const f=c[d];512&f[Ft]||ul(f[Tn],1),f[Ft]|=512}}}(l),function cx(o){for(let l=Dh(o);null!==l;l=ju(l))for(let c=Wr;c<l.length;c++){const d=l[c],f=d[nt];Da(d)&&Qm(f,d,f.template,d[Rn])}}(l),null!==o.contentQueries&&eC(o,l),w){const A=o.contentCheckHooks;null!==A&&Vo(l,A)}else{const A=o.contentHooks;null!==A&&jc(l,A,1),io(l,1)}!function zA(o,l){const c=o.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)Aa(~f);else{const m=f,w=c[++d],C=c[++d];ih(w,m),C(2,l[m])}}}finally{Aa(-1)}}(o,l);const C=o.components;null!==C&&function WA(o,l){for(let c=0;c<l.length;c++)hx(o,l[c])}(l,C);const T=o.viewQuery;if(null!==T&&Wv(2,T,d),w){const A=o.viewCheckHooks;null!==A&&Vo(l,A)}else{const A=o.viewHooks;null!==A&&jc(l,A,2),io(l,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),l[Ft]&=-41,512&l[Ft]&&(l[Ft]&=-513,ul(l[Tn],-1))}finally{ym()}}}function $v(o,l,c,d,f){const m=ri(),w=2&d;try{Aa(-1),w&&l.length>mn&&GE(o,l,mn,!1),gi(w?2:0,f),c(d,f)}finally{Aa(m),gi(w?3:1,f)}}function nC(o,l,c){if(rl(l)){const f=l.directiveEnd;for(let m=l.directiveStart;m<f;m++){const w=o.data[m];w.contentQueries&&w.contentQueries(1,c[m],m)}}}function Jm(o,l,c){fu()&&(function tx(o,l,c,d){const f=c.directiveStart,m=c.directiveEnd;Wi(c)&&function ax(o,l,c){const d=Xn(l,o),f=Xm(c),m=o[ti],w=e_(o,Km(o,f,null,c.onPush?32:16,d,l,m,m.createRenderer(d,c),null,null,null));o[l.index]=w}(l,c,o.data[f+c.componentOffset]),o.firstCreatePass||Pa(c,l),Kr(d,l);const w=c.initialInputs;for(let C=f;C<m;C++){const T=o.data[C],A=cs(l,o,C,c);Kr(A,l),null!==w&&lx(0,C-f,A,T,0,w),pi(T)&&(or(c.index,l)[Rn]=cs(l,o,C,c))}}(o,l,c,Xn(c,l)),64==(64&c.flags)&&aC(o,l,c))}function fd(o,l,c=Xn){const d=l.localNames;if(null!==d){let f=l.index+1;for(let m=0;m<d.length;m+=2){const w=d[m+1],C=-1===w?c(l,o):o[w];o[f++]=C}}}function Xm(o){const l=o.tView;return null===l||l.incompleteFirstPass?o.tView=rC(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):l}function rC(o,l,c,d,f,m,w,C,T,A){const M=mn+d,V=M+f,Y=function iC(o,l){const c=[];for(let d=0;d<l;d++)c.push(d<o?null:Lt);return c}(M,V),ne="function"==typeof A?A():A;return Y[nt]={type:o,blueprint:Y,template:c,queries:null,viewQuery:C,declTNode:l,data:Y.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:T,consts:ne,incompleteFirstPass:!1}}function KA(o,l,c,d){const f=uC(l);null===c?f.push(d):(f.push(c),o.firstCreatePass&&cC(o).push(d,f.length-1))}function YA(o,l,c,d){for(let f in o)if(o.hasOwnProperty(f)){c=null===c?{}:c;const m=o[f];null===d?QA(c,l,f,m):d.hasOwnProperty(f)&&QA(c,l,d[f],m)}return c}function QA(o,l,c,d){o.hasOwnProperty(c)?o[c].push(l,d):o[c]=[l,d]}function gs(o,l,c,d,f,m,w,C){const T=Xn(l,c);let M,A=l.inputs;!C&&null!=A&&(M=A[d])?(Kv(o,c,M,d,f),Wi(l)&&function Hv(o,l){const c=or(l,o);16&c[Ft]||(c[Ft]|=32)}(c,l.index)):3&l.type&&(d=function Zp(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=w?w(f,l.value||"",d):f,m.setProperty(T,d,f))}function qv(o,l,c,d){if(fu()){const f=null===d?null:{"":-1},m=function rx(o,l){const c=o.directiveRegistry;let d=null,f=null;if(c)for(let m=0;m<c.length;m++){const w=c[m];if(Bp(l,w.selectors,!1))if(d||(d=[]),pi(w))if(null!==w.findHostDirectiveDefs){const C=[];f=f||new Map,w.findHostDirectiveDefs(w,C,f),d.unshift(...C,w),Gv(o,l,C.length)}else d.unshift(w),Gv(o,l,0);else f=f||new Map,w.findHostDirectiveDefs?.(w,d,f),d.push(w)}return null===d?null:[d,f]}(o,c);let w,C;null===m?w=C=null:[w,C]=m,null!==w&&oC(o,l,c,w,f,C),f&&function ix(o,l,c){if(l){const d=o.localNames=[];for(let f=0;f<l.length;f+=2){const m=c[l[f+1]];if(null==m)throw new _e(-301,!1);d.push(l[f],m)}}}(c,d,f)}c.mergedAttrs=Ns(c.mergedAttrs,c.attrs)}function oC(o,l,c,d,f,m){for(let A=0;A<d.length;A++)El(Pa(c,l),o,d[A].type);!function sx(o,l,c){o.flags|=1,o.directiveStart=l,o.directiveEnd=l+c,o.providerIndexes=l}(c,o.data.length,d.length);for(let A=0;A<d.length;A++){const M=d[A];M.providersResolver&&M.providersResolver(M)}let w=!1,C=!1,T=Gp(o,l,d.length,null);for(let A=0;A<d.length;A++){const M=d[A];c.mergedAttrs=Ns(c.mergedAttrs,M.hostAttrs),ox(o,c,l,T,M),JO(T,M,f),null!==M.contentQueries&&(c.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(c.flags|=64);const V=M.type.prototype;!w&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((o.preOrderHooks??(o.preOrderHooks=[])).push(c.index),w=!0),!C&&(V.ngOnChanges||V.ngDoCheck)&&((o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(c.index),C=!0),T++}!function sC(o,l,c){const f=l.directiveEnd,m=o.data,w=l.attrs,C=[];let T=null,A=null;for(let M=l.directiveStart;M<f;M++){const V=m[M],Y=c?c.get(V):null,Ee=Y?Y.outputs:null;T=YA(V.inputs,M,T,Y?Y.inputs:null),A=YA(V.outputs,M,A,Ee);const He=null===T||null===w||Pv(l)?null:ux(T,M,w);C.push(He)}null!==T&&(T.hasOwnProperty("class")&&(l.flags|=8),T.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=C,l.inputs=T,l.outputs=A}(o,c,m)}function aC(o,l,c){const d=c.directiveStart,f=c.directiveEnd,m=c.index,w=function Lc(){return Mt.lFrame.currentDirectiveIndex}();try{Aa(m);for(let C=d;C<f;C++){const T=o.data[C],A=l[C];Uc(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&nx(T,A)}}finally{Aa(-1),Uc(w)}}function nx(o,l){null!==o.hostBindings&&o.hostBindings(1,l)}function Gv(o,l,c){l.componentOffset=c,(o.components??(o.components=[])).push(l.index)}function JO(o,l,c){if(c){if(l.exportAs)for(let d=0;d<l.exportAs.length;d++)c[l.exportAs[d]]=o;pi(l)&&(c[""]=o)}}function ox(o,l,c,d,f){o.data[d]=f;const m=f.factory||(f.factory=Mo(f.type)),w=new so(m,pi(f),Qh);o.blueprint[d]=w,c[d]=w,function XA(o,l,c,d,f){const m=f.hostBindings;if(m){let w=o.hostBindingOpCodes;null===w&&(w=o.hostBindingOpCodes=[]);const C=~l.index;(function ex(o){let l=o.length;for(;l>0;){const c=o[--l];if("number"==typeof c&&c<0)return c}return 0})(w)!=C&&w.push(C),w.push(c,d,m)}}(o,l,d,Gp(o,c,f.hostVars,Lt),f)}function qa(o,l,c,d,f,m){const w=Xn(o,l);!function Zv(o,l,c,d,f,m,w){if(null==m)o.removeAttribute(l,f,c);else{const C=null==w?xe(m):w(m,d||"",f);o.setAttribute(l,f,C,c)}}(l[$t],w,m,o.value,c,d,f)}function lx(o,l,c,d,f,m){const w=m[l];if(null!==w){const C=d.setInput;for(let T=0;T<w.length;){const A=w[T++],M=w[T++],V=w[T++];null!==C?d.setInput(c,V,A,M):c[M]=V}}}function ux(o,l,c){let d=null,f=0;for(;f<c.length;){const m=c[f];if(0!==m)if(5!==m){if("number"==typeof m)break;if(o.hasOwnProperty(m)){null===d&&(d=[]);const w=o[m];for(let C=0;C<w.length;C+=2)if(w[C]===l){d.push(m,w[C+1],c[f+1]);break}}f+=2}else f+=2;else f+=4}return d}function lC(o,l,c,d){return[o,!0,!1,l,null,0,d,c,null,null]}function hx(o,l){const c=or(l,o);if(Da(c)){const d=c[nt];48&c[Ft]?Qm(d,c,d.template,c[Rn]):c[Ss]>0&&zv(c)}}function zv(o){for(let d=Dh(o);null!==d;d=ju(d))for(let f=Wr;f<d.length;f++){const m=d[f];if(Da(m))if(512&m[Ft]){const w=m[nt];Qm(w,m,w.template,m[Rn])}else m[Ss]>0&&zv(m)}const c=o[nt].components;if(null!==c)for(let d=0;d<c.length;d++){const f=or(c[d],o);Da(f)&&f[Ss]>0&&zv(f)}}function fx(o,l){const c=or(l,o),d=c[nt];(function px(o,l){for(let c=l.length;c<o.blueprint.length;c++)l.push(o.blueprint[c])})(d,c),Xo(d,c,c[Rn])}function e_(o,l){return o[to]?o[Tc][ei]=l:o[to]=l,o[Tc]=l,l}function t_(o){for(;o;){o[Ft]|=32;const l=td(o);if(il(o)&&!l)return o;o=l}return null}function n_(o,l,c,d=!0){const f=l[ti];f.begin&&f.begin();try{Qm(o,l,o.template,c)}catch(w){throw d&&dC(l,w),w}finally{f.end&&f.end()}}function Wv(o,l,c){Vc(0),l(o,c)}function uC(o){return o[Gr]||(o[Gr]=[])}function cC(o){return o.cleanup||(o.cleanup=[])}function dC(o,l){const c=o[ma],d=c?c.get(Up,null):null;d&&d.handleError(l)}function Kv(o,l,c,d,f){for(let m=0;m<c.length;){const w=c[m++],C=c[m++],T=l[w],A=o.data[w];null!==A.setInput?A.setInput(T,f,d,C):T[C]=f}}function Bl(o,l,c){const d=Fo(l,o);!function Ep(o,l,c){o.setValue(l,c)}(o[$t],d,c)}function Jh(o,l,c){let d=c?o.styles:null,f=c?o.classes:null,m=0;if(null!==l)for(let w=0;w<l.length;w++){const C=l[w];"number"==typeof C?m=C:1==m?f=pe(f,C):2==m&&(d=pe(d,C+": "+l[++w]+";"))}c?o.styles=d:o.stylesWithoutHost=d,c?o.classes=f:o.classesWithoutHost=f}function ea(o,l,c,d,f=!1){for(;null!==c;){const m=l[c.index];if(null!==m&&d.push(qn(m)),xi(m))for(let C=Wr;C<m.length;C++){const T=m[C],A=T[nt].firstChild;null!==A&&ea(T[nt],T,A,d)}const w=c.type;if(8&w)ea(o,l,c.child,d);else if(32&w){const C=Nl(c,l);let T;for(;T=C();)d.push(T)}else if(16&w){const C=Mh(l,c);if(Array.isArray(C))d.push(...C);else{const T=td(l[Zr]);ea(T[nt],T,C,d,!0)}}c=f?c.projectionNext:c.next}return d}class Xh{get rootNodes(){const l=this._lView,c=l[nt];return ea(c,l,c.firstChild,[])}constructor(l,c){this._lView=l,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Rn]}set context(l){this._lView[Rn]=l}get destroyed(){return 128==(128&this._lView[Ft])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[Tn];if(xi(l)){const c=l[ko],d=c?c.indexOf(this):-1;d>-1&&(Tp(l,d),Il(c,d))}this._attachedToViewContainer=!1}xh(this._lView[nt],this._lView)}onDestroy(l){KA(this._lView[nt],this._lView,null,l)}markForCheck(){t_(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ft]&=-65}reattach(){this._lView[Ft]|=64}detectChanges(){n_(this._lView[nt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ml(o,l){qu(o,l,l[$t],2,null,null)}(this._lView[nt],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=l}}class Yv extends Xh{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;n_(l[nt],l,l[Rn],!1)}checkNoChanges(){}get context(){return null}}class r_ extends Gh{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const c=ln(l);return new pd(c,this.ngModule)}}function i_(o){const l=[];for(let c in o)o.hasOwnProperty(c)&&l.push({propName:o[c],templateName:c});return l}class hC{constructor(l,c){this.injector=l,this.parentInjector=c}get(l,c,d){d=z(d);const f=this.injector.get(l,Gm,d);return f!==Gm||c===Gm?f:this.parentInjector.get(l,c,d)}}class pd extends xE{get inputs(){return i_(this.componentDef.inputs)}get outputs(){return i_(this.componentDef.outputs)}constructor(l,c){super(),this.componentDef=l,this.ngModule=c,this.componentType=l.type,this.selector=function NA(o){return o.map(RA).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!c}create(l,c,d,f){let m=(f=f||this.ngModule)instanceof dd?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const w=m?new hC(l,m):l,C=w.get(xv,null);if(null===C)throw new _e(407,!1);const T=w.get(CA,null),A=C.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",V=d?function KO(o,l,c){return o.selectRootElement(l,c===Hn.ShadowDom)}(A,d,this.componentDef.encapsulation):rd(A,M,function Vs(o){const l=o.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(M)),Y=this.componentDef.onPush?288:272,ne=rC(0,null,null,1,0,null,null,null,null,null),Ee=Km(null,ne,null,Y,null,null,C,A,T,w,null);let He,et;yu(Ee);try{const ut=this.componentDef;let Rt,Pe=null;ut.findHostDirectiveDefs?(Rt=[],Pe=new Map,ut.findHostDirectiveDefs(ut,Rt,Pe),Rt.push(ut)):Rt=[ut];const Bt=function Qv(o,l){const c=o[nt],d=mn;return o[d]=l,qp(c,d,2,"#host",null)}(Ee,V),Zn=function tF(o,l,c,d,f,m,w,C){const T=f[nt];!function _x(o,l,c,d){for(const f of o)l.mergedAttrs=Ns(l.mergedAttrs,f.hostAttrs);null!==l.mergedAttrs&&(Jh(l,l.mergedAttrs,!0),null!==c&&Zu(d,c,l))}(d,o,l,w);const A=m.createRenderer(l,c),M=Km(f,Xm(c),null,c.onPush?32:16,f[o.index],o,m,A,C||null,null,null);return T.firstCreatePass&&Gv(T,o,d.length-1),e_(f,M),f[o.index]=M}(Bt,V,ut,Rt,Ee,C,A);et=Sa(ne,mn),V&&function pC(o,l,c,d){if(d)Nn(o,c,["ng-version",ME.full]);else{const{attrs:f,classes:m}=function MA(o){const l=[],c=[];let d=1,f=2;for(;d<o.length;){let m=o[d];if("string"==typeof m)2===f?""!==m&&l.push(m,o[++d]):8===f&&c.push(m);else{if(!Jo(f))break;f=m}d++}return{attrs:l,classes:c}}(l.selectors[0]);f&&Nn(o,c,f),m&&m.length>0&&ja(o,c,m.join(" "))}}(A,ut,V,d),void 0!==c&&function yx(o,l,c){const d=o.projection=[];for(let f=0;f<l.length;f++){const m=c[f];d.push(null!=m?Array.from(m):null)}}(et,this.ngContentSelectors,c),He=function gd(o,l,c,d,f,m){const w=Pr(),C=f[nt],T=Xn(w,f);oC(C,f,w,c,null,d);for(let M=0;M<c.length;M++)Kr(cs(f,C,w.directiveStart+M,w),f);aC(C,f,w),T&&Kr(T,f);const A=cs(f,C,w.directiveStart+w.componentOffset,w);if(o[Rn]=f[Rn]=A,null!==m)for(const M of m)M(A,l);return nC(C,w,o),A}(Zn,ut,Rt,Pe,Ee,[nF]),Xo(ne,Ee,null)}finally{ym()}return new fC(this.componentType,He,Vl(et,Ee),Ee,et)}}class fC extends vA{constructor(l,c,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=c,this.hostView=this.changeDetectorRef=new Yv(f),this.componentType=l}setInput(l,c){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[l])){const m=this._rootLView;Kv(m[nt],m,f,l,c),t_(or(this._tNode.index,m))}}get injector(){return new Ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function nF(){const o=Pr();hl(ve()[nt],o)}function s_(o){let l=function gC(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const d=[o];for(;l;){let f;if(pi(o))f=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new _e(903,!1);f=l.\u0275dir}if(f){if(c){d.push(f);const w=o;w.inputs=_C(o.inputs),w.declaredInputs=_C(o.declaredInputs),w.outputs=_C(o.outputs);const C=f.hostBindings;C&&vx(o,C);const T=f.viewQuery,A=f.contentQueries;if(T&&yC(o,T),A&&Jv(o,A),we(o.inputs,f.inputs),we(o.declaredInputs,f.declaredInputs),we(o.outputs,f.outputs),pi(f)&&f.data.animation){const M=o.data;M.animation=(M.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let w=0;w<m.length;w++){const C=m[w];C&&C.ngInherit&&C(o),C===s_&&(c=!1)}}l=Object.getPrototypeOf(l)}!function mC(o){let l=0,c=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=l+=f.hostVars,f.hostAttrs=Ns(f.hostAttrs,c=Ns(c,f.hostAttrs))}}(d)}function _C(o){return o===wr?{}:o===Xt?[]:o}function yC(o,l){const c=o.viewQuery;o.viewQuery=c?(d,f)=>{l(d,f),c(d,f)}:l}function Jv(o,l){const c=o.contentQueries;o.contentQueries=c?(d,f,m)=>{l(d,f,m),c(d,f,m)}:l}function vx(o,l){const c=o.hostBindings;o.hostBindings=c?(d,f)=>{l(d,f),c(d,f)}:l}function md(o){return!!a_(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function a_(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function wi(o,l,c){return!Object.is(o[l],c)&&(o[l]=c,!0)}function _d(o,l,c,d){const f=ve();return wi(f,Uo(),l)&&(nn(),qa(In(),f,o,l,c,d)),_d}function yd(o,l,c,d,f,m){const C=function Ku(o,l,c,d){const f=wi(o,l,c);return wi(o,l+1,d)||f}(o,function _i(){return Mt.lFrame.bindingIndex}(),c,f);return ls(2),C?l+xe(c)+d+xe(f)+m:Lt}function DC(o,l,c,d,f,m,w,C){const T=ve(),A=nn(),M=o+mn,V=A.firstCreatePass?function l_(o,l,c,d,f,m,w,C,T){const A=l.consts,M=qp(l,o,4,w||null,xs(A,C));qv(l,c,M,xs(A,T)),hl(l,M);const V=M.tView=rC(2,M,d,f,m,l.directiveRegistry,l.pipeRegistry,null,l.schemas,A);return null!==l.queries&&(l.queries.template(l,M),V.queries=l.queries.embeddedTView(M)),M}(M,A,T,l,c,d,f,m,w):A.data[M];mi(V,!1);const Y=T[$t].createComment("");Yo(A,T,Y,V),Kr(Y,T),e_(T,T[M]=lC(Y,T,Y,V)),Ic(V)&&Jm(A,T,V),null!=w&&fd(T,V,C)}function sf(o,l,c){const d=ve();return wi(d,Uo(),l)&&gs(nn(),In(),d,o,l,d[$t],c,!1),sf}function af(o,l,c,d,f){const w=f?"class":"style";Kv(o,c,l.inputs[w],w,d)}function Jp(o,l,c,d){const f=ve(),m=nn(),w=mn+o,C=f[$t],T=m.firstCreatePass?function AC(o,l,c,d,f,m){const w=l.consts,T=qp(l,o,2,d,xs(w,f));return qv(l,c,T,xs(w,m)),null!==T.attrs&&Jh(T,T.attrs,!1),null!==T.mergedAttrs&&Jh(T,T.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,T),T}(w,m,f,l,c,d):m.data[w],A=f[w]=rd(C,l,function vm(){return Mt.lFrame.currentNamespace}()),M=Ic(T);return mi(T,!0),Zu(C,A,T),32!=(32&T.flags)&&Yo(m,f,A,T),0===function hu(){return Mt.lFrame.elementDepthCount}()&&Kr(A,f),function Nc(){Mt.lFrame.elementDepthCount++}(),M&&(Jm(m,f,T),nC(m,T,f)),null!==d&&fd(f,T),Jp}function u_(){let o=Pr();gu()?mu():(o=o.parent,mi(o,!1));const l=o;!function Mc(){Mt.lFrame.elementDepthCount--}();const c=nn();return c.firstCreatePass&&(hl(c,o),rl(o)&&c.queries.elementEnd(o)),null!=l.classesWithoutHost&&function ch(o){return 0!=(8&o.flags)}(l)&&af(c,l,ve(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function op(o){return 0!=(16&o.flags)}(l)&&af(c,l,ve(),l.stylesWithoutHost,!1),u_}function Xp(o,l,c,d){return Jp(o,l,c,d),u_(),Xp}function c_(o,l,c){const d=ve(),f=nn(),m=o+mn,w=f.firstCreatePass?function xC(o,l,c,d,f){const m=l.consts,w=xs(m,d),C=qp(l,o,8,"ng-container",w);return null!==w&&Jh(C,w,!0),qv(l,c,C,xs(m,f)),null!==l.queries&&l.queries.elementStart(l,C),C}(m,f,d,l,c):f.data[m];mi(w,!0);const C=d[m]=d[$t].createComment("");return Yo(f,d,C,w),Kr(C,d),Ic(w)&&(Jm(f,d,w),nC(f,w,d)),null!=c&&fd(d,w),c_}function d_(){let o=Pr();const l=nn();return gu()?mu():(o=o.parent,mi(o,!1)),l.firstCreatePass&&(hl(l,o),rl(o)&&l.queries.elementEnd(o)),d_}function RC(){return ve()}function tw(o){return!!o&&"function"==typeof o.then}function NC(o){return!!o&&"function"==typeof o.subscribe}const Ju=NC;function eg(o,l,c,d){const f=ve(),m=nn(),w=Pr();return function MC(o,l,c,d,f,m,w){const C=Ic(d),A=o.firstCreatePass&&cC(o),M=l[Rn],V=uC(l);let Y=!0;if(3&d.type||w){const He=Xn(d,l),et=w?w(He):He,ut=V.length,Rt=w?Bt=>w(qn(Bt[d.index])):d.index;let Pe=null;if(!w&&C&&(Pe=function f_(o,l,c,d){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const w=f[m];if(w===c&&f[m+1]===d){const C=l[Gr],T=f[m+2];return C.length>T?C[T]:null}"string"==typeof w&&(m+=2)}return null}(o,l,f,d.index)),null!==Pe)(Pe.__ngLastListenerFn__||Pe).__ngNextListenerFn__=m,Pe.__ngLastListenerFn__=m,Y=!1;else{m=OC(d,l,M,m,!1);const Bt=c.listen(et,f,m);V.push(m,Bt),A&&A.push(f,Rt,ut,ut+1)}}else m=OC(d,l,M,m,!1);const ne=d.outputs;let Ee;if(Y&&null!==ne&&(Ee=ne[f])){const He=Ee.length;if(He)for(let et=0;et<He;et+=2){const Zn=l[Ee[et]][Ee[et+1]].subscribe(m),Ar=V.length;V.push(m,Zn),A&&A.push(f,d.index,Ar,-(Ar+1))}}}(m,f,f[$t],w,o,l,d),eg}function PC(o,l,c,d){try{return gi(6,l,c),!1!==c(d)}catch(f){return dC(o,f),!1}finally{gi(7,l,c)}}function OC(o,l,c,d,f){return function m(w){if(w===Function)return d;t_(o.componentOffset>-1?or(o.index,l):l);let T=PC(l,c,d,w),A=m.__ngNextListenerFn__;for(;A;)T=PC(l,c,A,w)&&T,A=A.__ngNextListenerFn__;return f&&!1===T&&(w.preventDefault(),w.returnValue=!1),T}}function FC(o=1){return function rv(o){return(Mt.lFrame.contextLView=function lh(o,l){for(;o>0;)l=l[Zi],o--;return l}(o,Mt.lFrame.contextLView))[Rn]}(o)}function Sx(o,l){let c=null;const d=function Zm(o){const l=o.attrs;if(null!=l){const c=l.indexOf(5);if(!(1&c))return l[c+1]}return null}(o);for(let f=0;f<l.length;f++){const m=l[f];if("*"!==m){if(null===d?Bp(o,m,!0):kA(d,m))return f}else c=f}return c}function p_(o){const l=ve()[Zr][Jn];if(!l.projection){const d=l.projection=Fa(o?o.length:1,null),f=d.slice();let m=l.child;for(;null!==m;){const w=o?Sx(m,o):0;null!==w&&(f[w]?f[w].projectionNext=m:d[w]=m,f[w]=m),m=m.next}}}function LC(o,l=0,c){const d=ve(),f=nn(),m=qp(f,mn+o,16,null,c||null);null===m.projection&&(m.projection=l),mu(),32!=(32&m.flags)&&function Rm(o,l,c){fo(l[$t],0,l,c,kh(o,c,l),Nh(c.parent||l[Jn],c,l))}(f,d,m)}function m_(o,l){return o<<17|l<<2}function $l(o){return o>>17&32767}function $C(o){return 2|o}function vd(o){return(131068&o)>>2}function iw(o,l){return-131069&o|l<<2}function sw(o){return 1|o}function qC(o,l,c,d,f){const m=o[c+1],w=null===l;let C=d?$l(m):vd(m),T=!1;for(;0!==C&&(!1===T||w);){const M=o[C+1];GC(o[C],l)&&(T=!0,o[C+1]=d?sw(M):$C(M)),C=d?$l(M):vd(M)}T&&(o[c+1]=d?$C(m):sw(m))}function GC(o,l){return null===o||null==l||(Array.isArray(o)?o[1]:o)===l||!(!Array.isArray(o)||"string"!=typeof l)&&Er(o,l)>=0}const Yr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function __(o){return o.substring(Yr.key,Yr.keyEnd)}function ZC(o,l){const c=Yr.textEnd;return c===l?-1:(l=Yr.keyEnd=function aw(o,l,c){for(;l<c&&o.charCodeAt(l)>32;)l++;return l}(o,Yr.key=l,c),bi(o,l,c))}function bi(o,l,c){for(;l<c&&o.charCodeAt(l)<=32;)l++;return l}function lw(o,l,c){return yo(o,l,c,!1),lw}function uw(o,l){return yo(o,l,null,!0),uw}function cw(o){!function dr(o,l,c,d){const f=nn(),m=ls(2);f.firstUpdatePass&&YC(f,null,m,d);const w=ve();if(c!==Lt&&wi(w,m,c)){const C=f.data[ri()];if(dw(C,d)&&!wd(f,m)){let T=d?C.classesWithoutHost:C.stylesWithoutHost;null!==T&&(c=pe(T,c||"")),af(f,C,w,c,d)}else!function XC(o,l,c,d,f,m,w,C){f===Lt&&(f=Xt);let T=0,A=0,M=0<f.length?f[0]:null,V=0<m.length?m[0]:null;for(;null!==M||null!==V;){const Y=T<f.length?f[T+1]:void 0,ne=A<m.length?m[A+1]:void 0;let He,Ee=null;M===V?(T+=2,A+=2,Y!==ne&&(Ee=V,He=ne)):null===V||null!==M&&M<V?(T+=2,Ee=M):(A+=2,Ee=V,He=ne),null!==Ee&&eT(o,l,c,d,Ee,He,w,C),M=T<f.length?f[T]:null,V=A<m.length?m[A]:null}}(f,C,w,w[$t],w[m+1],w[m+1]=function Ux(o,l,c){if(null==c||""===c)return Xt;const d=[],f=ue(c);if(Array.isArray(f))for(let m=0;m<f.length;m++)o(d,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&o(d,m,f[m]);else"string"==typeof f&&l(d,f);return d}(o,l,c),d,m)}}(Vx,na,o,!0)}function na(o,l){for(let c=function Nx(o){return function zC(o){Yr.key=0,Yr.keyEnd=0,Yr.value=0,Yr.valueEnd=0,Yr.textEnd=o.length}(o),ZC(o,bi(o,0,Yr.textEnd))}(l);c>=0;c=ZC(l,c))ii(o,__(l),!0)}function yo(o,l,c,d){const f=ve(),m=nn(),w=ls(2);m.firstUpdatePass&&YC(m,o,w,d),l!==Lt&&wi(f,w,l)&&eT(m,m.data[ri()],f,f[$t],o,f[w+1]=function Bx(o,l){return null==o||""===o||("string"==typeof l?o+=l:"object"==typeof o&&(o=ge(ue(o)))),o}(l,c),d,w)}function wd(o,l){return l>=o.expandoStartIndex}function YC(o,l,c,d){const f=o.data;if(null===f[c+1]){const m=f[ri()],w=wd(o,c);dw(m,d)&&null===l&&!w&&(l=!1),l=function Fx(o,l,c,d){const f=ks(o);let m=d?l.residualClasses:l.residualStyles;if(null===f)0===(d?l.classBindings:l.styleBindings)&&(c=sg(c=lf(null,o,l,c,d),l.attrs,d),m=null);else{const w=l.directiveStylingLast;if(-1===w||o[w]!==f)if(c=lf(f,o,l,c,d),null===m){let T=function QC(o,l,c){const d=c?l.classBindings:l.styleBindings;if(0!==vd(d))return o[$l(d)]}(o,l,d);void 0!==T&&Array.isArray(T)&&(T=lf(null,o,l,T[1],d),T=sg(T,l.attrs,d),function Lx(o,l,c,d){o[$l(c?l.classBindings:l.styleBindings)]=d}(o,l,d,T))}else m=function JC(o,l,c){let d;const f=l.directiveEnd;for(let m=1+l.directiveStylingLast;m<f;m++)d=sg(d,o[m].hostAttrs,c);return sg(d,l.attrs,c)}(o,l,d)}return void 0!==m&&(d?l.residualClasses=m:l.residualStyles=m),c}(f,m,l,d),function HC(o,l,c,d,f,m){let w=m?l.classBindings:l.styleBindings,C=$l(w),T=vd(w);o[d]=c;let M,A=!1;if(Array.isArray(c)?(M=c[1],(null===M||Er(c,M)>0)&&(A=!0)):M=c,f)if(0!==T){const Y=$l(o[C+1]);o[d+1]=m_(Y,C),0!==Y&&(o[Y+1]=iw(o[Y+1],d)),o[C+1]=function jC(o,l){return 131071&o|l<<17}(o[C+1],d)}else o[d+1]=m_(C,0),0!==C&&(o[C+1]=iw(o[C+1],d)),C=d;else o[d+1]=m_(T,0),0===C?C=d:o[T+1]=iw(o[T+1],d),T=d;A&&(o[d+1]=$C(o[d+1])),qC(o,M,d,!0),qC(o,M,d,!1),function kx(o,l,c,d,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof l&&Er(m,l)>=0&&(c[d+1]=sw(c[d+1]))}(l,M,o,d,m),w=m_(C,T),m?l.classBindings=w:l.styleBindings=w}(f,m,l,c,w,d)}}function lf(o,l,c,d,f){let m=null;const w=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<w&&(m=l[C],d=sg(d,m.hostAttrs,f),m!==o);)C++;return null!==o&&(c.directiveStylingLast=C),d}function sg(o,l,c){const d=c?1:2;let f=-1;if(null!==l)for(let m=0;m<l.length;m++){const w=l[m];"number"==typeof w?f=w:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),ii(o,w,!!c||l[++m]))}return void 0===o?null:o}function Vx(o,l,c){const d=String(l);""!==d&&!d.includes(" ")&&ii(o,d,c)}function eT(o,l,c,d,f,m,w,C){if(!(3&l.type))return;const T=o.data,A=T[C+1],M=function xx(o){return 1==(1&o)}(A)?tT(T,l,c,f,vd(A),w):void 0;w_(M)||(w_(m)||function rw(o){return 2==(2&o)}(A)&&(m=tT(T,null,c,f,C,w)),function po(o,l,c,d,f){if(l)f?o.addClass(c,d):o.removeClass(c,d);else{let m=-1===d.indexOf("-")?void 0:Tt.DashCase;null==f?o.removeStyle(c,d,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=Tt.Important),o.setStyle(c,d,f,m))}}(d,w,Fo(ri(),c),f,m))}function tT(o,l,c,d,f,m){const w=null===l;let C;for(;f>0;){const T=o[f],A=Array.isArray(T),M=A?T[1]:T,V=null===M;let Y=c[f+1];Y===Lt&&(Y=V?Xt:void 0);let ne=V?Ht(Y,d):M===d?Y:void 0;if(A&&!w_(ne)&&(ne=Ht(T,d)),w_(ne)&&(C=ne,w))return C;const Ee=o[f+1];f=w?$l(Ee):vd(Ee)}if(null!==l){let T=m?l.residualClasses:l.residualStyles;null!=T&&(C=Ht(T,d))}return C}function w_(o){return void 0!==o}function dw(o,l){return 0!=(o.flags&(l?8:16))}function og(o,l=""){const c=ve(),d=nn(),f=o+mn,m=d.firstCreatePass?qp(d,f,1,l,null):d.data[f],w=c[f]=function $u(o,l){return o.createText(l)}(c[$t],l);Yo(d,c,w,m),mi(m,!1)}function b_(o){return E_("",o,""),b_}function E_(o,l,c){const d=ve(),f=function Yu(o,l,c,d){return wi(o,Uo(),c)?l+xe(c)+d:Lt}(d,o,l,c);return f!==Lt&&Bl(d,ri(),f),E_}function C_(o,l,c,d,f){const m=ve(),w=yd(m,o,l,c,d,f);return w!==Lt&&Bl(m,ri(),w),C_}function T_(o,l,c){const d=ve();if(wi(d,Uo(),l)){const m=nn(),w=In();gs(m,w,d,o,l,function gx(o,l,c){return(null===o||pi(o))&&(c=function Ia(o){for(;Array.isArray(o);){if("object"==typeof o[Ai])return o;o=o[Di]}return null}(c[l.index])),c[$t]}(ks(m.data),w,d),c,!0)}return T_}const ec=void 0;var I_=["en",[["a","p"],["AM","PM"],ec],[["AM","PM"],ec,ec],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ec,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ec,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ec,"{1} 'at' {0}",ec],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hT(o){const c=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let Ed={};function S_(o){const l=function pT(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=ww(l);if(c)return c;const d=l.split("-")[0];if(c=ww(d),c)return c;if("en"===d)return I_;throw new _e(701,!1)}function fT(o){return S_(o)[Dt.PluralCase]}function ww(o){return o in Ed||(Ed[o]=pn.ng&&pn.ng.common&&pn.ng.common.locales&&pn.ng.common.locales[o]),Ed[o]}var Dt=(()=>((Dt=Dt||{})[Dt.LocaleId=0]="LocaleId",Dt[Dt.DayPeriodsFormat=1]="DayPeriodsFormat",Dt[Dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Dt[Dt.DaysFormat=3]="DaysFormat",Dt[Dt.DaysStandalone=4]="DaysStandalone",Dt[Dt.MonthsFormat=5]="MonthsFormat",Dt[Dt.MonthsStandalone=6]="MonthsStandalone",Dt[Dt.Eras=7]="Eras",Dt[Dt.FirstDayOfWeek=8]="FirstDayOfWeek",Dt[Dt.WeekendRange=9]="WeekendRange",Dt[Dt.DateFormat=10]="DateFormat",Dt[Dt.TimeFormat=11]="TimeFormat",Dt[Dt.DateTimeFormat=12]="DateTimeFormat",Dt[Dt.NumberSymbols=13]="NumberSymbols",Dt[Dt.NumberFormats=14]="NumberFormats",Dt[Dt.CurrencyCode=15]="CurrencyCode",Dt[Dt.CurrencySymbol=16]="CurrencySymbol",Dt[Dt.CurrencyName=17]="CurrencyName",Dt[Dt.Currencies=18]="Currencies",Dt[Dt.Directionality=19]="Directionality",Dt[Dt.PluralCase=20]="PluralCase",Dt[Dt.ExtraData=21]="ExtraData",Dt))();const Cd="en-US";let Ew=Cd;function Lw(o,l,c,d,f){if(o=X(o),Array.isArray(o))for(let m=0;m<o.length;m++)Lw(o[m],l,c,d,f);else{const m=nn(),w=ve();let C=Ul(o)?o:X(o.provide),T=Iv(o);const A=Pr(),M=1048575&A.providerIndexes,V=A.directiveStart,Y=A.providerIndexes>>20;if(Ul(o)||!o.multi){const ne=new so(T,f,Qh),Ee=Gl(C,l,f?M:M+Y,V);-1===Ee?(El(Pa(A,w),m,C),F_(m,o,l.length),l.push(C),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),c.push(ne),w.push(ne)):(c[Ee]=ne,w[Ee]=ne)}else{const ne=Gl(C,l,M+Y,V),Ee=Gl(C,l,M,M+Y),et=Ee>=0&&c[Ee];if(f&&!et||!f&&!(ne>=0&&c[ne])){El(Pa(A,w),m,C);const ut=function wF(o,l,c,d,f){const m=new so(o,c,Qh);return m.multi=[],m.index=l,m.componentProviders=0,Uw(m,f,d&&!c),m}(f?gg:yk,c.length,f,d,T);!f&&et&&(c[Ee].providerFactory=ut),F_(m,o,l.length,0),l.push(C),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),c.push(ut),w.push(ut)}else F_(m,o,ne>-1?ne:Ee,Uw(c[f?Ee:ne],T,!f&&d));!f&&d&&et&&c[Ee].componentProviders++}}}function F_(o,l,c,d){const f=Ul(l),m=function jm(o){return!!o.useClass}(l);if(f||m){const T=(m?X(l.useClass):l).prototype.ngOnDestroy;if(T){const A=o.destroyHooks||(o.destroyHooks=[]);if(!f&&l.multi){const M=A.indexOf(c);-1===M?A.push(c,[d,T]):A[M+1].push(d,T)}else A.push(c,T)}}}function Uw(o,l,c){return c&&o.componentProviders++,o.multi.push(l)-1}function Gl(o,l,c,d){for(let f=c;f<d;f++)if(l[f]===o)return f;return-1}function yk(o,l,c,d){return Vw(this.multi,[])}function gg(o,l,c,d){const f=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,C=cs(c,c[nt],this.providerFactory.index,d);m=C.slice(0,w),Vw(f,m);for(let T=w;T<C.length;T++)m.push(C[T])}else m=[],Vw(f,m);return m}function Vw(o,l){for(let c=0;c<o.length;c++)l.push((0,o[c])());return l}function Bw(o,l=[]){return c=>{c.providersResolver=(d,f)=>function DT(o,l,c){const d=nn();if(d.firstCreatePass){const f=pi(o);Lw(c,d.data,d.blueprint,f,!0),Lw(l,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,l)}}class df{}class jw{}function vk(o,l){return new L_(o,l??null)}class L_ extends df{constructor(l,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new r_(this);const d=Hr(l);this._bootstrapComponents=Ha(d.bootstrap),this._r3Injector=Lv(l,c,[{provide:df,useValue:this},{provide:Gh,useValue:this.componentFactoryResolver}],ge(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class $w extends jw{constructor(l){super(),this.moduleType=l}create(l){return new L_(this.moduleType,l)}}class AT extends df{constructor(l,c,d){super(),this.componentFactoryResolver=new r_(this),this.instance=null;const f=new DE([...l,{provide:df,useValue:this},{provide:Gh,useValue:this.componentFactoryResolver}],c||Hm(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function Hw(o,l,c=null){return new AT(o,l,c).injector}let Zl=(()=>{class o{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const d=$h(0,c.type),f=d.length>0?Hw([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,f)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=Ye({token:o,providedIn:"environment",factory:()=>new o($(dd))}),o})();function xT(o){o.getStandaloneInjector=l=>l.get(Zl).getOrCreateStandaloneInjector(o)}function VT(o,l,c,d,f,m){const w=l+c;return wi(o,w,f)?function ta(o,l,c){return o[l]=c}(o,w+1,m?d.call(m,f):d(f)):function hf(o,l){const c=o[l];return c===Lt?void 0:c}(o,w+1)}function Kw(o,l){const c=nn();let d;const f=o+mn;c.firstCreatePass?(d=function Ak(o,l){if(l)for(let c=l.length-1;c>=0;c--){const d=l[c];if(o===d.name)return d}}(l,c.pipeRegistry),c.data[f]=d,d.onDestroy&&(c.destroyHooks??(c.destroyHooks=[])).push(f,d.onDestroy)):d=c.data[f];const m=d.factory||(d.factory=Mo(d.type)),w=kn(Qh);try{const C=Na(!1),T=m();return Na(C),function Tx(o,l,c,d){c>=o.data.length&&(o.data[c]=null,o.blueprint[c]=null),l[c]=d}(c,ve(),f,T),T}finally{kn(w)}}function kk(o,l,c){const d=o+mn,f=ve(),m=function Lo(o,l){return o[l]}(f,d);return function B_(o,l){return o[nt].data[l].pure}(f,d)?VT(f,function ar(){const o=Mt.lFrame;let l=o.bindingRootIndex;return-1===l&&(l=o.bindingRootIndex=o.tView.bindingStartIndex),l}(),l,m.transform,c,m):m.transform(c)}function HT(o){return l=>{setTimeout(o,void 0,l)}}const zl=class CF extends a.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,c,d){let f=l,m=c||(()=>null),w=d;if(l&&"object"==typeof l){const T=l;f=T.next?.bind(T),m=T.error?.bind(T),w=T.complete?.bind(T)}this.__isAsync&&(m=HT(m),f&&(f=HT(f)),w&&(w=HT(w)));const C=super.subscribe({next:f,error:m,complete:w});return l instanceof te.w0&&l.add(C),C}};function TF(){return this._results[Symbol.iterator]()}class qT{get changes(){return this._changes||(this._changes=new zl)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=qT.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=TF)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,c){return this._results.reduce(l,c)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,c){const d=this;d.dirty=!1;const f=function yi(o){return o.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function Wc(o,l,c){if(o.length!==l.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],m=l[d];if(c&&(f=c(f),m=c(m)),m!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let j_=(()=>{class o{}return o.__NG_ELEMENT_ID__=$_,o})();const Nk=j_,Mk=class extends Nk{constructor(l,c,d){super(),this._declarationLView=l,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(l,c){const d=this._declarationTContainer.tView,f=Km(this._declarationLView,d,l,16,null,d.declTNode,null,null,null,null,c||null);f[_a]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[zi];return null!==w&&(f[zi]=w.createEmbeddedView(d)),Xo(d,f,l),new Xh(f)}};function $_(){return ff(Pr(),ve())}function ff(o,l){return 4&o.type?new Mk(l,o,Vl(o,l)):null}let vo=(()=>{class o{}return o.__NG_ELEMENT_ID__=IF,o})();function IF(){return Qw(Pr(),ve())}const Pk=vo,GT=class extends Pk{constructor(l,c,d){super(),this._lContainer=l,this._hostTNode=c,this._hostLView=d}get element(){return Vl(this._hostTNode,this._hostLView)}get injector(){return new Ki(this._hostTNode,this._hostLView)}get parentInjector(){const l=Cu(this._hostTNode,this._hostLView);if($c(l)){const c=bu(l,this._hostLView),d=_l(l);return new Ki(c[nt].data[d+8],c)}return new Ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const c=ZT(this._lContainer);return null!==c&&c[l]||null}get length(){return this._lContainer.length-Wr}createEmbeddedView(l,c,d){let f,m;"number"==typeof d?f=d:null!=d&&(f=d.index,m=d.injector);const w=l.createEmbeddedView(c||{},m);return this.insert(w,f),w}createComponent(l,c,d,f,m){const w=l&&!function Nu(o){return"function"==typeof o}(l);let C;if(w)C=c;else{const V=c||{};C=V.index,d=V.injector,f=V.projectableNodes,m=V.environmentInjector||V.ngModuleRef}const T=w?l:new pd(ln(l)),A=d||this.parentInjector;if(!m&&null==T.ngModule){const Y=(w?A:this.parentInjector).get(dd,null);Y&&(m=Y)}const M=T.create(A,f,void 0,m);return this.insert(M.hostView,C),M}insert(l,c){const d=l._lView,f=d[nt];if(function cu(o){return xi(o[Tn])}(d)){const M=this.indexOf(l);if(-1!==M)this.detach(M);else{const V=d[Tn],Y=new GT(V,V[Jn],V[Tn]);Y.detach(Y.indexOf(l))}}const m=this._adjustIndex(c),w=this._lContainer;!function cv(o,l,c,d){const f=Wr+d,m=c.length;d>0&&(c[f-1][ei]=l),d<m-Wr?(l[ei]=c[f],Mu(c,Wr+d,l)):(c.push(l),l[ei]=null),l[Tn]=c;const w=l[_a];null!==w&&c!==w&&function dv(o,l){const c=o[zr];l[Zr]!==l[Tn][Tn][Zr]&&(o[Qd]=!0),null===c?o[zr]=[l]:c.push(l)}(w,l);const C=l[zi];null!==C&&C.insertView(o),l[Ft]|=64}(f,d,w,m);const C=ho(m,w),T=d[$t],A=Us(T,w[ya]);return null!==A&&function lv(o,l,c,d,f,m){d[Di]=f,d[Jn]=l,qu(o,d,c,1,f,m)}(f,w[Jn],T,d,A,C),l.attachToViewContainerRef(),Mu(Yw(w),m,l),l}move(l,c){return this.insert(l,c)}indexOf(l){const c=ZT(this._lContainer);return null!==c?c.indexOf(l):-1}remove(l){const c=this._adjustIndex(l,-1),d=Tp(this._lContainer,c);d&&(Il(Yw(this._lContainer),c),xh(d[nt],d))}detach(l){const c=this._adjustIndex(l,-1),d=Tp(this._lContainer,c);return d&&null!=Il(Yw(this._lContainer),c)?new Xh(d):null}_adjustIndex(l,c=0){return l??this.length+c}};function ZT(o){return o[ko]}function Yw(o){return o[ko]||(o[ko]=[])}function Qw(o,l){let c;const d=l[o.index];if(xi(d))c=d;else{let f;if(8&o.type)f=qn(d);else{const m=l[$t];f=m.createComment("");const w=Xn(o,l);Ba(m,Us(m,w),f,function Rh(o,l){return o.nextSibling(l)}(m,w),!1)}l[o.index]=c=lC(d,l,f,o),e_(l,c)}return new GT(c,o,l)}class pf{constructor(l){this.queryList=l,this.matches=null}clone(){return new pf(this.queryList)}setDirty(){this.queryList.setDirty()}}class Wa{constructor(l=[]){this.queries=l}createEmbeddedView(l){const c=l.queries;if(null!==c){const d=null!==l.contentQueries?l.contentQueries[0]:c.length,f=[];for(let m=0;m<d;m++){const w=c.getByIndex(m);f.push(this.queries[w.indexInDeclarationView].clone())}return new Wa(f)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let c=0;c<this.queries.length;c++)null!==YT(l,c).matches&&this.queries[c].setDirty()}}class Ok{constructor(l,c,d=null){this.predicate=l,this.flags=c,this.read=d}}class Jw{constructor(l=[]){this.queries=l}elementStart(l,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(l,c)}elementEnd(l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(l)}embeddedTView(l){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,m=this.getByIndex(d).embeddedTView(l,f);m&&(m.indexInDeclarationView=d,null!==c?c.push(m):c=[m])}return null!==c?new Jw(c):null}template(l,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(l,c)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Xw{constructor(l,c=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(l,c){this.isApplyingToNode(c)&&this.matchTNode(l,c)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,c){this.elementStart(l,c)}embeddedTView(l,c){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,c),new Xw(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=l.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(l,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(l,c,zT(c,m)),this.matchTNodeWithReadOption(l,c,Ho(c,l,m,!1,!1))}else d===j_?4&c.type&&this.matchTNodeWithReadOption(l,c,-1):this.matchTNodeWithReadOption(l,c,Ho(c,l,d,!1,!1))}matchTNodeWithReadOption(l,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Zh||f===vo||f===j_&&4&c.type)this.addMatch(c.index,-2);else{const m=Ho(c,l,f,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,d)}}addMatch(l,c){null===this.matches?this.matches=[l,c]:this.matches.push(l,c)}}function zT(o,l){const c=o.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===l)return c[d+1];return null}function KT(o,l,c,d){return-1===c?function WT(o,l){return 11&o.type?Vl(o,l):4&o.type?ff(o,l):null}(l,o):-2===c?function Fk(o,l,c){return c===Zh?Vl(l,o):c===j_?ff(l,o):c===vo?Qw(l,o):void 0}(o,l,d):cs(o,o[nt],c,l)}function gf(o,l,c,d){const f=l[zi].queries[d];if(null===f.matches){const m=o.data,w=c.matches,C=[];for(let T=0;T<w.length;T+=2){const A=w[T];C.push(A<0?null:KT(l,m[A],w[T+1],c.metadata.read))}f.matches=C}return f.matches}function hr(o,l,c,d){const f=o.queries.getByIndex(c),m=f.matches;if(null!==m){const w=gf(o,l,f,c);for(let C=0;C<m.length;C+=2){const T=m[C];if(T>0)d.push(w[C/2]);else{const A=m[C+1],M=l[-T];for(let V=Wr;V<M.length;V++){const Y=M[V];Y[_a]===Y[Tn]&&hr(Y[nt],Y,A,d)}if(null!==M[zr]){const V=M[zr];for(let Y=0;Y<V.length;Y++){const ne=V[Y];hr(ne[nt],ne,A,d)}}}}}return d}function H_(o){const l=ve(),c=nn(),d=sh();Vc(d+1);const f=YT(c,d);if(o.dirty&&function al(o){return 4==(4&o[Ft])}(l)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?hr(c,l,d,[]):gf(c,l,f,d);o.reset(m,Lp),o.notifyOnChanges()}return!0}return!1}function yg(o,l,c,d){const f=nn();if(f.firstCreatePass){const m=Pr();(function s0(o,l,c){null===o.queries&&(o.queries=new Jw),o.queries.track(new Xw(l,c))})(f,new Ok(l,c,d),m.index),function Lk(o,l){const c=o.contentQueries||(o.contentQueries=[]);l!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,l)}(f,o),2==(2&c)&&(f.staticContentQueries=!0)}!function r0(o,l,c){const d=new qT(4==(4&c));KA(o,l,d,d.destroy),null===l[zi]&&(l[zi]=new Wa),l[zi].queries.push(new pf(d))}(f,ve(),c)}function t0(){return function n0(o,l){return o[zi].queries[l].queryList}(ve(),sh())}function YT(o,l){return o.queries.getByIndex(l)}function JT(o){return!!Hr(o)}function Y_(...o){}const Ci=new tn("Application Initializer");let Q_=(()=>{class o{constructor(c){this.appInits=c,this.resolve=Y_,this.reject=Y_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(tw(m))c.push(m);else if(Ju(m)){const w=new Promise((C,T)=>{m.subscribe({complete:C,error:T})});c.push(w)}}Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)($(Ci,8))},o.\u0275prov=Ye({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const d0=new tn("AppId",{providedIn:"root",factory:function cI(){return`${h0()}${h0()}${h0()}`}});function h0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const dI=new tn("Platform Initializer"),hI=new tn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),nR=new tn("AnimationModuleType");let rR=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Ye({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const J_=new tn("LocaleId",{providedIn:"root",factory:()=>Z(J_,gt.Optional|gt.SkipSelf)||function iR(){return typeof $localize<"u"&&$localize.locale||Cd}()}),X_=new tn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class oR{constructor(l,c){this.ngModuleFactory=l,this.componentFactories=c}}let fI=(()=>{class o{compileModuleSync(c){return new $w(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),m=Ha(Hr(c).declarations).reduce((w,C)=>{const T=ln(C);return T&&w.push(new pd(T)),w},[]);return new oR(d,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Ye({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const sc=(()=>Promise.resolve(0))();function Rd(o){typeof Zone>"u"?sc.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Jr{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zl(!1),this.onMicrotaskEmpty=new zl(!1),this.onStable=new zl(!1),this.onError=new zl(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function gI(){let o=pn.requestAnimationFrame,l=pn.cancelAnimationFrame;if(typeof Zone<"u"&&o&&l){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function kt(o){const l=()=>{!function mI(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(pn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,_I(o),o.isCheckStableRunning=!0,_0(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),_I(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,m,w,C)=>{try{return lR(o),c.invokeTask(f,m,w,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&l(),uR(o)}},onInvoke:(c,d,f,m,w,C,T)=>{try{return lR(o),c.invoke(f,m,w,C,T)}finally{o.shouldCoalesceRunChangeDetection&&l(),uR(o)}},onHasTask:(c,d,f,m)=>{c.hasTask(f,m),d===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,_I(o),_0(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,d,f,m)=>(c.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Jr.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(Jr.isInAngularZone())throw new _e(909,!1)}run(l,c,d){return this._inner.run(l,c,d)}runTask(l,c,d,f){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+f,l,m0,Y_,Y_);try{return m.runTask(w,c,d)}finally{m.cancelTask(w)}}runGuarded(l,c,d){return this._inner.runGuarded(l,c,d)}runOutsideAngular(l){return this._outer.run(l)}}const m0={};function _0(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function _I(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function lR(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function uR(o){o._nesting--,_0(o)}class VF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zl,this.onMicrotaskEmpty=new zl,this.onStable=new zl,this.onError=new zl}run(l,c,d){return l.apply(c,d)}runGuarded(l,c,d){return l.apply(c,d)}runOutsideAngular(l){return l()}runTask(l,c,d,f){return l.apply(c,d)}}const cR=new tn(""),dR=new tn("");let y0,BF=(()=>{class o{constructor(c,d,f){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,y0||(function fR(o){y0=o}(f),f.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Jr.assertNotInAngularZone(),Rd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Rd(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,f){return[]}}return o.\u0275fac=function(c){return new(c||o)($(Jr),$(hR),$(dR))},o.\u0275prov=Ye({token:o,factory:o.\u0275fac}),o})(),hR=(()=>{class o{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return y0?.findTestabilityInTree(this,c,d)??null}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Ye({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Wl=!1;let Ka=null;const yI=new tn("AllowMultipleToken"),vI=new tn("PlatformDestroyListeners"),pR=new tn("appBootstrapListener");class _R{constructor(l,c){this.name=l,this.token=c}}function bI(o,l,c=[]){const d=`Platform: ${l}`,f=new tn(d);return(m=[])=>{let w=TI();if(!w||w.injector.get(yI,!1)){const C=[...c,...m,{provide:f,useValue:!0}];o?o(C):function yR(o){if(Ka&&!Ka.get(yI,!1))throw new _e(400,!1);Ka=o;const l=o.get(bR);(function wI(o){const l=o.get(dI,null);l&&l.forEach(c=>c())})(o)}(function wR(o=[],l){return Wh.create({name:l,providers:[{provide:Wu,useValue:"platform"},{provide:vI,useValue:new Set([()=>Ka=null])},...o]})}(C,d))}return function EI(o){const l=TI();if(!l)throw new _e(401,!1);return l}()}}function TI(){return Ka?.get(bR)??null}let bR=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const f=function CR(o,l){let c;return c="noop"===o?new VF:("zone.js"===o?void 0:o)||new Jr(l),c}(d?.ngZone,function ER(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(d)),m=[{provide:Jr,useValue:f}];return f.run(()=>{const w=Wh.create({providers:m,parent:this.injector,name:c.moduleType.name}),C=c.create(w),T=C.injector.get(Up,null);if(!T)throw new _e(402,!1);return f.runOutsideAngular(()=>{const A=f.onError.subscribe({next:M=>{T.handleError(M)}});C.onDestroy(()=>{yf(this._modules,C),A.unsubscribe()})}),function II(o,l,c){try{const d=c();return tw(d)?d.catch(f=>{throw l.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw l.runOutsideAngular(()=>o.handleError(d)),d}}(T,f,()=>{const A=C.injector.get(Q_);return A.runInitializers(),A.donePromise.then(()=>(function Ni(o){de(o,"Expected localeId to be defined"),"string"==typeof o&&(Ew=o.toLowerCase().replace(/_/g,"-"))}(C.injector.get(J_,Cd)||Cd),this._moduleDoBootstrap(C),C))})})}bootstrapModule(c,d=[]){const f=v0({},d);return function gR(o,l,c){const d=new $w(c);return Promise.resolve(d)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const d=c.injector.get(Ya);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new _e(-403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(vI,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)($(Wh))},o.\u0275prov=Ye({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function v0(o,l){return Array.isArray(l)?l.reduce(v0,o):{...o,...l}}let Ya=(()=>{class o{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(c,d,f){this._zone=c,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new L.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),w=new L.y(C=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Jr.assertNotInAngularZone(),Rd(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Jr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{T.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ae.T)(m,w.pipe((0,se.B)()))}bootstrap(c,d){const f=c instanceof xE;if(!this._injector.get(Q_).done){!f&&Is(c);throw new _e(405,Wl)}let w;w=f?c:this._injector.get(Gh).resolveComponentFactory(c),this.componentTypes.push(w.componentType);const C=function mR(o){return o.isBoundToModule}(w)?void 0:this._injector.get(df),A=w.create(Wh.NULL,[],d||w.selector,C),M=A.location.nativeElement,V=A.injector.get(cR,null);return V?.registerApplication(M),A.onDestroy(()=>{this.detachView(A.hostView),yf(this.components,A),V?.unregisterApplication(M)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;yf(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const d=this._injector.get(pR,[]);d.push(...this._bootstrapListeners),d.forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>yf(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new _e(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(c){return new(c||o)($(Jr),$(dd),$(Up))},o.\u0275prov=Ye({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function yf(o,l){const c=o.indexOf(l);c>-1&&o.splice(c,1)}function IR(){return!1}let SR=(()=>{class o{}return o.__NG_ELEMENT_ID__=DR,o})();function DR(o){return function AR(o,l,c){if(Wi(o)&&!c){const d=or(o.index,l);return new Xh(d,d)}return 47&o.type?new Xh(l[Zr],l):null}(Pr(),ve(),16==(16&o))}class kR{constructor(){}supports(l){return md(l)}create(l){return new RR(l)}}const Md=(o,l)=>l;class RR{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||Md}forEachItem(l){let c;for(c=this._itHead;null!==c;c=c._next)l(c)}forEachOperation(l){let c=this._itHead,d=this._removalsHead,f=0,m=null;for(;c||d;){const w=!d||c&&c.currentIndex<RI(d,f,m)?c:d,C=RI(w,f,m),T=w.currentIndex;if(w===d)f--,d=d._nextRemoved;else if(c=c._next,null==w.previousIndex)f++;else{m||(m=[]);const A=C-f,M=T-f;if(A!=M){for(let Y=0;Y<A;Y++){const ne=Y<m.length?m[Y]:m[Y]=0,Ee=ne+Y;M<=Ee&&Ee<A&&(m[Y]=ne+1)}m[w.previousIndex]=M-A}}C!==T&&l(w,C,T)}}forEachPreviousItem(l){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)l(c)}forEachAddedItem(l){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)l(c)}forEachMovedItem(l){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)l(c)}forEachRemovedItem(l){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)l(c)}forEachIdentityChange(l){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)l(c)}diff(l){if(null==l&&(l=[]),!md(l))throw new _e(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let f,m,w,c=this._itHead,d=!1;if(Array.isArray(l)){this.length=l.length;for(let C=0;C<this.length;C++)m=l[C],w=this._trackByFn(C,m),null!==c&&Object.is(c.trackById,w)?(d&&(c=this._verifyReinsertion(c,m,w,C)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,w,C),d=!0),c=c._next}else f=0,function Kp(o,l){if(Array.isArray(o))for(let c=0;c<o.length;c++)l(o[c]);else{const c=o[Symbol.iterator]();let d;for(;!(d=c.next()).done;)l(d.value)}}(l,C=>{w=this._trackByFn(f,C),null!==c&&Object.is(c.trackById,w)?(d&&(c=this._verifyReinsertion(c,C,w,f)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,w,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,c,d,f){let m;return null===l?m=this._itTail:(m=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(l.item,c)||this._addIdentityChange(l,c),this._reinsertAfter(l,m,f)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(l.item,c)||this._addIdentityChange(l,c),this._moveAfter(l,m,f)):l=this._addAfter(new NR(c,d),m,f),l}_verifyReinsertion(l,c,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?l=this._reinsertAfter(m,l._prev,f):l.currentIndex!=f&&(l.currentIndex=f,this._addToMoves(l,f)),l}_truncate(l){for(;null!==l;){const c=l._next;this._addToRemovals(this._unlink(l)),l=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const f=l._prevRemoved,m=l._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(l,c,d),this._addToMoves(l,d),l}_moveAfter(l,c,d){return this._unlink(l),this._insertAfter(l,c,d),this._addToMoves(l,d),l}_addAfter(l,c,d){return this._insertAfter(l,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,c,d){const f=null===c?this._itHead:c._next;return l._next=f,l._prev=c,null===f?this._itTail=l:f._prev=l,null===c?this._itHead=l:c._next=l,null===this._linkedRecords&&(this._linkedRecords=new kI),this._linkedRecords.put(l),l.currentIndex=d,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const c=l._prev,d=l._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,l}_addToMoves(l,c){return l.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kI),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,c){return l.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class NR{constructor(l,c){this.item=l,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class MR{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,l))return d;return null}remove(l){const c=l._prevDup,d=l._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class kI{constructor(){this.map=new Map}put(l){const c=l.trackById;let d=this.map.get(c);d||(d=new MR,this.map.set(c,d)),d.add(l)}get(l,c){const f=this.map.get(l);return f?f.get(l,c):null}remove(l){const c=l.trackById;return this.map.get(c).remove(l)&&this.map.delete(c),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function RI(o,l,c){const d=o.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+l+f}class NI{constructor(){}supports(l){return l instanceof Map||a_(l)}create(){return new YF}}class YF{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let c;for(c=this._mapHead;null!==c;c=c._next)l(c)}forEachPreviousItem(l){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)l(c)}forEachChangedItem(l){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)l(c)}forEachAddedItem(l){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)l(c)}forEachRemovedItem(l){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)l(c)}diff(l){if(l){if(!(l instanceof Map||a_(l)))throw new _e(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(l,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,c){if(l){const d=l._prev;return c._next=l,c._prev=d,l._prev=c,d&&(d._next=c),l===this._mapHead&&(this._mapHead=c),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(l,c){if(this._records.has(l)){const f=this._records.get(l);this._maybeAddToChanges(f,c);const m=f._prev,w=f._next;return m&&(m._next=w),w&&(w._prev=m),f._next=null,f._prev=null,f}const d=new MI(l);return this._records.set(l,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,c){Object.is(c,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=c,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,c){l instanceof Map?l.forEach(c):Object.keys(l).forEach(d=>c(l[d],d))}}class MI{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bg(){return new I0([new kR])}let I0=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||bg()),deps:[[o,new D,new Fu]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new _e(901,!1)}}return o.\u0275prov=Ye({token:o,providedIn:"root",factory:bg}),o})();function ai(){return new iy([new NI])}let iy=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||ai()),deps:[[o,new D,new Fu]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new _e(901,!1)}}return o.\u0275prov=Ye({token:o,providedIn:"root",factory:ai}),o})();const PI=bI(null,"core",[]);let vf=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)($(Ya))},o.\u0275mod=ga({type:o}),o.\u0275inj=Ct({}),o})();function wf(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(ft,Ie,U)=>{U.d(Ie,{Z:()=>Ke});var a=U(2090),te=U(4859),L=U(9681),ae=U(1877);class se{constructor(_e,ke){this._delegate=_e,this.firebase=ke,(0,L._addComponent)(_e,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(_e,ke=L._DEFAULT_ENTRY_NAME){var xe;this._delegate.checkDestroyed();const Be=this._delegate.container.getProvider(_e);return!Be.isInitialized()&&"EXPLICIT"===(null===(xe=Be.getComponent())||void 0===xe?void 0:xe.instantiationMode)&&Be.initialize(),Be.getImmediate({identifier:ke})}_removeServiceInstance(_e,ke=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(ke)}_addComponent(_e){(0,L._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,L._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function pe(){const at=function ge(at){const _e={},ke={__esModule:!0,initializeApp:function De(Ue,H={}){const Ce=L.initializeApp(Ue,H);if((0,a.r3)(_e,Ce.name))return _e[Ce.name];const Ze=new at(Ce,ke);return _e[Ce.name]=Ze,Ze},app:Be,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Re(Ue){const H=Ue.name,Ce=H.replace("-compat","");if(L._registerComponent(Ue)&&"PUBLIC"===Ue.type){const Ze=(Je=Be())=>{if("function"!=typeof Je[Ce])throw we.create("invalid-app-argument",{appName:H});return Je[Ce]()};void 0!==Ue.serviceProps&&(0,a.ZB)(Ze,Ue.serviceProps),ke[Ce]=Ze,at.prototype[Ce]=function(...Je){return this._getService.bind(this,H).apply(this,Ue.multipleInstances?Je:[])}}return"PUBLIC"===Ue.type?ke[Ce]:null},removeApp:function xe(Ue){delete _e[Ue]},useAsService:function qe(Ue,H){return"serverAuth"===H?null:H},modularAPIs:L}};function Be(Ue){if(!(0,a.r3)(_e,Ue=Ue||L._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:Ue});return _e[Ue]}return ke.default=ke,Object.defineProperty(ke,"apps",{get:function Te(){return Object.keys(_e).map(Ue=>_e[Ue])}}),Be.App=at,ke}(se);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function _e(ke){(0,a.ZB)(at,ke)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),at}(),q=new ae.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=G;!function Ae(at){(0,L.registerVersion)("@firebase/app-compat","0.1.32",at)}()},9681:(ft,Ie,U)=>{U.r(Ie),U.d(Ie,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>sr,_DEFAULT_ENTRY_NAME:()=>oe,_addComponent:()=>je,_addOrOverwriteComponent:()=>Ve,_apps:()=>de,_clearComponents:()=>Ct,_components:()=>re,_getProvider:()=>Ye,_registerComponent:()=>vt,_removeServiceInstance:()=>Wt,deleteApp:()=>di,getApp:()=>An,getApps:()=>On,initializeApp:()=>vr,onLog:()=>qi,registerVersion:()=>gt,setLogLevel:()=>Cs});var a=U(5861),te=U(4859),L=U(1877),ae=U(2090),se=U(8766);class ie{constructor(Z){this.container=Z}getPlatformInfoString(){return this.container.getProviders().map(z=>{if(function we(j){return"VERSION"===j.getComponent()?.type}(z)){const Se=z.getImmediate();return`${Se.library}/${Se.version}`}return null}).filter(z=>z).join(" ")}}const ge="@firebase/app",G=new L.Yd("@firebase/app"),oe="[DEFAULT]",he={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},de=new Map,re=new Map;function je(j,Z){try{j.container.addComponent(Z)}catch(z){G.debug(`Component ${Z.name} failed to register with FirebaseApp ${j.name}`,z)}}function Ve(j,Z){j.container.addOrOverwriteComponent(Z)}function vt(j){const Z=j.name;if(re.has(Z))return G.debug(`There were multiple attempts to register component ${Z}.`),!1;re.set(Z,j);for(const z of de.values())je(z,j);return!0}function Ye(j,Z){const z=j.container.getProvider("heartbeat").getImmediate({optional:!0});return z&&z.triggerHeartbeat(),j.container.getProvider(Z)}function Wt(j,Z,z=oe){Ye(j,Z).clearInstance(z)}function Ct(){re.clear()}const on=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class en{constructor(Z,z,Se){this._isDeleted=!1,this._options=Object.assign({},Z),this._config=Object.assign({},z),this._name=z.name,this._automaticDataCollectionEnabled=z.automaticDataCollectionEnabled,this._container=Se,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this.checkDestroyed(),this._automaticDataCollectionEnabled=Z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Z){this._isDeleted=Z}checkDestroyed(){if(this.isDeleted)throw on.create("app-deleted",{appName:this._name})}}const sr="9.9.3";function vr(j,Z={}){"object"!=typeof Z&&(Z={name:Z});const z=Object.assign({name:oe,automaticDataCollectionEnabled:!1},Z),Se=z.name;if("string"!=typeof Se||!Se)throw on.create("bad-app-name",{appName:String(Se)});const We=de.get(Se);if(We){if((0,ae.vZ)(j,We.options)&&(0,ae.vZ)(z,We.config))return We;throw on.create("duplicate-app",{appName:Se})}const mt=new te.H0(Se);for(const cn of re.values())mt.addComponent(cn);const vn=new en(j,z,mt);return de.set(Se,vn),vn}function An(j=oe){const Z=de.get(j);if(!Z)throw on.create("no-app",{appName:j});return Z}function On(){return Array.from(de.values())}function di(j){return xn.apply(this,arguments)}function xn(){return(xn=(0,a.Z)(function*(j){const Z=j.name;de.has(Z)&&(de.delete(Z),yield Promise.all(j.container.getProviders().map(z=>z.delete())),j.isDeleted=!0)})).apply(this,arguments)}function gt(j,Z,z){var Se;let We=null!==(Se=he[j])&&void 0!==Se?Se:j;z&&(We+=`-${z}`);const mt=We.match(/\s|\//),vn=Z.match(/\s|\//);if(mt||vn){const cn=[`Unable to register library "${We}" with version "${Z}":`];return mt&&cn.push(`library name "${We}" contains illegal characters (whitespace or "/")`),mt&&vn&&cn.push("and"),vn&&cn.push(`version name "${Z}" contains illegal characters (whitespace or "/")`),void G.warn(cn.join(" "))}vt(new te.wA(`${We}-version`,()=>({library:We,version:Z}),"VERSION"))}function qi(j,Z){if(null!==j&&"function"!=typeof j)throw on.create("invalid-log-argument");(0,L.Am)(j,Z)}function Cs(j){(0,L.Ub)(j)}const kn="firebase-heartbeat-database",$r=1,Si="firebase-heartbeat-store";let pn=null;function yn(){return pn||(pn=(0,se.X3)(kn,$r,{upgrade:(j,Z)=>{0===Z&&j.createObjectStore(Si)}}).catch(j=>{throw on.create("idb-open",{originalErrorMessage:j.message})})),pn}function At(){return(At=(0,a.Z)(function*(j){var Z;try{return(yield yn()).transaction(Si).objectStore(Si).get(Fn(j))}catch(z){if(z instanceof ae.ZR)G.warn(z.message);else{const Se=on.create("idb-get",{originalErrorMessage:null===(Z=z)||void 0===Z?void 0:Z.message});G.warn(Se.message)}}})).apply(this,arguments)}function Gi(j,Z){return $n.apply(this,arguments)}function $n(){return($n=(0,a.Z)(function*(j,Z){var z;try{const We=(yield yn()).transaction(Si,"readwrite");return yield We.objectStore(Si).put(Z,Fn(j)),We.done}catch(Se){if(Se instanceof ae.ZR)G.warn(Se.message);else{const We=on.create("idb-set",{originalErrorMessage:null===(z=Se)||void 0===z?void 0:z.message});G.warn(We.message)}}})).apply(this,arguments)}function Fn(j){return`${j.name}!${j.options.appId}`}class ha{constructor(Z){this.container=Z,this._heartbeatsCache=null;const z=this.container.getProvider("app").getImmediate();this._storage=new Jt(z),this._heartbeatsCachePromise=this._storage.read().then(Se=>(this._heartbeatsCache=Se,Se))}triggerHeartbeat(){var Z=this;return(0,a.Z)(function*(){const Se=Z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),We=un();if(null===Z._heartbeatsCache&&(Z._heartbeatsCache=yield Z._heartbeatsCachePromise),Z._heartbeatsCache.lastSentHeartbeatDate!==We&&!Z._heartbeatsCache.heartbeats.some(mt=>mt.date===We))return Z._heartbeatsCache.heartbeats.push({date:We,agent:Se}),Z._heartbeatsCache.heartbeats=Z._heartbeatsCache.heartbeats.filter(mt=>{const vn=new Date(mt.date).valueOf();return Date.now()-vn<=2592e6}),Z._storage.overwrite(Z._heartbeatsCache)})()}getHeartbeatsHeader(){var Z=this;return(0,a.Z)(function*(){if(null===Z._heartbeatsCache&&(yield Z._heartbeatsCachePromise),null===Z._heartbeatsCache||0===Z._heartbeatsCache.heartbeats.length)return"";const z=un(),{heartbeatsToSend:Se,unsentEntries:We}=function hi(j,Z=1024){const z=[];let Se=j.slice();for(const We of j){const mt=z.find(vn=>vn.agent===We.agent);if(mt){if(mt.dates.push(We.date),Q(z)>Z){mt.dates.pop();break}}else if(z.push({agent:We.agent,dates:[We.date]}),Q(z)>Z){z.pop();break}Se=Se.slice(1)}return{heartbeatsToSend:z,unsentEntries:Se}}(Z._heartbeatsCache.heartbeats),mt=(0,ae.L)(JSON.stringify({version:2,heartbeats:Se}));return Z._heartbeatsCache.lastSentHeartbeatDate=z,We.length>0?(Z._heartbeatsCache.heartbeats=We,yield Z._storage.overwrite(Z._heartbeatsCache)):(Z._heartbeatsCache.heartbeats=[],Z._storage.overwrite(Z._heartbeatsCache)),mt})()}}function un(){return(new Date).toISOString().substring(0,10)}class Jt{constructor(Z){this.app=Z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Z=this;return(0,a.Z)(function*(){return(yield Z._canUseIndexedDBPromise)&&(yield function wt(j){return At.apply(this,arguments)}(Z.app))||{heartbeats:[]}})()}overwrite(Z){var z=this;return(0,a.Z)(function*(){var Se;if(yield z._canUseIndexedDBPromise){const mt=yield z.read();return Gi(z.app,{lastSentHeartbeatDate:null!==(Se=Z.lastSentHeartbeatDate)&&void 0!==Se?Se:mt.lastSentHeartbeatDate,heartbeats:Z.heartbeats})}})()}add(Z){var z=this;return(0,a.Z)(function*(){var Se;if(yield z._canUseIndexedDBPromise){const mt=yield z.read();return Gi(z.app,{lastSentHeartbeatDate:null!==(Se=Z.lastSentHeartbeatDate)&&void 0!==Se?Se:mt.lastSentHeartbeatDate,heartbeats:[...mt.heartbeats,...Z.heartbeats]})}})()}}function Q(j){return(0,ae.L)(JSON.stringify({version:2,heartbeats:j})).length}!function $(j){vt(new te.wA("platform-logger",Z=>new ie(Z),"PRIVATE")),vt(new te.wA("heartbeat",Z=>new ha(Z),"PRIVATE")),gt(ge,"0.7.31",j),gt(ge,"0.7.31","esm2017"),gt("fire-js","")}("")},4859:(ft,Ie,U)=>{U.d(Ie,{H0:()=>ge,wA:()=>L,zt:()=>se});var a=U(5861),te=U(2090);class L{constructor(G,q,X){this.name=G,this.instanceFactory=q,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ae="[DEFAULT]";class se{constructor(G,q){this.name=G,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const q=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(q)){const X=new te.BH;if(this.instancesDeferred.set(q,X),this.isInitialized(q)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:q});ze&&X.resolve(ze)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(G){var q;const X=this.normalizeInstanceIdentifier(G?.identifier),ze=null!==(q=G?.optional)&&void 0!==q&&q;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Ae){if(ze)return null;throw Ae}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function we(pe){return"EAGER"===pe.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[q,X]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(q);try{const Ae=this.getOrInitializeService({instanceIdentifier:ze});X.resolve(Ae)}catch{}}}}clearInstance(G=ae){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,a.Z)(function*(){const q=Array.from(G.instances.values());yield Promise.all([...q.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...q.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ae){return this.instances.has(G)}getOptions(G=ae){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:q={}}=G,X=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:X,options:q});for(const[Ae,Ke]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Ae)&&Ke.resolve(ze);return ze}onInit(G,q){var X;const ze=this.normalizeInstanceIdentifier(q),Ae=null!==(X=this.onInitCallbacks.get(ze))&&void 0!==X?X:new Set;Ae.add(G),this.onInitCallbacks.set(ze,Ae);const Ke=this.instances.get(ze);return Ke&&G(Ke,ze),()=>{Ae.delete(G)}}invokeOnInitCallbacks(G,q){const X=this.onInitCallbacks.get(q);if(X)for(const ze of X)try{ze(G,q)}catch{}}getOrInitializeService({instanceIdentifier:G,options:q={}}){let X=this.instances.get(G);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=G,pe===ae?void 0:pe),options:q}),this.instances.set(G,X),this.instancesOptions.set(G,q),this.invokeOnInitCallbacks(X,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,X)}catch{}var pe;return X||null}normalizeInstanceIdentifier(G=ae){return this.component?this.component.multipleInstances?G:ae:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const q=this.getProvider(G.name);if(q.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);q.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const q=new se(G,this);return this.providers.set(G,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(ft,Ie,U)=>{U.d(Ie,{Am:()=>pe,Ub:()=>ge,Yd:()=>we,in:()=>te});const a=[];var te=(()=>{return(G=te||(te={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",te;var G})();const L={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},ae=te.INFO,se={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},ie=(G,q,...X)=>{if(q<G.logLevel)return;const ze=(new Date).toISOString(),Ae=se[q];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Ae](`[${ze}]  ${G.name}:`,...X)};class we{constructor(q){this.name=q,this._logLevel=ae,this._logHandler=ie,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in te))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?L[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...q),this._logHandler(this,te.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...q),this._logHandler(this,te.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,te.INFO,...q),this._logHandler(this,te.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,te.WARN,...q),this._logHandler(this,te.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...q),this._logHandler(this,te.ERROR,...q)}}function ge(G){a.forEach(q=>{q.setLogLevel(G)})}function pe(G,q){for(const X of a){let ze=null;q&&q.level&&(ze=L[q.level]),X.userLogHandler=null===G?null:(Ae,Ke,...at)=>{const _e=at.map(ke=>{if(null==ke)return null;if("string"==typeof ke)return ke;if("number"==typeof ke||"boolean"==typeof ke)return ke.toString();if(ke instanceof Error)return ke.message;try{return JSON.stringify(ke)}catch{return null}}).filter(ke=>ke).join(" ");Ke>=(ze??Ae.logLevel)&&G({level:te[Ke].toLowerCase(),message:_e,args:at,type:Ae.name})}}}},8766:(ft,Ie,U)=>{U.d(Ie,{Lj:()=>De,X3:()=>Be});var a=U(5861);const te=(H,Ce)=>Ce.some(Ze=>H instanceof Ze);let L,ae;const we=new WeakMap,ge=new WeakMap,pe=new WeakMap,G=new WeakMap,q=new WeakMap;let Ae={get(H,Ce,Ze){if(H instanceof IDBTransaction){if("done"===Ce)return ge.get(H);if("objectStoreNames"===Ce)return H.objectStoreNames||pe.get(H);if("store"===Ce)return Ze.objectStoreNames[1]?void 0:Ze.objectStore(Ze.objectStoreNames[0])}return ke(H[Ce])},set:(H,Ce,Ze)=>(H[Ce]=Ze,!0),has:(H,Ce)=>H instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in H};function _e(H){return"function"==typeof H?function at(H){return H!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(H)?function(...Ce){return H.apply(xe(this),Ce),ke(we.get(this))}:function(...Ce){return ke(H.apply(xe(this),Ce))}:function(Ce,...Ze){const Je=H.call(xe(this),Ce,...Ze);return pe.set(Je,Ce.sort?Ce.sort():[Ce]),ke(Je)}}(H):(H instanceof IDBTransaction&&function ze(H){if(ge.has(H))return;const Ce=new Promise((Ze,Je)=>{const pt=()=>{H.removeEventListener("complete",Xe),H.removeEventListener("error",Cn),H.removeEventListener("abort",Cn)},Xe=()=>{Ze(),pt()},Cn=()=>{Je(H.error||new DOMException("AbortError","AbortError")),pt()};H.addEventListener("complete",Xe),H.addEventListener("error",Cn),H.addEventListener("abort",Cn)});ge.set(H,Ce)}(H),te(H,function se(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(H,Ae):H)}function ke(H){if(H instanceof IDBRequest)return function X(H){const Ce=new Promise((Ze,Je)=>{const pt=()=>{H.removeEventListener("success",Xe),H.removeEventListener("error",Cn)},Xe=()=>{Ze(ke(H.result)),pt()},Cn=()=>{Je(H.error),pt()};H.addEventListener("success",Xe),H.addEventListener("error",Cn)});return Ce.then(Ze=>{Ze instanceof IDBCursor&&we.set(Ze,H)}).catch(()=>{}),q.set(Ce,H),Ce}(H);if(G.has(H))return G.get(H);const Ce=_e(H);return Ce!==H&&(G.set(H,Ce),q.set(Ce,H)),Ce}const xe=H=>q.get(H);function Be(H,Ce,{blocked:Ze,upgrade:Je,blocking:pt,terminated:Xe}={}){const Cn=indexedDB.open(H,Ce),yr=ke(Cn);return Je&&Cn.addEventListener("upgradeneeded",Yn=>{Je(ke(Cn.result),Yn.oldVersion,Yn.newVersion,ke(Cn.transaction))}),Ze&&Cn.addEventListener("blocked",()=>Ze()),yr.then(Yn=>{Xe&&Yn.addEventListener("close",()=>Xe()),pt&&Yn.addEventListener("versionchange",()=>pt())}).catch(()=>{}),yr}function De(H,{blocked:Ce}={}){const Ze=indexedDB.deleteDatabase(H);return Ce&&Ze.addEventListener("blocked",()=>Ce()),ke(Ze).then(()=>{})}const Te=["get","getKey","getAll","getAllKeys","count"],Re=["put","add","delete","clear"],qe=new Map;function Ue(H,Ce){if(!(H instanceof IDBDatabase)||Ce in H||"string"!=typeof Ce)return;if(qe.get(Ce))return qe.get(Ce);const Ze=Ce.replace(/FromIndex$/,""),Je=Ce!==Ze,pt=Re.includes(Ze);if(!(Ze in(Je?IDBIndex:IDBObjectStore).prototype)||!pt&&!Te.includes(Ze))return;const Xe=function(){var Cn=(0,a.Z)(function*(yr,...Yn){const Hi=this.transaction(yr,pt?"readwrite":"readonly");let oe=Hi.store;return Je&&(oe=oe.index(Yn.shift())),(yield Promise.all([oe[Ze](...Yn),pt&&Hi.done]))[0]});return function(Yn){return Cn.apply(this,arguments)}}();return qe.set(Ce,Xe),Xe}!function Ke(H){Ae=H(Ae)}(H=>({...H,get:(Ce,Ze,Je)=>Ue(Ce,Ze)||H.get(Ce,Ze,Je),has:(Ce,Ze)=>!!Ue(Ce,Ze)||H.has(Ce,Ze)}))},5861:(ft,Ie,U)=>{function a(L,ae,se,ie,we,ge,pe){try{var G=L[ge](pe),q=G.value}catch(X){return void se(X)}G.done?ae(q):Promise.resolve(q).then(ie,we)}function te(L){return function(){var ae=this,se=arguments;return new Promise(function(ie,we){var ge=L.apply(ae,se);function pe(q){a(ge,ie,we,pe,G,"next",q)}function G(q){a(ge,ie,we,pe,G,"throw",q)}pe(void 0)})}}U.d(Ie,{Z:()=>te})},7582:(ft,Ie,U)=>{function ae(oe,he){var de={};for(var re in oe)Object.prototype.hasOwnProperty.call(oe,re)&&he.indexOf(re)<0&&(de[re]=oe[re]);if(null!=oe&&"function"==typeof Object.getOwnPropertySymbols){var je=0;for(re=Object.getOwnPropertySymbols(oe);je<re.length;je++)he.indexOf(re[je])<0&&Object.prototype.propertyIsEnumerable.call(oe,re[je])&&(de[re[je]]=oe[re[je]])}return de}function X(oe,he,de,re){return new(de||(de=Promise))(function(Ve,vt){function Ye(Kt){try{Ct(re.next(Kt))}catch(on){vt(on)}}function Wt(Kt){try{Ct(re.throw(Kt))}catch(on){vt(on)}}function Ct(Kt){Kt.done?Ve(Kt.value):function je(Ve){return Ve instanceof de?Ve:new de(function(vt){vt(Ve)})}(Kt.value).then(Ye,Wt)}Ct((re=re.apply(oe,he||[])).next())})}function De(oe){return this instanceof De?(this.v=oe,this):new De(oe)}function Te(oe,he,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var je,re=de.apply(oe,he||[]),Ve=[];return je={},vt("next"),vt("throw"),vt("return"),je[Symbol.asyncIterator]=function(){return this},je;function vt(en){re[en]&&(je[en]=function(sr){return new Promise(function(vr,An){Ve.push([en,sr,vr,An])>1||Ye(en,sr)})})}function Ye(en,sr){try{!function Wt(en){en.value instanceof De?Promise.resolve(en.value.v).then(Ct,Kt):on(Ve[0][2],en)}(re[en](sr))}catch(vr){on(Ve[0][3],vr)}}function Ct(en){Ye("next",en)}function Kt(en){Ye("throw",en)}function on(en,sr){en(sr),Ve.shift(),Ve.length&&Ye(Ve[0][0],Ve[0][1])}}function qe(oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,he=oe[Symbol.asyncIterator];return he?he.call(oe):(oe=function at(oe){var he="function"==typeof Symbol&&Symbol.iterator,de=he&&oe[he],re=0;if(de)return de.call(oe);if(oe&&"number"==typeof oe.length)return{next:function(){return oe&&re>=oe.length&&(oe=void 0),{value:oe&&oe[re++],done:!oe}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}(oe),de={},re("next"),re("throw"),re("return"),de[Symbol.asyncIterator]=function(){return this},de);function re(Ve){de[Ve]=oe[Ve]&&function(vt){return new Promise(function(Ye,Wt){!function je(Ve,vt,Ye,Wt){Promise.resolve(Wt).then(function(Ct){Ve({value:Ct,done:Ye})},vt)}(Ye,Wt,(vt=oe[Ve](vt)).done,vt.value)})}}}U.d(Ie,{FC:()=>Te,KL:()=>qe,_T:()=>ae,mG:()=>X,qq:()=>De}),"function"==typeof SuppressedError&&SuppressedError}},ft=>{ft(ft.s=3067)}]);